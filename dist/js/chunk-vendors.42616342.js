(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"00ee":function(t,e,n){var r=n("b622"),i=r("toStringTag"),o={};o[i]="z",t.exports="[object z]"===String(o)},"0366":function(t,e,n){var r=n("1c0b");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},"0393":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n("dd76");const i={STARTS_WITH:"startsWith",CONTAINS:"contains",NOT_CONTAINS:"notContains",ENDS_WITH:"endsWith",EQUALS:"equals",NOT_EQUALS:"notEquals",IN:"in",LESS_THAN:"lt",LESS_THAN_OR_EQUAL_TO:"lte",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL_TO:"gte",BETWEEN:"between",DATE_IS:"dateIs",DATE_IS_NOT:"dateIsNot",DATE_BEFORE:"dateBefore",DATE_AFTER:"dateAfter"},o={filter(t,e,n,i,o){let s=[];if(t)for(let a of t)for(let t of e){let e=r["d"].resolveFieldData(a,t);if(this.filters[i](e,n,o)){s.push(a);break}}return s},filters:{startsWith(t,e,n){if(void 0===e||null===e||""===e.trim())return!0;if(void 0===t||null===t)return!1;let i=r["d"].removeAccents(e.toString()).toLocaleLowerCase(n),o=r["d"].removeAccents(t.toString()).toLocaleLowerCase(n);return o.slice(0,i.length)===i},contains(t,e,n){if(void 0===e||null===e||"string"===typeof e&&""===e.trim())return!0;if(void 0===t||null===t)return!1;let i=r["d"].removeAccents(e.toString()).toLocaleLowerCase(n),o=r["d"].removeAccents(t.toString()).toLocaleLowerCase(n);return-1!==o.indexOf(i)},notContains(t,e,n){if(void 0===e||null===e||"string"===typeof e&&""===e.trim())return!0;if(void 0===t||null===t)return!1;let i=r["d"].removeAccents(e.toString()).toLocaleLowerCase(n),o=r["d"].removeAccents(t.toString()).toLocaleLowerCase(n);return-1===o.indexOf(i)},endsWith(t,e,n){if(void 0===e||null===e||""===e.trim())return!0;if(void 0===t||null===t)return!1;let i=r["d"].removeAccents(e.toString()).toLocaleLowerCase(n),o=r["d"].removeAccents(t.toString()).toLocaleLowerCase(n);return-1!==o.indexOf(i,o.length-i.length)},equals(t,e,n){return void 0===e||null===e||"string"===typeof e&&""===e.trim()||void 0!==t&&null!==t&&(t.getTime&&e.getTime?t.getTime()===e.getTime():r["d"].removeAccents(t.toString()).toLocaleLowerCase(n)==r["d"].removeAccents(e.toString()).toLocaleLowerCase(n))},notEquals(t,e,n){return void 0!==e&&null!==e&&("string"!==typeof e||""!==e.trim())&&(void 0===t||null===t||(t.getTime&&e.getTime?t.getTime()!==e.getTime():r["d"].removeAccents(t.toString()).toLocaleLowerCase(n)!=r["d"].removeAccents(e.toString()).toLocaleLowerCase(n)))},in(t,e){if(void 0===e||null===e||0===e.length)return!0;for(let n=0;n<e.length;n++)if(r["d"].equals(t,e[n]))return!0;return!1},between(t,e){return null==e||null==e[0]||null==e[1]||void 0!==t&&null!==t&&(t.getTime?e[0].getTime()<=t.getTime()&&t.getTime()<=e[1].getTime():e[0]<=t&&t<=e[1])},lt(t,e){return void 0===e||null===e||void 0!==t&&null!==t&&(t.getTime&&e.getTime?t.getTime()<e.getTime():t<e)},lte(t,e){return void 0===e||null===e||void 0!==t&&null!==t&&(t.getTime&&e.getTime?t.getTime()<=e.getTime():t<=e)},gt(t,e){return void 0===e||null===e||void 0!==t&&null!==t&&(t.getTime&&e.getTime?t.getTime()>e.getTime():t>e)},gte(t,e){return void 0===e||null===e||void 0!==t&&null!==t&&(t.getTime&&e.getTime?t.getTime()>=e.getTime():t>=e)},dateIs(t,e){return void 0===e||null===e||void 0!==t&&null!==t&&t.toDateString()===e.toDateString()},dateIsNot(t,e){return void 0===e||null===e||void 0!==t&&null!==t&&t.toDateString()!==e.toDateString()},dateBefore(t,e){return void 0===e||null===e||void 0!==t&&null!==t&&t.getTime()<e.getTime()},dateAfter(t,e){return void 0===e||null===e||void 0!==t&&null!==t&&t.getTime()>e.getTime()}},register(t,e){this.filters[t]=e}}},"057f":function(t,e,n){var r=n("fc6a"),i=n("241c").f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return i(t)}catch(e){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?a(t):i(r(t))}},"06c5":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("a630"),n("fb6a"),n("b0c0"),n("d3b7"),n("25f0"),n("3ca3");var r=n("6b75");function i(t,e){if(t){if("string"===typeof t)return Object(r["a"])(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r["a"])(t,e):void 0}}},"06cf":function(t,e,n){var r=n("83ab"),i=n("d1e7"),o=n("5c6c"),s=n("fc6a"),a=n("c04e"),u=n("5135"),c=n("0cfb"),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=s(t),e=a(e,!0),c)try{return l(t,e)}catch(n){}if(u(t,e))return o(!i.f.call(t,e),t[e])}},"07ac":function(t,e,n){var r=n("23e7"),i=n("6f53").values;r({target:"Object",stat:!0},{values:function(t){return i(t)}})},"098b":function(t,e,n){},"0a06":function(t,e,n){"use strict";var r=n("c532"),i=n("30b5"),o=n("f6b4"),s=n("5270"),a=n("4a7b");function u(t){this.defaults=t,this.interceptors={request:new o,response:new o}}u.prototype.request=function(t){"string"===typeof t?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=a(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[s,void 0],n=Promise.resolve(t);this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));while(e.length)n=n.then(e.shift(),e.shift());return n},u.prototype.getUri=function(t){return t=a(this.defaults,t),i(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(t){u.prototype[t]=function(e,n){return this.request(a(n||{},{method:t,url:e,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(t){u.prototype[t]=function(e,n,r){return this.request(a(r||{},{method:t,url:e,data:n}))}})),t.exports=u},"0cfb":function(t,e,n){var r=n("83ab"),i=n("d039"),o=n("cc12");t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},"0df6":function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},1276:function(t,e,n){"use strict";var r=n("d784"),i=n("44e7"),o=n("825a"),s=n("1d80"),a=n("4840"),u=n("8aa5"),c=n("50c4"),l=n("14c3"),h=n("9263"),f=n("d039"),p=[].push,d=Math.min,g=4294967295,v=!f((function(){return!RegExp(g,"y")}));r("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(s(this)),o=void 0===n?g:n>>>0;if(0===o)return[];if(void 0===t)return[r];if(!i(t))return e.call(r,t,o);var a,u,c,l=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,v=new RegExp(t.source,f+"g");while(a=h.call(v,r)){if(u=v.lastIndex,u>d&&(l.push(r.slice(d,a.index)),a.length>1&&a.index<r.length&&p.apply(l,a.slice(1)),c=a[0].length,d=u,l.length>=o))break;v.lastIndex===a.index&&v.lastIndex++}return d===r.length?!c&&v.test("")||l.push(""):l.push(r.slice(d)),l.length>o?l.slice(0,o):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=s(this),o=void 0==e?void 0:e[t];return void 0!==o?o.call(e,i,n):r.call(String(i),e,n)},function(t,i){var s=n(r,t,this,i,r!==e);if(s.done)return s.value;var h=o(t),f=String(this),p=a(h,RegExp),y=h.unicode,m=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(v?"y":"g"),_=new p(v?h:"^(?:"+h.source+")",m),b=void 0===i?g:i>>>0;if(0===b)return[];if(0===f.length)return null===l(_,f)?[f]:[];var w=0,E=0,x=[];while(E<f.length){_.lastIndex=v?E:0;var I,O=l(_,v?f:f.slice(E));if(null===O||(I=d(c(_.lastIndex+(v?0:E)),f.length))===w)E=u(f,E,y);else{if(x.push(f.slice(w,E)),x.length===b)return x;for(var S=1;S<=O.length-1;S++)if(x.push(O[S]),x.length===b)return x;E=w=I}}return x.push(f.slice(w)),x}]}),!v)},"13d5":function(t,e,n){"use strict";var r=n("23e7"),i=n("d58f").left,o=n("a640"),s=n("ae40"),a=n("2d00"),u=n("605d"),c=o("reduce"),l=s("reduce",{1:0}),h=!u&&a>79&&a<83;r({target:"Array",proto:!0,forced:!c||!l||h},{reduce:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(t,e,n){var r=n("c6b6"),i=n("9263");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var o=n.call(t,e);if("object"!==typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},"159b":function(t,e,n){var r=n("da84"),i=n("fdbc"),o=n("17c2"),s=n("9112");for(var a in i){var u=r[a],c=u&&u.prototype;if(c&&c.forEach!==o)try{s(c,"forEach",o)}catch(l){c.forEach=o}}},"17c2":function(t,e,n){"use strict";var r=n("b727").forEach,i=n("a640"),o=n("ae40"),s=i("forEach"),a=o("forEach");t.exports=s&&a?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"19aa":function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},"1be4":function(t,e,n){var r=n("d066");t.exports=r("document","documentElement")},"1c0b":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},"1c7e":function(t,e,n){var r=n("b622"),i=r("iterator"),o=!1;try{var s=0,a={next:function(){return{done:!!s++}},return:function(){o=!0}};a[i]=function(){return this},Array.from(a,(function(){throw 2}))}catch(u){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var r={};r[i]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(u){}return n}},"1cdc":function(t,e,n){var r=n("342f");t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},"1d2b":function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},"1d80":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on "+t);return t}},"1da1":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("d3b7");function r(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var s=t.apply(e,n);function a(t){r(s,i,o,a,u,"next",t)}function u(t){r(s,i,o,a,u,"throw",t)}a(void 0)}))}}},"1dde":function(t,e,n){var r=n("d039"),i=n("b622"),o=n("2d00"),s=i("species");t.exports=function(t){return o>=51||!r((function(){var e=[],n=e.constructor={};return n[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"216d":function(t,e,n){"use strict";var r=n("dd76");function i(t){t.addEventListener("mousedown",u)}function o(t){t.removeEventListener("mousedown",u)}function s(t){let e=document.createElement("span");e.className="p-ink",t.appendChild(e),e.addEventListener("animationend",c)}function a(t){let e=l(t);e&&(o(t),e.removeEventListener("animationend",c),e.remove())}function u(t){let e=t.currentTarget,n=l(e);if(!n||"none"===getComputedStyle(n,null).display)return;if(r["b"].removeClass(n,"p-ink-active"),!r["b"].getHeight(n)&&!r["b"].getWidth(n)){let t=Math.max(r["b"].getOuterWidth(e),r["b"].getOuterHeight(e));n.style.height=t+"px",n.style.width=t+"px"}let i=r["b"].getOffset(e),o=t.pageX-i.left+document.body.scrollTop-r["b"].getWidth(n)/2,s=t.pageY-i.top+document.body.scrollLeft-r["b"].getHeight(n)/2;n.style.top=s+"px",n.style.left=o+"px",r["b"].addClass(n,"p-ink-active")}function c(t){r["b"].removeClass(t.currentTarget,"p-ink-active")}function l(t){for(let e=0;e<t.children.length;e++)if("string"===typeof t.children[e].className&&-1!==t.children[e].className.indexOf("p-ink"))return t.children[e];return null}const h={mounted(t,e){e.instance.$primevue&&e.instance.$primevue.config&&e.instance.$primevue.config.ripple&&(s(t),i(t))},unmounted(t){a(t)}};e["a"]=h},2266:function(t,e,n){var r=n("825a"),i=n("e95a"),o=n("50c4"),s=n("0366"),a=n("35a1"),u=n("2a62"),c=function(t,e){this.stopped=t,this.result=e};t.exports=function(t,e,n){var l,h,f,p,d,g,v,y=n&&n.that,m=!(!n||!n.AS_ENTRIES),_=!(!n||!n.IS_ITERATOR),b=!(!n||!n.INTERRUPTED),w=s(e,y,1+m+b),E=function(t){return l&&u(l),new c(!0,t)},x=function(t){return m?(r(t),b?w(t[0],t[1],E):w(t[0],t[1])):b?w(t,E):w(t)};if(_)l=t;else{if(h=a(t),"function"!=typeof h)throw TypeError("Target is not iterable");if(i(h)){for(f=0,p=o(t.length);p>f;f++)if(d=x(t[f]),d&&d instanceof c)return d;return new c(!1)}l=h.call(t)}g=l.next;while(!(v=g.call(l)).done){try{d=x(v.value)}catch(I){throw u(l),I}if("object"==typeof d&&d&&d instanceof c)return d}return new c(!1)}},"23cb":function(t,e,n){var r=n("a691"),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},"23e7":function(t,e,n){var r=n("da84"),i=n("06cf").f,o=n("9112"),s=n("6eeb"),a=n("ce4e"),u=n("e893"),c=n("94ca");t.exports=function(t,e){var n,l,h,f,p,d,g=t.target,v=t.global,y=t.stat;if(l=v?r:y?r[g]||a(g,{}):(r[g]||{}).prototype,l)for(h in e){if(p=e[h],t.noTargetGet?(d=i(l,h),f=d&&d.value):f=l[h],n=c(v?h:g+(y?".":"#")+h,t.forced),!n&&void 0!==f){if(typeof p===typeof f)continue;u(p,f)}(t.sham||f&&f.sham)&&o(p,"sham",!0),s(l,h,p,t)}}},"241c":function(t,e,n){var r=n("ca84"),i=n("7839"),o=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},2444:function(t,e,n){"use strict";(function(e){var r=n("c532"),i=n("c8af"),o={"Content-Type":"application/x-www-form-urlencoded"};function s(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function a(){var t;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof e&&"[object process]"===Object.prototype.toString.call(e))&&(t=n("b50d")),t}var u={adapter:a(),transformRequest:[function(t,e){return i(e,"Accept"),i(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(s(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(s(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"===typeof t)try{t=JSON.parse(t)}catch(e){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(t){u.headers[t]={}})),r.forEach(["post","put","patch"],(function(t){u.headers[t]=r.merge(o)})),t.exports=u}).call(this,n("4362"))},2532:function(t,e,n){"use strict";var r=n("23e7"),i=n("5a34"),o=n("1d80"),s=n("ab13");r({target:"String",proto:!0,forced:!s("includes")},{includes:function(t){return!!~String(o(this)).indexOf(i(t),arguments.length>1?arguments[1]:void 0)}})},2591:function(t,e,n){"use strict";n.d(e,"a",(function(){return r["default"]}));var r=n("cc84"),i=(n("b7aa"),n("e947"),n("e283")),o=n("ffa6"),s=n("a8e9"),a=n("abfd"),u=(n("c7b2"),{Firestore:i["s"],GeoPoint:i["b"],Timestamp:i["f"],Blob:i["k"],Transaction:i["g"],WriteBatch:i["o"],DocumentReference:i["d"],DocumentSnapshot:i["i"],Query:i["j"],QueryDocumentSnapshot:i["h"],QuerySnapshot:i["m"],CollectionReference:i["p"],FieldPath:i["n"],FieldValue:i["t"],setLogLevel:i["e"],CACHE_SIZE_UNLIMITED:i["r"]});
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function c(t){!function(t,e){t.INTERNAL.registerComponent(new o["Component"]("firestore",(function(t){var n=t.getProvider("app").getImmediate();return e(n,t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},u)))}(t,(function(t,e){return new i["s"](t,new i["c"](t,e),new i["a"])})),t.registerVersion("@firebase/firestore","2.3.8")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function l(t){t.prototype.loadBundle=i["q"],t.prototype.namedQuery=i["l"]}c(r["default"]),l(i["s"]);var h=n("9ab4"),f={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},p=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return Object(h["__extends"])(e,t),e}(Error);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function g(t,e,n){var r=d(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"===typeof a){if(!f[a])return new p("internal","internal");r=f[a],i=a}var u=s.message;"string"===typeof u&&(i=u),o=s.details,void 0!==o&&(o=n.decode(o))}}catch(c){}return"ok"===r?null:new p(r,i,o)}var v=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(h["__generator"])(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return t=e.sent(),t?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return Object(h["__awaiter"])(this,void 0,void 0,(function(){return Object(h["__generator"])(this,(function(t){switch(t.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getContext=function(){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var t,e;return Object(h["__generator"])(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}(),y="type.googleapis.com/google.protobuf.Int64Value",m="type.googleapis.com/google.protobuf.UInt64Value";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var b=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"===typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"===typeof t||"object"===typeof t)return _(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case y:case m:var n=Number(t["value"]);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"===typeof t||"object"===typeof t?_(t,(function(t){return e.decode(t)})):t},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new p("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}var E=function(){function t(t,e,n,r,i,o){var s=this;void 0===i&&(i="us-central1"),this.app_=t,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new b,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(s.deleteService())}},this.contextProvider=new v(e,n),this.cancelAllRequests=new Promise((function(t){s.deleteService=function(){return t()}}));try{var a=new URL(i);this.customDomain=a.origin,this.region="us-central1"}catch(u){this.customDomain=null,this.region=i}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;if(null!==this.emulatorOrigin){var n=this.emulatorOrigin;return n+"/"+e+"/"+this.region+"/"+t}return null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var r,i,o;return Object(h["__generator"])(this,(function(s){switch(s.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:r=s.sent(),null!==r&&(n["X-Firebase-AppCheck"]=r),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 3:return i=s.sent(),[3,5];case 4:return s.sent(),[2,{status:0,json:null}];case 5:o=null,s.label=6;case 6:return s.trys.push([6,8,,9]),[4,i.json()];case 7:return o=s.sent(),[3,9];case 8:return s.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}}))}))},t.prototype.getAppCheckToken=function(){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var t,e;return Object(h["__generator"])(this,(function(n){switch(n.label){case 0:return t=this.appCheckProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2];case 1:return e=n.sent(),[2,e.token];case 2:return[2,null]}}))}))},t.prototype.call=function(t,e,n){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,f,d,v,y;return Object(h["__generator"])(this,(function(h){switch(h.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return s=h.sent(),s.authToken&&(o["Authorization"]="Bearer "+s.authToken),s.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=s.instanceIdToken),a=n.timeout||7e4,u=w(a),c=u.timer,l=u.promise,[4,Promise.race([x(c,this.postJSON(r,i,o)),l,x(c,this.cancelAllRequests)])];case 2:if(f=h.sent(),!f)throw new p("cancelled","Firebase Functions instance was deleted.");if(d=g(f.status,f.json,this.serializer),d)throw d;if(!f.json)throw new p("internal","Response is not valid JSON object.");if(v=f.json.data,"undefined"===typeof v&&(v=f.json.result),"undefined"===typeof v)throw new p("internal","Response is missing data field.");return y=this.serializer.decode(v),[2,{data:y}]}}))}))},t}();function x(t,e){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var n;return Object(h["__generator"])(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var I="functions";function O(t,e){var n={Functions:E};function r(t,n){var r=n.instanceIdentifier,i=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal"),a=t.getProvider("messaging");return new E(i,o,a,s,r,e)}t.INTERNAL.registerComponent(new o["Component"](I,r,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}var S="@firebase/functions",C="0.6.13";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
O(r["default"],fetch.bind(self)),r["default"].registerVersion(S,C);var T,N=n("9dbb"),k="@firebase/installations",A="0.4.30",P=1e4,R="w:"+A,L="FIS_v2",j="https://firebaseinstallations.googleapis.com/v1",M=36e5,D="installations",F="Installations",q=(T={},T["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',T["not-registered"]="Firebase Installation is not registered.",T["installation-not-found"]="Firebase Installation not found.",T["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',T["app-offline"]="Could not process request. Application offline.",T["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",T),U=new s["ErrorFactory"](D,F,q);function B(t){return t instanceof s["FirebaseError"]&&t.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V(t){var e=t.projectId;return j+"/projects/"+e+"/installations"}function G(t){return{token:t.token,requestStatus:2,expiresIn:Y(t.expiresIn),creationTime:Date.now()}}function z(t,e){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(h["__generator"])(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,U.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function W(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function K(t,e){var n=e.refreshToken,r=W(t);return r.append("Authorization",X(n)),r}function H(t){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(h["__generator"])(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return e=n.sent(),e.status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function Y(t){return Number(t.replace("s","000"))}function X(t){return L+" "+t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $(t,e){var n=e.fid;return Object(h["__awaiter"])(this,void 0,void 0,(function(){var e,r,i,o,s,a,u;return Object(h["__generator"])(this,(function(c){switch(c.label){case 0:return e=V(t),r=W(t),i={fid:n,authVersion:L,appId:t.appId,sdkVersion:R},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,H((function(){return fetch(e,o)}))];case 1:return s=c.sent(),s.ok?[4,s.json()]:[3,3];case 2:return a=c.sent(),u={fid:a.fid||n,registrationStatus:2,refreshToken:a.refreshToken,authToken:G(a.authToken)},[2,u];case 3:return[4,z("Create Installation",s)];case 4:throw c.sent()}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t){var e=btoa(String.fromCharCode.apply(String,Object(h["__spreadArray"])([],Object(h["__read"])(t))));return e.replace(/\+/g,"-").replace(/\//g,"_")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z=/^[cdef][\w-]{21}$/,tt="";function et(){try{var t=new Uint8Array(17),e=self.crypto||self.msCrypto;e.getRandomValues(t),t[0]=112+t[0]%16;var n=nt(t);return Z.test(n)?n:tt}catch(r){return tt}}function nt(t){var e=J(t);return e.substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t){return t.appName+"!"+t.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it=new Map;function ot(t,e){var n=rt(t);ut(n,e),ct(n,e)}function st(t,e){ht();var n=rt(t),r=it.get(n);r||(r=new Set,it.set(n,r)),r.add(e)}function at(t,e){var n=rt(t),r=it.get(n);r&&(r.delete(e),0===r.size&&it.delete(n),ft())}function ut(t,e){var n,r,i=it.get(t);if(i)try{for(var o=Object(h["__values"])(i),s=o.next();!s.done;s=o.next()){var a=s.value;a(e)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function ct(t,e){var n=ht();n&&n.postMessage({key:t,fid:e}),ft()}var lt=null;function ht(){return!lt&&"BroadcastChannel"in self&&(lt=new BroadcastChannel("[Firebase] FID Change"),lt.onmessage=function(t){ut(t.data.key,t.data.fid)}),lt}function ft(){0===it.size&&lt&&(lt.close(),lt=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,dt="firebase-installations-database",gt=1,vt="firebase-installations-store",yt=null;function mt(){return yt||(yt=Object(N["openDb"])(dt,gt,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(vt)}}))),yt}function _t(t,e){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(h["__generator"])(this,(function(a){switch(a.label){case 0:return n=rt(t),[4,mt()];case 1:return r=a.sent(),i=r.transaction(vt,"readwrite"),o=i.objectStore(vt),[4,o.get(n)];case 2:return s=a.sent(),[4,o.put(e,n)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),s&&s.fid===e.fid||ot(t,e.fid),[2,e]}}))}))}function bt(t){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var e,n,r;return Object(h["__generator"])(this,(function(i){switch(i.label){case 0:return e=rt(t),[4,mt()];case 1:return n=i.sent(),r=n.transaction(vt,"readwrite"),[4,r.objectStore(vt).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function wt(t,e){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Object(h["__generator"])(this,(function(u){switch(u.label){case 0:return n=rt(t),[4,mt()];case 1:return r=u.sent(),i=r.transaction(vt,"readwrite"),o=i.objectStore(vt),[4,o.get(n)];case 2:return s=u.sent(),a=e(s),void 0!==a?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(a,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!a||s&&s.fid===a.fid||ot(t,a.fid),[2,a]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var e,n,r;return Object(h["__generator"])(this,(function(i){switch(i.label){case 0:return[4,wt(t,(function(n){var r=xt(n),i=It(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return n=i.sent(),n.fid!==tt?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function xt(t){var e=t||{fid:et(),registrationStatus:0};return Tt(e)}function It(t,e){if(0===e.registrationStatus){if(!navigator.onLine){var n=Promise.reject(U.create("app-offline"));return{installationEntry:e,registrationPromise:n}}var r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=Ot(t,r);return{installationEntry:r,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:St(t)}:{installationEntry:e}}function Ot(t,e){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(h["__generator"])(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,$(t,e)];case 1:return n=i.sent(),[2,_t(t,n)];case 2:return r=i.sent(),B(r)&&409===r.customData.serverCode?[4,bt(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,_t(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}function St(t){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var e,n,r,i;return Object(h["__generator"])(this,(function(o){switch(o.label){case 0:return[4,Ct(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,Q(100)];case 3:return o.sent(),[4,Ct(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,Et(t)];case 6:return n=o.sent(),r=n.installationEntry,i=n.registrationPromise,i?[2,i]:[2,r];case 7:return[2,e]}}))}))}function Ct(t){return wt(t,(function(t){if(!t)throw U.create("installation-not-found");return Tt(t)}))}function Tt(t){return Nt(t)?{fid:t.fid,registrationStatus:0}:t}function Nt(t){return 1===t.registrationStatus&&t.registrationTime+P<Date.now()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return Object(h["__awaiter"])(this,void 0,void 0,(function(){var t,i,o,s,a,u,c,l;return Object(h["__generator"])(this,(function(h){switch(h.label){case 0:return t=At(n,e),i=K(n,e),o=r.getImmediate({optional:!0}),o&&i.append("x-firebase-client",o.getPlatformInfoString()),s={installation:{sdkVersion:R}},a={method:"POST",headers:i,body:JSON.stringify(s)},[4,H((function(){return fetch(t,a)}))];case 1:return u=h.sent(),u.ok?[4,u.json()]:[3,3];case 2:return c=h.sent(),l=G(c),[2,l];case 3:return[4,z("Generate Auth Token",u)];case 4:throw h.sent()}}))}))}function At(t,e){var n=e.fid;return V(t)+"/"+n+"/authTokens:generate"}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t,e){return void 0===e&&(e=!1),Object(h["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o;return Object(h["__generator"])(this,(function(s){switch(s.label){case 0:return[4,wt(t.appConfig,(function(r){if(!Mt(r))throw U.create("not-registered");var i=r.authToken;if(!e&&Dt(i))return r;if(1===i.requestStatus)return n=Rt(t,e),r;if(!navigator.onLine)throw U.create("app-offline");var o=qt(r);return n=jt(t,o),o}))];case 1:return r=s.sent(),n?[4,n]:[3,3];case 2:return o=s.sent(),[3,4];case 3:o=r.authToken,s.label=4;case 4:return i=o,[2,i]}}))}))}function Rt(t,e){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(h["__generator"])(this,(function(i){switch(i.label){case 0:return[4,Lt(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,Q(100)];case 3:return i.sent(),[4,Lt(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return r=n.authToken,0===r.requestStatus?[2,Pt(t,e)]:[2,r]}}))}))}function Lt(t){return wt(t,(function(t){if(!Mt(t))throw U.create("not-registered");var e=t.authToken;return Ut(e)?Object(h["__assign"])(Object(h["__assign"])({},t),{authToken:{requestStatus:0}}):t}))}function jt(t,e){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var n,r,i;return Object(h["__generator"])(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,kt(t,e)];case 1:return n=o.sent(),i=Object(h["__assign"])(Object(h["__assign"])({},e),{authToken:n}),[4,_t(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return r=o.sent(),!B(r)||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,bt(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Object(h["__assign"])(Object(h["__assign"])({},e),{authToken:{requestStatus:0}}),[4,_t(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}function Mt(t){return void 0!==t&&2===t.registrationStatus}function Dt(t){return 2===t.requestStatus&&!Ft(t)}function Ft(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+M}function qt(t){var e={requestStatus:1,requestTime:Date.now()};return Object(h["__assign"])(Object(h["__assign"])({},t),{authToken:e})}function Ut(t){return 1===t.requestStatus&&t.requestTime+P<Date.now()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(t){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var e,n,r;return Object(h["__generator"])(this,(function(i){switch(i.label){case 0:return[4,Et(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,r=e.registrationPromise,r?r.catch(console.error):Pt(t).catch(console.error),[2,n.fid]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t,e){return void 0===e&&(e=!1),Object(h["__awaiter"])(this,void 0,void 0,(function(){var n;return Object(h["__generator"])(this,(function(r){switch(r.label){case 0:return[4,Gt(t.appConfig)];case 1:return r.sent(),[4,Pt(t,e)];case 2:return n=r.sent(),[2,n.token]}}))}))}function Gt(t){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(h["__generator"])(this,(function(n){switch(n.label){case 0:return[4,Et(t)];case 1:return e=n.sent().registrationPromise,e?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(t,e){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o;return Object(h["__generator"])(this,(function(s){switch(s.label){case 0:return n=Wt(t,e),r=K(t,e),i={method:"DELETE",headers:r},[4,H((function(){return fetch(n,i)}))];case 1:return o=s.sent(),o.ok?[3,3]:[4,z("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}}))}))}function Wt(t,e){var n=e.fid;return V(t)+"/"+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(t){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var e,n;return Object(h["__generator"])(this,(function(r){switch(r.label){case 0:return e=t.appConfig,[4,wt(e,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(n=r.sent(),!n)return[3,6];if(1!==n.registrationStatus)return[3,2];throw U.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw U.create("app-offline");case 3:return[4,zt(e,n)];case 4:return r.sent(),[4,bt(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(t,e){var n=t.appConfig;return st(n,e),function(){at(n,e)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(t){var e,n;if(!t||!t.options)throw Xt("App Configuration");if(!t.name)throw Xt("App Name");var r=["projectId","apiKey","appId"];try{for(var i=Object(h["__values"])(r),o=i.next();!o.done;o=i.next()){var s=o.value;if(!t.options[s])throw Xt(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Xt(t){return U.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(t){var e="installations";t.INTERNAL.registerComponent(new o["Component"](e,(function(t){var e=t.getProvider("app").getImmediate(),n=Yt(e),r=t.getProvider("platform-logger"),i={appConfig:n,platformLoggerProvider:r},o={app:e,getId:function(){return Bt(i)},getToken:function(t){return Vt(i,t)},delete:function(){return Kt(i)},onIdChange:function(t){return Ht(i,t)}};return o}),"PUBLIC")),t.registerVersion(k,A)}$t(r["default"]);var Qt,Jt=(pt={},pt["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',pt["only-available-in-window"]="This method is available in a Window context.",pt["only-available-in-sw"]="This method is available in a service worker context.",pt["permission-default"]="The notification permission was not granted and dismissed instead.",pt["permission-blocked"]="The notification permission was not granted and blocked instead.",pt["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",pt["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",pt["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",pt["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",pt["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",pt["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",pt["token-update-no-token"]="FCM returned no token when updating the user to push.",pt["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",pt["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",pt["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",pt["invalid-vapid-key"]="The public VAPID key must be a string.",pt["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",pt),Zt=new s["ErrorFactory"]("messaging","Messaging",Jt),te="/firebase-messaging-sw.js",ee="/firebase-cloud-messaging-push-scope",ne="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",re="https://fcmregistrations.googleapis.com/v1",ie="FCM_MSG",oe="FirebaseMessaging: ",se="google.c.a.e",ae="google.c.a.c_id",ue="google.c.a.ts",ce="google.c.a.c_l",le=1e3,he=3e3;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function fe(t){var e=new Uint8Array(t),n=btoa(String.fromCharCode.apply(String,Object(h["__spreadArray"])([],Object(h["__read"])(e))));return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function pe(t){for(var e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t["PUSH_RECEIVED"]="push-received",t["NOTIFICATION_CLICKED"]="notification-clicked"})(Qt||(Qt={}));var de="fcm_token_details_db",ge=5,ve="fcm_token_object_Store";function ye(t){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var e,n,r,i,o=this;return Object(h["__generator"])(this,(function(s){switch(s.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=s.sent(),n=e.map((function(t){return t.name})),!n.includes(de))return[2,null];s.label=2;case 2:return r=null,[4,Object(N["openDb"])(de,ge,(function(e){return Object(h["__awaiter"])(o,void 0,void 0,(function(){var n,i,o,s;return Object(h["__generator"])(this,(function(a){switch(a.label){case 0:return e.oldVersion<2?[2]:e.objectStoreNames.contains(ve)?(n=e.transaction.objectStore(ve),[4,n.index("fcmSenderId").get(t)]):[2];case 1:return i=a.sent(),[4,n.clear()];case 2:if(a.sent(),!i)return[2];if(2===e.oldVersion){if(o=i,!o.auth||!o.p256dh||!o.endpoint)return[2];r={token:o.fcmToken,createTime:null!==(s=o.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"===typeof o.vapidKey?o.vapidKey:fe(o.vapidKey)}}}else(3===e.oldVersion||4===e.oldVersion)&&(o=i,r={token:o.fcmToken,createTime:o.createTime,subscriptionOptions:{auth:fe(o.auth),p256dh:fe(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:fe(o.vapidKey)}});return[2]}}))}))}))];case 3:return i=s.sent(),i.close(),[4,Object(N["deleteDb"])(de)];case 4:return s.sent(),[4,Object(N["deleteDb"])("fcm_vapid_details_db")];case 5:return s.sent(),[4,Object(N["deleteDb"])("undefined")];case 6:return s.sent(),[2,me(r)?r:null]}}))}))}function me(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"===typeof t.createTime&&t.createTime>0&&"string"===typeof t.token&&t.token.length>0&&"string"===typeof e.auth&&e.auth.length>0&&"string"===typeof e.p256dh&&e.p256dh.length>0&&"string"===typeof e.endpoint&&e.endpoint.length>0&&"string"===typeof e.swScope&&e.swScope.length>0&&"string"===typeof e.vapidKey&&e.vapidKey.length>0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e="firebase-messaging-database",be=1,we="firebase-messaging-store",Ee=null;function xe(){return Ee||(Ee=Object(N["openDb"])(_e,be,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(we)}}))),Ee}function Ie(t){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var e,n,r,i;return Object(h["__generator"])(this,(function(o){switch(o.label){case 0:return e=Ce(t),[4,xe()];case 1:return n=o.sent(),[4,n.transaction(we).objectStore(we).get(e)];case 2:return r=o.sent(),r?[2,r]:[3,3];case 3:return[4,ye(t.appConfig.senderId)];case 4:return i=o.sent(),i?[4,Oe(t,i)]:[3,6];case 5:return o.sent(),[2,i];case 6:return[2]}}))}))}function Oe(t,e){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var n,r,i;return Object(h["__generator"])(this,(function(o){switch(o.label){case 0:return n=Ce(t),[4,xe()];case 1:return r=o.sent(),i=r.transaction(we,"readwrite"),[4,i.objectStore(we).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}}))}))}function Se(t){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var e,n,r;return Object(h["__generator"])(this,(function(i){switch(i.label){case 0:return e=Ce(t),[4,xe()];case 1:return n=i.sent(),r=n.transaction(we,"readwrite"),[4,r.objectStore(we).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function Ce(t){var e=t.appConfig;return e.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(t,e){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(h["__generator"])(this,(function(c){switch(c.label){case 0:return[4,Pe(t)];case 1:n=c.sent(),r=Re(e),i={method:"POST",headers:n,body:JSON.stringify(r)},c.label=2;case 2:return c.trys.push([2,5,,6]),[4,fetch(Ae(t.appConfig),i)];case 3:return s=c.sent(),[4,s.json()];case 4:return o=c.sent(),[3,6];case 5:throw a=c.sent(),Zt.create("token-subscribe-failed",{errorInfo:a});case 6:if(o.error)throw u=o.error.message,Zt.create("token-subscribe-failed",{errorInfo:u});if(!o.token)throw Zt.create("token-subscribe-no-token");return[2,o.token]}}))}))}function Ne(t,e){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(h["__generator"])(this,(function(c){switch(c.label){case 0:return[4,Pe(t)];case 1:n=c.sent(),r=Re(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},c.label=2;case 2:return c.trys.push([2,5,,6]),[4,fetch(Ae(t.appConfig)+"/"+e.token,i)];case 3:return s=c.sent(),[4,s.json()];case 4:return o=c.sent(),[3,6];case 5:throw a=c.sent(),Zt.create("token-update-failed",{errorInfo:a});case 6:if(o.error)throw u=o.error.message,Zt.create("token-update-failed",{errorInfo:u});if(!o.token)throw Zt.create("token-update-no-token");return[2,o.token]}}))}))}function ke(t,e){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Object(h["__generator"])(this,(function(u){switch(u.label){case 0:return[4,Pe(t)];case 1:n=u.sent(),r={method:"DELETE",headers:n},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(Ae(t.appConfig)+"/"+e,r)];case 3:return i=u.sent(),[4,i.json()];case 4:if(o=u.sent(),o.error)throw s=o.error.message,Zt.create("token-unsubscribe-failed",{errorInfo:s});return[3,6];case 5:throw a=u.sent(),Zt.create("token-unsubscribe-failed",{errorInfo:a});case 6:return[2]}}))}))}function Ae(t){var e=t.projectId;return re+"/projects/"+e+"/registrations"}function Pe(t){var e=t.appConfig,n=t.installations;return Object(h["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(h["__generator"])(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function Re(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==ne&&(o.web.applicationPubKey=i),o}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le=6048e5;function je(t,e,n){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var r,i,o,s;return Object(h["__generator"])(this,(function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw Zt.create("permission-blocked");return[4,qe(e,n)];case 1:return r=a.sent(),[4,Ie(t)];case 2:return i=a.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:fe(r.getKey("auth")),p256dh:fe(r.getKey("p256dh"))},i?[3,3]:[2,Fe(t,o)];case 3:if(Ue(i.subscriptionOptions,o))return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,ke(t,i.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,Fe(t,o)];case 8:return Date.now()>=i.createTime+Le?[2,De({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}}))}))}function Me(t,e){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(h["__generator"])(this,(function(i){switch(i.label){case 0:return[4,Ie(t)];case 1:return n=i.sent(),n?[4,ke(t,n.token)]:[3,4];case 2:return i.sent(),[4,Se(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return r=i.sent(),r?[2,r.unsubscribe()]:[2,!0]}}))}))}function De(t,e,n){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var r,i,o;return Object(h["__generator"])(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,Ne(e,t)];case 1:return r=s.sent(),i=Object(h["__assign"])(Object(h["__assign"])({},t),{token:r,createTime:Date.now()}),[4,Oe(e,i)];case 2:return s.sent(),[2,r];case 3:return o=s.sent(),[4,Me(e,n)];case 4:throw s.sent(),o;case 5:return[2]}}))}))}function Fe(t,e){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(h["__generator"])(this,(function(i){switch(i.label){case 0:return[4,Te(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,Oe(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function qe(t,e){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var n;return Object(h["__generator"])(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return n=r.sent(),n?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:pe(e)})]}}))}))}function Ue(t,e){var n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,o=e.p256dh===t.p256dh;return n&&r&&i&&o}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t){var e={from:t.from,collapseKey:t.collapse_key};return Ve(e,t),Ge(e,t),ze(e,t),e}function Ve(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}function Ge(t,e){e.data&&(t.data=e.data)}function ze(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(t){return"object"===typeof t&&!!t&&ae in t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!==typeof t)throw Zt.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return Object(h["__awaiter"])(this,void 0,void 0,(function(){var n;return Object(h["__generator"])(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,Ie(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null===n||void 0===n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:ne,r.label=2;case 2:return[2,je(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return Me(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw Zt.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Zt.create("use-vapid-key-after-get-token");if("string"!==typeof t||0===t.length)throw Zt.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw Zt.create("only-available-in-window")},t.prototype.onMessage=function(){throw Zt.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw Zt.create("only-available-in-window")},t.prototype.onPush=function(t){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var e,n,r,i;return Object(h["__generator"])(this,(function(o){switch(o.label){case 0:return e=Xe(t),e?[4,Ze()]:(console.debug(oe+"failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return n=o.sent(),Qe(n)?[2,Je(n,e)]:(r=!1,e.notification?[4,tn(Ye(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=Be(e),"function"===typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,Ke(le)]);case 4:return o.sent(),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return Object(h["__awaiter"])(this,void 0,void 0,(function(){var r,i;return Object(h["__generator"])(this,(function(o){switch(o.label){case 0:return r=t.newSubscription,r?[3,2]:[4,Me(this.firebaseDependencies,self.registration)];case 1:return o.sent(),[2];case 2:return[4,Ie(this.firebaseDependencies)];case 3:return i=o.sent(),[4,Me(this.firebaseDependencies,self.registration)];case 4:return o.sent(),[4,je(this.firebaseDependencies,self.registration,null!==(n=null===(e=null===i||void 0===i?void 0:i.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:ne)];case 5:return o.sent(),[2]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return Object(h["__awaiter"])(this,void 0,void 0,(function(){var r,i,o,s,a;return Object(h["__generator"])(this,(function(u){switch(u.label){case 0:return r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n[ie],r?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),i=en(r),i?(o=new URL(i,self.location.href),s=new URL(self.location.origin),o.host!==s.host?[2]:[4,$e(o)]):[2]):[2];case 1:return a=u.sent(),a?[3,4]:[4,self.clients.openWindow(i)];case 2:return a=u.sent(),[4,Ke(he)];case 3:return u.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=u.sent(),u.label=6;case 6:return a?(r.messageType=Qt.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,a.postMessage(r)]):[2]}}))}))},t}();function Ye(t){var e,n=Object(h["__assign"])({},t.notification);return n.data=(e={},e[ie]=t,e),n}function Xe(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}function $e(t){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var e,n,r,i,o,s,a;return Object(h["__generator"])(this,(function(u){switch(u.label){case 0:return[4,Ze()];case 1:e=u.sent();try{for(n=Object(h["__values"])(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(c){s={error:c}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}}))}))}function Qe(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}function Je(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=Qt.PUSH_RECEIVED;try{for(var i=Object(h["__values"])(t),o=i.next();!o.done;o=i.next()){var s=o.value;s.postMessage(e)}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function Ze(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function tn(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}function en(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;return i||(We(t.data)?self.location.origin:null)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nn=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var e,n;return Object(h["__generator"])(this,(function(r){switch(r.label){case 0:return e=t.data,e.isFirebaseMessaging?(this.onMessageCallback&&e.messageType===Qt.PUSH_RECEIVED&&("function"===typeof this.onMessageCallback?this.onMessageCallback(on(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),n=e.data,We(n)&&"1"===n[se]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return Object(h["__awaiter"])(this,void 0,void 0,(function(){return Object(h["__generator"])(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw Zt.create("permission-blocked");return[4,this.updateVapidKey(null===t||void 0===t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null===t||void 0===t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,je(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return Object(h["__awaiter"])(this,void 0,void 0,(function(){return Object(h["__generator"])(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=ne),[2]}))}))},t.prototype.updateSwReg=function(t){return Object(h["__awaiter"])(this,void 0,void 0,(function(){return Object(h["__generator"])(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw Zt.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var t,e;return Object(h["__generator"])(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register(te,{scope:ee})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),Zt.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return Object(h["__awaiter"])(this,void 0,void 0,(function(){return Object(h["__generator"])(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,Me(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(h["__generator"])(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if(t=e.sent(),"granted"===t)return[2];throw"denied"===t?Zt.create("permission-blocked"):Zt.create("permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Zt.create("use-vapid-key-after-get-token");if("string"!==typeof t||0===t.length)throw Zt.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw Zt.create("invalid-sw-registration");if(this.swRegistration)throw Zt.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw Zt.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw Zt.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(h["__generator"])(this,(function(i){switch(i.label){case 0:return n=rn(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r=i.sent(),r.logEvent(n,{message_id:e[ae],message_name:e[ce],message_time:e[ue],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function rn(t){switch(t){case Qt.NOTIFICATION_CLICKED:return"notification_open";case Qt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function on(t){return delete t.messageType,delete t.isFirebaseMessaging,t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t){var e,n;if(!t||!t.options)throw an("App Configuration Object");if(!t.name)throw an("App Name");var r=["projectId","apiKey","appId","messagingSenderId"],i=t.options;try{for(var o=Object(h["__values"])(r),s=o.next();!s.done;s=o.next()){var a=s.value;if(!i[a])throw an(a)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return{appName:t.name,projectId:i.projectId,apiKey:i.apiKey,appId:i.appId,senderId:i.messagingSenderId}}function an(t){return Zt.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var un="messaging";function cn(t){var e=t.getProvider("app").getImmediate(),n=sn(e),r=t.getProvider("installations").getImmediate(),i=t.getProvider("analytics-internal"),o={app:e,appConfig:n,installations:r,analyticsProvider:i};if(!hn())throw Zt.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new He(o):new nn(o)}var ln={isSupported:hn};function hn(){return self&&"ServiceWorkerGlobalScope"in self?pn():fn()}function fn(){return"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function pn(){return"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */r["default"].INTERNAL.registerComponent(new o["Component"](un,cn,"PUBLIC").setServiceProps(ln));var dn="firebasestorage.googleapis.com",gn="storageBucket",vn=12e4,yn=6e5,mn=function(t){function e(n,r){var i=t.call(this,_n(n),"Firebase Storage: "+r+" ("+_n(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return Object(h["__extends"])(e,t),e.prototype._codeEquals=function(t){return _n(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),e}(s["FirebaseError"]);function _n(t){return"storage/"+t}function bn(){var t="An unknown error occurred, please check the error payload for server response.";return new mn("unknown",t)}function wn(t){return new mn("object-not-found","Object '"+t+"' does not exist.")}function En(t){return new mn("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function xn(){var t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new mn("unauthenticated",t)}function In(){return new mn("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function On(t){return new mn("unauthorized","User does not have permission to access '"+t+"'.")}function Sn(){return new mn("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function Cn(){return new mn("canceled","User canceled the upload/download.")}function Tn(t){return new mn("invalid-url","Invalid URL '"+t+"'.")}function Nn(t){return new mn("invalid-default-bucket","Invalid default bucket '"+t+"'.")}function kn(){return new mn("no-default-bucket","No default bucket found. Did you set the '"+gn+"' property when initializing the app?")}function An(){return new mn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Pn(){return new mn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function Rn(){return new mn("no-download-url","The given file does not have any download URLs.")}function Ln(t){return new mn("invalid-argument",t)}function jn(){return new mn("app-deleted","The Firebase app was deleted.")}function Mn(t){return new mn("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Dn(t,e){return new mn("invalid-format","String does not match format '"+t+"': "+e)}function Fn(t){throw new mn("internal-error","Internal error: "+t)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(t){return atob(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Un={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Bn=function(){function t(t,e){this.data=t,this.contentType=e||null}return t}();function Vn(t,e){switch(t){case Un.RAW:return new Bn(Gn(e));case Un.BASE64:case Un.BASE64URL:return new Bn(Wn(t,e));case Un.DATA_URL:return new Bn(Hn(e),Yn(e))}throw bn()}function Gn(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296===(64512&r)){var i=n<t.length-1&&56320===(64512&t.charCodeAt(n+1));if(i){var o=r,s=t.charCodeAt(++n);r=65536|(1023&o)<<10|1023&s,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189)}else 56320===(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function zn(t){var e;try{e=decodeURIComponent(t)}catch(n){throw Dn(Un.DATA_URL,"Malformed data URL.")}return Gn(e)}function Wn(t,e){switch(t){case Un.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r){var i=n?"-":"_";throw Dn(t,"Invalid character '"+i+"' found: is it base64url encoded?")}break;case Un.BASE64URL:var o=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(o||s){i=o?"+":"/";throw Dn(t,"Invalid character '"+i+"' found: is it base64 encoded?")}e=e.replace(/-/g,"+").replace(/_/g,"/");break}var a;try{a=qn(e)}catch(l){throw Dn(t,"Invalid character found")}for(var u=new Uint8Array(a.length),c=0;c<a.length;c++)u[c]=a.charCodeAt(c);return u}var Kn=function(){function t(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Dn(Un.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=Xn(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1)}return t}();function Hn(t){var e=new Kn(t);return e.base64?Wn(Un.BASE64,e.rest):zn(e.rest)}function Yn(t){var e=new Kn(t);return e.contentType}function Xn(t,e){var n=t.length>=e.length;return!!n&&t.substring(t.length-e.length)===e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $n,Qn={STATE_CHANGED:"state_changed"},Jn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Zn(t){switch(t){case"running":case"pausing":case"canceling":return Jn.RUNNING;case"paused":return Jn.PAUSED;case"success":return Jn.SUCCESS;case"canceled":return Jn.CANCELED;case"error":return Jn.ERROR;default:return Jn.ERROR}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t[t["NO_ERROR"]=0]="NO_ERROR",t[t["NETWORK_ERROR"]=1]="NETWORK_ERROR",t[t["ABORT"]=2]="ABORT"})($n||($n={}));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var tr=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=$n.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=$n.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=$n.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Fn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Fn("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Fn("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Fn("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}();function er(){return new tr}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nr=function(){function t(){}return t.prototype.createConnection=function(){return er()},t}(),rr=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(i){return new t(e,"")}if(""===r.path)return r;throw Nn(e)},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)";function o(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}var s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),u={bucket:1,path:3};function c(t){t.path_=decodeURIComponent(t.path)}for(var l="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp("^https?://"+h+"/"+l+"/b/"+i+"/o"+f,"i"),d={bucket:1,path:3},g=n===dn?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",y=new RegExp("^https?://"+g+"/"+i+"/"+v,"i"),m={bucket:1,path:2},_=[{regex:a,indices:u,postModify:o},{regex:p,indices:d,postModify:c},{regex:y,indices:m,postModify:c}],b=0;b<_.length;b++){var w=_[b],E=w.regex.exec(e);if(E){var x=E[w.indices.bucket],I=E[w.indices.path];I||(I=""),r=new t(x,I),w.postModify(r);break}}if(null==r)throw Tn(e);return r},t}(),ir=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function or(t,e,n){var r=1,i=null,o=!1,s=0;function a(){return 2===s}var u=!1;function c(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u||(u=!0,e.apply(null,t))}function l(e){i=setTimeout((function(){i=null,t(f,a())}),e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)c.call.apply(c,Object(h["__spreadArray"])([null,t],e));else{var i,f=a()||o;if(f)c.call.apply(c,Object(h["__spreadArray"])([null,t],e));else r<64&&(r*=2),1===s?(s=2,i=0):i=1e3*(r+Math.random()),l(i)}}var p=!1;function d(t){p||(p=!0,u||(null!==i?(t||(s=2),clearTimeout(i),l(0)):t||(s=1)))}return l(0),setTimeout((function(){o=!0,d(!0)}),n),d}function sr(t){t(!1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(t){return void 0!==t}function ur(t){return"function"===typeof t}function cr(t){return"object"===typeof t&&!Array.isArray(t)}function lr(t){return"string"===typeof t||t instanceof String}function hr(t){return fr()&&t instanceof Blob}function fr(){return"undefined"!==typeof Blob}function pr(t,e,n,r){if(r<e)throw Ln("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw Ln("Invalid value for '"+t+"'. Expected "+n+" or less.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(t,e){var n=e.match(/^(\w+):\/\/.+/),r=null===n||void 0===n?void 0:n[1],i=e;return null==r&&(i="https://"+e),i+"/v0"+t}function gr(t){var e=encodeURIComponent,n="?";for(var r in t)if(t.hasOwnProperty(r)){var i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vr=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){if(n)e(!1,new yr(!1,null,!0));else{var r=t.pool_.createConnection();t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(){null!==t.progressCallback_&&r.removeUploadProgressListener(i),t.pendingConnection_=null;var n=r.getErrorCode()===$n.NO_ERROR,o=r.getStatus();if(n&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new yr(s,r))}else{var a=r.getErrorCode()===$n.ABORT;e(!1,new yr(!1,null,a))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}function n(e,n){var r=t.resolve_,i=t.reject_,o=n.connection;if(n.wasSuccessCode)try{var s=t.callback_(o,o.getResponseText());ar(s)?r(s):r()}catch(u){i(u)}else if(null!==o){var a=bn();a.serverResponse=o.getResponseText(),t.errorCallback_?i(t.errorCallback_(o,a)):i(a)}else if(n.canceled){a=t.appDelete_?jn():Cn();i(a)}else{a=Sn();i(a)}}this.canceled_?n(!1,new yr(!1,null,!0)):this.backoffId_=or(e,n,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&sr(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=[408,429],r=-1!==n.indexOf(t),i=-1!==this.additionalRetryCodes_.indexOf(t);return e||r||i},t}(),yr=function(){function t(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n}return t}();function mr(t,e){null!==e&&e.length>0&&(t["Authorization"]="Firebase "+e)}function _r(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!==e&&void 0!==e?e:"AppManager")}function br(t,e){e&&(t["X-Firebase-GMPID"]=e)}function wr(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}function Er(t,e,n,r,i,o){var s=gr(t.urlParams),a=t.url+s,u=Object.assign({},t.headers);return br(u,e),mr(u,n),_r(u,o),wr(u,r),new vr(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Ir(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=xr();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(fr())return new Blob(t);throw new mn("unsupported-environment","This browser doesn't seem to support creating Blobs")}function Or(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sr=function(){function t(t,e){var n=0,r="";hr(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(hr(this.data_)){var r=this.data_,i=Or(r,e,n);return null===i?null:new t(i)}var o=new Uint8Array(this.data_.buffer,e,n-e);return new t(o,!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(fr()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(Ir.apply(null,r))}var i=e.map((function(t){return lr(t)?Vn(Un.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(t){var e;try{e=JSON.parse(t)}catch(n){return null}return cr(e)?e:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(t){if(0===t.length)return null;var e=t.lastIndexOf("/");if(-1===e)return"";var n=t.slice(0,e);return n}function Nr(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}function kr(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t,e){return e}var Pr=function(){function t(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Ar}return t}(),Rr=null;function Lr(t){return!lr(t)||t.length<2?t:kr(t)}function jr(){if(Rr)return Rr;var t=[];function e(t,e){return Lr(e)}t.push(new Pr("bucket")),t.push(new Pr("generation")),t.push(new Pr("metageneration")),t.push(new Pr("name","fullPath",!0));var n=new Pr("name");function r(t,e){return void 0!==e?Number(e):e}n.xform=e,t.push(n);var i=new Pr("size");return i.xform=r,t.push(i),t.push(new Pr("timeCreated")),t.push(new Pr("updated")),t.push(new Pr("md5Hash",null,!0)),t.push(new Pr("cacheControl",null,!0)),t.push(new Pr("contentDisposition",null,!0)),t.push(new Pr("contentEncoding",null,!0)),t.push(new Pr("contentLanguage",null,!0)),t.push(new Pr("contentType",null,!0)),t.push(new Pr("metadata","customMetadata",!0)),Rr=t,Rr}function Mr(t,e){function n(){var n=t["bucket"],r=t["fullPath"],i=new rr(n,r);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function Dr(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return Mr(r,t),r}function Fr(t,e,n){var r=Cr(e);if(null===r)return null;var i=r;return Dr(t,i,n)}function qr(t,e,n){var r=Cr(e);if(null===r)return null;if(!lr(r["downloadTokens"]))return null;var i=r["downloadTokens"];if(0===i.length)return null;var o=encodeURIComponent,s=i.split(","),a=s.map((function(e){var r=t["bucket"],i=t["fullPath"],s="/b/"+o(r)+"/o/"+o(i),a=dr(s,n),u=gr({alt:"media",token:e});return a+u}));return a[0]}function Ur(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Br="prefixes",Vr="items";function Gr(t,e,n){var r={prefixes:[],items:[],nextPageToken:n["nextPageToken"]};if(n[Br])for(var i=0,o=n[Br];i<o.length;i++){var s=o[i],a=s.replace(/\/$/,""),u=t._makeStorageReference(new rr(e,a));r.prefixes.push(u)}if(n[Vr])for(var c=0,l=n[Vr];c<l.length;c++){var h=l[c];u=t._makeStorageReference(new rr(e,h["name"]));r.items.push(u)}return r}function zr(t,e,n){var r=Cr(n);if(null===r)return null;var i=r;return Gr(t,e,i)}var Wr=function(){function t(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(t){if(!t)throw bn()}function Hr(t,e){function n(n,r){var i=Fr(t,r,e);return Kr(null!==i),i}return n}function Yr(t,e){function n(n,r){var i=zr(t,e,r);return Kr(null!==i),i}return n}function Xr(t,e){function n(n,r){var i=Fr(t,r,e);return Kr(null!==i),qr(i,r,t.host)}return n}function $r(t){function e(e,n){var r;return r=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?In():xn():402===e.getStatus()?En(t.bucket):403===e.getStatus()?On(t.path):n,r.serverResponse=n.serverResponse,r}return e}function Qr(t){var e=$r(t);function n(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=wn(t.path)),i.serverResponse=r.serverResponse,i}return n}function Jr(t,e,n){var r=e.fullServerUrl(),i=dr(r,t.host),o="GET",s=t.maxOperationRetryTime,a=new Wr(i,o,Hr(t,n),s);return a.errorHandler=Qr(e),a}function Zr(t,e,n,r,i){var o={};e.isRoot?o["prefix"]="":o["prefix"]=e.path+"/",n&&n.length>0&&(o["delimiter"]=n),r&&(o["pageToken"]=r),i&&(o["maxResults"]=i);var s=e.bucketOnlyServerUrl(),a=dr(s,t.host),u="GET",c=t.maxOperationRetryTime,l=new Wr(a,u,Yr(t,e.bucket),c);return l.urlParams=o,l.errorHandler=$r(e),l}function ti(t,e,n){var r=e.fullServerUrl(),i=dr(r,t.host),o="GET",s=t.maxOperationRetryTime,a=new Wr(i,o,Xr(t,n),s);return a.errorHandler=Qr(e),a}function ei(t,e,n,r){var i=e.fullServerUrl(),o=dr(i,t.host),s="PATCH",a=Ur(n,r),u={"Content-Type":"application/json; charset=utf-8"},c=t.maxOperationRetryTime,l=new Wr(o,s,Hr(t,r),c);return l.headers=u,l.body=a,l.errorHandler=Qr(e),l}function ni(t,e){var n=e.fullServerUrl(),r=dr(n,t.host),i="DELETE",o=t.maxOperationRetryTime;function s(t,e){}var a=new Wr(r,i,s,o);return a.successCodes=[200,204],a.errorHandler=Qr(e),a}function ri(t,e){return t&&t["contentType"]||e&&e.type()||"application/octet-stream"}function ii(t,e,n){var r=Object.assign({},n);return r["fullPath"]=t.path,r["size"]=e.size(),r["contentType"]||(r["contentType"]=ri(null,e)),r}function oi(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}var u=a();s["Content-Type"]="multipart/related; boundary="+u;var c=ii(e,r,i),l=Ur(c,n),h="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+l+"\r\n--"+u+"\r\nContent-Type: "+c["contentType"]+"\r\n\r\n",f="\r\n--"+u+"--",p=Sr.getBlob(h,r,f);if(null===p)throw An();var d={name:c["fullPath"]},g=dr(o,t.host),v="POST",y=t.maxUploadRetryTime,m=new Wr(g,v,Hr(t,n),y);return m.urlParams=d,m.headers=s,m.body=p.uploadData(),m.errorHandler=$r(e),m}var si=function(){function t(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}return t}();function ai(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(i){Kr(!1)}var r=e||["active"];return Kr(!!n&&-1!==r.indexOf(n)),n}function ui(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=ii(e,r,i),a={name:s["fullPath"]},u=dr(o,t.host),c="POST",l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":s["contentType"],"Content-Type":"application/json; charset=utf-8"},h=Ur(s,n),f=t.maxUploadRetryTime;function p(t){var e;ai(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){Kr(!1)}return Kr(lr(e)),e}var d=new Wr(u,c,p,f);return d.urlParams=a,d.headers=l,d.body=h,d.errorHandler=$r(e),d}function ci(t,e,n,r){var i={"X-Goog-Upload-Command":"query"};function o(t){var e=ai(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){Kr(!1)}n||Kr(!1);var i=Number(n);return Kr(!isNaN(i)),new si(i,r.size(),"final"===e)}var s="POST",a=t.maxUploadRetryTime,u=new Wr(n,s,o,a);return u.headers=i,u.errorHandler=$r(e),u}var li=262144;function hi(t,e,n,r,i,o,s,a){var u=new si(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw Pn();var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,p=l===c?"upload, finalize":"upload",d={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":""+u.current},g=r.slice(h,f);if(null===g)throw An();function v(t,n){var i,s=ai(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?Hr(e,o)(t,n):null,new si(a,c,"final"===s,i)}var y="POST",m=e.maxUploadRetryTime,_=new Wr(n,y,v,m);return _.headers=d,_.body=g.uploadData(),_.progressCallback=a||null,_.errorHandler=$r(t),_}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fi=function(){function t(t,e,n){var r=ur(t)||null!=e||null!=n;if(r)this.next=t,this.error=e,this.complete=n;else{var i=t;this.next=i.next,this.error=i.error,this.complete=i.complete}}return t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var di=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=jr(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused");break}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=ui(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var i=ci(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=li*this._chunkMultiplier,n=new si(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var s;try{s=hi(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(u){return t._error=u,void t._transition("error")}var a=t._ref.storage._makeRequest(s,i,o);t._request=a,a.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){var t=li*this._chunkMultiplier;t<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=Jr(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=oi(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":this._state=t,void 0!==this._request&&this._request.cancel();break;case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Cn(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Zn(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new fi(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise();var e=this._observers.slice();e.forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Zn(this._state)){case Jn.SUCCESS:pi(this._resolve.bind(null,this.snapshot))();break;case Jn.CANCELED:case Jn.ERROR:var e=this._reject;pi(e.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){var e=Zn(this._state);switch(e){case Jn.RUNNING:case Jn.PAUSED:t.next&&pi(t.next.bind(t,this.snapshot))();break;case Jn.SUCCESS:t.complete&&pi(t.complete.bind(t))();break;case Jn.CANCELED:case Jn.ERROR:t.error&&pi(t.error.bind(t,this._error))();break;default:t.error&&pi(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),gi=function(){function t(t,e){this._service=t,this._location=e instanceof rr?e:rr.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new rr(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return kr(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=Tr(this._location.path);if(null===e)return null;var n=new rr(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Mn(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new di(t,new Sr(e),n)}function yi(t){var e={prefixes:[],items:[]};return mi(t,e).then((function(){return e}))}function mi(t,e,n){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var r,i,o,s;return Object(h["__generator"])(this,(function(a){switch(a.label){case 0:return r={pageToken:n},[4,_i(t,r)];case 1:return i=a.sent(),(o=e.prefixes).push.apply(o,i.prefixes),(s=e.items).push.apply(s,i.items),null==i.nextPageToken?[3,3]:[4,mi(t,e,i.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function _i(t,e){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(h["__generator"])(this,(function(i){switch(i.label){case 0:return null!=e&&"number"===typeof e.maxResults&&pr("options.maxResults",1,1e3,e.maxResults),n=e||{},r=Zr(t.storage,t._location,"/",n.pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function bi(t){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(h["__generator"])(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=Jr(t.storage,t._location,jr()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}function wi(t,e){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var n;return Object(h["__generator"])(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=ei(t.storage,t._location,e,jr()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function Ei(t){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(h["__generator"])(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=ti(t.storage,t._location,jr()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then((function(t){if(null===t)throw Rn();return t}))]}}))}))}function xi(t){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(h["__generator"])(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=ni(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}function Ii(t,e){var n=Nr(t._location.path,e),r=new rr(t._location.bucket,n);return new gi(t.storage,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(t){return/^[A-Za-z]+:\/\//.test(t)}function Si(t,e){return new gi(t,e)}function Ci(t,e){if(t instanceof Ai){var n=t;if(null==n._bucket)throw kn();var r=new gi(n,n._bucket);return null!=e?Ci(r,e):r}if(void 0!==e){if(e.includes(".."))throw Ln('`path` param cannot contain ".."');return Ii(t,e)}return t}function Ti(t,e){if(e&&Oi(e)){if(t instanceof Ai)return Si(t,e);throw Ln("To use ref(service, url), the first argument must be a Storage instance.")}return Ci(t,e)}function Ni(t,e){var n=null===e||void 0===e?void 0:e[gn];return null==n?null:rr.makeFromBucketSpec(n,t)}function ki(t,e,n){t.host="http://"+e+":"+n}var Ai=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=dn,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=vn,this._maxUploadRetryTime=yn,this._requests=new Set,this._bucket=null!=i?rr.makeFromBucketSpec(i,this._host):Ni(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=rr.makeFromBucketSpec(this._url,t):this._bucket=Ni(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){pr("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){pr("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var t,e;return Object(h["__generator"])(this,(function(n){switch(n.label){case 0:return t=this._authProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2];case 1:if(e=n.sent(),null!==e)return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._getAppCheckToken=function(){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var t,e;return Object(h["__generator"])(this,(function(n){switch(n.label){case 0:return t=this._appCheckProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2];case 1:return e=n.sent(),[2,e.token];case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new gi(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new ir(jn());var i=Er(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},t.prototype.makeRequestWithTokens=function(t){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var e,n,r;return Object(h["__generator"])(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=i.sent(),n=e[0],r=e[1],[2,this._makeRequest(t,n,r)]}}))}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(t,e,n){return t=Object(s["getModularInstance"])(t),vi(t,e,n)}function Ri(t){return t=Object(s["getModularInstance"])(t),bi(t)}function Li(t,e){return t=Object(s["getModularInstance"])(t),wi(t,e)}function ji(t,e){return t=Object(s["getModularInstance"])(t),_i(t,e)}function Mi(t){return t=Object(s["getModularInstance"])(t),yi(t)}function Di(t){return t=Object(s["getModularInstance"])(t),Ei(t)}function Fi(t){return t=Object(s["getModularInstance"])(t),xi(t)}function qi(t,e){return t=Object(s["getModularInstance"])(t),Ti(t,e)}function Ui(t,e){return Ii(t,e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bi=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),Vi=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new Bi(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new Bi(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"===typeof e?function(t){return e(new Bi(t,i,i._ref))}:{next:e.next?function(t){return e.next(new Bi(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),Gi=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new zi(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new zi(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),zi=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){var n=Ui(this._delegate,e);return new t(n,this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new Vi(Pi(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=Un.RAW),this._throwIfRoot("putString");var r=Vn(e,t),i=Object(h["__assign"])({},n);return null==i["contentType"]&&null!=r.contentType&&(i["contentType"]=r.contentType),new Vi(new di(this._delegate,new Sr(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return Mi(this._delegate).then((function(e){return new Gi(e,t.storage)}))},t.prototype.list=function(t){var e=this;return ji(this._delegate,t||void 0).then((function(t){return new Gi(t,e.storage)}))},t.prototype.getMetadata=function(){return Ri(this._delegate)},t.prototype.updateMetadata=function(t){return Li(this._delegate,t)},t.prototype.getDownloadURL=function(){return Di(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),Fi(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Mn(t)},t}(),Wi=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Oi(t))throw Ln("ref() expected a child path but got a URL, use refFromURL instead.");return new zi(qi(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Oi(t))throw Ln("refFromURL() expected a full URL but got a child path, use ref() instead.");try{rr.makeFromUrl(t,this._delegate.host)}catch(e){throw Ln("refFromUrl() expected a valid full URL but got an invalid one.")}return new zi(qi(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){ki(this._delegate,t,e)},t}(),Ki="@firebase/storage",Hi="0.5.6",Yi="storage";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(t,e){var n=e.instanceIdentifier,i=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal"),a=new Wi(i,new Ai(i,o,s,new nr,n,r["default"].SDK_VERSION));return a}function $i(t){var e={TaskState:Jn,TaskEvent:Qn,StringFormat:Un,Storage:Ai,Reference:zi};t.INTERNAL.registerComponent(new o["Component"](Yi,Xi,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(Ki,Hi)}$i(r["default"]);var Qi,Ji,Zi,to="@firebase/performance",eo="0.4.16",no=eo,ro="FB-PERF-TRACE-START",io="FB-PERF-TRACE-STOP",oo="FB-PERF-TRACE-MEASURE",so="_wt_",ao="_fp",uo="_fcp",co="_fid",lo="@firebase/performance/config",ho="@firebase/performance/configexpire",fo="performance",po="Performance",go=(Qi={},Qi["trace started"]="Trace {$traceName} was started before.",Qi["trace stopped"]="Trace {$traceName} is not running.",Qi["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",Qi["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",Qi["no window"]="Window is not available.",Qi["no app id"]="App id is not available.",Qi["no project id"]="Project id is not available.",Qi["no api key"]="Api key is not available.",Qi["invalid cc log"]="Attempted to queue invalid cc event",Qi["FB not default"]="Performance can only start when Firebase app instance is the default one.",Qi["RC response not ok"]="RC response is not ok",Qi["invalid attribute name"]="Attribute name {$attributeName} is invalid.",Qi["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",Qi["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",Qi["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",Qi),vo=new s["ErrorFactory"](fo,po,go),yo=new a["Logger"](po);yo.logLevel=a["LogLevel"].INFO;var mo,_o=function(){function t(t){if(this.window=t,!t)throw vo.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Object(s["isIndexedDBAvailable"])()||(yo.info("IndexedDB is not supported by current browswer"),!1):(yo.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){if(this.PerformanceObserver){var n=new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}}));n.observe({entryTypes:[t]})}},t.getInstance=function(){return void 0===Ji&&(Ji=new t(Zi)),Ji},t}();function bo(t){Zi=t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(t,e){var n=t.length-e.length;if(n<0||n>1)throw vo.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Eo,xo,Io=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=wo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=wo("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw vo.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw vo.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw vo.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===mo&&(mo=new t),mo},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(){var t=Io.getInstance().installationsService.getId();return t.then((function(t){Eo=t})),t}function So(){return Eo}function Co(){var t=Io.getInstance().installationsService.getToken();return t.then((function(t){})),t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t[t["UNKNOWN"]=0]="UNKNOWN",t[t["VISIBLE"]=1]="VISIBLE",t[t["HIDDEN"]=2]="HIDDEN"})(xo||(xo={}));var To=["firebase_","google_","ga_"],No=new RegExp("^[a-zA-Z]\\w*$"),ko=40,Ao=100;function Po(){var t=_o.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function Ro(){var t=_o.getInstance().document,e=t.visibilityState;switch(e){case"visible":return xo.VISIBLE;case"hidden":return xo.HIDDEN;default:return xo.UNKNOWN}}function Lo(){var t=_o.getInstance().navigator,e=t.connection,n=e&&e.effectiveType;switch(n){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function jo(t){if(0===t.length||t.length>ko)return!1;var e=To.some((function(e){return t.startsWith(e)}));return!e&&!!t.match(No)}function Mo(t){return 0!==t.length&&t.length<=Ao}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Do="0.0.1",Fo={loggingEnabled:!0},qo="FIREBASE_INSTALLATIONS_AUTH";function Uo(t){var e=Bo();return e?(Wo(e),Promise.resolve()):zo(t).then(Wo).then((function(t){return Vo(t)}),(function(){}))}function Bo(){var t=_o.getInstance().localStorage;if(t){var e=t.getItem(ho);if(e&&Ko(e)){var n=t.getItem(lo);if(n)try{var r=JSON.parse(n);return r}catch(i){return}}}}function Vo(t){var e=_o.getInstance().localStorage;t&&e&&(e.setItem(lo,JSON.stringify(t)),e.setItem(ho,String(Date.now()+60*Io.getInstance().configTimeToLive*60*1e3)))}var Go="Could not fetch config, will use default configs";function zo(t){return Co().then((function(e){var n=Io.getInstance().getProjectId(),r="https://firebaseremoteconfig.googleapis.com/v1/projects/"+n+"/namespaces/fireperf:fetch?key="+Io.getInstance().getApiKey(),i=new Request(r,{method:"POST",headers:{Authorization:qo+" "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:Io.getInstance().getAppId(),app_version:no,sdk_version:Do})});return fetch(i).then((function(t){if(t.ok)return t.json();throw vo.create("RC response not ok")}))})).catch((function(){yo.info(Go)}))}function Wo(t){if(!t)return t;var e=Io.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=Fo.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=Ho(e.tracesSamplingRate),e.logNetworkAfterSampling=Ho(e.networkRequestsSamplingRate),t}function Ko(t){return Number(t)>Date.now()}function Ho(t){return Math.random()<=t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yo,Xo=1;function $o(){return Xo=2,Yo=Yo||Jo(),Yo}function Qo(){return 3===Xo}function Jo(){return Zo().then((function(){return Oo()})).then((function(t){return Uo(t)})).then((function(){return ts()}),(function(){return ts()}))}function Zo(){var t=_o.getInstance().document;return new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))}function ts(){Xo=3}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var es,ns=1e4,rs=5500,is=3,os=1e3,ss=is,as=[],us=!1;function cs(){us||(ls(rs),us=!0)}function ls(t){setTimeout((function(){if(0!==ss)return as.length?void hs():ls(ns)}),t)}function hs(){var t=as.splice(0,os),e=t.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Io.getInstance().logSource,log_event:e};fs(n,t).catch((function(){as=Object(h["__spreadArray"])(Object(h["__spreadArray"])([],t),as),ss--,yo.info("Tries left: "+ss+"."),ls(ns)}))}function fs(t,e){return ps(t).then((function(t){return t.ok||yo.info("Call to Firebase backend failed."),t.json()})).then((function(t){var n=Number(t.nextRequestWaitMillis),r=ns;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(as=Object(h["__spreadArray"])(Object(h["__spreadArray"])([],e),as),yo.info("Retry transport request later.")),ss=is,ls(r)}))}function ps(t){var e=Io.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}function ds(t){if(!t.eventTime||!t.message)throw vo.create("invalid cc log");as=Object(h["__spreadArray"])(Object(h["__spreadArray"])([],as),[t])}function gs(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.apply(void 0,e);ds({message:r,eventTime:Date.now()})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(t,e){es||(es=gs(bs)),es(t,e)}function ys(t){var e=Io.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&_o.getInstance().requiredApisAvailable()&&(t.isAuto&&Ro()!==xo.VISIBLE||(Qo()?ms(t):$o().then((function(){return ms(t)}),(function(){return ms(t)}))))}function ms(t){if(So()){var e=Io.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return vs(t,1)}),0)}}function _s(t){var e=Io.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return vs(t,0)}),0)}}function bs(t,e){return 0===e?ws(t):Es(t)}function ws(t){var e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:xs(),network_request_metric:e};return JSON.stringify(n)}function Es(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:xs(),trace_metric:e};return JSON.stringify(r)}function xs(){return{google_app_id:Io.getInstance().getAppId(),app_instance_id:So(),web_app_info:{sdk_version:no,page_url:_o.getInstance().getUrl(),service_worker_status:Po(),visibility_state:Ro(),effective_connection_type:Lo()},application_process_state:0}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Is=100,Os="_",Ss=[ao,uo,co];function Cs(t,e){return!(0===t.length||t.length>Is)&&(e&&e.startsWith(so)&&Ss.indexOf(t)>-1||!t.startsWith(Os))}function Ts(t){var e=Math.floor(t);return e<t&&yo.info("Metric value should be an Integer, setting the value as : "+e+"."),e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ns=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=_o.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=ro+"-"+this.randomId+"-"+this.name,this.traceStopMark=io+"-"+this.randomId+"-"+this.name,this.traceMeasure=n||oo+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw vo.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw vo.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),ys(this)},t.prototype.record=function(t,e,n){if(t<=0)throw vo.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw vo.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Object(h["__assign"])({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}ys(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(!Cs(t,this.name))throw vo.create("invalid custom metric name",{customMetricName:t});this.counters[t]=Ts(e)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n=jo(t),r=Mo(e);if(n&&r)this.customAttributes[t]=e;else{if(!n)throw vo.create("invalid attribute name",{attributeName:t});if(!r)throw vo.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return Object(h["__assign"])({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=_o.getInstance().getUrl();if(i){var o=new t(so+i,!0),s=Math.floor(1e3*_o.getInstance().getTimeOrigin());o.setStartTime(s),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd)));var a="first-paint",u="first-contentful-paint";if(n){var c=n.find((function(t){return t.name===a}));c&&c.startTime&&o.putMetric(ao,Math.floor(1e3*c.startTime));var l=n.find((function(t){return t.name===u}));l&&l.startTime&&o.putMetric(uo,Math.floor(1e3*l.startTime)),r&&o.putMetric(co,Math.floor(1e3*r))}ys(o)}},t.createUserTimingTrace=function(e){var n=new t(e,!1,e);ys(n)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(t){var e=t;if(e&&void 0!==e.responseStart){var n=_o.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime)),s=e.name&&e.name.split("?")[0],a={url:s,responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o};_s(a)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var As=5e3;function Ps(){So()&&(setTimeout((function(){return Ls()}),0),setTimeout((function(){return Rs()}),0),setTimeout((function(){return js()}),0))}function Rs(){for(var t=_o.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){var i=r[n];ks(i)}t.setupObserver("resource",ks)}function Ls(){var t=_o.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){Ns.createOobTrace(e,n),r=void 0}),As);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),Ns.createOobTrace(e,n,t))}))}else Ns.createOobTrace(e,n)}function js(){for(var t=_o.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){var i=r[n];Ms(i)}t.setupObserver("measure",Ms)}function Ms(t){var e=t.name;e.substring(0,oo.length)!==oo&&Ns.createUserTimingTrace(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ds=function(){function t(t){this.app=t,_o.getInstance().requiredApisAvailable()&&Object(s["validateIndexedDBOpenable"])().then((function(t){t&&(cs(),$o().then(Ps,Ps))})).catch((function(t){yo.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new Ns(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return Io.getInstance().instrumentationEnabled},set:function(t){Io.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return Io.getInstance().dataCollectionEnabled},set:function(t){Io.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}(),Fs="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qs(t){var e=function(t,e){if(t.name!==Fs)throw vo.create("FB not default");if("undefined"===typeof window)throw vo.create("no window");return bo(window),Io.getInstance().firebaseAppInstance=t,Io.getInstance().installationsService=e,new Ds(t)};t.INTERNAL.registerComponent(new o["Component"]("performance",(function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();return e(n,r)}),"PUBLIC")),t.registerVersion(to,eo)}qs(r["default"]);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Us,Bs,Vs="firebase_id",Gs="origin",zs=6e4,Ws="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ks="https://www.googletagmanager.com/gtag/js";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Hs(t,e,n,r,i){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var o,s;return Object(h["__generator"])(this,(function(a){switch(a.label){case 0:return i&&i.global?(t(Us.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=a.sent(),s=Object(h["__assign"])(Object(h["__assign"])({},r),{send_to:o}),t(Us.EVENT,n,s),a.label=3;case 3:return[2]}}))}))}function Ys(t,e,n,r){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var i;return Object(h["__generator"])(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(Us.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(Us.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))}function Xs(t,e,n,r){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var i;return Object(h["__generator"])(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(Us.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(Us.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))}function $s(t,e,n,r){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var i,o,s,a,u;return Object(h["__generator"])(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,s=Object.keys(n);o<s.length;o++)a=s[o],i["user_properties."+a]=n[a];return t(Us.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(Us.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))}function Qs(t,e){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var n;return Object(h["__generator"])(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t["EVENT"]="event",t["SET"]="set",t["CONFIG"]="config"})(Us||(Us={})),function(t){t["ADD_SHIPPING_INFO"]="add_shipping_info",t["ADD_PAYMENT_INFO"]="add_payment_info",t["ADD_TO_CART"]="add_to_cart",t["ADD_TO_WISHLIST"]="add_to_wishlist",t["BEGIN_CHECKOUT"]="begin_checkout",t["CHECKOUT_PROGRESS"]="checkout_progress",t["EXCEPTION"]="exception",t["GENERATE_LEAD"]="generate_lead",t["LOGIN"]="login",t["PAGE_VIEW"]="page_view",t["PURCHASE"]="purchase",t["REFUND"]="refund",t["REMOVE_FROM_CART"]="remove_from_cart",t["SCREEN_VIEW"]="screen_view",t["SEARCH"]="search",t["SELECT_CONTENT"]="select_content",t["SELECT_ITEM"]="select_item",t["SELECT_PROMOTION"]="select_promotion",t["SET_CHECKOUT_OPTION"]="set_checkout_option",t["SHARE"]="share",t["SIGN_UP"]="sign_up",t["TIMING_COMPLETE"]="timing_complete",t["VIEW_CART"]="view_cart",t["VIEW_ITEM"]="view_item",t["VIEW_ITEM_LIST"]="view_item_list",t["VIEW_PROMOTION"]="view_promotion",t["VIEW_SEARCH_RESULTS"]="view_search_results"}(Bs||(Bs={}));var Js,Zs=new a["Logger"]("@firebase/analytics");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(t,e){var n=document.createElement("script");n.src=Ks+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}function ea(t){var e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function na(t,e,n,r,i,o){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var s,a,u,c;return Object(h["__generator"])(this,(function(l){switch(l.label){case 0:s=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return a=l.sent(),u=a.find((function(t){return t.measurementId===i})),u?[4,e[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),Zs.error(c),[3,8];case 8:return t(Us.CONFIG,i,o),[2]}}))}))}function ra(t,e,n,r,i){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var o,s,a,u,c,l,f,p,d;return Object(h["__generator"])(this,(function(h){switch(h.label){case 0:return h.trys.push([0,4,,5]),o=[],i&&i["send_to"]?(s=i["send_to"],Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(a=h.sent(),u=function(t){var n=a.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=s;c<l.length;c++)if(f=l[c],p=u(f),"break"===p)break;h.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return h.sent(),t(Us.EVENT,r,i||{}),[3,5];case 4:return d=h.sent(),Zs.error(d),[3,5];case 5:return[2]}}))}))}function ia(t,e,n,r){function i(i,o,s){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var a;return Object(h["__generator"])(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==Us.EVENT?[3,2]:[4,ra(t,e,n,o,s)];case 1:return u.sent(),[3,5];case 2:return i!==Us.CONFIG?[3,4]:[4,na(t,e,n,r,o,s)];case 3:return u.sent(),[3,5];case 4:t(Us.SET,o),u.label=5;case 5:return[3,7];case 6:return a=u.sent(),Zs.error(a),[3,7];case 7:return[2]}}))}))}return i}function oa(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(o=window[i]),window[i]=ia(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}function sa(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(Ks))return r}return null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aa=(Js={},Js["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",Js["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Js["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",Js["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Js["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Js["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",Js["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",Js["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',Js["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',Js),ua=new s["ErrorFactory"]("analytics","Analytics",aa),ca=30,la=1e3,ha=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=la),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}(),fa=new ha;function pa(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function da(t){var e;return Object(h["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(h["__generator"])(this,(function(c){switch(c.label){case 0:return n=t.appId,r=t.apiKey,i={method:"GET",headers:pa(r)},o=Ws.replace("{app-id}",n),[4,fetch(o,i)];case 1:if(s=c.sent(),200===s.status||304===s.status)return[3,6];a="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,s.json()];case 3:return u=c.sent(),(null===(e=u.error)||void 0===e?void 0:e.message)&&(a=u.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw ua.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a});case 6:return[2,s.json()]}}))}))}function ga(t,e,n){return void 0===e&&(e=fa),Object(h["__awaiter"])(this,void 0,void 0,(function(){var r,i,o,s,a,u,c=this;return Object(h["__generator"])(this,(function(l){if(r=t.options,i=r.appId,o=r.apiKey,s=r.measurementId,!i)throw ua.create("no-app-id");if(!o){if(s)return[2,{measurementId:s,appId:i}];throw ua.create("no-api-key")}return a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new _a,setTimeout((function(){return Object(h["__awaiter"])(c,void 0,void 0,(function(){return Object(h["__generator"])(this,(function(t){return u.abort(),[2]}))}))}),void 0!==n?n:zs),[2,va({appId:i,apiKey:o,measurementId:s},a,u,e)]}))}))}function va(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=fa),Object(h["__awaiter"])(this,void 0,void 0,(function(){var e,a,u,c,l,f,p;return Object(h["__generator"])(this,(function(h){switch(h.label){case 0:e=t.appId,a=t.measurementId,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,ya(n,i)];case 2:return h.sent(),[3,4];case 3:if(u=h.sent(),a)return Zs.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+u.message+"]"),[2,{appId:e,measurementId:a}];throw u;case 4:return h.trys.push([4,6,,7]),[4,da(t)];case 5:return c=h.sent(),r.deleteThrottleMetadata(e),[2,c];case 6:if(l=h.sent(),!ma(l)){if(r.deleteThrottleMetadata(e),a)return Zs.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+l.message+"]"),[2,{appId:e,measurementId:a}];throw l}return f=503===Number(l.customData.httpStatus)?Object(s["calculateBackoffMillis"])(o,r.intervalMillis,ca):Object(s["calculateBackoffMillis"])(o,r.intervalMillis),p={throttleEndTimeMillis:Date.now()+f,backoffCount:o+1},r.setThrottleMetadata(e,p),Zs.debug("Calling attemptFetch again in "+f+" millis"),[2,va(t,p,n,r)];case 7:return[2]}}))}))}function ya(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(ua.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}function ma(t){if(!(t instanceof s["FirebaseError"])||!t.customData)return!1;var e=Number(t.customData["httpStatus"]);return 429===e||500===e||503===e||504===e}var _a=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(h["__generator"])(this,(function(e){switch(e.label){case 0:return Object(s["isIndexedDBAvailable"])()?[3,1]:(Zs.warn(ua.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,Object(s["validateIndexedDBOpenable"])()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),Zs.warn(ua.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}function wa(t,e,n,r,i,o){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var s,a,u,c,l,f,p;return Object(h["__generator"])(this,(function(h){switch(h.label){case 0:return s=ga(t),s.then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Zs.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return Zs.error(t)})),e.push(s),a=ba().then((function(t){return t?r.getId():void 0})),[4,Promise.all([s,a])];case 1:return u=h.sent(),c=u[0],l=u[1],sa()||ta(o,c.measurementId),i("js",new Date),p={},p[Gs]="firebase",p.update=!0,f=p,null!=l&&(f[Vs]=l),i(Us.CONFIG,c.measurementId,f),[2,c.measurementId]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ea,xa,Ia={},Oa=[],Sa={},Ca="dataLayer",Ta="gtag",Na=!1;function ka(t){if(Na)throw ua.create("already-initialized");t.dataLayerName&&(Ca=t.dataLayerName),t.gtagName&&(Ta=t.gtagName)}function Aa(){var t=[];if(Object(s["isBrowserExtension"])()&&t.push("This is a browser extension environment."),Object(s["areCookiesEnabled"])()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=ua.create("invalid-analytics-context",{errorInfo:e});Zs.warn(n.message)}}function Pa(t,e){Aa();var n=t.options.appId;if(!n)throw ua.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw ua.create("no-api-key");Zs.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Ia[n])throw ua.create("already-exists",{id:n});if(!Na){ea(Ca);var r=oa(Ia,Oa,Sa,Ca,Ta),i=r.wrappedGtag,o=r.gtagCore;xa=i,Ea=o,Na=!0}Ia[n]=wa(t,Oa,Sa,e,Ea,Ca);var s={app:t,logEvent:function(t,e,r){Hs(xa,Ia[n],t,e,r).catch((function(t){return Zs.error(t)}))},setCurrentScreen:function(t,e){Ys(xa,Ia[n],t,e).catch((function(t){return Zs.error(t)}))},setUserId:function(t,e){Xs(xa,Ia[n],t,e).catch((function(t){return Zs.error(t)}))},setUserProperties:function(t,e){$s(xa,Ia[n],t,e).catch((function(t){return Zs.error(t)}))},setAnalyticsCollectionEnabled:function(t){Qs(Ia[n],t).catch((function(t){return Zs.error(t)}))},INTERNAL:{delete:function(){return delete Ia[n],Promise.resolve()}}};return s}var Ra="@firebase/analytics",La="0.6.14",ja="analytics";function Ma(t){function e(t){try{var e=t.getProvider(ja).getImmediate();return{logEvent:e.logEvent}}catch(n){throw ua.create("interop-component-reg-failed",{reason:n})}}t.INTERNAL.registerComponent(new o["Component"](ja,(function(t){var e=t.getProvider("app").getImmediate(),n=t.getProvider("installations").getImmediate();return Pa(e,n)}),"PUBLIC").setServiceProps({settings:ka,EventName:Bs,isSupported:Da})),t.INTERNAL.registerComponent(new o["Component"]("analytics-internal",e,"PRIVATE")),t.registerVersion(Ra,La)}function Da(){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(h["__generator"])(this,(function(e){switch(e.label){case 0:if(Object(s["isBrowserExtension"])())return[2,!1];if(!Object(s["areCookiesEnabled"])())return[2,!1];if(!Object(s["isIndexedDBAvailable"])())return[2,!1];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Object(s["validateIndexedDBOpenable"])()];case 2:return t=e.sent(),[2,t];case 3:return e.sent(),[2,!1];case 4:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ma(r["default"]);var Fa,qa=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var e,n,r,i,o;return Object(h["__generator"])(this,(function(s){switch(s.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=s.sent(),n=e[0],r=e[1],r&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=s.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return s.sent(),[2,i]}}))}))},t}(),Ua=(Fa={},Fa["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",Fa["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",Fa["registration-api-key"]="Undefined API key. Check Firebase app initialization.",Fa["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",Fa["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Fa["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Fa["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Fa["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",Fa["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Fa["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',Fa["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',Fa["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Fa["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Fa),Ba=new s["ErrorFactory"]("remoteconfig","Remote Config",Ua);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(t,e){return t instanceof s["FirebaseError"]&&-1!==t.code.indexOf(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(t){return void 0===t&&(t=navigator),t.languages&&t.languages[0]||t.language}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var za=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u,c,l,f,p,d,g,v,y,m,_,b;return Object(h["__generator"])(this,(function(h){switch(h.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=h.sent(),n=e[0],r=e[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:Ga()},u={method:"POST",headers:s,body:JSON.stringify(a)},c=fetch(o,u),l=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),h.label=2;case 2:return h.trys.push([2,5,,6]),[4,Promise.race([c,l])];case 3:return h.sent(),[4,c];case 4:return f=h.sent(),[3,6];case 5:throw p=h.sent(),d="fetch-client-network","AbortError"===p.name&&(d="fetch-timeout"),Ba.create(d,{originalErrorMessage:p.message});case 6:if(g=f.status,v=f.headers.get("ETag")||void 0,200!==f.status)return[3,11];_=void 0,h.label=7;case 7:return h.trys.push([7,9,,10]),[4,f.json()];case 8:return _=h.sent(),[3,10];case 9:throw b=h.sent(),Ba.create("fetch-client-parse",{originalErrorMessage:b.message});case 10:y=_["entries"],m=_["state"],h.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===m?g=500:"NO_CHANGE"===m?g=304:"NO_TEMPLATE"!==m&&"EMPTY_CONFIG"!==m||(y={}),304!==g&&200!==g)throw Ba.create("fetch-status",{httpStatus:g});return[2,{status:g,eTag:v,config:y}]}}))}))},t}(),Wa=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),Ka=!1,Ha="",Ya=0,Xa=["1","true","t","yes","y","on"],$a=function(){function t(t,e){void 0===e&&(e=Ha),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"===this._source?Ka:Xa.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return Ya;var t=Number(this._value);return isNaN(t)&&(t=Ya),t},t.prototype.getSource=function(){return this._source},t}(),Qa=6e4,Ja=432e5,Za=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:Qa,minimumFetchIntervalMillis:Ja},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=a["LogLevel"].DEBUG;break;case"silent":this._logger.logLevel=a["LogLevel"].SILENT;break;default:this._logger.logLevel=a["LogLevel"].ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var t,e,n;return Object(h["__generator"])(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),e=t[0],n=t[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var t,e,n,r=this;return Object(h["__generator"])(this,(function(i){switch(i.label){case 0:t=new Wa,setTimeout((function(){return Object(h["__awaiter"])(r,void 0,void 0,(function(){return Object(h["__generator"])(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=Va(e,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}}))}))},t.prototype.fetchAndActivate=function(){return Object(h["__awaiter"])(this,void 0,void 0,(function(){return Object(h["__generator"])(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t=this;return tu(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(e,n){return e[n]=t.getValue(n),e}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new $a("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new $a("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new $a("static"))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(Object(h["__assign"])(Object(h["__assign"])({},t),e))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(t,e){var n=t.target.error||void 0;return Ba.create(e,{originalErrorMessage:n&&n.message})}var nu="app_namespace_store",ru="firebase_remote_config",iu=1;function ou(){return new Promise((function(t,e){var n=indexedDB.open(ru,iu);n.onerror=function(t){e(eu(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(nu,{keyPath:"compositeKey"})}}}))}var su=function(){function t(t,e,n,r){void 0===r&&(r=ou()),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var e,n=this;return Object(h["__generator"])(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([nu],"readonly"),s=o.objectStore(nu),a=n.createCompositeKey(t);try{var u=s.get(a);u.onerror=function(t){i(eu(t,"storage-get"))},u.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(c){i(Ba.create("storage-get",{originalErrorMessage:c&&c.message}))}}))]}}))}))},t.prototype.set=function(t,e){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var n,r=this;return Object(h["__generator"])(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var s=n.transaction([nu],"readwrite"),a=s.objectStore(nu),u=r.createCompositeKey(t);try{var c=a.put({compositeKey:u,value:e});c.onerror=function(t){o(eu(t,"storage-set"))},c.onsuccess=function(){i()}}catch(l){o(Ba.create("storage-set",{originalErrorMessage:l&&l.message}))}}))]}}))}))},t.prototype.delete=function(t){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var e,n=this;return Object(h["__generator"])(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([nu],"readwrite"),s=o.objectStore(nu),a=n.createCompositeKey(t);try{var u=s.delete(a);u.onerror=function(t){i(eu(t,"storage-delete"))},u.onsuccess=function(){r()}}catch(c){i(Ba.create("storage-delete",{originalErrorMessage:c&&c.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),au=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var t,e,n,r,i,o;return Object(h["__generator"])(this,(function(s){switch(s.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return r=s.sent(),r&&(this.lastFetchStatus=r),[4,e];case 2:return i=s.sent(),i&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return o=s.sent(),o&&(this.activeConfig=o),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function uu(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(Ba.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}function cu(t){if(!(t instanceof s["FirebaseError"])||!t.customData)return!1;var e=Number(t.customData["httpStatus"]);return 429===e||500===e||503===e||504===e}var lu=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return Object(h["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(h["__generator"])(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return Object(h["__awaiter"])(this,void 0,void 0,(function(){var e,i,o;return Object(h["__generator"])(this,(function(a){switch(a.label){case 0:return[4,uu(t.signal,n)];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=a.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return a.sent(),[2,e];case 5:if(i=a.sent(),!cu(i))throw i;return o={throttleEndTimeMillis:Date.now()+Object(s["calculateBackoffMillis"])(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return a.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}}))}))},t}(),hu="@firebase/remote-config",fu="0.1.41";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function pu(t){function e(e,n){var r=n.instanceIdentifier,i=e.getProvider("app").getImmediate(),o=e.getProvider("installations").getImmediate();if("undefined"===typeof window)throw Ba.create("registration-window");var s=i.options,u=s.projectId,c=s.apiKey,l=s.appId;if(!u)throw Ba.create("registration-project-id");if(!c)throw Ba.create("registration-api-key");if(!l)throw Ba.create("registration-app-id");r=r||"firebase";var h=new su(l,i.name,r),f=new au(h),p=new a["Logger"](hu);p.logLevel=a["LogLevel"].ERROR;var d=new za(o,t.SDK_VERSION,r,u,c,l),g=new lu(d,h),v=new qa(g,h,f,p),y=new Za(i,v,f,h,p);return y.ensureInitialized(),y}t.INTERNAL.registerComponent(new o["Component"]("remoteConfig",e,"PUBLIC").setMultipleInstances(!0)),t.registerVersion(hu,fu)}pu(r["default"]);n("5fcf");var du="firebase",gu="8.7.0";
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
r["default"].registerVersion(du,gu,"app"),r["default"].SDK_VERSION=gu;var vu="firebase",yu="8.7.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),r["default"].registerVersion(vu,yu)},"25f0":function(t,e,n){"use strict";var r=n("6eeb"),i=n("825a"),o=n("d039"),s=n("ad6d"),a="toString",u=RegExp.prototype,c=u[a],l=o((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),h=c.name!=a;(l||h)&&r(RegExp.prototype,a,(function(){var t=i(this),e=String(t.source),n=t.flags,r=String(void 0===n&&t instanceof RegExp&&!("flags"in u)?s.call(t):n);return"/"+e+"/"+r}),{unsafe:!0})},2626:function(t,e,n){"use strict";var r=n("d066"),i=n("9bf2"),o=n("b622"),s=n("83ab"),a=o("species");t.exports=function(t){var e=r(t),n=i.f;s&&e&&!e[a]&&n(e,a,{configurable:!0,get:function(){return this}})}},2909:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6b75");function i(t){if(Array.isArray(t))return Object(r["a"])(t)}n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("d3b7"),n("3ca3"),n("ddb0");function o(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var s=n("06c5");function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t){return i(t)||o(t)||Object(s["a"])(t)||a()}},"2a62":function(t,e,n){var r=n("825a");t.exports=function(t){var e=t["return"];if(void 0!==e)return r(e.call(t)).value}},"2cf4":function(t,e,n){var r,i,o,s=n("da84"),a=n("d039"),u=n("0366"),c=n("1be4"),l=n("cc12"),h=n("1cdc"),f=n("605d"),p=s.location,d=s.setImmediate,g=s.clearImmediate,v=s.process,y=s.MessageChannel,m=s.Dispatch,_=0,b={},w="onreadystatechange",E=function(t){if(b.hasOwnProperty(t)){var e=b[t];delete b[t],e()}},x=function(t){return function(){E(t)}},I=function(t){E(t.data)},O=function(t){s.postMessage(t+"",p.protocol+"//"+p.host)};d&&g||(d=function(t){var e=[],n=1;while(arguments.length>n)e.push(arguments[n++]);return b[++_]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},r(_),_},g=function(t){delete b[t]},f?r=function(t){v.nextTick(x(t))}:m&&m.now?r=function(t){m.now(x(t))}:y&&!h?(i=new y,o=i.port2,i.port1.onmessage=I,r=u(o.postMessage,o,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts&&p&&"file:"!==p.protocol&&!a(O)?(r=O,s.addEventListener("message",I,!1)):r=w in l("script")?function(t){c.appendChild(l("script"))[w]=function(){c.removeChild(this),E(t)}}:function(t){setTimeout(x(t),0)}),t.exports={set:d,clear:g}},"2d00":function(t,e,n){var r,i,o=n("da84"),s=n("342f"),a=o.process,u=a&&a.versions,c=u&&u.v8;c?(r=c.split("."),i=r[0]+r[1]):s&&(r=s.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/),r&&(i=r[1]))),t.exports=i&&+i},"2d83":function(t,e,n){"use strict";var r=n("387f");t.exports=function(t,e,n,i,o){var s=new Error(t);return r(s,e,n,i,o)}},"2e67":function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},"2ef0":function(t,e,n){(function(t,r){var i;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var o,s="4.17.20",a=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",l="__lodash_hash_undefined__",h=500,f="__lodash_placeholder__",p=1,d=2,g=4,v=1,y=2,m=1,_=2,b=4,w=8,E=16,x=32,I=64,O=128,S=256,C=512,T=30,N="...",k=800,A=16,P=1,R=2,L=3,j=1/0,M=9007199254740991,D=17976931348623157e292,F=NaN,q=4294967295,U=q-1,B=q>>>1,V=[["ary",O],["bind",m],["bindKey",_],["curry",w],["curryRight",E],["flip",C],["partial",x],["partialRight",I],["rearg",S]],G="[object Arguments]",z="[object Array]",W="[object AsyncFunction]",K="[object Boolean]",H="[object Date]",Y="[object DOMException]",X="[object Error]",$="[object Function]",Q="[object GeneratorFunction]",J="[object Map]",Z="[object Number]",tt="[object Null]",et="[object Object]",nt="[object Promise]",rt="[object Proxy]",it="[object RegExp]",ot="[object Set]",st="[object String]",at="[object Symbol]",ut="[object Undefined]",ct="[object WeakMap]",lt="[object WeakSet]",ht="[object ArrayBuffer]",ft="[object DataView]",pt="[object Float32Array]",dt="[object Float64Array]",gt="[object Int8Array]",vt="[object Int16Array]",yt="[object Int32Array]",mt="[object Uint8Array]",_t="[object Uint8ClampedArray]",bt="[object Uint16Array]",wt="[object Uint32Array]",Et=/\b__p \+= '';/g,xt=/\b(__p \+=) '' \+/g,It=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ot=/&(?:amp|lt|gt|quot|#39);/g,St=/[&<>"']/g,Ct=RegExp(Ot.source),Tt=RegExp(St.source),Nt=/<%-([\s\S]+?)%>/g,kt=/<%([\s\S]+?)%>/g,At=/<%=([\s\S]+?)%>/g,Pt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rt=/^\w*$/,Lt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jt=/[\\^$.*+?()[\]{}|]/g,Mt=RegExp(jt.source),Dt=/^\s+|\s+$/g,Ft=/^\s+/,qt=/\s+$/,Ut=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Bt=/\{\n\/\* \[wrapped with (.+)\] \*/,Vt=/,? & /,Gt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,zt=/\\(\\)?/g,Wt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Kt=/\w*$/,Ht=/^[-+]0x[0-9a-f]+$/i,Yt=/^0b[01]+$/i,Xt=/^\[object .+?Constructor\]$/,$t=/^0o[0-7]+$/i,Qt=/^(?:0|[1-9]\d*)$/,Jt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Zt=/($^)/,te=/['\n\r\u2028\u2029\\]/g,ee="\\ud800-\\udfff",ne="\\u0300-\\u036f",re="\\ufe20-\\ufe2f",ie="\\u20d0-\\u20ff",oe=ne+re+ie,se="\\u2700-\\u27bf",ae="a-z\\xdf-\\xf6\\xf8-\\xff",ue="\\xac\\xb1\\xd7\\xf7",ce="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",le="\\u2000-\\u206f",he=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fe="A-Z\\xc0-\\xd6\\xd8-\\xde",pe="\\ufe0e\\ufe0f",de=ue+ce+le+he,ge="[']",ve="["+ee+"]",ye="["+de+"]",me="["+oe+"]",_e="\\d+",be="["+se+"]",we="["+ae+"]",Ee="[^"+ee+de+_e+se+ae+fe+"]",xe="\\ud83c[\\udffb-\\udfff]",Ie="(?:"+me+"|"+xe+")",Oe="[^"+ee+"]",Se="(?:\\ud83c[\\udde6-\\uddff]){2}",Ce="[\\ud800-\\udbff][\\udc00-\\udfff]",Te="["+fe+"]",Ne="\\u200d",ke="(?:"+we+"|"+Ee+")",Ae="(?:"+Te+"|"+Ee+")",Pe="(?:"+ge+"(?:d|ll|m|re|s|t|ve))?",Re="(?:"+ge+"(?:D|LL|M|RE|S|T|VE))?",Le=Ie+"?",je="["+pe+"]?",Me="(?:"+Ne+"(?:"+[Oe,Se,Ce].join("|")+")"+je+Le+")*",De="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Fe="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",qe=je+Le+Me,Ue="(?:"+[be,Se,Ce].join("|")+")"+qe,Be="(?:"+[Oe+me+"?",me,Se,Ce,ve].join("|")+")",Ve=RegExp(ge,"g"),Ge=RegExp(me,"g"),ze=RegExp(xe+"(?="+xe+")|"+Be+qe,"g"),We=RegExp([Te+"?"+we+"+"+Pe+"(?="+[ye,Te,"$"].join("|")+")",Ae+"+"+Re+"(?="+[ye,Te+ke,"$"].join("|")+")",Te+"?"+ke+"+"+Pe,Te+"+"+Re,Fe,De,_e,Ue].join("|"),"g"),Ke=RegExp("["+Ne+ee+oe+pe+"]"),He=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ye=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Xe=-1,$e={};$e[pt]=$e[dt]=$e[gt]=$e[vt]=$e[yt]=$e[mt]=$e[_t]=$e[bt]=$e[wt]=!0,$e[G]=$e[z]=$e[ht]=$e[K]=$e[ft]=$e[H]=$e[X]=$e[$]=$e[J]=$e[Z]=$e[et]=$e[it]=$e[ot]=$e[st]=$e[ct]=!1;var Qe={};Qe[G]=Qe[z]=Qe[ht]=Qe[ft]=Qe[K]=Qe[H]=Qe[pt]=Qe[dt]=Qe[gt]=Qe[vt]=Qe[yt]=Qe[J]=Qe[Z]=Qe[et]=Qe[it]=Qe[ot]=Qe[st]=Qe[at]=Qe[mt]=Qe[_t]=Qe[bt]=Qe[wt]=!0,Qe[X]=Qe[$]=Qe[ct]=!1;var Je={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"},Ze={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},en={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},nn=parseFloat,rn=parseInt,on="object"==typeof t&&t&&t.Object===Object&&t,sn="object"==typeof self&&self&&self.Object===Object&&self,an=on||sn||Function("return this")(),un=e&&!e.nodeType&&e,cn=un&&"object"==typeof r&&r&&!r.nodeType&&r,ln=cn&&cn.exports===un,hn=ln&&on.process,fn=function(){try{var t=cn&&cn.require&&cn.require("util").types;return t||hn&&hn.binding&&hn.binding("util")}catch(e){}}(),pn=fn&&fn.isArrayBuffer,dn=fn&&fn.isDate,gn=fn&&fn.isMap,vn=fn&&fn.isRegExp,yn=fn&&fn.isSet,mn=fn&&fn.isTypedArray;function _n(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function bn(t,e,n,r){var i=-1,o=null==t?0:t.length;while(++i<o){var s=t[i];e(r,s,n(s),t)}return r}function wn(t,e){var n=-1,r=null==t?0:t.length;while(++n<r)if(!1===e(t[n],n,t))break;return t}function En(t,e){var n=null==t?0:t.length;while(n--)if(!1===e(t[n],n,t))break;return t}function xn(t,e){var n=-1,r=null==t?0:t.length;while(++n<r)if(!e(t[n],n,t))return!1;return!0}function In(t,e){var n=-1,r=null==t?0:t.length,i=0,o=[];while(++n<r){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function On(t,e){var n=null==t?0:t.length;return!!n&&Dn(t,e,0)>-1}function Sn(t,e,n){var r=-1,i=null==t?0:t.length;while(++r<i)if(n(e,t[r]))return!0;return!1}function Cn(t,e){var n=-1,r=null==t?0:t.length,i=Array(r);while(++n<r)i[n]=e(t[n],n,t);return i}function Tn(t,e){var n=-1,r=e.length,i=t.length;while(++n<r)t[i+n]=e[n];return t}function Nn(t,e,n,r){var i=-1,o=null==t?0:t.length;r&&o&&(n=t[++i]);while(++i<o)n=e(n,t[i],i,t);return n}function kn(t,e,n,r){var i=null==t?0:t.length;r&&i&&(n=t[--i]);while(i--)n=e(n,t[i],i,t);return n}function An(t,e){var n=-1,r=null==t?0:t.length;while(++n<r)if(e(t[n],n,t))return!0;return!1}var Pn=Bn("length");function Rn(t){return t.split("")}function Ln(t){return t.match(Gt)||[]}function jn(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Mn(t,e,n,r){var i=t.length,o=n+(r?1:-1);while(r?o--:++o<i)if(e(t[o],o,t))return o;return-1}function Dn(t,e,n){return e===e?fr(t,e,n):Mn(t,qn,n)}function Fn(t,e,n,r){var i=n-1,o=t.length;while(++i<o)if(r(t[i],e))return i;return-1}function qn(t){return t!==t}function Un(t,e){var n=null==t?0:t.length;return n?Wn(t,e)/n:F}function Bn(t){return function(e){return null==e?o:e[t]}}function Vn(t){return function(e){return null==t?o:t[e]}}function Gn(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function zn(t,e){var n=t.length;t.sort(e);while(n--)t[n]=t[n].value;return t}function Wn(t,e){var n,r=-1,i=t.length;while(++r<i){var s=e(t[r]);s!==o&&(n=n===o?s:n+s)}return n}function Kn(t,e){var n=-1,r=Array(t);while(++n<t)r[n]=e(n);return r}function Hn(t,e){return Cn(e,(function(e){return[e,t[e]]}))}function Yn(t){return function(e){return t(e)}}function Xn(t,e){return Cn(e,(function(e){return t[e]}))}function $n(t,e){return t.has(e)}function Qn(t,e){var n=-1,r=t.length;while(++n<r&&Dn(e,t[n],0)>-1);return n}function Jn(t,e){var n=t.length;while(n--&&Dn(e,t[n],0)>-1);return n}function Zn(t,e){var n=t.length,r=0;while(n--)t[n]===e&&++r;return r}var tr=Vn(Je),er=Vn(Ze);function nr(t){return"\\"+en[t]}function rr(t,e){return null==t?o:t[e]}function ir(t){return Ke.test(t)}function or(t){return He.test(t)}function sr(t){var e,n=[];while(!(e=t.next()).done)n.push(e.value);return n}function ar(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function ur(t,e){return function(n){return t(e(n))}}function cr(t,e){var n=-1,r=t.length,i=0,o=[];while(++n<r){var s=t[n];s!==e&&s!==f||(t[n]=f,o[i++]=n)}return o}function lr(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function hr(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function fr(t,e,n){var r=n-1,i=t.length;while(++r<i)if(t[r]===e)return r;return-1}function pr(t,e,n){var r=n+1;while(r--)if(t[r]===e)return r;return r}function dr(t){return ir(t)?yr(t):Pn(t)}function gr(t){return ir(t)?mr(t):Rn(t)}var vr=Vn(tn);function yr(t){var e=ze.lastIndex=0;while(ze.test(t))++e;return e}function mr(t){return t.match(ze)||[]}function _r(t){return t.match(We)||[]}var br=function t(e){e=null==e?an:wr.defaults(an.Object(),e,wr.pick(an,Ye));var n=e.Array,r=e.Date,i=e.Error,Gt=e.Function,ee=e.Math,ne=e.Object,re=e.RegExp,ie=e.String,oe=e.TypeError,se=n.prototype,ae=Gt.prototype,ue=ne.prototype,ce=e["__core-js_shared__"],le=ae.toString,he=ue.hasOwnProperty,fe=0,pe=function(){var t=/[^.]+$/.exec(ce&&ce.keys&&ce.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),de=ue.toString,ge=le.call(ne),ve=an._,ye=re("^"+le.call(he).replace(jt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),me=ln?e.Buffer:o,_e=e.Symbol,be=e.Uint8Array,we=me?me.allocUnsafe:o,Ee=ur(ne.getPrototypeOf,ne),xe=ne.create,Ie=ue.propertyIsEnumerable,Oe=se.splice,Se=_e?_e.isConcatSpreadable:o,Ce=_e?_e.iterator:o,Te=_e?_e.toStringTag:o,Ne=function(){try{var t=Ws(ne,"defineProperty");return t({},"",{}),t}catch(e){}}(),ke=e.clearTimeout!==an.clearTimeout&&e.clearTimeout,Ae=r&&r.now!==an.Date.now&&r.now,Pe=e.setTimeout!==an.setTimeout&&e.setTimeout,Re=ee.ceil,Le=ee.floor,je=ne.getOwnPropertySymbols,Me=me?me.isBuffer:o,De=e.isFinite,Fe=se.join,qe=ur(ne.keys,ne),Ue=ee.max,Be=ee.min,ze=r.now,We=e.parseInt,Ke=ee.random,He=se.reverse,Je=Ws(e,"DataView"),Ze=Ws(e,"Map"),tn=Ws(e,"Promise"),en=Ws(e,"Set"),on=Ws(e,"WeakMap"),sn=Ws(ne,"create"),un=on&&new on,cn={},hn=ka(Je),fn=ka(Ze),Pn=ka(tn),Rn=ka(en),Vn=ka(on),fr=_e?_e.prototype:o,yr=fr?fr.valueOf:o,mr=fr?fr.toString:o;function br(t){if(xl(t)&&!sl(t)&&!(t instanceof Or)){if(t instanceof Ir)return t;if(he.call(t,"__wrapped__"))return Pa(t)}return new Ir(t)}var Er=function(){function t(){}return function(e){if(!El(e))return{};if(xe)return xe(e);t.prototype=e;var n=new t;return t.prototype=o,n}}();function xr(){}function Ir(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=o}function Or(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=q,this.__views__=[]}function Sr(){var t=new Or(this.__wrapped__);return t.__actions__=ns(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ns(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ns(this.__views__),t}function Cr(){if(this.__filtered__){var t=new Or(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Tr(){var t=this.__wrapped__.value(),e=this.__dir__,n=sl(t),r=e<0,i=n?t.length:0,o=$s(0,i,this.__views__),s=o.start,a=o.end,u=a-s,c=r?a:s-1,l=this.__iteratees__,h=l.length,f=0,p=Be(u,this.__takeCount__);if(!n||!r&&i==u&&p==u)return Do(t,this.__actions__);var d=[];t:while(u--&&f<p){c+=e;var g=-1,v=t[c];while(++g<h){var y=l[g],m=y.iteratee,_=y.type,b=m(v);if(_==R)v=b;else if(!b){if(_==P)continue t;break t}}d[f++]=v}return d}function Nr(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function kr(){this.__data__=sn?sn(null):{},this.size=0}function Ar(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Pr(t){var e=this.__data__;if(sn){var n=e[t];return n===l?o:n}return he.call(e,t)?e[t]:o}function Rr(t){var e=this.__data__;return sn?e[t]!==o:he.call(e,t)}function Lr(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=sn&&e===o?l:e,this}function jr(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function Mr(){this.__data__=[],this.size=0}function Dr(t){var e=this.__data__,n=ui(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Oe.call(e,n,1),--this.size,!0}function Fr(t){var e=this.__data__,n=ui(e,t);return n<0?o:e[n][1]}function qr(t){return ui(this.__data__,t)>-1}function Ur(t,e){var n=this.__data__,r=ui(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Br(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}function Vr(){this.size=0,this.__data__={hash:new Nr,map:new(Ze||jr),string:new Nr}}function Gr(t){var e=Gs(this,t)["delete"](t);return this.size-=e?1:0,e}function zr(t){return Gs(this,t).get(t)}function Wr(t){return Gs(this,t).has(t)}function Kr(t,e){var n=Gs(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function Hr(t){var e=-1,n=null==t?0:t.length;this.__data__=new Br;while(++e<n)this.add(t[e])}function Yr(t){return this.__data__.set(t,l),this}function Xr(t){return this.__data__.has(t)}function $r(t){var e=this.__data__=new jr(t);this.size=e.size}function Qr(){this.__data__=new jr,this.size=0}function Jr(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n}function Zr(t){return this.__data__.get(t)}function ti(t){return this.__data__.has(t)}function ei(t,e){var n=this.__data__;if(n instanceof jr){var r=n.__data__;if(!Ze||r.length<a-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Br(r)}return n.set(t,e),this.size=n.size,this}function ni(t,e){var n=sl(t),r=!n&&ol(t),i=!n&&!r&&hl(t),o=!n&&!r&&!i&&Fl(t),s=n||r||i||o,a=s?Kn(t.length,ie):[],u=a.length;for(var c in t)!e&&!he.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ia(c,u))||a.push(c);return a}function ri(t){var e=t.length;return e?t[vo(0,e-1)]:o}function ii(t,e){return Ca(ns(t),di(e,0,t.length))}function oi(t){return Ca(ns(t))}function si(t,e,n){(n!==o&&!nl(t[e],n)||n===o&&!(e in t))&&fi(t,e,n)}function ai(t,e,n){var r=t[e];he.call(t,e)&&nl(r,n)&&(n!==o||e in t)||fi(t,e,n)}function ui(t,e){var n=t.length;while(n--)if(nl(t[n][0],e))return n;return-1}function ci(t,e,n,r){return bi(t,(function(t,i,o){e(r,t,n(t),o)})),r}function li(t,e){return t&&rs(e,bh(e),t)}function hi(t,e){return t&&rs(e,wh(e),t)}function fi(t,e,n){"__proto__"==e&&Ne?Ne(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function pi(t,e){var r=-1,i=e.length,s=n(i),a=null==t;while(++r<i)s[r]=a?o:dh(t,e[r]);return s}function di(t,e,n){return t===t&&(n!==o&&(t=t<=n?t:n),e!==o&&(t=t>=e?t:e)),t}function gi(t,e,n,r,i,s){var a,u=e&p,c=e&d,l=e&g;if(n&&(a=i?n(t,r,i,s):n(t)),a!==o)return a;if(!El(t))return t;var h=sl(t);if(h){if(a=Zs(t),!u)return ns(t,a)}else{var f=Xs(t),v=f==$||f==Q;if(hl(t))return Ko(t,u);if(f==et||f==G||v&&!i){if(a=c||v?{}:ta(t),!u)return c?os(t,hi(a,t)):is(t,li(a,t))}else{if(!Qe[f])return i?t:{};a=ea(t,f,u)}}s||(s=new $r);var y=s.get(t);if(y)return y;s.set(t,a),jl(t)?t.forEach((function(r){a.add(gi(r,e,n,r,t,s))})):Il(t)&&t.forEach((function(r,i){a.set(i,gi(r,e,n,i,t,s))}));var m=l?c?Fs:Ds:c?wh:bh,_=h?o:m(t);return wn(_||t,(function(r,i){_&&(i=r,r=t[i]),ai(a,i,gi(r,e,n,i,t,s))})),a}function vi(t){var e=bh(t);return function(n){return yi(n,t,e)}}function yi(t,e,n){var r=n.length;if(null==t)return!r;t=ne(t);while(r--){var i=n[r],s=e[i],a=t[i];if(a===o&&!(i in t)||!s(a))return!1}return!0}function mi(t,e,n){if("function"!=typeof t)throw new oe(c);return xa((function(){t.apply(o,n)}),e)}function _i(t,e,n,r){var i=-1,o=On,s=!0,u=t.length,c=[],l=e.length;if(!u)return c;n&&(e=Cn(e,Yn(n))),r?(o=Sn,s=!1):e.length>=a&&(o=$n,s=!1,e=new Hr(e));t:while(++i<u){var h=t[i],f=null==n?h:n(h);if(h=r||0!==h?h:0,s&&f===f){var p=l;while(p--)if(e[p]===f)continue t;c.push(h)}else o(e,f,r)||c.push(h)}return c}br.templateSettings={escape:Nt,evaluate:kt,interpolate:At,variable:"",imports:{_:br}},br.prototype=xr.prototype,br.prototype.constructor=br,Ir.prototype=Er(xr.prototype),Ir.prototype.constructor=Ir,Or.prototype=Er(xr.prototype),Or.prototype.constructor=Or,Nr.prototype.clear=kr,Nr.prototype["delete"]=Ar,Nr.prototype.get=Pr,Nr.prototype.has=Rr,Nr.prototype.set=Lr,jr.prototype.clear=Mr,jr.prototype["delete"]=Dr,jr.prototype.get=Fr,jr.prototype.has=qr,jr.prototype.set=Ur,Br.prototype.clear=Vr,Br.prototype["delete"]=Gr,Br.prototype.get=zr,Br.prototype.has=Wr,Br.prototype.set=Kr,Hr.prototype.add=Hr.prototype.push=Yr,Hr.prototype.has=Xr,$r.prototype.clear=Qr,$r.prototype["delete"]=Jr,$r.prototype.get=Zr,$r.prototype.has=ti,$r.prototype.set=ei;var bi=us(Ni),wi=us(ki,!0);function Ei(t,e){var n=!0;return bi(t,(function(t,r,i){return n=!!e(t,r,i),n})),n}function xi(t,e,n){var r=-1,i=t.length;while(++r<i){var s=t[r],a=e(s);if(null!=a&&(u===o?a===a&&!Dl(a):n(a,u)))var u=a,c=s}return c}function Ii(t,e,n,r){var i=t.length;n=Kl(n),n<0&&(n=-n>i?0:i+n),r=r===o||r>i?i:Kl(r),r<0&&(r+=i),r=n>r?0:Hl(r);while(n<r)t[n++]=e;return t}function Oi(t,e){var n=[];return bi(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function Si(t,e,n,r,i){var o=-1,s=t.length;n||(n=ra),i||(i=[]);while(++o<s){var a=t[o];e>0&&n(a)?e>1?Si(a,e-1,n,r,i):Tn(i,a):r||(i[i.length]=a)}return i}var Ci=cs(),Ti=cs(!0);function Ni(t,e){return t&&Ci(t,e,bh)}function ki(t,e){return t&&Ti(t,e,bh)}function Ai(t,e){return In(e,(function(e){return _l(t[e])}))}function Pi(t,e){e=Vo(e,t);var n=0,r=e.length;while(null!=t&&n<r)t=t[Na(e[n++])];return n&&n==r?t:o}function Ri(t,e,n){var r=e(t);return sl(t)?r:Tn(r,n(t))}function Li(t){return null==t?t===o?ut:tt:Te&&Te in ne(t)?Ks(t):ya(t)}function ji(t,e){return t>e}function Mi(t,e){return null!=t&&he.call(t,e)}function Di(t,e){return null!=t&&e in ne(t)}function Fi(t,e,n){return t>=Be(e,n)&&t<Ue(e,n)}function qi(t,e,r){var i=r?Sn:On,s=t[0].length,a=t.length,u=a,c=n(a),l=1/0,h=[];while(u--){var f=t[u];u&&e&&(f=Cn(f,Yn(e))),l=Be(f.length,l),c[u]=!r&&(e||s>=120&&f.length>=120)?new Hr(u&&f):o}f=t[0];var p=-1,d=c[0];t:while(++p<s&&h.length<l){var g=f[p],v=e?e(g):g;if(g=r||0!==g?g:0,!(d?$n(d,v):i(h,v,r))){u=a;while(--u){var y=c[u];if(!(y?$n(y,v):i(t[u],v,r)))continue t}d&&d.push(v),h.push(g)}}return h}function Ui(t,e,n,r){return Ni(t,(function(t,i,o){e(r,n(t),i,o)})),r}function Bi(t,e,n){e=Vo(e,t),t=_a(t,e);var r=null==t?t:t[Na(ru(e))];return null==r?o:_n(r,t,n)}function Vi(t){return xl(t)&&Li(t)==G}function Gi(t){return xl(t)&&Li(t)==ht}function zi(t){return xl(t)&&Li(t)==H}function Wi(t,e,n,r,i){return t===e||(null==t||null==e||!xl(t)&&!xl(e)?t!==t&&e!==e:Ki(t,e,n,r,Wi,i))}function Ki(t,e,n,r,i,o){var s=sl(t),a=sl(e),u=s?z:Xs(t),c=a?z:Xs(e);u=u==G?et:u,c=c==G?et:c;var l=u==et,h=c==et,f=u==c;if(f&&hl(t)){if(!hl(e))return!1;s=!0,l=!1}if(f&&!l)return o||(o=new $r),s||Fl(t)?Rs(t,e,n,r,i,o):Ls(t,e,u,n,r,i,o);if(!(n&v)){var p=l&&he.call(t,"__wrapped__"),d=h&&he.call(e,"__wrapped__");if(p||d){var g=p?t.value():t,y=d?e.value():e;return o||(o=new $r),i(g,y,n,r,o)}}return!!f&&(o||(o=new $r),js(t,e,n,r,i,o))}function Hi(t){return xl(t)&&Xs(t)==J}function Yi(t,e,n,r){var i=n.length,s=i,a=!r;if(null==t)return!s;t=ne(t);while(i--){var u=n[i];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}while(++i<s){u=n[i];var c=u[0],l=t[c],h=u[1];if(a&&u[2]){if(l===o&&!(c in t))return!1}else{var f=new $r;if(r)var p=r(l,h,c,t,e,f);if(!(p===o?Wi(h,l,v|y,r,f):p))return!1}}return!0}function Xi(t){if(!El(t)||ca(t))return!1;var e=_l(t)?ye:Xt;return e.test(ka(t))}function $i(t){return xl(t)&&Li(t)==it}function Qi(t){return xl(t)&&Xs(t)==ot}function Ji(t){return xl(t)&&wl(t.length)&&!!$e[Li(t)]}function Zi(t){return"function"==typeof t?t:null==t?Nf:"object"==typeof t?sl(t)?oo(t[0],t[1]):io(t):Vf(t)}function to(t){if(!ha(t))return qe(t);var e=[];for(var n in ne(t))he.call(t,n)&&"constructor"!=n&&e.push(n);return e}function eo(t){if(!El(t))return va(t);var e=ha(t),n=[];for(var r in t)("constructor"!=r||!e&&he.call(t,r))&&n.push(r);return n}function no(t,e){return t<e}function ro(t,e){var r=-1,i=ul(t)?n(t.length):[];return bi(t,(function(t,n,o){i[++r]=e(t,n,o)})),i}function io(t){var e=zs(t);return 1==e.length&&e[0][2]?pa(e[0][0],e[0][1]):function(n){return n===t||Yi(n,t,e)}}function oo(t,e){return sa(t)&&fa(e)?pa(Na(t),e):function(n){var r=dh(n,t);return r===o&&r===e?vh(n,t):Wi(e,r,v|y)}}function so(t,e,n,r,i){t!==e&&Ci(e,(function(s,a){if(i||(i=new $r),El(s))ao(t,e,a,n,so,r,i);else{var u=r?r(wa(t,a),s,a+"",t,e,i):o;u===o&&(u=s),si(t,a,u)}}),wh)}function ao(t,e,n,r,i,s,a){var u=wa(t,n),c=wa(e,n),l=a.get(c);if(l)si(t,n,l);else{var h=s?s(u,c,n+"",t,e,a):o,f=h===o;if(f){var p=sl(c),d=!p&&hl(c),g=!p&&!d&&Fl(c);h=c,p||d||g?sl(u)?h=u:cl(u)?h=ns(u):d?(f=!1,h=Ko(c,!0)):g?(f=!1,h=Qo(c,!0)):h=[]:Pl(c)||ol(c)?(h=u,ol(u)?h=Xl(u):El(u)&&!_l(u)||(h=ta(c))):f=!1}f&&(a.set(c,h),i(h,c,r,s,a),a["delete"](c)),si(t,n,h)}}function uo(t,e){var n=t.length;if(n)return e+=e<0?n:0,ia(e,n)?t[e]:o}function co(t,e,n){e=e.length?Cn(e,(function(t){return sl(t)?function(e){return Pi(e,1===t.length?t[0]:t)}:t})):[Nf];var r=-1;e=Cn(e,Yn(Vs()));var i=ro(t,(function(t,n,i){var o=Cn(e,(function(e){return e(t)}));return{criteria:o,index:++r,value:t}}));return zn(i,(function(t,e){return Zo(t,e,n)}))}function lo(t,e){return ho(t,e,(function(e,n){return vh(t,n)}))}function ho(t,e,n){var r=-1,i=e.length,o={};while(++r<i){var s=e[r],a=Pi(t,s);n(a,s)&&Eo(o,Vo(s,t),a)}return o}function fo(t){return function(e){return Pi(e,t)}}function po(t,e,n,r){var i=r?Fn:Dn,o=-1,s=e.length,a=t;t===e&&(e=ns(e)),n&&(a=Cn(t,Yn(n)));while(++o<s){var u=0,c=e[o],l=n?n(c):c;while((u=i(a,l,u,r))>-1)a!==t&&Oe.call(a,u,1),Oe.call(t,u,1)}return t}function go(t,e){var n=t?e.length:0,r=n-1;while(n--){var i=e[n];if(n==r||i!==o){var o=i;ia(i)?Oe.call(t,i,1):Lo(t,i)}}return t}function vo(t,e){return t+Le(Ke()*(e-t+1))}function yo(t,e,r,i){var o=-1,s=Ue(Re((e-t)/(r||1)),0),a=n(s);while(s--)a[i?s:++o]=t,t+=r;return a}function mo(t,e){var n="";if(!t||e<1||e>M)return n;do{e%2&&(n+=t),e=Le(e/2),e&&(t+=t)}while(e);return n}function _o(t,e){return Ia(ma(t,e,Nf),t+"")}function bo(t){return ri(qh(t))}function wo(t,e){var n=qh(t);return Ca(n,di(e,0,n.length))}function Eo(t,e,n,r){if(!El(t))return t;e=Vo(e,t);var i=-1,s=e.length,a=s-1,u=t;while(null!=u&&++i<s){var c=Na(e[i]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(i!=a){var h=u[c];l=r?r(h,c,u):o,l===o&&(l=El(h)?h:ia(e[i+1])?[]:{})}ai(u,c,l),u=u[c]}return t}var xo=un?function(t,e){return un.set(t,e),t}:Nf,Io=Ne?function(t,e){return Ne(t,"toString",{configurable:!0,enumerable:!1,value:Of(e),writable:!0})}:Nf;function Oo(t){return Ca(qh(t))}function So(t,e,r){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),r=r>o?o:r,r<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;var s=n(o);while(++i<o)s[i]=t[i+e];return s}function Co(t,e){var n;return bi(t,(function(t,r,i){return n=e(t,r,i),!n})),!!n}function To(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=B){while(r<i){var o=r+i>>>1,s=t[o];null!==s&&!Dl(s)&&(n?s<=e:s<e)?r=o+1:i=o}return i}return No(t,e,Nf,n)}function No(t,e,n,r){var i=0,s=null==t?0:t.length;if(0===s)return 0;e=n(e);var a=e!==e,u=null===e,c=Dl(e),l=e===o;while(i<s){var h=Le((i+s)/2),f=n(t[h]),p=f!==o,d=null===f,g=f===f,v=Dl(f);if(a)var y=r||g;else y=l?g&&(r||p):u?g&&p&&(r||!d):c?g&&p&&!d&&(r||!v):!d&&!v&&(r?f<=e:f<e);y?i=h+1:s=h}return Be(s,U)}function ko(t,e){var n=-1,r=t.length,i=0,o=[];while(++n<r){var s=t[n],a=e?e(s):s;if(!n||!nl(a,u)){var u=a;o[i++]=0===s?0:s}}return o}function Ao(t){return"number"==typeof t?t:Dl(t)?F:+t}function Po(t){if("string"==typeof t)return t;if(sl(t))return Cn(t,Po)+"";if(Dl(t))return mr?mr.call(t):"";var e=t+"";return"0"==e&&1/t==-j?"-0":e}function Ro(t,e,n){var r=-1,i=On,o=t.length,s=!0,u=[],c=u;if(n)s=!1,i=Sn;else if(o>=a){var l=e?null:Cs(t);if(l)return lr(l);s=!1,i=$n,c=new Hr}else c=e?[]:u;t:while(++r<o){var h=t[r],f=e?e(h):h;if(h=n||0!==h?h:0,s&&f===f){var p=c.length;while(p--)if(c[p]===f)continue t;e&&c.push(f),u.push(h)}else i(c,f,n)||(c!==u&&c.push(f),u.push(h))}return u}function Lo(t,e){return e=Vo(e,t),t=_a(t,e),null==t||delete t[Na(ru(e))]}function jo(t,e,n,r){return Eo(t,e,n(Pi(t,e)),r)}function Mo(t,e,n,r){var i=t.length,o=r?i:-1;while((r?o--:++o<i)&&e(t[o],o,t));return n?So(t,r?0:o,r?o+1:i):So(t,r?o+1:0,r?i:o)}function Do(t,e){var n=t;return n instanceof Or&&(n=n.value()),Nn(e,(function(t,e){return e.func.apply(e.thisArg,Tn([t],e.args))}),n)}function Fo(t,e,r){var i=t.length;if(i<2)return i?Ro(t[0]):[];var o=-1,s=n(i);while(++o<i){var a=t[o],u=-1;while(++u<i)u!=o&&(s[o]=_i(s[o]||a,t[u],e,r))}return Ro(Si(s,1),e,r)}function qo(t,e,n){var r=-1,i=t.length,s=e.length,a={};while(++r<i){var u=r<s?e[r]:o;n(a,t[r],u)}return a}function Uo(t){return cl(t)?t:[]}function Bo(t){return"function"==typeof t?t:Nf}function Vo(t,e){return sl(t)?t:sa(t,e)?[t]:Ta(Ql(t))}var Go=_o;function zo(t,e,n){var r=t.length;return n=n===o?r:n,!e&&n>=r?t:So(t,e,n)}var Wo=ke||function(t){return an.clearTimeout(t)};function Ko(t,e){if(e)return t.slice();var n=t.length,r=we?we(n):new t.constructor(n);return t.copy(r),r}function Ho(t){var e=new t.constructor(t.byteLength);return new be(e).set(new be(t)),e}function Yo(t,e){var n=e?Ho(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Xo(t){var e=new t.constructor(t.source,Kt.exec(t));return e.lastIndex=t.lastIndex,e}function $o(t){return yr?ne(yr.call(t)):{}}function Qo(t,e){var n=e?Ho(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Jo(t,e){if(t!==e){var n=t!==o,r=null===t,i=t===t,s=Dl(t),a=e!==o,u=null===e,c=e===e,l=Dl(e);if(!u&&!l&&!s&&t>e||s&&a&&c&&!u&&!l||r&&a&&c||!n&&c||!i)return 1;if(!r&&!s&&!l&&t<e||l&&n&&i&&!r&&!s||u&&n&&i||!a&&i||!c)return-1}return 0}function Zo(t,e,n){var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;while(++r<s){var u=Jo(i[r],o[r]);if(u){if(r>=a)return u;var c=n[r];return u*("desc"==c?-1:1)}}return t.index-e.index}function ts(t,e,r,i){var o=-1,s=t.length,a=r.length,u=-1,c=e.length,l=Ue(s-a,0),h=n(c+l),f=!i;while(++u<c)h[u]=e[u];while(++o<a)(f||o<s)&&(h[r[o]]=t[o]);while(l--)h[u++]=t[o++];return h}function es(t,e,r,i){var o=-1,s=t.length,a=-1,u=r.length,c=-1,l=e.length,h=Ue(s-u,0),f=n(h+l),p=!i;while(++o<h)f[o]=t[o];var d=o;while(++c<l)f[d+c]=e[c];while(++a<u)(p||o<s)&&(f[d+r[a]]=t[o++]);return f}function ns(t,e){var r=-1,i=t.length;e||(e=n(i));while(++r<i)e[r]=t[r];return e}function rs(t,e,n,r){var i=!n;n||(n={});var s=-1,a=e.length;while(++s<a){var u=e[s],c=r?r(n[u],t[u],u,n,t):o;c===o&&(c=t[u]),i?fi(n,u,c):ai(n,u,c)}return n}function is(t,e){return rs(t,Hs(t),e)}function os(t,e){return rs(t,Ys(t),e)}function ss(t,e){return function(n,r){var i=sl(n)?bn:ci,o=e?e():{};return i(n,t,Vs(r,2),o)}}function as(t){return _o((function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:o,a=i>2?n[2]:o;s=t.length>3&&"function"==typeof s?(i--,s):o,a&&oa(n[0],n[1],a)&&(s=i<3?o:s,i=1),e=ne(e);while(++r<i){var u=n[r];u&&t(e,u,r,s)}return e}))}function us(t,e){return function(n,r){if(null==n)return n;if(!ul(n))return t(n,r);var i=n.length,o=e?i:-1,s=ne(n);while(e?o--:++o<i)if(!1===r(s[o],o,s))break;return n}}function cs(t){return function(e,n,r){var i=-1,o=ne(e),s=r(e),a=s.length;while(a--){var u=s[t?a:++i];if(!1===n(o[u],u,o))break}return e}}function ls(t,e,n){var r=e&m,i=ps(t);function o(){var e=this&&this!==an&&this instanceof o?i:t;return e.apply(r?n:this,arguments)}return o}function hs(t){return function(e){e=Ql(e);var n=ir(e)?gr(e):o,r=n?n[0]:e.charAt(0),i=n?zo(n,1).join(""):e.slice(1);return r[t]()+i}}function fs(t){return function(e){return Nn(bf(Kh(e).replace(Ve,"")),t,"")}}function ps(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Er(t.prototype),r=t.apply(n,e);return El(r)?r:n}}function ds(t,e,r){var i=ps(t);function s(){var a=arguments.length,u=n(a),c=a,l=Bs(s);while(c--)u[c]=arguments[c];var h=a<3&&u[0]!==l&&u[a-1]!==l?[]:cr(u,l);if(a-=h.length,a<r)return Os(t,e,ys,s.placeholder,o,u,h,o,o,r-a);var f=this&&this!==an&&this instanceof s?i:t;return _n(f,this,u)}return s}function gs(t){return function(e,n,r){var i=ne(e);if(!ul(e)){var s=Vs(n,3);e=bh(e),n=function(t){return s(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[s?e[a]:a]:o}}function vs(t){return Ms((function(e){var n=e.length,r=n,i=Ir.prototype.thru;t&&e.reverse();while(r--){var s=e[r];if("function"!=typeof s)throw new oe(c);if(i&&!a&&"wrapper"==Us(s))var a=new Ir([],!0)}r=a?r:n;while(++r<n){s=e[r];var u=Us(s),l="wrapper"==u?qs(s):o;a=l&&ua(l[0])&&l[1]==(O|w|x|S)&&!l[4].length&&1==l[9]?a[Us(l[0])].apply(a,l[3]):1==s.length&&ua(s)?a[u]():a.thru(s)}return function(){var t=arguments,r=t[0];if(a&&1==t.length&&sl(r))return a.plant(r).value();var i=0,o=n?e[i].apply(this,t):r;while(++i<n)o=e[i].call(this,o);return o}}))}function ys(t,e,r,i,s,a,u,c,l,h){var f=e&O,p=e&m,d=e&_,g=e&(w|E),v=e&C,y=d?o:ps(t);function b(){var o=arguments.length,m=n(o),_=o;while(_--)m[_]=arguments[_];if(g)var w=Bs(b),E=Zn(m,w);if(i&&(m=ts(m,i,s,g)),a&&(m=es(m,a,u,g)),o-=E,g&&o<h){var x=cr(m,w);return Os(t,e,ys,b.placeholder,r,m,x,c,l,h-o)}var I=p?r:this,O=d?I[t]:t;return o=m.length,c?m=ba(m,c):v&&o>1&&m.reverse(),f&&l<o&&(m.length=l),this&&this!==an&&this instanceof b&&(O=y||ps(O)),O.apply(I,m)}return b}function ms(t,e){return function(n,r){return Ui(n,t,e(r),{})}}function _s(t,e){return function(n,r){var i;if(n===o&&r===o)return e;if(n!==o&&(i=n),r!==o){if(i===o)return r;"string"==typeof n||"string"==typeof r?(n=Po(n),r=Po(r)):(n=Ao(n),r=Ao(r)),i=t(n,r)}return i}}function bs(t){return Ms((function(e){return e=Cn(e,Yn(Vs())),_o((function(n){var r=this;return t(e,(function(t){return _n(t,r,n)}))}))}))}function ws(t,e){e=e===o?" ":Po(e);var n=e.length;if(n<2)return n?mo(e,t):e;var r=mo(e,Re(t/dr(e)));return ir(e)?zo(gr(r),0,t).join(""):r.slice(0,t)}function Es(t,e,r,i){var o=e&m,s=ps(t);function a(){var e=-1,u=arguments.length,c=-1,l=i.length,h=n(l+u),f=this&&this!==an&&this instanceof a?s:t;while(++c<l)h[c]=i[c];while(u--)h[c++]=arguments[++e];return _n(f,o?r:this,h)}return a}function xs(t){return function(e,n,r){return r&&"number"!=typeof r&&oa(e,n,r)&&(n=r=o),e=Wl(e),n===o?(n=e,e=0):n=Wl(n),r=r===o?e<n?1:-1:Wl(r),yo(e,n,r,t)}}function Is(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Yl(e),n=Yl(n)),t(e,n)}}function Os(t,e,n,r,i,s,a,u,c,l){var h=e&w,f=h?a:o,p=h?o:a,d=h?s:o,g=h?o:s;e|=h?x:I,e&=~(h?I:x),e&b||(e&=~(m|_));var v=[t,e,i,d,f,g,p,u,c,l],y=n.apply(o,v);return ua(t)&&Ea(y,v),y.placeholder=r,Oa(y,t,e)}function Ss(t){var e=ee[t];return function(t,n){if(t=Yl(t),n=null==n?0:Be(Kl(n),292),n&&De(t)){var r=(Ql(t)+"e").split("e"),i=e(r[0]+"e"+(+r[1]+n));return r=(Ql(i)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return e(t)}}var Cs=en&&1/lr(new en([,-0]))[1]==j?function(t){return new en(t)}:Df;function Ts(t){return function(e){var n=Xs(e);return n==J?ar(e):n==ot?hr(e):Hn(e,t(e))}}function Ns(t,e,n,r,i,s,a,u){var l=e&_;if(!l&&"function"!=typeof t)throw new oe(c);var h=r?r.length:0;if(h||(e&=~(x|I),r=i=o),a=a===o?a:Ue(Kl(a),0),u=u===o?u:Kl(u),h-=i?i.length:0,e&I){var f=r,p=i;r=i=o}var d=l?o:qs(t),g=[t,e,n,r,i,f,p,s,a,u];if(d&&ga(g,d),t=g[0],e=g[1],n=g[2],r=g[3],i=g[4],u=g[9]=g[9]===o?l?0:t.length:Ue(g[9]-h,0),!u&&e&(w|E)&&(e&=~(w|E)),e&&e!=m)v=e==w||e==E?ds(t,e,u):e!=x&&e!=(m|x)||i.length?ys.apply(o,g):Es(t,e,n,r);else var v=ls(t,e,n);var y=d?xo:Ea;return Oa(y(v,g),t,e)}function ks(t,e,n,r){return t===o||nl(t,ue[n])&&!he.call(r,n)?e:t}function As(t,e,n,r,i,s){return El(t)&&El(e)&&(s.set(e,t),so(t,e,o,As,s),s["delete"](e)),t}function Ps(t){return Pl(t)?o:t}function Rs(t,e,n,r,i,s){var a=n&v,u=t.length,c=e.length;if(u!=c&&!(a&&c>u))return!1;var l=s.get(t),h=s.get(e);if(l&&h)return l==e&&h==t;var f=-1,p=!0,d=n&y?new Hr:o;s.set(t,e),s.set(e,t);while(++f<u){var g=t[f],m=e[f];if(r)var _=a?r(m,g,f,e,t,s):r(g,m,f,t,e,s);if(_!==o){if(_)continue;p=!1;break}if(d){if(!An(e,(function(t,e){if(!$n(d,e)&&(g===t||i(g,t,n,r,s)))return d.push(e)}))){p=!1;break}}else if(g!==m&&!i(g,m,n,r,s)){p=!1;break}}return s["delete"](t),s["delete"](e),p}function Ls(t,e,n,r,i,o,s){switch(n){case ft:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ht:return!(t.byteLength!=e.byteLength||!o(new be(t),new be(e)));case K:case H:case Z:return nl(+t,+e);case X:return t.name==e.name&&t.message==e.message;case it:case st:return t==e+"";case J:var a=ar;case ot:var u=r&v;if(a||(a=lr),t.size!=e.size&&!u)return!1;var c=s.get(t);if(c)return c==e;r|=y,s.set(t,e);var l=Rs(a(t),a(e),r,i,o,s);return s["delete"](t),l;case at:if(yr)return yr.call(t)==yr.call(e)}return!1}function js(t,e,n,r,i,s){var a=n&v,u=Ds(t),c=u.length,l=Ds(e),h=l.length;if(c!=h&&!a)return!1;var f=c;while(f--){var p=u[f];if(!(a?p in e:he.call(e,p)))return!1}var d=s.get(t),g=s.get(e);if(d&&g)return d==e&&g==t;var y=!0;s.set(t,e),s.set(e,t);var m=a;while(++f<c){p=u[f];var _=t[p],b=e[p];if(r)var w=a?r(b,_,p,e,t,s):r(_,b,p,t,e,s);if(!(w===o?_===b||i(_,b,n,r,s):w)){y=!1;break}m||(m="constructor"==p)}if(y&&!m){var E=t.constructor,x=e.constructor;E==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof E&&E instanceof E&&"function"==typeof x&&x instanceof x||(y=!1)}return s["delete"](t),s["delete"](e),y}function Ms(t){return Ia(ma(t,o,Ka),t+"")}function Ds(t){return Ri(t,bh,Hs)}function Fs(t){return Ri(t,wh,Ys)}var qs=un?function(t){return un.get(t)}:Df;function Us(t){var e=t.name+"",n=cn[e],r=he.call(cn,e)?n.length:0;while(r--){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Bs(t){var e=he.call(br,"placeholder")?br:t;return e.placeholder}function Vs(){var t=br.iteratee||kf;return t=t===kf?Zi:t,arguments.length?t(arguments[0],arguments[1]):t}function Gs(t,e){var n=t.__data__;return aa(e)?n["string"==typeof e?"string":"hash"]:n.map}function zs(t){var e=bh(t),n=e.length;while(n--){var r=e[n],i=t[r];e[n]=[r,i,fa(i)]}return e}function Ws(t,e){var n=rr(t,e);return Xi(n)?n:o}function Ks(t){var e=he.call(t,Te),n=t[Te];try{t[Te]=o;var r=!0}catch(s){}var i=de.call(t);return r&&(e?t[Te]=n:delete t[Te]),i}var Hs=je?function(t){return null==t?[]:(t=ne(t),In(je(t),(function(e){return Ie.call(t,e)})))}:Kf,Ys=je?function(t){var e=[];while(t)Tn(e,Hs(t)),t=Ee(t);return e}:Kf,Xs=Li;function $s(t,e,n){var r=-1,i=n.length;while(++r<i){var o=n[r],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=Be(e,t+s);break;case"takeRight":t=Ue(t,e-s);break}}return{start:t,end:e}}function Qs(t){var e=t.match(Bt);return e?e[1].split(Vt):[]}function Js(t,e,n){e=Vo(e,t);var r=-1,i=e.length,o=!1;while(++r<i){var s=Na(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:(i=null==t?0:t.length,!!i&&wl(i)&&ia(s,i)&&(sl(t)||ol(t)))}function Zs(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&he.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function ta(t){return"function"!=typeof t.constructor||ha(t)?{}:Er(Ee(t))}function ea(t,e,n){var r=t.constructor;switch(e){case ht:return Ho(t);case K:case H:return new r(+t);case ft:return Yo(t,n);case pt:case dt:case gt:case vt:case yt:case mt:case _t:case bt:case wt:return Qo(t,n);case J:return new r;case Z:case st:return new r(t);case it:return Xo(t);case ot:return new r;case at:return $o(t)}}function na(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Ut,"{\n/* [wrapped with "+e+"] */\n")}function ra(t){return sl(t)||ol(t)||!!(Se&&t&&t[Se])}function ia(t,e){var n=typeof t;return e=null==e?M:e,!!e&&("number"==n||"symbol"!=n&&Qt.test(t))&&t>-1&&t%1==0&&t<e}function oa(t,e,n){if(!El(n))return!1;var r=typeof e;return!!("number"==r?ul(n)&&ia(e,n.length):"string"==r&&e in n)&&nl(n[e],t)}function sa(t,e){if(sl(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Dl(t))||(Rt.test(t)||!Pt.test(t)||null!=e&&t in ne(e))}function aa(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function ua(t){var e=Us(t),n=br[e];if("function"!=typeof n||!(e in Or.prototype))return!1;if(t===n)return!0;var r=qs(n);return!!r&&t===r[0]}function ca(t){return!!pe&&pe in t}(Je&&Xs(new Je(new ArrayBuffer(1)))!=ft||Ze&&Xs(new Ze)!=J||tn&&Xs(tn.resolve())!=nt||en&&Xs(new en)!=ot||on&&Xs(new on)!=ct)&&(Xs=function(t){var e=Li(t),n=e==et?t.constructor:o,r=n?ka(n):"";if(r)switch(r){case hn:return ft;case fn:return J;case Pn:return nt;case Rn:return ot;case Vn:return ct}return e});var la=ce?_l:Hf;function ha(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||ue;return t===n}function fa(t){return t===t&&!El(t)}function pa(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==o||t in ne(n)))}}function da(t){var e=Fc(t,(function(t){return n.size===h&&n.clear(),t})),n=e.cache;return e}function ga(t,e){var n=t[1],r=e[1],i=n|r,o=i<(m|_|O),s=r==O&&n==w||r==O&&n==S&&t[7].length<=e[8]||r==(O|S)&&e[7].length<=e[8]&&n==w;if(!o&&!s)return t;r&m&&(t[2]=e[2],i|=n&m?0:b);var a=e[3];if(a){var u=t[3];t[3]=u?ts(u,a,e[4]):a,t[4]=u?cr(t[3],f):e[4]}return a=e[5],a&&(u=t[5],t[5]=u?es(u,a,e[6]):a,t[6]=u?cr(t[5],f):e[6]),a=e[7],a&&(t[7]=a),r&O&&(t[8]=null==t[8]?e[8]:Be(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function va(t){var e=[];if(null!=t)for(var n in ne(t))e.push(n);return e}function ya(t){return de.call(t)}function ma(t,e,r){return e=Ue(e===o?t.length-1:e,0),function(){var i=arguments,o=-1,s=Ue(i.length-e,0),a=n(s);while(++o<s)a[o]=i[e+o];o=-1;var u=n(e+1);while(++o<e)u[o]=i[o];return u[e]=r(a),_n(t,this,u)}}function _a(t,e){return e.length<2?t:Pi(t,So(e,0,-1))}function ba(t,e){var n=t.length,r=Be(e.length,n),i=ns(t);while(r--){var s=e[r];t[r]=ia(s,n)?i[s]:o}return t}function wa(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}var Ea=Sa(xo),xa=Pe||function(t,e){return an.setTimeout(t,e)},Ia=Sa(Io);function Oa(t,e,n){var r=e+"";return Ia(t,na(r,Aa(Qs(r),n)))}function Sa(t){var e=0,n=0;return function(){var r=ze(),i=A-(r-n);if(n=r,i>0){if(++e>=k)return arguments[0]}else e=0;return t.apply(o,arguments)}}function Ca(t,e){var n=-1,r=t.length,i=r-1;e=e===o?r:e;while(++n<e){var s=vo(n,i),a=t[s];t[s]=t[n],t[n]=a}return t.length=e,t}var Ta=da((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Lt,(function(t,n,r,i){e.push(r?i.replace(zt,"$1"):n||t)})),e}));function Na(t){if("string"==typeof t||Dl(t))return t;var e=t+"";return"0"==e&&1/t==-j?"-0":e}function ka(t){if(null!=t){try{return le.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Aa(t,e){return wn(V,(function(n){var r="_."+n[0];e&n[1]&&!On(t,r)&&t.push(r)})),t.sort()}function Pa(t){if(t instanceof Or)return t.clone();var e=new Ir(t.__wrapped__,t.__chain__);return e.__actions__=ns(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function Ra(t,e,r){e=(r?oa(t,e,r):e===o)?1:Ue(Kl(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];var s=0,a=0,u=n(Re(i/e));while(s<i)u[a++]=So(t,s,s+=e);return u}function La(t){var e=-1,n=null==t?0:t.length,r=0,i=[];while(++e<n){var o=t[e];o&&(i[r++]=o)}return i}function ja(){var t=arguments.length;if(!t)return[];var e=n(t-1),r=arguments[0],i=t;while(i--)e[i-1]=arguments[i];return Tn(sl(r)?ns(r):[r],Si(e,1))}var Ma=_o((function(t,e){return cl(t)?_i(t,Si(e,1,cl,!0)):[]})),Da=_o((function(t,e){var n=ru(e);return cl(n)&&(n=o),cl(t)?_i(t,Si(e,1,cl,!0),Vs(n,2)):[]})),Fa=_o((function(t,e){var n=ru(e);return cl(n)&&(n=o),cl(t)?_i(t,Si(e,1,cl,!0),o,n):[]}));function qa(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===o?1:Kl(e),So(t,e<0?0:e,r)):[]}function Ua(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===o?1:Kl(e),e=r-e,So(t,0,e<0?0:e)):[]}function Ba(t,e){return t&&t.length?Mo(t,Vs(e,3),!0,!0):[]}function Va(t,e){return t&&t.length?Mo(t,Vs(e,3),!0):[]}function Ga(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&oa(t,e,n)&&(n=0,r=i),Ii(t,e,n,r)):[]}function za(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Kl(n);return i<0&&(i=Ue(r+i,0)),Mn(t,Vs(e,3),i)}function Wa(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==o&&(i=Kl(n),i=n<0?Ue(r+i,0):Be(i,r-1)),Mn(t,Vs(e,3),i,!0)}function Ka(t){var e=null==t?0:t.length;return e?Si(t,1):[]}function Ha(t){var e=null==t?0:t.length;return e?Si(t,j):[]}function Ya(t,e){var n=null==t?0:t.length;return n?(e=e===o?1:Kl(e),Si(t,e)):[]}function Xa(t){var e=-1,n=null==t?0:t.length,r={};while(++e<n){var i=t[e];r[i[0]]=i[1]}return r}function $a(t){return t&&t.length?t[0]:o}function Qa(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Kl(n);return i<0&&(i=Ue(r+i,0)),Dn(t,e,i)}function Ja(t){var e=null==t?0:t.length;return e?So(t,0,-1):[]}var Za=_o((function(t){var e=Cn(t,Uo);return e.length&&e[0]===t[0]?qi(e):[]})),tu=_o((function(t){var e=ru(t),n=Cn(t,Uo);return e===ru(n)?e=o:n.pop(),n.length&&n[0]===t[0]?qi(n,Vs(e,2)):[]})),eu=_o((function(t){var e=ru(t),n=Cn(t,Uo);return e="function"==typeof e?e:o,e&&n.pop(),n.length&&n[0]===t[0]?qi(n,o,e):[]}));function nu(t,e){return null==t?"":Fe.call(t,e)}function ru(t){var e=null==t?0:t.length;return e?t[e-1]:o}function iu(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==o&&(i=Kl(n),i=i<0?Ue(r+i,0):Be(i,r-1)),e===e?pr(t,e,i):Mn(t,qn,i,!0)}function ou(t,e){return t&&t.length?uo(t,Kl(e)):o}var su=_o(au);function au(t,e){return t&&t.length&&e&&e.length?po(t,e):t}function uu(t,e,n){return t&&t.length&&e&&e.length?po(t,e,Vs(n,2)):t}function cu(t,e,n){return t&&t.length&&e&&e.length?po(t,e,o,n):t}var lu=Ms((function(t,e){var n=null==t?0:t.length,r=pi(t,e);return go(t,Cn(e,(function(t){return ia(t,n)?+t:t})).sort(Jo)),r}));function hu(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;e=Vs(e,3);while(++r<o){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}return go(t,i),n}function fu(t){return null==t?t:He.call(t)}function pu(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&oa(t,e,n)?(e=0,n=r):(e=null==e?0:Kl(e),n=n===o?r:Kl(n)),So(t,e,n)):[]}function du(t,e){return To(t,e)}function gu(t,e,n){return No(t,e,Vs(n,2))}function vu(t,e){var n=null==t?0:t.length;if(n){var r=To(t,e);if(r<n&&nl(t[r],e))return r}return-1}function yu(t,e){return To(t,e,!0)}function mu(t,e,n){return No(t,e,Vs(n,2),!0)}function _u(t,e){var n=null==t?0:t.length;if(n){var r=To(t,e,!0)-1;if(nl(t[r],e))return r}return-1}function bu(t){return t&&t.length?ko(t):[]}function wu(t,e){return t&&t.length?ko(t,Vs(e,2)):[]}function Eu(t){var e=null==t?0:t.length;return e?So(t,1,e):[]}function xu(t,e,n){return t&&t.length?(e=n||e===o?1:Kl(e),So(t,0,e<0?0:e)):[]}function Iu(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===o?1:Kl(e),e=r-e,So(t,e<0?0:e,r)):[]}function Ou(t,e){return t&&t.length?Mo(t,Vs(e,3),!1,!0):[]}function Su(t,e){return t&&t.length?Mo(t,Vs(e,3)):[]}var Cu=_o((function(t){return Ro(Si(t,1,cl,!0))})),Tu=_o((function(t){var e=ru(t);return cl(e)&&(e=o),Ro(Si(t,1,cl,!0),Vs(e,2))})),Nu=_o((function(t){var e=ru(t);return e="function"==typeof e?e:o,Ro(Si(t,1,cl,!0),o,e)}));function ku(t){return t&&t.length?Ro(t):[]}function Au(t,e){return t&&t.length?Ro(t,Vs(e,2)):[]}function Pu(t,e){return e="function"==typeof e?e:o,t&&t.length?Ro(t,o,e):[]}function Ru(t){if(!t||!t.length)return[];var e=0;return t=In(t,(function(t){if(cl(t))return e=Ue(t.length,e),!0})),Kn(e,(function(e){return Cn(t,Bn(e))}))}function Lu(t,e){if(!t||!t.length)return[];var n=Ru(t);return null==e?n:Cn(n,(function(t){return _n(e,o,t)}))}var ju=_o((function(t,e){return cl(t)?_i(t,e):[]})),Mu=_o((function(t){return Fo(In(t,cl))})),Du=_o((function(t){var e=ru(t);return cl(e)&&(e=o),Fo(In(t,cl),Vs(e,2))})),Fu=_o((function(t){var e=ru(t);return e="function"==typeof e?e:o,Fo(In(t,cl),o,e)})),qu=_o(Ru);function Uu(t,e){return qo(t||[],e||[],ai)}function Bu(t,e){return qo(t||[],e||[],Eo)}var Vu=_o((function(t){var e=t.length,n=e>1?t[e-1]:o;return n="function"==typeof n?(t.pop(),n):o,Lu(t,n)}));function Gu(t){var e=br(t);return e.__chain__=!0,e}function zu(t,e){return e(t),t}function Wu(t,e){return e(t)}var Ku=Ms((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return pi(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Or&&ia(n)?(r=r.slice(n,+n+(e?1:0)),r.__actions__.push({func:Wu,args:[i],thisArg:o}),new Ir(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(o),t}))):this.thru(i)}));function Hu(){return Gu(this)}function Yu(){return new Ir(this.value(),this.__chain__)}function Xu(){this.__values__===o&&(this.__values__=zl(this.value()));var t=this.__index__>=this.__values__.length,e=t?o:this.__values__[this.__index__++];return{done:t,value:e}}function $u(){return this}function Qu(t){var e,n=this;while(n instanceof xr){var r=Pa(n);r.__index__=0,r.__values__=o,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e}function Ju(){var t=this.__wrapped__;if(t instanceof Or){var e=t;return this.__actions__.length&&(e=new Or(this)),e=e.reverse(),e.__actions__.push({func:Wu,args:[fu],thisArg:o}),new Ir(e,this.__chain__)}return this.thru(fu)}function Zu(){return Do(this.__wrapped__,this.__actions__)}var tc=ss((function(t,e,n){he.call(t,n)?++t[n]:fi(t,n,1)}));function ec(t,e,n){var r=sl(t)?xn:Ei;return n&&oa(t,e,n)&&(e=o),r(t,Vs(e,3))}function nc(t,e){var n=sl(t)?In:Oi;return n(t,Vs(e,3))}var rc=gs(za),ic=gs(Wa);function oc(t,e){return Si(dc(t,e),1)}function sc(t,e){return Si(dc(t,e),j)}function ac(t,e,n){return n=n===o?1:Kl(n),Si(dc(t,e),n)}function uc(t,e){var n=sl(t)?wn:bi;return n(t,Vs(e,3))}function cc(t,e){var n=sl(t)?En:wi;return n(t,Vs(e,3))}var lc=ss((function(t,e,n){he.call(t,n)?t[n].push(e):fi(t,n,[e])}));function hc(t,e,n,r){t=ul(t)?t:qh(t),n=n&&!r?Kl(n):0;var i=t.length;return n<0&&(n=Ue(i+n,0)),Ml(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Dn(t,e,n)>-1}var fc=_o((function(t,e,r){var i=-1,o="function"==typeof e,s=ul(t)?n(t.length):[];return bi(t,(function(t){s[++i]=o?_n(e,t,r):Bi(t,e,r)})),s})),pc=ss((function(t,e,n){fi(t,n,e)}));function dc(t,e){var n=sl(t)?Cn:ro;return n(t,Vs(e,3))}function gc(t,e,n,r){return null==t?[]:(sl(e)||(e=null==e?[]:[e]),n=r?o:n,sl(n)||(n=null==n?[]:[n]),co(t,e,n))}var vc=ss((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));function yc(t,e,n){var r=sl(t)?Nn:Gn,i=arguments.length<3;return r(t,Vs(e,4),n,i,bi)}function mc(t,e,n){var r=sl(t)?kn:Gn,i=arguments.length<3;return r(t,Vs(e,4),n,i,wi)}function _c(t,e){var n=sl(t)?In:Oi;return n(t,qc(Vs(e,3)))}function bc(t){var e=sl(t)?ri:bo;return e(t)}function wc(t,e,n){e=(n?oa(t,e,n):e===o)?1:Kl(e);var r=sl(t)?ii:wo;return r(t,e)}function Ec(t){var e=sl(t)?oi:Oo;return e(t)}function xc(t){if(null==t)return 0;if(ul(t))return Ml(t)?dr(t):t.length;var e=Xs(t);return e==J||e==ot?t.size:to(t).length}function Ic(t,e,n){var r=sl(t)?An:Co;return n&&oa(t,e,n)&&(e=o),r(t,Vs(e,3))}var Oc=_o((function(t,e){if(null==t)return[];var n=e.length;return n>1&&oa(t,e[0],e[1])?e=[]:n>2&&oa(e[0],e[1],e[2])&&(e=[e[0]]),co(t,Si(e,1),[])})),Sc=Ae||function(){return an.Date.now()};function Cc(t,e){if("function"!=typeof e)throw new oe(c);return t=Kl(t),function(){if(--t<1)return e.apply(this,arguments)}}function Tc(t,e,n){return e=n?o:e,e=t&&null==e?t.length:e,Ns(t,O,o,o,o,o,e)}function Nc(t,e){var n;if("function"!=typeof e)throw new oe(c);return t=Kl(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=o),n}}var kc=_o((function(t,e,n){var r=m;if(n.length){var i=cr(n,Bs(kc));r|=x}return Ns(t,r,e,n,i)})),Ac=_o((function(t,e,n){var r=m|_;if(n.length){var i=cr(n,Bs(Ac));r|=x}return Ns(e,r,t,n,i)}));function Pc(t,e,n){e=n?o:e;var r=Ns(t,w,o,o,o,o,o,e);return r.placeholder=Pc.placeholder,r}function Rc(t,e,n){e=n?o:e;var r=Ns(t,E,o,o,o,o,o,e);return r.placeholder=Rc.placeholder,r}function Lc(t,e,n){var r,i,s,a,u,l,h=0,f=!1,p=!1,d=!0;if("function"!=typeof t)throw new oe(c);function g(e){var n=r,s=i;return r=i=o,h=e,a=t.apply(s,n),a}function v(t){return h=t,u=xa(_,e),f?g(t):a}function y(t){var n=t-l,r=t-h,i=e-n;return p?Be(i,s-r):i}function m(t){var n=t-l,r=t-h;return l===o||n>=e||n<0||p&&r>=s}function _(){var t=Sc();if(m(t))return b(t);u=xa(_,y(t))}function b(t){return u=o,d&&r?g(t):(r=i=o,a)}function w(){u!==o&&Wo(u),h=0,r=l=i=u=o}function E(){return u===o?a:b(Sc())}function x(){var t=Sc(),n=m(t);if(r=arguments,i=this,l=t,n){if(u===o)return v(l);if(p)return Wo(u),u=xa(_,e),g(l)}return u===o&&(u=xa(_,e)),a}return e=Yl(e)||0,El(n)&&(f=!!n.leading,p="maxWait"in n,s=p?Ue(Yl(n.maxWait)||0,e):s,d="trailing"in n?!!n.trailing:d),x.cancel=w,x.flush=E,x}var jc=_o((function(t,e){return mi(t,1,e)})),Mc=_o((function(t,e,n){return mi(t,Yl(e)||0,n)}));function Dc(t){return Ns(t,C)}function Fc(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new oe(c);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Fc.Cache||Br),n}function qc(t){if("function"!=typeof t)throw new oe(c);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Uc(t){return Nc(2,t)}Fc.Cache=Br;var Bc=Go((function(t,e){e=1==e.length&&sl(e[0])?Cn(e[0],Yn(Vs())):Cn(Si(e,1),Yn(Vs()));var n=e.length;return _o((function(r){var i=-1,o=Be(r.length,n);while(++i<o)r[i]=e[i].call(this,r[i]);return _n(t,this,r)}))})),Vc=_o((function(t,e){var n=cr(e,Bs(Vc));return Ns(t,x,o,e,n)})),Gc=_o((function(t,e){var n=cr(e,Bs(Gc));return Ns(t,I,o,e,n)})),zc=Ms((function(t,e){return Ns(t,S,o,o,o,e)}));function Wc(t,e){if("function"!=typeof t)throw new oe(c);return e=e===o?e:Kl(e),_o(t,e)}function Kc(t,e){if("function"!=typeof t)throw new oe(c);return e=null==e?0:Ue(Kl(e),0),_o((function(n){var r=n[e],i=zo(n,0,e);return r&&Tn(i,r),_n(t,this,i)}))}function Hc(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new oe(c);return El(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Lc(t,e,{leading:r,maxWait:e,trailing:i})}function Yc(t){return Tc(t,1)}function Xc(t,e){return Vc(Bo(e),t)}function $c(){if(!arguments.length)return[];var t=arguments[0];return sl(t)?t:[t]}function Qc(t){return gi(t,g)}function Jc(t,e){return e="function"==typeof e?e:o,gi(t,g,e)}function Zc(t){return gi(t,p|g)}function tl(t,e){return e="function"==typeof e?e:o,gi(t,p|g,e)}function el(t,e){return null==e||yi(t,e,bh(e))}function nl(t,e){return t===e||t!==t&&e!==e}var rl=Is(ji),il=Is((function(t,e){return t>=e})),ol=Vi(function(){return arguments}())?Vi:function(t){return xl(t)&&he.call(t,"callee")&&!Ie.call(t,"callee")},sl=n.isArray,al=pn?Yn(pn):Gi;function ul(t){return null!=t&&wl(t.length)&&!_l(t)}function cl(t){return xl(t)&&ul(t)}function ll(t){return!0===t||!1===t||xl(t)&&Li(t)==K}var hl=Me||Hf,fl=dn?Yn(dn):zi;function pl(t){return xl(t)&&1===t.nodeType&&!Pl(t)}function dl(t){if(null==t)return!0;if(ul(t)&&(sl(t)||"string"==typeof t||"function"==typeof t.splice||hl(t)||Fl(t)||ol(t)))return!t.length;var e=Xs(t);if(e==J||e==ot)return!t.size;if(ha(t))return!to(t).length;for(var n in t)if(he.call(t,n))return!1;return!0}function gl(t,e){return Wi(t,e)}function vl(t,e,n){n="function"==typeof n?n:o;var r=n?n(t,e):o;return r===o?Wi(t,e,o,n):!!r}function yl(t){if(!xl(t))return!1;var e=Li(t);return e==X||e==Y||"string"==typeof t.message&&"string"==typeof t.name&&!Pl(t)}function ml(t){return"number"==typeof t&&De(t)}function _l(t){if(!El(t))return!1;var e=Li(t);return e==$||e==Q||e==W||e==rt}function bl(t){return"number"==typeof t&&t==Kl(t)}function wl(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=M}function El(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function xl(t){return null!=t&&"object"==typeof t}var Il=gn?Yn(gn):Hi;function Ol(t,e){return t===e||Yi(t,e,zs(e))}function Sl(t,e,n){return n="function"==typeof n?n:o,Yi(t,e,zs(e),n)}function Cl(t){return Al(t)&&t!=+t}function Tl(t){if(la(t))throw new i(u);return Xi(t)}function Nl(t){return null===t}function kl(t){return null==t}function Al(t){return"number"==typeof t||xl(t)&&Li(t)==Z}function Pl(t){if(!xl(t)||Li(t)!=et)return!1;var e=Ee(t);if(null===e)return!0;var n=he.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&le.call(n)==ge}var Rl=vn?Yn(vn):$i;function Ll(t){return bl(t)&&t>=-M&&t<=M}var jl=yn?Yn(yn):Qi;function Ml(t){return"string"==typeof t||!sl(t)&&xl(t)&&Li(t)==st}function Dl(t){return"symbol"==typeof t||xl(t)&&Li(t)==at}var Fl=mn?Yn(mn):Ji;function ql(t){return t===o}function Ul(t){return xl(t)&&Xs(t)==ct}function Bl(t){return xl(t)&&Li(t)==lt}var Vl=Is(no),Gl=Is((function(t,e){return t<=e}));function zl(t){if(!t)return[];if(ul(t))return Ml(t)?gr(t):ns(t);if(Ce&&t[Ce])return sr(t[Ce]());var e=Xs(t),n=e==J?ar:e==ot?lr:qh;return n(t)}function Wl(t){if(!t)return 0===t?t:0;if(t=Yl(t),t===j||t===-j){var e=t<0?-1:1;return e*D}return t===t?t:0}function Kl(t){var e=Wl(t),n=e%1;return e===e?n?e-n:e:0}function Hl(t){return t?di(Kl(t),0,q):0}function Yl(t){if("number"==typeof t)return t;if(Dl(t))return F;if(El(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=El(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Dt,"");var n=Yt.test(t);return n||$t.test(t)?rn(t.slice(2),n?2:8):Ht.test(t)?F:+t}function Xl(t){return rs(t,wh(t))}function $l(t){return t?di(Kl(t),-M,M):0===t?t:0}function Ql(t){return null==t?"":Po(t)}var Jl=as((function(t,e){if(ha(e)||ul(e))rs(e,bh(e),t);else for(var n in e)he.call(e,n)&&ai(t,n,e[n])})),Zl=as((function(t,e){rs(e,wh(e),t)})),th=as((function(t,e,n,r){rs(e,wh(e),t,r)})),eh=as((function(t,e,n,r){rs(e,bh(e),t,r)})),nh=Ms(pi);function rh(t,e){var n=Er(t);return null==e?n:li(n,e)}var ih=_o((function(t,e){t=ne(t);var n=-1,r=e.length,i=r>2?e[2]:o;i&&oa(e[0],e[1],i)&&(r=1);while(++n<r){var s=e[n],a=wh(s),u=-1,c=a.length;while(++u<c){var l=a[u],h=t[l];(h===o||nl(h,ue[l])&&!he.call(t,l))&&(t[l]=s[l])}}return t})),oh=_o((function(t){return t.push(o,As),_n(Oh,o,t)}));function sh(t,e){return jn(t,Vs(e,3),Ni)}function ah(t,e){return jn(t,Vs(e,3),ki)}function uh(t,e){return null==t?t:Ci(t,Vs(e,3),wh)}function ch(t,e){return null==t?t:Ti(t,Vs(e,3),wh)}function lh(t,e){return t&&Ni(t,Vs(e,3))}function hh(t,e){return t&&ki(t,Vs(e,3))}function fh(t){return null==t?[]:Ai(t,bh(t))}function ph(t){return null==t?[]:Ai(t,wh(t))}function dh(t,e,n){var r=null==t?o:Pi(t,e);return r===o?n:r}function gh(t,e){return null!=t&&Js(t,e,Mi)}function vh(t,e){return null!=t&&Js(t,e,Di)}var yh=ms((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=de.call(e)),t[e]=n}),Of(Nf)),mh=ms((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=de.call(e)),he.call(t,e)?t[e].push(n):t[e]=[n]}),Vs),_h=_o(Bi);function bh(t){return ul(t)?ni(t):to(t)}function wh(t){return ul(t)?ni(t,!0):eo(t)}function Eh(t,e){var n={};return e=Vs(e,3),Ni(t,(function(t,r,i){fi(n,e(t,r,i),t)})),n}function xh(t,e){var n={};return e=Vs(e,3),Ni(t,(function(t,r,i){fi(n,r,e(t,r,i))})),n}var Ih=as((function(t,e,n){so(t,e,n)})),Oh=as((function(t,e,n,r){so(t,e,n,r)})),Sh=Ms((function(t,e){var n={};if(null==t)return n;var r=!1;e=Cn(e,(function(e){return e=Vo(e,t),r||(r=e.length>1),e})),rs(t,Fs(t),n),r&&(n=gi(n,p|d|g,Ps));var i=e.length;while(i--)Lo(n,e[i]);return n}));function Ch(t,e){return Nh(t,qc(Vs(e)))}var Th=Ms((function(t,e){return null==t?{}:lo(t,e)}));function Nh(t,e){if(null==t)return{};var n=Cn(Fs(t),(function(t){return[t]}));return e=Vs(e),ho(t,n,(function(t,n){return e(t,n[0])}))}function kh(t,e,n){e=Vo(e,t);var r=-1,i=e.length;i||(i=1,t=o);while(++r<i){var s=null==t?o:t[Na(e[r])];s===o&&(r=i,s=n),t=_l(s)?s.call(t):s}return t}function Ah(t,e,n){return null==t?t:Eo(t,e,n)}function Ph(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:Eo(t,e,n,r)}var Rh=Ts(bh),Lh=Ts(wh);function jh(t,e,n){var r=sl(t),i=r||hl(t)||Fl(t);if(e=Vs(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:El(t)&&_l(o)?Er(Ee(t)):{}}return(i?wn:Ni)(t,(function(t,r,i){return e(n,t,r,i)})),n}function Mh(t,e){return null==t||Lo(t,e)}function Dh(t,e,n){return null==t?t:jo(t,e,Bo(n))}function Fh(t,e,n,r){return r="function"==typeof r?r:o,null==t?t:jo(t,e,Bo(n),r)}function qh(t){return null==t?[]:Xn(t,bh(t))}function Uh(t){return null==t?[]:Xn(t,wh(t))}function Bh(t,e,n){return n===o&&(n=e,e=o),n!==o&&(n=Yl(n),n=n===n?n:0),e!==o&&(e=Yl(e),e=e===e?e:0),di(Yl(t),e,n)}function Vh(t,e,n){return e=Wl(e),n===o?(n=e,e=0):n=Wl(n),t=Yl(t),Fi(t,e,n)}function Gh(t,e,n){if(n&&"boolean"!=typeof n&&oa(t,e,n)&&(e=n=o),n===o&&("boolean"==typeof e?(n=e,e=o):"boolean"==typeof t&&(n=t,t=o)),t===o&&e===o?(t=0,e=1):(t=Wl(t),e===o?(e=t,t=0):e=Wl(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=Ke();return Be(t+i*(e-t+nn("1e-"+((i+"").length-1))),e)}return vo(t,e)}var zh=fs((function(t,e,n){return e=e.toLowerCase(),t+(n?Wh(e):e)}));function Wh(t){return _f(Ql(t).toLowerCase())}function Kh(t){return t=Ql(t),t&&t.replace(Jt,tr).replace(Ge,"")}function Hh(t,e,n){t=Ql(t),e=Po(e);var r=t.length;n=n===o?r:di(Kl(n),0,r);var i=n;return n-=e.length,n>=0&&t.slice(n,i)==e}function Yh(t){return t=Ql(t),t&&Tt.test(t)?t.replace(St,er):t}function Xh(t){return t=Ql(t),t&&Mt.test(t)?t.replace(jt,"\\$&"):t}var $h=fs((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Qh=fs((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Jh=hs("toLowerCase");function Zh(t,e,n){t=Ql(t),e=Kl(e);var r=e?dr(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return ws(Le(i),n)+t+ws(Re(i),n)}function tf(t,e,n){t=Ql(t),e=Kl(e);var r=e?dr(t):0;return e&&r<e?t+ws(e-r,n):t}function ef(t,e,n){t=Ql(t),e=Kl(e);var r=e?dr(t):0;return e&&r<e?ws(e-r,n)+t:t}function nf(t,e,n){return n||null==e?e=0:e&&(e=+e),We(Ql(t).replace(Ft,""),e||0)}function rf(t,e,n){return e=(n?oa(t,e,n):e===o)?1:Kl(e),mo(Ql(t),e)}function of(){var t=arguments,e=Ql(t[0]);return t.length<3?e:e.replace(t[1],t[2])}var sf=fs((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));function af(t,e,n){return n&&"number"!=typeof n&&oa(t,e,n)&&(e=n=o),n=n===o?q:n>>>0,n?(t=Ql(t),t&&("string"==typeof e||null!=e&&!Rl(e))&&(e=Po(e),!e&&ir(t))?zo(gr(t),0,n):t.split(e,n)):[]}var uf=fs((function(t,e,n){return t+(n?" ":"")+_f(e)}));function cf(t,e,n){return t=Ql(t),n=null==n?0:di(Kl(n),0,t.length),e=Po(e),t.slice(n,n+e.length)==e}function lf(t,e,n){var r=br.templateSettings;n&&oa(t,e,n)&&(e=o),t=Ql(t),e=th({},e,r,ks);var i,s,a=th({},e.imports,r.imports,ks),u=bh(a),c=Xn(a,u),l=0,h=e.interpolate||Zt,f="__p += '",p=re((e.escape||Zt).source+"|"+h.source+"|"+(h===At?Wt:Zt).source+"|"+(e.evaluate||Zt).source+"|$","g"),d="//# sourceURL="+(he.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Xe+"]")+"\n";t.replace(p,(function(e,n,r,o,a,u){return r||(r=o),f+=t.slice(l,u).replace(te,nr),n&&(i=!0,f+="' +\n__e("+n+") +\n'"),a&&(s=!0,f+="';\n"+a+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+e.length,e})),f+="';\n";var g=he.call(e,"variable")&&e.variable;g||(f="with (obj) {\n"+f+"\n}\n"),f=(s?f.replace(Et,""):f).replace(xt,"$1").replace(It,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=wf((function(){return Gt(u,d+"return "+f).apply(o,c)}));if(v.source=f,yl(v))throw v;return v}function hf(t){return Ql(t).toLowerCase()}function ff(t){return Ql(t).toUpperCase()}function pf(t,e,n){if(t=Ql(t),t&&(n||e===o))return t.replace(Dt,"");if(!t||!(e=Po(e)))return t;var r=gr(t),i=gr(e),s=Qn(r,i),a=Jn(r,i)+1;return zo(r,s,a).join("")}function df(t,e,n){if(t=Ql(t),t&&(n||e===o))return t.replace(qt,"");if(!t||!(e=Po(e)))return t;var r=gr(t),i=Jn(r,gr(e))+1;return zo(r,0,i).join("")}function gf(t,e,n){if(t=Ql(t),t&&(n||e===o))return t.replace(Ft,"");if(!t||!(e=Po(e)))return t;var r=gr(t),i=Qn(r,gr(e));return zo(r,i).join("")}function vf(t,e){var n=T,r=N;if(El(e)){var i="separator"in e?e.separator:i;n="length"in e?Kl(e.length):n,r="omission"in e?Po(e.omission):r}t=Ql(t);var s=t.length;if(ir(t)){var a=gr(t);s=a.length}if(n>=s)return t;var u=n-dr(r);if(u<1)return r;var c=a?zo(a,0,u).join(""):t.slice(0,u);if(i===o)return c+r;if(a&&(u+=c.length-u),Rl(i)){if(t.slice(u).search(i)){var l,h=c;i.global||(i=re(i.source,Ql(Kt.exec(i))+"g")),i.lastIndex=0;while(l=i.exec(h))var f=l.index;c=c.slice(0,f===o?u:f)}}else if(t.indexOf(Po(i),u)!=u){var p=c.lastIndexOf(i);p>-1&&(c=c.slice(0,p))}return c+r}function yf(t){return t=Ql(t),t&&Ct.test(t)?t.replace(Ot,vr):t}var mf=fs((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),_f=hs("toUpperCase");function bf(t,e,n){return t=Ql(t),e=n?o:e,e===o?or(t)?_r(t):Ln(t):t.match(e)||[]}var wf=_o((function(t,e){try{return _n(t,o,e)}catch(n){return yl(n)?n:new i(n)}})),Ef=Ms((function(t,e){return wn(e,(function(e){e=Na(e),fi(t,e,kc(t[e],t))})),t}));function xf(t){var e=null==t?0:t.length,n=Vs();return t=e?Cn(t,(function(t){if("function"!=typeof t[1])throw new oe(c);return[n(t[0]),t[1]]})):[],_o((function(n){var r=-1;while(++r<e){var i=t[r];if(_n(i[0],this,n))return _n(i[1],this,n)}}))}function If(t){return vi(gi(t,p))}function Of(t){return function(){return t}}function Sf(t,e){return null==t||t!==t?e:t}var Cf=vs(),Tf=vs(!0);function Nf(t){return t}function kf(t){return Zi("function"==typeof t?t:gi(t,p))}function Af(t){return io(gi(t,p))}function Pf(t,e){return oo(t,gi(e,p))}var Rf=_o((function(t,e){return function(n){return Bi(n,t,e)}})),Lf=_o((function(t,e){return function(n){return Bi(t,n,e)}}));function jf(t,e,n){var r=bh(e),i=Ai(e,r);null!=n||El(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=Ai(e,bh(e)));var o=!(El(n)&&"chain"in n)||!!n.chain,s=_l(t);return wn(i,(function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=ns(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Tn([this.value()],arguments))})})),t}function Mf(){return an._===this&&(an._=ve),this}function Df(){}function Ff(t){return t=Kl(t),_o((function(e){return uo(e,t)}))}var qf=bs(Cn),Uf=bs(xn),Bf=bs(An);function Vf(t){return sa(t)?Bn(Na(t)):fo(t)}function Gf(t){return function(e){return null==t?o:Pi(t,e)}}var zf=xs(),Wf=xs(!0);function Kf(){return[]}function Hf(){return!1}function Yf(){return{}}function Xf(){return""}function $f(){return!0}function Qf(t,e){if(t=Kl(t),t<1||t>M)return[];var n=q,r=Be(t,q);e=Vs(e),t-=q;var i=Kn(r,e);while(++n<t)e(n);return i}function Jf(t){return sl(t)?Cn(t,Na):Dl(t)?[t]:ns(Ta(Ql(t)))}function Zf(t){var e=++fe;return Ql(t)+e}var tp=_s((function(t,e){return t+e}),0),ep=Ss("ceil"),np=_s((function(t,e){return t/e}),1),rp=Ss("floor");function ip(t){return t&&t.length?xi(t,Nf,ji):o}function op(t,e){return t&&t.length?xi(t,Vs(e,2),ji):o}function sp(t){return Un(t,Nf)}function ap(t,e){return Un(t,Vs(e,2))}function up(t){return t&&t.length?xi(t,Nf,no):o}function cp(t,e){return t&&t.length?xi(t,Vs(e,2),no):o}var lp=_s((function(t,e){return t*e}),1),hp=Ss("round"),fp=_s((function(t,e){return t-e}),0);function pp(t){return t&&t.length?Wn(t,Nf):0}function dp(t,e){return t&&t.length?Wn(t,Vs(e,2)):0}return br.after=Cc,br.ary=Tc,br.assign=Jl,br.assignIn=Zl,br.assignInWith=th,br.assignWith=eh,br.at=nh,br.before=Nc,br.bind=kc,br.bindAll=Ef,br.bindKey=Ac,br.castArray=$c,br.chain=Gu,br.chunk=Ra,br.compact=La,br.concat=ja,br.cond=xf,br.conforms=If,br.constant=Of,br.countBy=tc,br.create=rh,br.curry=Pc,br.curryRight=Rc,br.debounce=Lc,br.defaults=ih,br.defaultsDeep=oh,br.defer=jc,br.delay=Mc,br.difference=Ma,br.differenceBy=Da,br.differenceWith=Fa,br.drop=qa,br.dropRight=Ua,br.dropRightWhile=Ba,br.dropWhile=Va,br.fill=Ga,br.filter=nc,br.flatMap=oc,br.flatMapDeep=sc,br.flatMapDepth=ac,br.flatten=Ka,br.flattenDeep=Ha,br.flattenDepth=Ya,br.flip=Dc,br.flow=Cf,br.flowRight=Tf,br.fromPairs=Xa,br.functions=fh,br.functionsIn=ph,br.groupBy=lc,br.initial=Ja,br.intersection=Za,br.intersectionBy=tu,br.intersectionWith=eu,br.invert=yh,br.invertBy=mh,br.invokeMap=fc,br.iteratee=kf,br.keyBy=pc,br.keys=bh,br.keysIn=wh,br.map=dc,br.mapKeys=Eh,br.mapValues=xh,br.matches=Af,br.matchesProperty=Pf,br.memoize=Fc,br.merge=Ih,br.mergeWith=Oh,br.method=Rf,br.methodOf=Lf,br.mixin=jf,br.negate=qc,br.nthArg=Ff,br.omit=Sh,br.omitBy=Ch,br.once=Uc,br.orderBy=gc,br.over=qf,br.overArgs=Bc,br.overEvery=Uf,br.overSome=Bf,br.partial=Vc,br.partialRight=Gc,br.partition=vc,br.pick=Th,br.pickBy=Nh,br.property=Vf,br.propertyOf=Gf,br.pull=su,br.pullAll=au,br.pullAllBy=uu,br.pullAllWith=cu,br.pullAt=lu,br.range=zf,br.rangeRight=Wf,br.rearg=zc,br.reject=_c,br.remove=hu,br.rest=Wc,br.reverse=fu,br.sampleSize=wc,br.set=Ah,br.setWith=Ph,br.shuffle=Ec,br.slice=pu,br.sortBy=Oc,br.sortedUniq=bu,br.sortedUniqBy=wu,br.split=af,br.spread=Kc,br.tail=Eu,br.take=xu,br.takeRight=Iu,br.takeRightWhile=Ou,br.takeWhile=Su,br.tap=zu,br.throttle=Hc,br.thru=Wu,br.toArray=zl,br.toPairs=Rh,br.toPairsIn=Lh,br.toPath=Jf,br.toPlainObject=Xl,br.transform=jh,br.unary=Yc,br.union=Cu,br.unionBy=Tu,br.unionWith=Nu,br.uniq=ku,br.uniqBy=Au,br.uniqWith=Pu,br.unset=Mh,br.unzip=Ru,br.unzipWith=Lu,br.update=Dh,br.updateWith=Fh,br.values=qh,br.valuesIn=Uh,br.without=ju,br.words=bf,br.wrap=Xc,br.xor=Mu,br.xorBy=Du,br.xorWith=Fu,br.zip=qu,br.zipObject=Uu,br.zipObjectDeep=Bu,br.zipWith=Vu,br.entries=Rh,br.entriesIn=Lh,br.extend=Zl,br.extendWith=th,jf(br,br),br.add=tp,br.attempt=wf,br.camelCase=zh,br.capitalize=Wh,br.ceil=ep,br.clamp=Bh,br.clone=Qc,br.cloneDeep=Zc,br.cloneDeepWith=tl,br.cloneWith=Jc,br.conformsTo=el,br.deburr=Kh,br.defaultTo=Sf,br.divide=np,br.endsWith=Hh,br.eq=nl,br.escape=Yh,br.escapeRegExp=Xh,br.every=ec,br.find=rc,br.findIndex=za,br.findKey=sh,br.findLast=ic,br.findLastIndex=Wa,br.findLastKey=ah,br.floor=rp,br.forEach=uc,br.forEachRight=cc,br.forIn=uh,br.forInRight=ch,br.forOwn=lh,br.forOwnRight=hh,br.get=dh,br.gt=rl,br.gte=il,br.has=gh,br.hasIn=vh,br.head=$a,br.identity=Nf,br.includes=hc,br.indexOf=Qa,br.inRange=Vh,br.invoke=_h,br.isArguments=ol,br.isArray=sl,br.isArrayBuffer=al,br.isArrayLike=ul,br.isArrayLikeObject=cl,br.isBoolean=ll,br.isBuffer=hl,br.isDate=fl,br.isElement=pl,br.isEmpty=dl,br.isEqual=gl,br.isEqualWith=vl,br.isError=yl,br.isFinite=ml,br.isFunction=_l,br.isInteger=bl,br.isLength=wl,br.isMap=Il,br.isMatch=Ol,br.isMatchWith=Sl,br.isNaN=Cl,br.isNative=Tl,br.isNil=kl,br.isNull=Nl,br.isNumber=Al,br.isObject=El,br.isObjectLike=xl,br.isPlainObject=Pl,br.isRegExp=Rl,br.isSafeInteger=Ll,br.isSet=jl,br.isString=Ml,br.isSymbol=Dl,br.isTypedArray=Fl,br.isUndefined=ql,br.isWeakMap=Ul,br.isWeakSet=Bl,br.join=nu,br.kebabCase=$h,br.last=ru,br.lastIndexOf=iu,br.lowerCase=Qh,br.lowerFirst=Jh,br.lt=Vl,br.lte=Gl,br.max=ip,br.maxBy=op,br.mean=sp,br.meanBy=ap,br.min=up,br.minBy=cp,br.stubArray=Kf,br.stubFalse=Hf,br.stubObject=Yf,br.stubString=Xf,br.stubTrue=$f,br.multiply=lp,br.nth=ou,br.noConflict=Mf,br.noop=Df,br.now=Sc,br.pad=Zh,br.padEnd=tf,br.padStart=ef,br.parseInt=nf,br.random=Gh,br.reduce=yc,br.reduceRight=mc,br.repeat=rf,br.replace=of,br.result=kh,br.round=hp,br.runInContext=t,br.sample=bc,br.size=xc,br.snakeCase=sf,br.some=Ic,br.sortedIndex=du,br.sortedIndexBy=gu,br.sortedIndexOf=vu,br.sortedLastIndex=yu,br.sortedLastIndexBy=mu,br.sortedLastIndexOf=_u,br.startCase=uf,br.startsWith=cf,br.subtract=fp,br.sum=pp,br.sumBy=dp,br.template=lf,br.times=Qf,br.toFinite=Wl,br.toInteger=Kl,br.toLength=Hl,br.toLower=hf,br.toNumber=Yl,br.toSafeInteger=$l,br.toString=Ql,br.toUpper=ff,br.trim=pf,br.trimEnd=df,br.trimStart=gf,br.truncate=vf,br.unescape=yf,br.uniqueId=Zf,br.upperCase=mf,br.upperFirst=_f,br.each=uc,br.eachRight=cc,br.first=$a,jf(br,function(){var t={};return Ni(br,(function(e,n){he.call(br.prototype,n)||(t[n]=e)})),t}(),{chain:!1}),br.VERSION=s,wn(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){br[t].placeholder=br})),wn(["drop","take"],(function(t,e){Or.prototype[t]=function(n){n=n===o?1:Ue(Kl(n),0);var r=this.__filtered__&&!e?new Or(this):this.clone();return r.__filtered__?r.__takeCount__=Be(n,r.__takeCount__):r.__views__.push({size:Be(n,q),type:t+(r.__dir__<0?"Right":"")}),r},Or.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),wn(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=n==P||n==L;Or.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Vs(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),wn(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Or.prototype[t]=function(){return this[n](1).value()[0]}})),wn(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Or.prototype[t]=function(){return this.__filtered__?new Or(this):this[n](1)}})),Or.prototype.compact=function(){return this.filter(Nf)},Or.prototype.find=function(t){return this.filter(t).head()},Or.prototype.findLast=function(t){return this.reverse().find(t)},Or.prototype.invokeMap=_o((function(t,e){return"function"==typeof t?new Or(this):this.map((function(n){return Bi(n,t,e)}))})),Or.prototype.reject=function(t){return this.filter(qc(Vs(t)))},Or.prototype.slice=function(t,e){t=Kl(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Or(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==o&&(e=Kl(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},Or.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Or.prototype.toArray=function(){return this.take(q)},Ni(Or.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=br[r?"take"+("last"==e?"Right":""):e],s=r||/^find/.test(e);i&&(br.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,u=e instanceof Or,c=a[0],l=u||sl(e),h=function(t){var e=i.apply(br,Tn([t],a));return r&&f?e[0]:e};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var f=this.__chain__,p=!!this.__actions__.length,d=s&&!f,g=u&&!p;if(!s&&l){e=g?e:new Or(this);var v=t.apply(e,a);return v.__actions__.push({func:Wu,args:[h],thisArg:o}),new Ir(v,f)}return d&&g?t.apply(this,a):(v=this.thru(h),d?r?v.value()[0]:v.value():v)})})),wn(["pop","push","shift","sort","splice","unshift"],(function(t){var e=se[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);br.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(sl(i)?i:[],t)}return this[n]((function(n){return e.apply(sl(n)?n:[],t)}))}})),Ni(Or.prototype,(function(t,e){var n=br[e];if(n){var r=n.name+"";he.call(cn,r)||(cn[r]=[]),cn[r].push({name:e,func:n})}})),cn[ys(o,_).name]=[{name:"wrapper",func:o}],Or.prototype.clone=Sr,Or.prototype.reverse=Cr,Or.prototype.value=Tr,br.prototype.at=Ku,br.prototype.chain=Hu,br.prototype.commit=Yu,br.prototype.next=Xu,br.prototype.plant=Qu,br.prototype.reverse=Ju,br.prototype.toJSON=br.prototype.valueOf=br.prototype.value=Zu,br.prototype.first=br.prototype.head,Ce&&(br.prototype[Ce]=$u),br},wr=br();an._=wr,i=function(){return wr}.call(e,n,e,r),i===o||(r.exports=i)}).call(this)}).call(this,n("c8ba"),n("62e4")(t))},"30b5":function(t,e,n){"use strict";var r=n("c532");function i(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(r.isURLSearchParams(e))o=e.toString();else{var s=[];r.forEach(e,(function(t,e){null!==t&&"undefined"!==typeof t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,(function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),s.push(i(e)+"="+i(t))})))})),o=s.join("&")}if(o){var a=t.indexOf("#");-1!==a&&(t=t.slice(0,a)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}},"342f":function(t,e,n){var r=n("d066");t.exports=r("navigator","userAgent")||""},"35a1":function(t,e,n){var r=n("f5df"),i=n("3f8c"),o=n("b622"),s=o("iterator");t.exports=function(t){if(void 0!=t)return t[s]||t["@@iterator"]||i[r(t)]}},"37e8":function(t,e,n){var r=n("83ab"),i=n("9bf2"),o=n("825a"),s=n("df75");t.exports=r?Object.defineProperties:function(t,e){o(t);var n,r=s(e),a=r.length,u=0;while(a>u)i.f(t,n=r[u++],e[n]);return t}},3835:function(t,e,n){"use strict";function r(t){if(Array.isArray(t))return t}n.d(e,"a",(function(){return a}));n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0");function i(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done);r=!0)if(n.push(s.value),e&&n.length===e)break}catch(u){i=!0,o=u}finally{try{r||null==a["return"]||a["return"]()}finally{if(i)throw o}}return n}}var o=n("06c5");function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(t,e){return r(t)||i(t,e)||Object(o["a"])(t,e)||s()}},"387f":function(t,e,n){"use strict";t.exports=function(t,e,n,r,i){return t.config=e,n&&(t.code=n),t.request=r,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},3934:function(t,e,n){"use strict";var r=n("c532");t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=i(window.location.href),function(e){var n=r.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return function(){return!0}}()},"3bbe":function(t,e,n){var r=n("861d");t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},"3ca3":function(t,e,n){"use strict";var r=n("6547").charAt,i=n("69f3"),o=n("7dd0"),s="String Iterator",a=i.set,u=i.getterFor(s);o(String,"String",(function(t){a(this,{type:s,string:String(t),index:0})}),(function(){var t,e=u(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=r(n,i),e.index+=t.length,{value:t,done:!1})}))},"3f8c":function(t,e){t.exports={}},4084:function(t,e,n){"use strict";var r=n("dd76"),i=Object(r["c"])(),o=i,s=n("bb57"),a=n("216d"),u=n("7a23"),c={name:"AutoComplete",inheritAttrs:!1,emits:["update:modelValue","item-select","item-unselect","dropdown-click","clear","complete"],props:{modelValue:null,suggestions:{type:Array,default:null},field:{type:[String,Function],default:null},optionGroupLabel:null,optionGroupChildren:null,scrollHeight:{type:String,default:"200px"},dropdown:{type:Boolean,default:!1},dropdownMode:{type:String,default:"blank"},multiple:{type:Boolean,default:!1},minLength:{type:Number,default:1},delay:{type:Number,default:300},appendTo:{type:String,default:"body"},forceSelection:{type:Boolean,default:!1},completeOnFocus:{type:Boolean,default:!1},inputClass:null,inputStyle:null,class:null,style:null,panelClass:null},timeout:null,outsideClickListener:null,resizeListener:null,scrollHandler:null,overlay:null,data(){return{searching:!1,focused:!1,overlayVisible:!1,inputTextValue:null,highlightItem:null}},watch:{suggestions(){this.searching&&(this.suggestions&&this.suggestions.length?this.showOverlay():this.hideOverlay(),this.searching=!1)}},beforeUnmount(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&(r["f"].clear(this.overlay),this.overlay=null)},updated(){this.overlayVisible&&this.alignOverlay()},methods:{getOptionGroupRenderKey(t){return r["d"].resolveFieldData(t,this.optionGroupLabel)},getOptionGroupLabel(t){return r["d"].resolveFieldData(t,this.optionGroupLabel)},getOptionGroupChildren(t){return r["d"].resolveFieldData(t,this.optionGroupChildren)},onOverlayEnter(t){r["f"].set("overlay",t,this.$primevue.config.zIndex.overlay),this.alignOverlay(),this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener()},onOverlayLeave(){this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),this.overlay=null},onOverlayAfterLeave(t){r["f"].clear(t)},alignOverlay(){let t=this.multiple?this.$refs.multiContainer:this.$refs.input;this.appendDisabled?r["b"].relativePosition(this.overlay,t):(this.overlay.style.minWidth=r["b"].getOuterWidth(t)+"px",r["b"].absolutePosition(this.overlay,t))},bindOutsideClickListener(){this.outsideClickListener||(this.outsideClickListener=t=>{this.overlayVisible&&this.overlay&&this.isOutsideClicked(t)&&this.hideOverlay()},document.addEventListener("click",this.outsideClickListener))},bindScrollListener(){this.scrollHandler||(this.scrollHandler=new r["a"](this.$refs.container,()=>{this.overlayVisible&&this.hideOverlay()})),this.scrollHandler.bindScrollListener()},unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener(){this.resizeListener||(this.resizeListener=()=>{this.overlayVisible&&this.hideOverlay()},window.addEventListener("resize",this.resizeListener))},unbindResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},isOutsideClicked(t){return!this.overlay.contains(t.target)&&!this.isInputClicked(t)&&!this.isDropdownClicked(t)},isInputClicked(t){return this.multiple?t.target===this.$refs.multiContainer||this.$refs.multiContainer.contains(t.target):t.target===this.$refs.input},isDropdownClicked(t){return!!this.$refs.dropdownButton&&(t.target===this.$refs.dropdownButton||this.$refs.dropdownButton.$el.contains(t.target))},unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},selectItem(t,e){if(this.multiple){if(this.$refs.input.value="",this.inputTextValue="",!this.isSelected(e)){let t=this.modelValue?[...this.modelValue,e]:[e];this.$emit("update:modelValue",t)}}else this.$emit("update:modelValue",e);this.$emit("item-select",{originalEvent:t,value:e}),this.focus(),this.hideOverlay()},onMultiContainerClick(t){this.focus(),this.completeOnFocus&&this.search(t,"","click")},removeItem(t,e){let n=this.modelValue[e],r=this.modelValue.filter((t,n)=>e!==n);this.$emit("update:modelValue",r),this.$emit("item-unselect",{originalEvent:t,value:n})},onDropdownClick(t){this.focus();const e=this.$refs.input.value;"blank"===this.dropdownMode?this.search(t,"","dropdown"):"current"===this.dropdownMode&&this.search(t,e,"dropdown"),this.$emit("dropdown-click",{originalEvent:t,query:e})},getItemContent(t){return this.field?r["d"].resolveFieldData(t,this.field):t},showOverlay(){this.overlayVisible=!0},hideOverlay(){this.overlayVisible=!1},focus(){this.$refs.input.focus()},search(t,e,n){void 0!==e&&null!==e&&("input"===n&&0===e.trim().length||(this.searching=!0,this.$emit("complete",{originalEvent:t,query:e})))},onInputClicked(t){this.completeOnFocus&&this.search(t,"","click")},onInput(t){this.inputTextValue=t.target.value,this.timeout&&clearTimeout(this.timeout);let e=t.target.value;this.multiple||this.$emit("update:modelValue",e),0===e.length?(this.hideOverlay(),this.$emit("clear")):e.length>=this.minLength?this.timeout=setTimeout(()=>{this.search(t,e,"input")},this.delay):this.hideOverlay()},onFocus(){this.focused=!0},onBlur(){this.focused=!1},onKeyDown(t){if(this.overlayVisible){let e=r["b"].findSingle(this.overlay,"li.p-highlight");switch(t.which){case 40:if(e){let t=this.findNextItem(e);t&&(r["b"].addClass(t,"p-highlight"),r["b"].removeClass(e,"p-highlight"),r["b"].scrollInView(this.overlay,t))}else e=this.overlay.firstElementChild.firstElementChild,r["b"].hasClass(e,"p-autocomplete-item-group")&&(e=this.findNextItem(e)),e&&r["b"].addClass(e,"p-highlight");t.preventDefault();break;case 38:if(e){let t=this.findPrevItem(e);t&&(r["b"].addClass(t,"p-highlight"),r["b"].removeClass(e,"p-highlight"),r["b"].scrollInView(this.overlay,t))}t.preventDefault();break;case 13:e&&(this.selectHighlightItem(t,e),this.hideOverlay()),t.preventDefault();break;case 27:this.hideOverlay(),t.preventDefault();break;case 9:e&&this.selectHighlightItem(t,e),this.hideOverlay();break}}if(this.multiple)switch(t.which){case 8:if(this.modelValue&&this.modelValue.length&&!this.$refs.input.value){let e=this.modelValue[this.modelValue.length-1],n=this.modelValue.slice(0,-1);this.$emit("update:modelValue",n),this.$emit("item-unselect",{originalEvent:t,value:e})}break}},selectHighlightItem(t,e){if(this.optionGroupLabel){let n=this.suggestions[e.dataset.group];this.selectItem(t,this.getOptionGroupChildren(n)[e.dataset.index])}else this.selectItem(t,this.suggestions[r["b"].index(e)])},findNextItem(t){let e=t.nextElementSibling;return e?r["b"].hasClass(e,"p-autocomplete-item-group")?this.findNextItem(e):e:null},findPrevItem(t){let e=t.previousElementSibling;return e?r["b"].hasClass(e,"p-autocomplete-item-group")?this.findPrevItem(e):e:null},onChange(t){if(this.forceSelection){let e=!1,n=t.target.value.trim();if(this.suggestions)for(let i of this.suggestions){let o=this.field?r["d"].resolveFieldData(i,this.field):i;if(o&&n===o.trim()){e=!0,this.selectItem(t,i);break}}e||(this.$refs.input.value="",this.inputTextValue="",this.$emit("clear"),this.multiple||this.$emit("update:modelValue",null))}},isSelected(t){let e=!1;if(this.modelValue&&this.modelValue.length)for(let n=0;n<this.modelValue.length;n++)if(r["d"].equals(this.modelValue[n],t)){e=!0;break}return e},overlayRef(t){this.overlay=t},onOverlayClick(t){o.emit("overlay-click",{originalEvent:t,target:this.$el})}},computed:{containerClass(){return["p-autocomplete p-component p-inputwrapper",this.class,{"p-autocomplete-dd":this.dropdown,"p-autocomplete-multiple":this.multiple,"p-inputwrapper-filled":this.modelValue||this.inputTextValue&&this.inputTextValue.length,"p-inputwrapper-focus":this.focused}]},inputFieldClass(){return["p-autocomplete-input p-inputtext p-component",this.inputClass,{"p-autocomplete-dd-input":this.dropdown,"p-disabled":this.$attrs.disabled}]},multiContainerClass(){return["p-autocomplete-multiple-container p-component p-inputtext",{"p-disabled":this.$attrs.disabled,"p-focus":this.focused}]},panelStyleClass(){return["p-autocomplete-panel p-component",this.panelClass,{"p-input-filled":"filled"===this.$primevue.config.inputStyle,"p-ripple-disabled":!1===this.$primevue.config.ripple}]},inputValue(){if(this.modelValue){if(this.field&&"object"===typeof this.modelValue){const t=r["d"].resolveFieldData(this.modelValue,this.field);return null!=t?t:this.modelValue}return this.modelValue}return""},listId(){return Object(r["e"])()+"_list"},appendDisabled(){return"self"===this.appendTo},appendTarget(){return this.appendDisabled?null:this.appendTo}},components:{Button:s["a"]},directives:{ripple:a["a"]}};const l={class:"p-autocomplete-token-label"},h={class:"p-autocomplete-input-token"},f={key:2,class:"p-autocomplete-loader pi pi-spinner pi-spin"},p={class:"p-autocomplete-item-group"};function d(t,e,n,r,i,o){const s=Object(u["C"])("Button"),a=Object(u["D"])("ripple");return Object(u["u"])(),Object(u["g"])("span",{ref:"container",class:o.containerClass,"aria-haspopup":"listbox","aria-owns":o.listId,"aria-expanded":i.overlayVisible,style:n.style},[n.multiple?Object(u["h"])("",!0):(Object(u["u"])(),Object(u["g"])("input",Object(u["o"])({key:0,ref:"input",class:o.inputFieldClass,style:n.inputStyle},t.$attrs,{value:o.inputValue,onClick:e[1]||(e[1]=(...t)=>o.onInputClicked&&o.onInputClicked(...t)),onInput:e[2]||(e[2]=(...t)=>o.onInput&&o.onInput(...t)),onFocus:e[3]||(e[3]=(...t)=>o.onFocus&&o.onFocus(...t)),onBlur:e[4]||(e[4]=(...t)=>o.onBlur&&o.onBlur(...t)),onKeydown:e[5]||(e[5]=(...t)=>o.onKeyDown&&o.onKeyDown(...t)),onChange:e[6]||(e[6]=(...t)=>o.onChange&&o.onChange(...t)),type:"text",autoComplete:"off",role:"searchbox","aria-autocomplete":"list","aria-controls":o.listId}),null,16,["value","aria-controls"])),n.multiple?(Object(u["u"])(),Object(u["g"])("ul",{key:1,ref:"multiContainer",class:o.multiContainerClass,onClick:e[12]||(e[12]=(...t)=>o.onMultiContainerClick&&o.onMultiContainerClick(...t))},[(Object(u["u"])(!0),Object(u["g"])(u["a"],null,Object(u["A"])(n.modelValue,(e,n)=>(Object(u["u"])(),Object(u["g"])("li",{key:n,class:"p-autocomplete-token"},[Object(u["B"])(t.$slots,"chip",{value:e},()=>[Object(u["j"])("span",l,Object(u["F"])(o.getItemContent(e)),1)]),Object(u["j"])("span",{class:"p-autocomplete-token-icon pi pi-times-circle",onClick:t=>o.removeItem(t,n)},null,8,["onClick"])]))),128)),Object(u["j"])("li",h,[Object(u["j"])("input",Object(u["o"])({ref:"input",type:"text",autoComplete:"off"},t.$attrs,{onInput:e[7]||(e[7]=(...t)=>o.onInput&&o.onInput(...t)),onFocus:e[8]||(e[8]=(...t)=>o.onFocus&&o.onFocus(...t)),onBlur:e[9]||(e[9]=(...t)=>o.onBlur&&o.onBlur(...t)),onKeydown:e[10]||(e[10]=(...t)=>o.onKeyDown&&o.onKeyDown(...t)),onChange:e[11]||(e[11]=(...t)=>o.onChange&&o.onChange(...t)),role:"searchbox","aria-autocomplete":"list","aria-controls":o.listId}),null,16,["aria-controls"])])],2)):Object(u["h"])("",!0),i.searching?(Object(u["u"])(),Object(u["g"])("i",f)):Object(u["h"])("",!0),n.dropdown?(Object(u["u"])(),Object(u["g"])(s,{key:3,ref:"dropdownButton",type:"button",icon:"pi pi-chevron-down",class:"p-autocomplete-dropdown",disabled:t.$attrs.disabled,onClick:o.onDropdownClick},null,8,["disabled","onClick"])):Object(u["h"])("",!0),(Object(u["u"])(),Object(u["g"])(u["b"],{to:o.appendTarget,disabled:o.appendDisabled},[Object(u["j"])(u["c"],{name:"p-connected-overlay",onEnter:o.onOverlayEnter,onLeave:o.onOverlayLeave,onAfterLeave:o.onOverlayAfterLeave},{default:Object(u["L"])(()=>[i.overlayVisible?(Object(u["u"])(),Object(u["g"])("div",{key:0,ref:o.overlayRef,class:o.panelStyleClass,style:{"max-height":n.scrollHeight},onClick:e[13]||(e[13]=(...t)=>o.onOverlayClick&&o.onOverlayClick(...t))},[Object(u["B"])(t.$slots,"header",{value:n.modelValue,suggestions:n.suggestions}),Object(u["j"])("ul",{id:o.listId,class:"p-autocomplete-items",role:"listbox"},[n.optionGroupLabel?(Object(u["u"])(!0),Object(u["g"])(u["a"],{key:1},Object(u["A"])(n.suggestions,(e,n)=>(Object(u["u"])(),Object(u["g"])(u["a"],{key:o.getOptionGroupRenderKey(e)},[Object(u["j"])("li",p,[Object(u["B"])(t.$slots,"optiongroup",{item:e,index:n},()=>[Object(u["i"])(Object(u["F"])(o.getOptionGroupLabel(e)),1)])]),(Object(u["u"])(!0),Object(u["g"])(u["a"],null,Object(u["A"])(o.getOptionGroupChildren(e),(e,r)=>Object(u["M"])((Object(u["u"])(),Object(u["g"])("li",{class:"p-autocomplete-item",key:r,onClick:t=>o.selectItem(t,e),role:"option","data-group":n,"data-index":r},[Object(u["B"])(t.$slots,"item",{item:e,index:r},()=>[Object(u["i"])(Object(u["F"])(o.getItemContent(e)),1)])],8,["onClick","data-group","data-index"])),[[a]])),128))],64))),128)):(Object(u["u"])(!0),Object(u["g"])(u["a"],{key:0},Object(u["A"])(n.suggestions,(e,n)=>Object(u["M"])((Object(u["u"])(),Object(u["g"])("li",{class:"p-autocomplete-item",key:n,onClick:t=>o.selectItem(t,e),role:"option"},[Object(u["B"])(t.$slots,"item",{item:e,index:n},()=>[Object(u["i"])(Object(u["F"])(o.getItemContent(e)),1)])],8,["onClick"])),[[a]])),128))],8,["id"]),Object(u["B"])(t.$slots,"footer",{value:n.modelValue,suggestions:n.suggestions})],6)):Object(u["h"])("",!0)]),_:3},8,["onEnter","onLeave","onAfterLeave"])],8,["to","disabled"]))],14,["aria-owns","aria-expanded"])}function g(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var v="\n.p-autocomplete {\n    display: -webkit-inline-box;\n    display: -ms-inline-flexbox;\n    display: inline-flex;\n    position: relative;\n}\n.p-autocomplete-loader {\n    position: absolute;\n    top: 50%;\n    margin-top: -.5rem;\n}\n.p-autocomplete-dd .p-autocomplete-input {\n    -webkit-box-flex: 1;\n        -ms-flex: 1 1 auto;\n            flex: 1 1 auto;\n    width: 1%;\n}\n.p-autocomplete-dd .p-autocomplete-input,\n.p-autocomplete-dd .p-autocomplete-multiple-container {\n     border-top-right-radius: 0;\n     border-bottom-right-radius: 0;\n}\n.p-autocomplete-dd .p-autocomplete-dropdown {\n     border-top-left-radius: 0;\n     border-bottom-left-radius: 0px;\n}\n.p-autocomplete .p-autocomplete-panel {\n    min-width: 100%;\n}\n.p-autocomplete-panel {\n    position: absolute;\n    overflow: auto;\n}\n.p-autocomplete-items {\n    margin: 0;\n    padding: 0;\n    list-style-type: none;\n}\n.p-autocomplete-item {\n    cursor: pointer;\n    white-space: nowrap;\n    position: relative;\n    overflow: hidden;\n}\n.p-autocomplete-multiple-container {\n    margin: 0;\n    padding: 0;\n    list-style-type: none;\n    cursor: text;\n    overflow: hidden;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -ms-flex-wrap: wrap;\n        flex-wrap: wrap;\n}\n.p-autocomplete-token {\n    cursor: default;\n    display: -webkit-inline-box;\n    display: -ms-inline-flexbox;\n    display: inline-flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-flex: 0;\n        -ms-flex: 0 0 auto;\n            flex: 0 0 auto;\n}\n.p-autocomplete-token-icon {\n    cursor: pointer;\n}\n.p-autocomplete-input-token {\n    -webkit-box-flex: 1;\n        -ms-flex: 1 1 auto;\n            flex: 1 1 auto;\n    display: -webkit-inline-box;\n    display: -ms-inline-flexbox;\n    display: inline-flex;\n}\n.p-autocomplete-input-token input {\n    border: 0 none;\n    outline: 0 none;\n    background-color: transparent;\n    margin: 0;\n    padding: 0;\n    -webkit-box-shadow: none;\n            box-shadow: none;\n    border-radius: 0;\n    width: 100%;\n}\n.p-fluid .p-autocomplete {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n}\n.p-fluid .p-autocomplete-dd .p-autocomplete-input {\n    width: 1%;\n}\n";g(v),c.render=d;e["a"]=c},4121:function(t,e,n){},4160:function(t,e,n){"use strict";var r=n("23e7"),i=n("17c2");r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"428f":function(t,e,n){var r=n("da84");t.exports=r},4362:function(t,e,n){e.nextTick=function(t){var e=Array.prototype.slice.call(arguments);e.shift(),setTimeout((function(){t.apply(null,e)}),0)},e.platform=e.arch=e.execPath=e.title="browser",e.pid=1,e.browser=!0,e.env={},e.argv=[],e.binding=function(t){throw new Error("No such module. (Possibly not yet loaded)")},function(){var t,r="/";e.cwd=function(){return r},e.chdir=function(e){t||(t=n("df7c")),r=t.resolve(e,r)}}(),e.exit=e.kill=e.umask=e.dlopen=e.uptime=e.memoryUsage=e.uvCounters=function(){},e.features={}},"44ad":function(t,e,n){var r=n("d039"),i=n("c6b6"),o="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},"44d2":function(t,e,n){var r=n("b622"),i=n("7c73"),o=n("9bf2"),s=r("unscopables"),a=Array.prototype;void 0==a[s]&&o.f(a,s,{configurable:!0,value:i(null)}),t.exports=function(t){a[s][t]=!0}},"44de":function(t,e,n){var r=n("da84");t.exports=function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},"44e7":function(t,e,n){var r=n("861d"),i=n("c6b6"),o=n("b622"),s=o("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==i(t))}},"467f":function(t,e,n){"use strict";var r=n("2d83");t.exports=function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(r("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},4840:function(t,e,n){var r=n("825a"),i=n("1c0b"),o=n("b622"),s=o("species");t.exports=function(t,e){var n,o=r(t).constructor;return void 0===o||void 0==(n=r(o)[s])?e:i(n)}},"485c":function(t,e,n){"use strict";var r=n("c058");n("7a23");const i=Symbol();var o={install:t=>{const e={add:t=>{r["a"].emit("add",t)},removeGroup:t=>{r["a"].emit("remove-group",t)},removeAllGroups:()=>{r["a"].emit("remove-all-groups")}};t.config.globalProperties.$toast=e,t.provide(i,e)}};e["a"]=o},4930:function(t,e,n){var r=n("d039");t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},"4a7b":function(t,e,n){"use strict";var r=n("c532");t.exports=function(t,e){e=e||{};var n={},i=["url","method","data"],o=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function u(t,e){return r.isPlainObject(t)&&r.isPlainObject(e)?r.merge(t,e):r.isPlainObject(e)?r.merge({},e):r.isArray(e)?e.slice():e}function c(i){r.isUndefined(e[i])?r.isUndefined(t[i])||(n[i]=u(void 0,t[i])):n[i]=u(t[i],e[i])}r.forEach(i,(function(t){r.isUndefined(e[t])||(n[t]=u(void 0,e[t]))})),r.forEach(o,c),r.forEach(s,(function(i){r.isUndefined(e[i])?r.isUndefined(t[i])||(n[i]=u(void 0,t[i])):n[i]=u(void 0,e[i])})),r.forEach(a,(function(r){r in e?n[r]=u(t[r],e[r]):r in t&&(n[r]=u(void 0,t[r]))}));var l=i.concat(o).concat(s).concat(a),h=Object.keys(t).concat(Object.keys(e)).filter((function(t){return-1===l.indexOf(t)}));return r.forEach(h,c),n}},"4c62":function(t,e,n){"use strict";var r=n("7a23"),i={name:"Textarea",emits:["update:modelValue"],props:{modelValue:null,autoResize:Boolean},mounted(){this.$el.offsetParent&&this.autoResize&&this.resize()},updated(){this.$el.offsetParent&&this.autoResize&&this.resize()},methods:{resize(){const t=window.getComputedStyle(this.$el);this.$el.style.height="auto",this.$el.style.height=`calc(${t.borderTopWidth} + ${t.borderBottomWidth} + ${this.$el.scrollHeight}px)`,parseFloat(this.$el.style.height)>=parseFloat(this.$el.style.maxHeight)?(this.$el.style.overflowY="scroll",this.$el.style.height=this.$el.style.maxHeight):this.$el.style.overflow="hidden"},onInput(t){this.autoResize&&this.resize(),this.$emit("update:modelValue",t.target.value)}},computed:{filled(){return null!=this.modelValue&&this.modelValue.toString().length>0}}};function o(t,e,n,i,o,s){return Object(r["u"])(),Object(r["g"])("textarea",Object(r["o"])({class:["p-inputtextarea p-inputtext p-component",{"p-filled":s.filled,"p-inputtextarea-resizable ":n.autoResize}]},t.$attrs,{value:n.modelValue,onInput:e[1]||(e[1]=(...t)=>s.onInput&&s.onInput(...t))}),null,16,["value"])}function s(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var a="\n.p-inputtextarea-resizable {\n    overflow: hidden;\n    resize: none;\n}\n.p-fluid .p-inputtextarea {\n    width: 100%;\n}\n";s(a),i.render=o,e["a"]=i},"4d64":function(t,e,n){var r=n("fc6a"),i=n("50c4"),o=n("23cb"),s=function(t){return function(e,n,s){var a,u=r(e),c=i(u.length),l=o(s,c);if(t&&n!=n){while(c>l)if(a=u[l++],a!=a)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},"4de4":function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").filter,o=n("1dde"),s=n("ae40"),a=o("filter"),u=s("filter");r({target:"Array",proto:!0,forced:!a||!u},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(t,e,n){"use strict";var r=n("0366"),i=n("7b0b"),o=n("9bdd"),s=n("e95a"),a=n("50c4"),u=n("8418"),c=n("35a1");t.exports=function(t){var e,n,l,h,f,p,d=i(t),g="function"==typeof this?this:Array,v=arguments.length,y=v>1?arguments[1]:void 0,m=void 0!==y,_=c(d),b=0;if(m&&(y=r(y,v>2?arguments[2]:void 0,2)),void 0==_||g==Array&&s(_))for(e=a(d.length),n=new g(e);e>b;b++)p=m?y(d[b],b):d[b],u(n,b,p);else for(h=_.call(d),f=h.next,n=new g;!(l=f.call(h)).done;b++)p=m?o(h,y,[l.value,b],!0):l.value,u(n,b,p);return n.length=b,n}},"50c4":function(t,e,n){var r=n("a691"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},5135:function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},5270:function(t,e,n){"use strict";var r=n("c532"),i=n("c401"),o=n("2e67"),s=n("2444");function a(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){a(t),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]}));var e=t.adapter||s.adapter;return e(t).then((function(e){return a(t),e.data=i(e.data,e.headers,t.transformResponse),e}),(function(e){return o(e)||(a(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},"53ca":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0");function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}},5502:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return x})),n.d(e,"b",(function(){return o}));var r=n("7a23"),i="store";
/*!
 * vuex v4.0.0-rc.2
 * (c) 2020 Evan You
 * @license MIT
 */function o(t){return void 0===t&&(t=null),Object(r["n"])(null!==t?t:i)}var s="undefined"!==typeof window?window:"undefined"!==typeof t?t:{},a=s.__VUE_DEVTOOLS_GLOBAL_HOOK__;function u(t){a&&(t._devtoolHook=a,a.emit("vuex:init",t),a.on("vuex:travel-to-state",(function(e){t.replaceState(e)})),t.subscribe((function(t,e){a.emit("vuex:mutation",t,e)}),{prepend:!0}),t.subscribeAction((function(t,e){a.emit("vuex:action",t,e)}),{prepend:!0}))}function c(t,e){Object.keys(t).forEach((function(n){return e(t[n],n)}))}function l(t){return null!==t&&"object"===typeof t}function h(t){return t&&"function"===typeof t.then}function f(t,e){if(!t)throw new Error("[vuex] "+e)}function p(t,e){return function(){return t(e)}}var d=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var n=t.state;this.state=("function"===typeof n?n():n)||{}},g={namespaced:{configurable:!0}};g.namespaced.get=function(){return!!this._rawModule.namespaced},d.prototype.addChild=function(t,e){this._children[t]=e},d.prototype.removeChild=function(t){delete this._children[t]},d.prototype.getChild=function(t){return this._children[t]},d.prototype.hasChild=function(t){return t in this._children},d.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},d.prototype.forEachChild=function(t){c(this._children,t)},d.prototype.forEachGetter=function(t){this._rawModule.getters&&c(this._rawModule.getters,t)},d.prototype.forEachAction=function(t){this._rawModule.actions&&c(this._rawModule.actions,t)},d.prototype.forEachMutation=function(t){this._rawModule.mutations&&c(this._rawModule.mutations,t)},Object.defineProperties(d.prototype,g);var v=function(t){this.register([],t,!1)};function y(t,e,n){if(w(t,n),e.update(n),n.modules)for(var r in n.modules){if(!e.getChild(r))return void console.warn("[vuex] trying to add a new module '"+r+"' on hot reloading, manual reload is needed");y(t.concat(r),e.getChild(r),n.modules[r])}}v.prototype.get=function(t){return t.reduce((function(t,e){return t.getChild(e)}),this.root)},v.prototype.getNamespace=function(t){var e=this.root;return t.reduce((function(t,n){return e=e.getChild(n),t+(e.namespaced?n+"/":"")}),"")},v.prototype.update=function(t){y([],this.root,t)},v.prototype.register=function(t,e,n){var r=this;void 0===n&&(n=!0),w(t,e);var i=new d(e,n);if(0===t.length)this.root=i;else{var o=this.get(t.slice(0,-1));o.addChild(t[t.length-1],i)}e.modules&&c(e.modules,(function(e,i){r.register(t.concat(i),e,n)}))},v.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1],r=e.getChild(n);r?r.runtime&&e.removeChild(n):console.warn("[vuex] trying to unregister module '"+n+"', which is not registered")},v.prototype.isRegistered=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1];return!!e&&e.hasChild(n)};var m={assert:function(t){return"function"===typeof t},expected:"function"},_={assert:function(t){return"function"===typeof t||"object"===typeof t&&"function"===typeof t.handler},expected:'function or object with "handler" function'},b={getters:m,mutations:m,actions:_};function w(t,e){Object.keys(b).forEach((function(n){if(e[n]){var r=b[n];c(e[n],(function(e,i){f(r.assert(e),E(t,n,i,e,r.expected))}))}}))}function E(t,e,n,r,i){var o=e+" should be "+i+' but "'+e+"."+n+'"';return t.length>0&&(o+=' in module "'+t.join(".")+'"'),o+=" is "+JSON.stringify(r)+".",o}function x(t){return new I(t)}var I=function t(e){var n=this;void 0===e&&(e={}),f("undefined"!==typeof Promise,"vuex requires a Promise polyfill in this browser."),f(this instanceof t,"store must be called with the new operator.");var r=e.plugins;void 0===r&&(r=[]);var i=e.strict;void 0===i&&(i=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new v(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null);var o=this,s=this,a=s.dispatch,c=s.commit;this.dispatch=function(t,e){return a.call(o,t,e)},this.commit=function(t,e,n){return c.call(o,t,e,n)},this.strict=i;var l=this._modules.root.state;N(this,l,[],this._modules.root),T(this,l),r.forEach((function(t){return t(n)}));var h=void 0===e.devtools||e.devtools;h&&u(this)},O={state:{configurable:!0}};function S(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function C(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;N(t,n,[],t._modules.root,!0),T(t,n,e)}function T(t,e,n){var i=t._state;t.getters={},t._makeLocalGettersCache=Object.create(null);var o=t._wrappedGetters,s={};c(o,(function(e,n){s[n]=p(e,t),Object.defineProperty(t.getters,n,{get:function(){return s[n]()},enumerable:!0})})),t._state=Object(r["y"])({data:e}),t.strict&&j(t),i&&n&&t._withCommit((function(){i.data=null}))}function N(t,e,n,r,i){var o=!n.length,s=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[s]&&console.error("[vuex] duplicate namespace "+s+" for the namespaced module "+n.join("/")),t._modulesNamespaceMap[s]=r),!o&&!i){var a=M(e,n.slice(0,-1)),u=n[n.length-1];t._withCommit((function(){u in a&&console.warn('[vuex] state field "'+u+'" was overridden by a module with the same name at "'+n.join(".")+'"'),a[u]=r.state}))}var c=r.context=k(t,s,n);r.forEachMutation((function(e,n){var r=s+n;P(t,r,e,c)})),r.forEachAction((function(e,n){var r=e.root?n:s+n,i=e.handler||e;R(t,r,i,c)})),r.forEachGetter((function(e,n){var r=s+n;L(t,r,e,c)})),r.forEachChild((function(r,o){N(t,e,n.concat(o),r,i)}))}function k(t,e,n){var r=""===e,i={dispatch:r?t.dispatch:function(n,r,i){var o=D(n,r,i),s=o.payload,a=o.options,u=o.type;if(a&&a.root||(u=e+u,t._actions[u]))return t.dispatch(u,s);console.error("[vuex] unknown local action type: "+o.type+", global type: "+u)},commit:r?t.commit:function(n,r,i){var o=D(n,r,i),s=o.payload,a=o.options,u=o.type;a&&a.root||(u=e+u,t._mutations[u])?t.commit(u,s,a):console.error("[vuex] unknown local mutation type: "+o.type+", global type: "+u)}};return Object.defineProperties(i,{getters:{get:r?function(){return t.getters}:function(){return A(t,e)}},state:{get:function(){return M(t.state,n)}}}),i}function A(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach((function(i){if(i.slice(0,r)===e){var o=i.slice(r);Object.defineProperty(n,o,{get:function(){return t.getters[i]},enumerable:!0})}})),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function P(t,e,n,r){var i=t._mutations[e]||(t._mutations[e]=[]);i.push((function(e){n.call(t,r.state,e)}))}function R(t,e,n,r){var i=t._actions[e]||(t._actions[e]=[]);i.push((function(e){var i=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},e);return h(i)||(i=Promise.resolve(i)),t._devtoolHook?i.catch((function(e){throw t._devtoolHook.emit("vuex:error",e),e})):i}))}function L(t,e,n,r){t._wrappedGetters[e]?console.error("[vuex] duplicate getter key: "+e):t._wrappedGetters[e]=function(t){return n(r.state,r.getters,t.state,t.getters)}}function j(t){Object(r["J"])((function(){return t._state.data}),(function(){f(t._committing,"do not mutate vuex store state outside mutation handlers.")}),{deep:!0,flush:"sync"})}function M(t,e){return e.reduce((function(t,e){return t[e]}),t)}function D(t,e,n){return l(t)&&t.type&&(n=e,e=t,t=t.type),f("string"===typeof t,"expects string as the type, but found "+typeof t+"."),{type:t,payload:e,options:n}}I.prototype.install=function(t,e){t.provide(e||i,this),t.config.globalProperties.$store=this},O.state.get=function(){return this._state.data},O.state.set=function(t){f(!1,"use store.replaceState() to explicit replace store state.")},I.prototype.commit=function(t,e,n){var r=this,i=D(t,e,n),o=i.type,s=i.payload,a=i.options,u={type:o,payload:s},c=this._mutations[o];c?(this._withCommit((function(){c.forEach((function(t){t(s)}))})),this._subscribers.slice().forEach((function(t){return t(u,r.state)})),a&&a.silent&&console.warn("[vuex] mutation type: "+o+". Silent option has been removed. Use the filter functionality in the vue-devtools")):console.error("[vuex] unknown mutation type: "+o)},I.prototype.dispatch=function(t,e){var n=this,r=D(t,e),i=r.type,o=r.payload,s={type:i,payload:o},a=this._actions[i];if(a){try{this._actionSubscribers.slice().filter((function(t){return t.before})).forEach((function(t){return t.before(s,n.state)}))}catch(c){console.warn("[vuex] error in before action subscribers: "),console.error(c)}var u=a.length>1?Promise.all(a.map((function(t){return t(o)}))):a[0](o);return new Promise((function(t,e){u.then((function(e){try{n._actionSubscribers.filter((function(t){return t.after})).forEach((function(t){return t.after(s,n.state)}))}catch(c){console.warn("[vuex] error in after action subscribers: "),console.error(c)}t(e)}),(function(t){try{n._actionSubscribers.filter((function(t){return t.error})).forEach((function(e){return e.error(s,n.state,t)}))}catch(c){console.warn("[vuex] error in error action subscribers: "),console.error(c)}e(t)}))}))}console.error("[vuex] unknown action type: "+i)},I.prototype.subscribe=function(t,e){return S(t,this._subscribers,e)},I.prototype.subscribeAction=function(t,e){var n="function"===typeof t?{before:t}:t;return S(n,this._actionSubscribers,e)},I.prototype.watch=function(t,e,n){var i=this;return f("function"===typeof t,"store.watch only accepts a function."),Object(r["J"])((function(){return t(i.state,i.getters)}),e,Object.assign({},n))},I.prototype.replaceState=function(t){var e=this;this._withCommit((function(){e._state.data=t}))},I.prototype.registerModule=function(t,e,n){void 0===n&&(n={}),"string"===typeof t&&(t=[t]),f(Array.isArray(t),"module path must be a string or an Array."),f(t.length>0,"cannot register the root module by using registerModule."),this._modules.register(t,e),N(this,this.state,t,this._modules.get(t),n.preserveState),T(this,this.state)},I.prototype.unregisterModule=function(t){var e=this;"string"===typeof t&&(t=[t]),f(Array.isArray(t),"module path must be a string or an Array."),this._modules.unregister(t),this._withCommit((function(){var n=M(e.state,t.slice(0,-1));delete n[t[t.length-1]]})),C(this)},I.prototype.hasModule=function(t){return"string"===typeof t&&(t=[t]),f(Array.isArray(t),"module path must be a string or an Array."),this._modules.isRegistered(t)},I.prototype.hotUpdate=function(t){this._modules.update(t),C(this,!0)},I.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(I.prototype,O);U((function(t,e){var n={};return q(e)||console.error("[vuex] mapState: mapper parameter must be either an Array or an Object"),F(e).forEach((function(e){var r=e.key,i=e.val;n[r]=function(){var e=this.$store.state,n=this.$store.getters;if(t){var r=B(this.$store,"mapState",t);if(!r)return;e=r.context.state,n=r.context.getters}return"function"===typeof i?i.call(this,e,n):e[i]},n[r].vuex=!0})),n})),U((function(t,e){var n={};return q(e)||console.error("[vuex] mapMutations: mapper parameter must be either an Array or an Object"),F(e).forEach((function(e){var r=e.key,i=e.val;n[r]=function(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];var r=this.$store.commit;if(t){var o=B(this.$store,"mapMutations",t);if(!o)return;r=o.context.commit}return"function"===typeof i?i.apply(this,[r].concat(e)):r.apply(this.$store,[i].concat(e))}})),n})),U((function(t,e){var n={};return q(e)||console.error("[vuex] mapGetters: mapper parameter must be either an Array or an Object"),F(e).forEach((function(e){var r=e.key,i=e.val;i=t+i,n[r]=function(){if(!t||B(this.$store,"mapGetters",t)){if(i in this.$store.getters)return this.$store.getters[i];console.error("[vuex] unknown getter: "+i)}},n[r].vuex=!0})),n})),U((function(t,e){var n={};return q(e)||console.error("[vuex] mapActions: mapper parameter must be either an Array or an Object"),F(e).forEach((function(e){var r=e.key,i=e.val;n[r]=function(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];var r=this.$store.dispatch;if(t){var o=B(this.$store,"mapActions",t);if(!o)return;r=o.context.dispatch}return"function"===typeof i?i.apply(this,[r].concat(e)):r.apply(this.$store,[i].concat(e))}})),n}));function F(t){return q(t)?Array.isArray(t)?t.map((function(t){return{key:t,val:t}})):Object.keys(t).map((function(e){return{key:e,val:t[e]}})):[]}function q(t){return Array.isArray(t)||l(t)}function U(t){return function(e,n){return"string"!==typeof e?(n=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,n)}}function B(t,e,n){var r=t._modulesNamespaceMap[n];return r||console.error("[vuex] module namespace not found in "+e+"(): "+n),r}}).call(this,n("c8ba"))},5692:function(t,e,n){var r=n("c430"),i=n("c6cd");(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.0",mode:r?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(t,e,n){var r=n("d066"),i=n("241c"),o=n("7418"),s=n("825a");t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(s(t)),n=o.f;return n?e.concat(n(t)):e}},5899:function(t,e){t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},"58a8":function(t,e,n){var r=n("1d80"),i=n("5899"),o="["+i+"]",s=RegExp("^"+o+o+"*"),a=RegExp(o+o+"*$"),u=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(s,"")),2&t&&(n=n.replace(a,"")),n}};t.exports={start:u(1),end:u(2),trim:u(3)}},"595b":function(t,e,n){(function(t){!function(t,n){n(e)}(0,(function(e){"use strict";var n=6371008.8,r={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*n,kilometers:6371.0088,kilometres:6371.0088,meters:n,metres:n,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:n/1852,radians:1,yards:5825721.287490856},i={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/n,yards:1/1.0936},o={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function s(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function a(t,e,n){switch(t){case"Point":return u(e).geometry;case"LineString":return f(e).geometry;case"Polygon":return l(e).geometry;case"MultiPoint":return v(e).geometry;case"MultiLineString":return g(e).geometry;case"MultiPolygon":return y(e).geometry;default:throw new Error(t+" is invalid")}}function u(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!T(t[0])||!T(t[1]))throw new Error("coordinates must contain numbers");return s({type:"Point",coordinates:t},e,n)}function c(t,e,n){return void 0===n&&(n={}),d(t.map((function(t){return u(t,e)})),n)}function l(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return s({type:"Polygon",coordinates:t},e,n)}function h(t,e,n){return void 0===n&&(n={}),d(t.map((function(t){return l(t,e)})),n)}function f(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return s({type:"LineString",coordinates:t},e,n)}function p(t,e,n){return void 0===n&&(n={}),d(t.map((function(t){return f(t,e)})),n)}function d(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function g(t,e,n){return void 0===n&&(n={}),s({type:"MultiLineString",coordinates:t},e,n)}function v(t,e,n){return void 0===n&&(n={}),s({type:"MultiPoint",coordinates:t},e,n)}function y(t,e,n){return void 0===n&&(n={}),s({type:"MultiPolygon",coordinates:t},e,n)}function m(t,e,n){return void 0===n&&(n={}),s({type:"GeometryCollection",geometries:t},e,n)}function _(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function b(t,e){void 0===e&&(e="kilometers");var n=r[e];if(!n)throw new Error(e+" units is invalid");return t*n}function w(t,e){void 0===e&&(e="kilometers");var n=r[e];if(!n)throw new Error(e+" units is invalid");return t/n}function E(t,e){return I(w(t,e))}function x(t){var e=t%360;return e<0&&(e+=360),e}function I(t){return t%(2*Math.PI)*180/Math.PI}function O(t){return t%360*Math.PI/180}function S(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return b(w(t,e),n)}function C(t,e,n){if(void 0===e&&(e="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var r=o[e];if(!r)throw new Error("invalid original units");var i=o[n];if(!i)throw new Error("invalid final units");return t/r*i}function T(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function N(t){return!!t&&t.constructor===Object}function k(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!T(t))throw new Error("bbox must only contain numbers")}))}function A(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}var P=Object.freeze({__proto__:null,earthRadius:n,factors:r,unitsFactors:i,areaFactors:o,feature:s,geometry:a,point:u,points:c,polygon:l,polygons:h,lineString:f,lineStrings:p,featureCollection:d,multiLineString:g,multiPoint:v,multiPolygon:y,geometryCollection:m,round:_,radiansToLength:b,lengthToRadians:w,lengthToDegrees:E,bearingToAzimuth:x,radiansToDegrees:I,degreesToRadians:O,convertLength:S,convertArea:C,isNumber:T,isObject:N,validateBBox:k,validateId:A});function R(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function L(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function j(t){if(t.length>1&&T(t[0])&&T(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return j(t[0]);throw new Error("coordinates must only contain numbers")}function M(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function D(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function F(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,i=t.features;r<i.length;r++){var o=i[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}}function q(t){return"Feature"===t.type?t.geometry:t}function U(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}var B=Object.freeze({__proto__:null,getCoord:R,getCoords:L,containsNumber:j,geojsonType:M,featureOf:D,collectionOf:F,getGeom:q,getType:U});function V(t,e,n){if(null!==t)for(var r,i,o,s,a,u,c,l,h=0,f=0,p=t.type,d="FeatureCollection"===p,g="Feature"===p,v=d?t.features.length:1,y=0;y<v;y++){a=(l=!!(c=d?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var m=0;m<a;m++){var _=0,b=0;if(null!==(s=l?c.geometries[m]:c)){u=s.coordinates;var w=s.type;switch(h=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(u,f,y,_,b))return!1;f++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],f,y,_,b))return!1;f++,"MultiPoint"===w&&_++}"LineString"===w&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-h;i++){if(!1===e(u[r][i],f,y,_,b))return!1;f++}"MultiLineString"===w&&_++,"Polygon"===w&&b++}"Polygon"===w&&_++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(b=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-h;o++){if(!1===e(u[r][i][o],f,y,_,b))return!1;f++}b++}_++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===V(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function G(t,e,n,r){var i=n;return V(t,(function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)}),r),i}function z(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function W(t,e,n){var r=n;return z(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r}function K(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function H(t,e,n){var r=n;return K(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r}function Y(t){var e=[];return V(t,(function(t){e.push(t)})),e}function X(t,e){var n,r,i,o,s,a,u,c,l,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1;for(n=0;n<g;n++){for(a=p?t.features[n].geometry:d?t.geometry:t,c=p?t.features[n].properties:d?t.properties:{},l=p?t.features[n].bbox:d?t.bbox:void 0,h=p?t.features[n].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,c,l,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],f,c,l,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,c,l,h))return!1;f++}}function $(t,e,n){var r=n;return X(t,(function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)})),r}function Q(t,e){X(t,(function(t,n,r,i,o){var a,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(s(t,r,{bbox:i,id:o}),n,0)&&void 0}switch(u){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var c=0;c<t.coordinates.length;c++){var l=t.coordinates[c];if(!1===e(s({type:a,coordinates:l},r),n,c))return!1}}))}function J(t,e,n){var r=n;return Q(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r}function Z(t,e){Q(t,(function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,u=0,c=0;return!1!==V(t,(function(o,l,h,p,d){if(void 0===s||n>a||p>u||d>c)return s=o,a=n,u=p,c=d,void(i=0);var g=f([s,o],t.properties);if(!1===e(g,n,r,d,i))return!1;i++,s=o}))&&void 0}}}))}function tt(t,e,n){var r=n,i=!1;return Z(t,(function(t,o,s,a,u){r=!1===i&&void 0===n?t:e(r,t,o,s,a,u),i=!0})),r}function et(t,e){if(!t)throw new Error("geojson is required");Q(t,(function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(f(o[s],t.properties),n,r,s))return!1}}}))}function nt(t,e,n){var r=n;return et(t,(function(t,i,o,s){r=0===i&&void 0===n?t:e(r,t,i,o,s)})),r}function rt(t,e){if(!N(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),f([u[s],u[s+1]],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),f([u[o][s],u[o][s+1]],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s-1),f([u[i][s],u[i][s+1]],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s-1),f([u[i][o][s],u[i][o][s+1]],a,e)}throw new Error("geojson is invalid")}function it(t,e){if(!N(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":return u(c,a,e);case"MultiPoint":return i<0&&(i=c.length+i),u(c[i],a,e);case"LineString":return s<0&&(s=c.length+s),u(c[s],a,e);case"Polygon":return o<0&&(o=c.length+o),s<0&&(s=c[o].length+s),u(c[o][s],a,e);case"MultiLineString":return i<0&&(i=c.length+i),s<0&&(s=c[i].length+s),u(c[i][s],a,e);case"MultiPolygon":return i<0&&(i=c.length+i),o<0&&(o=c[i].length+o),s<0&&(s=c[i][o].length-s),u(c[i][o][s],a,e)}throw new Error("geojson is invalid")}var ot=Object.freeze({__proto__:null,coordEach:V,coordReduce:G,propEach:z,propReduce:W,featureEach:K,featureReduce:H,coordAll:Y,geomEach:X,geomReduce:$,flattenEach:Q,flattenReduce:J,segmentEach:Z,segmentReduce:tt,lineEach:et,lineReduce:nt,findSegment:rt,findPoint:it});function st(t){var e=[1/0,1/0,-1/0,-1/0];return V(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}st.default=st;
/*
    object-assign
    (c) Sindre Sorhus
    @license MIT
    */
var at=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable;function lt(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var ht=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,r,i=lt(t),o=1;o<arguments.length;o++){for(var s in n=Object(arguments[o]))ut.call(n,s)&&(i[s]=n[s]);if(at){r=at(n);for(var a=0;a<r.length;a++)ct.call(n,r[a])&&(i[r[a]]=n[r[a]])}}return i},ft={successCallback:null,verbose:!1},pt={};
/**
     * @license GNU Affero General Public License.
     * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
     * v. 1.2.0
     * https://github.com/RaumZeit/MarchingSquares.js
     *
     * MarchingSquaresJS is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Affero General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * MarchingSquaresJS is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Affero General Public License for more details.
     *
     * As additional permission under GNU Affero General Public License version 3
     * section 7, third-party projects (personal or commercial) may distribute,
     * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
     * requirement that said third-party project for that reason alone becomes
     * subject to any requirement of the GNU Affero General Public License version 3.
     * Any modifications to MarchingSquaresJS, however, must be shared with the public
     * and made available.
     *
     * In summary this:
     * - allows you to use MarchingSquaresJS at no cost
     * - allows you to use MarchingSquaresJS for both personal and commercial purposes
     * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
     *   license as long as this license notice is included
     * - enables you to keep the source code of your program that uses MarchingSquaresJS
     *   undisclosed
     * - forces you to share any modifications you have made to MarchingSquaresJS,
     *   e.g. bug-fixes
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
     */function dt(t,e,n){n=n||{};for(var r=Object.keys(ft),i=0;i<r.length;i++){var o=r[i],s=n[o];s=null!=s?s:ft[o],pt[o]=s}pt.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var a=function(t){var e=[],n=0,r=1e-7;return t.cells.forEach((function(i,o){i.forEach((function(i,s){if(void 0!==i&&5!==(p=i).cval&&10!==p.cval&&!vt(i)){var a=function(t,e,n){var r,i,o=t.length,s=[],a=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],u=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],c=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"],l=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],h=t[e][n],f=h.cval,p=c[f],d=mt(h,p);s.push([n+d[0],e+d[1]]),p=l[f],d=mt(h,p),s.push([n+d[0],e+d[1]]),yt(h);for(var g=n+a[f],v=e+u[f],y=f;g>=0&&v>=0&&v<o&&(g!=n||v!=e)&&void 0!==(h=t[v][g]);){if(0===(f=h.cval)||15===f)return{path:s,info:"mergeable"};p=l[f],r=a[f],i=u[f],5!==f&&10!==f||(5===f?h.flipped?-1===u[y]?(p="left",r=-1,i=0):(p="right",r=1,i=0):-1===a[y]&&(p="bottom",r=0,i=-1):10===f&&(h.flipped?-1===a[y]?(p="top",r=0,i=1):(p="bottom",r=0,i=-1):1===u[y]&&(p="left",r=-1,i=0))),d=mt(h,p),s.push([g+d[0],v+d[1]]),yt(h),g+=r,v+=i,y=f}return{path:s,info:"closed"}}(t.cells,o,s),u=!1;if("mergeable"===a.info)for(var c=a.path[a.path.length-1][0],l=a.path[a.path.length-1][1],h=n-1;h>=0;h--)if(Math.abs(e[h][0][0]-c)<=r&&Math.abs(e[h][0][1]-l)<=r){for(var f=a.path.length-2;f>=0;--f)e[h].unshift(a.path[f]);u=!0;break}u||(e[n++]=a.path)}var p}))})),e}(function(t,e){for(var n=t.length-1,r=t[0].length-1,i={rows:n,cols:r,cells:[]},o=0;o<n;++o){i.cells[o]=[];for(var s=0;s<r;++s){var a=0,u=t[o+1][s],c=t[o+1][s+1],l=t[o][s+1],h=t[o][s];if(!(isNaN(u)||isNaN(c)||isNaN(l)||isNaN(h))){a|=u>=e?8:0,a|=c>=e?4:0,a|=l>=e?2:0;var f,p,d,g,v=!1;if(5===(a|=h>=e?1:0)||10===a){var y=(u+c+l+h)/4;5===a&&y<e?(a=10,v=!0):10===a&&y<e&&(a=5,v=!0)}0!==a&&15!==a&&(f=p=d=g=.5,1===a?(d=1-gt(e,u,h),p=1-gt(e,l,h)):2===a?(p=gt(e,h,l),g=1-gt(e,c,l)):3===a?(d=1-gt(e,u,h),g=1-gt(e,c,l)):4===a?(f=gt(e,u,c),g=gt(e,l,c)):5===a?(f=gt(e,u,c),g=gt(e,l,c),p=1-gt(e,l,h),d=1-gt(e,u,h)):6===a?(p=gt(e,h,l),f=gt(e,u,c)):7===a?(d=1-gt(e,u,h),f=gt(e,u,c)):8===a?(d=gt(e,h,u),f=1-gt(e,c,u)):9===a?(p=1-gt(e,l,h),f=1-gt(e,c,u)):10===a?(f=1-gt(e,c,u),g=1-gt(e,c,l),p=gt(e,h,l),d=gt(e,h,u)):11===a?(f=1-gt(e,c,u),g=1-gt(e,c,l)):12===a?(d=gt(e,h,u),g=gt(e,l,c)):13===a?(p=1-gt(e,l,h),g=gt(e,l,c)):14===a?(d=gt(e,h,u),p=gt(e,h,l)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+a),i.cells[o][s]={cval:a,flipped:v,top:f,right:g,bottom:p,left:d})}}}return i}(t,e));return"function"==typeof pt.successCallback&&pt.successCallback(a),a}function gt(t,e,n){return(t-e)/(n-e)}function vt(t){return 0===t.cval||15===t.cval}function yt(t){vt(t)||5===t.cval||10===t.cval||(t.cval=15)}function mt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function _t(t,e){if(!N(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;F(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return K(t,(function(t){var e=L(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return L(t)[0]-L(e)[0]}))})).sort((function(t,n){return e?L(t[0])[1]-L(n[0])[1]:L(n[0])[1]-L(t[0])[1]}))}(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],c=[],l=0;l<u.length;l++){var h=u[l];h.properties[n]?c.push(h.properties[n]):c.push(0),!0===i&&(h.properties.matrixPosition=[a,l])}s.push(c)}return s}var bt=Et,wt=Et;function Et(t,e,n,r,i){xt(t,e,n||0,r||t.length-1,i||Ot)}function xt(t,e,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,s=e-n+1,a=Math.log(o),u=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*u*(o-u)/o)*(s-o/2<0?-1:1);xt(t,e,Math.max(n,Math.floor(e-s*u/o+c)),Math.min(r,Math.floor(e+(o-s)*u/o+c)),i)}var l=t[e],h=n,f=r;for(It(t,n,e),i(t[r],l)>0&&It(t,n,r);h<f;){for(It(t,h,f),h++,f--;i(t[h],l)<0;)h++;for(;i(t[f],l)>0;)f--}0===i(t[n],l)?It(t,n,f):It(t,++f,r),f<=e&&(n=f+1),e<=f&&(r=f-1)}}function It(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Ot(t,e){return t<e?-1:t>e?1:0}bt.default=wt;var St=Tt,Ct=Tt;function Tt(t,e){if(!(this instanceof Tt))return new Tt(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Nt(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function kt(t,e){At(t,0,t.children.length,e,t)}function At(t,e,n,r,i){i||(i=qt(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],Pt(i,t.leaf?r(o):o);return i}function Pt(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Rt(t,e){return t.minX-e.minX}function Lt(t,e){return t.minY-e.minY}function jt(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Mt(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Dt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Ft(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function qt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ut(t,e,n,r,i){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,bt(t,o,e,n,i),s.push(e,o,o,n))}function Bt(t){var e={exports:{}};return t(e,e.exports),e.exports}Tt.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!Ft(t,e))return n;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],Ft(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):Dt(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!Ft(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],Ft(t,s=e.leaf?n(o):o)){if(e.leaf||Dt(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=qt([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,s=this.data,a=this.toBBox(t),u=[],c=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=c.pop(),o=!0),s.leaf&&-1!==(i=Nt(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!Dt(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(u.push(s),c.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:Rt,compareMinY:Lt,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return kt(i=qt(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=qt([])).leaf=!1,i.height=r;var a,u,c,l,h=Math.ceil(o/s),f=h*Math.ceil(Math.sqrt(s));for(Ut(t,e,n,f,this.compareMinX),a=e;a<=n;a+=f)for(Ut(t,a,c=Math.min(a+f-1,n),h,this.compareMinY),u=a;u<=c;u+=h)l=Math.min(u+h-1,c),i.children.push(this._build(t,u,l,r-1));return kt(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,u,c,l,h,f,p;r.push(e),!e.leaf&&r.length-1!==n;){for(l=h=1/0,i=0,o=e.children.length;i<o;i++)u=jt(s=e.children[i]),f=t,p=s,(c=(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-u)<h?(h=c,l=u<l?u:l,a=s):c===h&&u<l&&(l=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),Pt(s,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=qt(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,kt(n,this.toBBox),kt(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=qt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,kt(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,s,a,u,c,l,h,f,p,d,g,v;for(u=c=1/0,r=e;r<=n-e;r++)i=At(t,0,r,this.toBBox),o=At(t,r,n,this.toBBox),h=i,f=o,p=void 0,d=void 0,g=void 0,v=void 0,p=Math.max(h.minX,f.minX),d=Math.max(h.minY,f.minY),g=Math.min(h.maxX,f.maxX),v=Math.min(h.maxY,f.maxY),s=Math.max(0,g-p)*Math.max(0,v-d),a=jt(i)+jt(o),s<u?(u=s,l=r,c=a<c?a:c):s===u&&a<c&&(c=a,l=r);return l},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:Rt,i=t.leaf?this.compareMinY:Lt;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,s=this.toBBox,a=At(t,0,e,s),u=At(t,n-e,n,s),c=Mt(a)+Mt(u);for(i=e;i<n-e;i++)o=t.children[i],Pt(a,t.leaf?s(o):o),c+=Mt(a);for(i=n-e-1;i>=e;i--)o=t.children[i],Pt(u,t.leaf?s(o):o),c+=Mt(u);return c},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)Pt(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():kt(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},St.default=Ct;var Vt=function(t,e,n){var r=t*e,i=Gt*t,o=i-(i-t),s=t-o,a=Gt*e,u=a-(a-e),c=e-u,l=s*c-(r-o*u-s*u-o*c);return n?(n[0]=l,n[1]=r,n):[l,r]},Gt=+(Math.pow(2,27)+1),zt=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],e[0]);var i,o,s=new Array(n+r),a=0,u=0,c=0,l=Math.abs,h=t[u],f=l(h),p=e[c],d=l(p);f<d?(o=h,(u+=1)<n&&(h=t[u],f=l(h))):(o=p,(c+=1)<r&&(p=e[c],d=l(p))),u<n&&f<d||c>=r?(i=h,(u+=1)<n&&(h=t[u],f=l(h))):(i=p,(c+=1)<r&&(p=e[c],d=l(p)));for(var g,v,y=i+o,m=y-i,_=o-m,b=_,w=y;u<n&&c<r;)f<d?(i=h,(u+=1)<n&&(h=t[u],f=l(h))):(i=p,(c+=1)<r&&(p=e[c],d=l(p))),(_=(o=b)-(m=(y=i+o)-i))&&(s[a++]=_),b=w-((g=w+y)-(v=g-w))+(y-v),w=g;for(;u<n;)(_=(o=b)-(m=(y=(i=h)+o)-i))&&(s[a++]=_),b=w-((g=w+y)-(v=g-w))+(y-v),w=g,(u+=1)<n&&(h=t[u]);for(;c<r;)(_=(o=b)-(m=(y=(i=p)+o)-i))&&(s[a++]=_),b=w-((g=w+y)-(v=g-w))+(y-v),w=g,(c+=1)<r&&(p=e[c]);return b&&(s[a++]=b),w&&(s[a++]=w),a||(s[a++]=0),s.length=a,s},Wt=function(t,e,n){var r=t+e,i=r-t,o=e-i,s=t-(r-i);return n?(n[0]=s+o,n[1]=r,n):[s+o,r]},Kt=function(t,e){var n=t.length;if(1===n){var r=Vt(t[0],e);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],s=[.1,.1],a=0;Vt(t[0],e,o),o[0]&&(i[a++]=o[0]);for(var u=1;u<n;++u){Vt(t[u],e,s);var c=o[1];Wt(c,s[0],o),o[0]&&(i[a++]=o[0]);var l=s[1],h=o[1],f=l+h,p=h-(f-l);o[1]=f,p&&(i[a++]=p)}return o[1]&&(i[a++]=o[1]),0===a&&(i[a++]=0),i.length=a,i},Ht=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],-e[0]);var i,o,s=new Array(n+r),a=0,u=0,c=0,l=Math.abs,h=t[u],f=l(h),p=-e[c],d=l(p);f<d?(o=h,(u+=1)<n&&(h=t[u],f=l(h))):(o=p,(c+=1)<r&&(p=-e[c],d=l(p))),u<n&&f<d||c>=r?(i=h,(u+=1)<n&&(h=t[u],f=l(h))):(i=p,(c+=1)<r&&(p=-e[c],d=l(p)));for(var g,v,y=i+o,m=y-i,_=o-m,b=_,w=y;u<n&&c<r;)f<d?(i=h,(u+=1)<n&&(h=t[u],f=l(h))):(i=p,(c+=1)<r&&(p=-e[c],d=l(p))),(_=(o=b)-(m=(y=i+o)-i))&&(s[a++]=_),b=w-((g=w+y)-(v=g-w))+(y-v),w=g;for(;u<n;)(_=(o=b)-(m=(y=(i=h)+o)-i))&&(s[a++]=_),b=w-((g=w+y)-(v=g-w))+(y-v),w=g,(u+=1)<n&&(h=t[u]);for(;c<r;)(_=(o=b)-(m=(y=(i=p)+o)-i))&&(s[a++]=_),b=w-((g=w+y)-(v=g-w))+(y-v),w=g,(c+=1)<r&&(p=-e[c]);return b&&(s[a++]=b),w&&(s[a++]=w),a||(s[a++]=0),s.length=a,s},Yt=Bt((function(t){function e(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(i[s++]=t[r][o]);return n}function n(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",n(t.slice(0,e)),",",n(t.slice(e)),")"].join("")}function r(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var i=[],o=0;o<t.length;++o)i.push(["scale(",n(r(e(t,o))),",",(s=o,1&s?"-":""),t[0][o],")"].join(""));return i;var s}function i(t){for(var i=[],o=[],s=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),a=[],u=0;u<t;++u)0==(1&u)?i.push.apply(i,r(e(s,u))):o.push.apply(o,r(e(s,u))),a.push("m"+u);var c=n(i),l=n(o),h="orientation"+t+"Exact",f=["function ",h,"(",a.join(),"){var p=",c,",n=",l,",d=sub(p,n);return d[d.length-1];};return ",h].join("");return new Function("sum","prod","scale","sub",f)(zt,Vt,Kt,Ht)}var o=i(3),s=i(4),a=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),s=(t[0]-n[0])*(e[1]-n[1]),a=i-s;if(i>0){if(s<=0)return a;r=i+s}else{if(!(i<0))return a;if(s>=0)return a;r=-(i+s)}var u=33306690738754716e-32*r;return a>=u||a<=-u?a:o(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],a=n[0]-r[0],u=t[1]-r[1],c=e[1]-r[1],l=n[1]-r[1],h=t[2]-r[2],f=e[2]-r[2],p=n[2]-r[2],d=o*l,g=a*c,v=a*u,y=i*l,m=i*c,_=o*u,b=h*(d-g)+f*(v-y)+p*(m-_),w=7771561172376103e-31*((Math.abs(d)+Math.abs(g))*Math.abs(h)+(Math.abs(v)+Math.abs(y))*Math.abs(f)+(Math.abs(m)+Math.abs(_))*Math.abs(p));return b>w||-b>w?b:s(t,e,n,r)}];function u(t){var e=a[t.length];return e||(e=a[t.length]=i(t.length)),e.apply(void 0,t)}!function(){for(;a.length<=5;)a.push(i(a.length));for(var e=[],n=["slow"],r=0;r<=5;++r)e.push("a"+r),n.push("o"+r);var o=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=5;++r)o.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");o.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(o.join(""));var s=Function.apply(void 0,n);for(t.exports=s.apply(void 0,[u].concat(a)),r=0;r<=5;++r)t.exports[r]=a[r]}()})),Xt=function(t){var e=t.length;if(e<3){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var i=new Array(e);for(r=0;r<e;++r)i[r]=r;i.sort((function(e,n){var r=t[e][0]-t[n][0];return r||t[e][1]-t[n][1]}));var o=[i[0],i[1]],s=[i[0],i[1]];for(r=2;r<e;++r){for(var a=i[r],u=t[a],c=o.length;c>1&&$t(t[o[c-2]],t[o[c-1]],u)<=0;)c-=1,o.pop();for(o.push(a),c=s.length;c>1&&$t(t[s[c-2]],t[s[c-1]],u)>=0;)c-=1,s.pop();s.push(a)}n=new Array(s.length+o.length-2);for(var l=0,h=(r=0,o.length);r<h;++r)n[l++]=o[r];for(var f=s.length-2;f>0;--f)n[l++]=s[f];return n},$t=Yt[3],Qt=Zt,Jt=Zt;function Zt(t,e){if(!(this instanceof Zt))return new Zt(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||te,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function te(t,e){return t<e?-1:t>e?1:0}Zt.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),s=o+1,a=e[o];if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,i)>=0)break;e[t]=a,t=o}e[t]=i}},Qt.default=Jt;var ee=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,s=e.length-1;o<e.length;s=o++){var a=e[o][0],u=e[o][1],c=e[s][0],l=e[s][1];u>r!=l>r&&n<(c-a)*(r-u)/(l-u)+a&&(i=!i)}return i},ne=Yt[3],re=oe,ie=oe;function oe(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var r,i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],o=0;o<t.length;o++){var s=t[o];s[0]<e[0]&&(e=s),s[0]>r[0]&&(r=s),s[1]<n[1]&&(n=s),s[1]>i[1]&&(i=s)}var a=[e,n,r,i],u=a.slice();for(o=0;o<t.length;o++)ee(t[o],a)||u.push(t[o]);var c=Xt(u),l=[];for(o=0;o<c.length;o++)l.push(u[c[o]]);return l}(t),o=St(16,["[0]","[1]","[0]","[1]"]).load(t),s=[],a=0;a<i.length;a++){var u=i[a];o.remove(u),r=fe(u,r),s.push(r)}var c=St(16);for(a=0;a<s.length;a++)c.insert(he(s[a]));for(var l=e*e,h=n*n;s.length;){var f=s.shift(),p=f.p,d=f.next.p,g=pe(p,d);if(!(g<h)){var v=g/l;(u=se(o,f.prev.p,p,d,f.next.next.p,v,c))&&Math.min(pe(u,p),pe(u,d))<=v&&(s.push(f),s.push(fe(u,f)),o.remove(u),c.remove(f),c.insert(he(f)),c.insert(he(f.next)))}}f=r;var y=[];do{y.push(f.p),f=f.next}while(f!==r);return y.push(f.p),y}function se(t,e,n,r,i,o,s){for(var a=new Qt(null,ae),u=t.data;u;){for(var c=0;c<u.children.length;c++){var l=u.children[c],h=u.leaf?de(l,n,r):ue(n,r,l);h>o||a.push({node:l,dist:h})}for(;a.length&&!a.peek().node.children;){var f=a.pop(),p=f.node,d=de(p,e,n),g=de(p,r,i);if(f.dist<d&&f.dist<g&&le(n,p,s)&&le(r,p,s))return p}(u=a.pop())&&(u=u.node)}return null}function ae(t,e){return t.dist-e.dist}function ue(t,e,n){if(ce(t,n)||ce(e,n))return 0;var r=ge(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=ge(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=ge(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=ge(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(r,i,o,s)}function ce(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function le(t,e,n){for(var r,i,o,s,a=Math.min(t[0],e[0]),u=Math.min(t[1],e[1]),c=Math.max(t[0],e[0]),l=Math.max(t[1],e[1]),h=n.search({minX:a,minY:u,maxX:c,maxY:l}),f=0;f<h.length;f++)if(r=h[f].p,i=h[f].next.p,o=t,r!==(s=e)&&i!==o&&ne(r,i,o)>0!=ne(r,i,s)>0&&ne(o,s,r)>0!=ne(o,s,i)>0)return!1;return!0}function he(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function fe(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function pe(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function de(t,e,n){var r=e[0],i=e[1],o=n[0]-r,s=n[1]-i;if(0!==o||0!==s){var a=((t[0]-r)*o+(t[1]-i)*s)/(o*o+s*s);a>1?(r=n[0],i=n[1]):a>0&&(r+=o*a,i+=s*a)}return(o=t[0]-r)*o+(s=t[1]-i)*s}function ge(t,e,n,r,i,o,s,a){var u,c,l,h,f=n-t,p=r-e,d=s-i,g=a-o,v=t-i,y=e-o,m=f*f+p*p,_=f*d+p*g,b=d*d+g*g,w=f*v+p*y,E=d*v+g*y,x=m*b-_*_,I=x,O=x;0===x?(c=0,I=1,h=E,O=b):(h=m*E-_*w,(c=_*E-b*w)<0?(c=0,h=E,O=b):c>I&&(c=I,h=E+_,O=b)),h<0?(h=0,-w<0?c=0:-w>m?c=I:(c=-w,I=m)):h>O&&(h=O,-w+_<0?c=0:-w+_>m?c=I:(c=-w+_,I=m));var S=(1-(l=0===h?0:h/O))*i+l*s-((1-(u=0===c?0:c/I))*t+u*n),C=(1-l)*o+l*a-((1-u)*e+u*r);return S*S+C*C}function ve(t,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var n=[];if(V(t,(function(t){n.push([t[0],t[1]])})),!n.length)return null;var r=re(n,e.concavity);return r.length>3?l([r]):null}function ye(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=R(t),i=q(e),o=i.type,s=e.bbox,a=i.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(r,s))return!1;"Polygon"===o&&(a=[a]);for(var u=!1,c=0;c<a.length&&!u;c++)if(me(r,a[c][0],n.ignoreBoundary)){for(var l=!1,h=1;h<a[c].length&&!l;)me(r,a[c][h],!n.ignoreBoundary)&&(l=!0),h++;l||(u=!0)}return u}function me(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var s=e[i][0],a=e[i][1],u=e[o][0],c=e[o][1];if(t[1]*(s-u)+a*(u-t[0])+c*(t[0]-s)==0&&(s-t[0])*(u-t[0])<=0&&(a-t[1])*(c-t[1])<=0)return!n;a>t[1]!=c>t[1]&&t[0]<(u-s)*(t[1]-a)/(c-a)+s&&(r=!r)}return r}function _e(t,e){var n=[];return K(t,(function(t){var r=!1;X(e,(function(e){ye(t,e)&&(r=!0)})),r&&n.push(t)})),d(n)}function be(t,e,n){void 0===n&&(n={});var r=R(t),i=R(e),o=O(i[1]-r[1]),s=O(i[0]-r[0]),a=O(r[1]),u=O(i[1]),c=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(u);return b(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n.units)}function we(t,e){var n=!1;return d(function(t){if(t.length<3)return[];t.sort(xe);for(var e,n,r,i,o,s,a=t.length-1,u=t[a].x,c=t[0].x,l=t[a].y,h=l,f=1e-12;a--;)t[a].y<l&&(l=t[a].y),t[a].y>h&&(h=t[a].y);var p,d=c-u,g=h-l,v=d>g?d:g,y=.5*(c+u),m=.5*(h+l),_=[new Ee({__sentinel:!0,x:y-20*v,y:m-v},{__sentinel:!0,x:y,y:m+20*v},{__sentinel:!0,x:y+20*v,y:m-v})],b=[],w=[];for(a=t.length;a--;){for(w.length=0,p=_.length;p--;)(d=t[a].x-_[p].x)>0&&d*d>_[p].r?(b.push(_[p]),_.splice(p,1)):d*d+(g=t[a].y-_[p].y)*g>_[p].r||(w.push(_[p].a,_[p].b,_[p].b,_[p].c,_[p].c,_[p].a),_.splice(p,1));for(Ie(w),p=w.length;p;)n=w[--p],e=w[--p],r=t[a],i=n.x-e.x,o=n.y-e.y,s=2*(i*(r.y-n.y)-o*(r.x-n.x)),Math.abs(s)>f&&_.push(new Ee(e,n,r))}for(Array.prototype.push.apply(b,_),a=b.length;a--;)(b[a].a.__sentinel||b[a].b.__sentinel||b[a].c.__sentinel)&&b.splice(a,1);return b}(t.features.map((function(t){var r={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?r.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,r.z=t.geometry.coordinates[2]),r}))).map((function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],i=[t.c.x,t.c.y],o={};return n?(e.push(t.a.z),r.push(t.b.z),i.push(t.c.z)):o={a:t.a.z,b:t.b.z,c:t.c.z},l([[e,r,i,e]],o)})))}re.default=ie;var Ee=function(t,e,n){this.a=t,this.b=e,this.c=n;var r,i,o=e.x-t.x,s=e.y-t.y,a=n.x-t.x,u=n.y-t.y,c=o*(t.x+e.x)+s*(t.y+e.y),l=a*(t.x+n.x)+u*(t.y+n.y),h=2*(o*(n.y-e.y)-s*(n.x-e.x));this.x=(u*c-s*l)/h,this.y=(o*l-a*c)/h,r=this.x-t.x,i=this.y-t.y,this.r=r*r+i*i};function xe(t,e){return e.x-t.x}function Ie(t){var e,n,r,i,o,s=t.length;t:for(;s;)for(n=t[--s],e=t[--s],r=s;r;)if(o=t[--r],e===(i=t[--r])&&n===o||e===o&&n===i){t.splice(s,2),t.splice(r,2),s-=2;continue t}}function Oe(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Se(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return Se(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Te(t);default:throw new Error("unknown GeoJSON type")}}function Se(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=Ce(t.properties),e.geometry=Te(t.geometry),e}function Ce(t){var e={};return t?(Object.keys(t).forEach((function(n){var r=t[n];"object"==typeof r?null===r?e[n]=null:Array.isArray(r)?e[n]=r.map((function(t){return t})):e[n]=Ce(r):e[n]=r})),e):e}function Te(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return Te(t)})),e):(e.coordinates=Ne(t.coordinates),e)}function Ne(t){var e=t;return"object"!=typeof e[0]?e.slice():e.map((function(t){return Ne(t)}))}function ke(t,e){if(void 0===e&&(e={}),!N(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==U(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Oe(t));var r=[],i=nt(t,(function(t,e){var n=function(t,e){var n,r=t.geometry.coordinates,i=e.geometry.coordinates,o=Ae(r[0]),s=Ae(r[r.length-1]),a=Ae(i[0]),u=Ae(i[i.length-1]);if(o===u)n=i.concat(r.slice(1));else if(a===s)n=r.concat(i.slice(1));else if(o===a)n=r.slice(1).reverse().concat(i);else{if(s!==u)return null;n=r.concat(i.reverse().slice(1))}return f(n)}(t,e);return n||(r.push(t),e)}));return i&&r.push(i),r.length?1===r.length?r[0]:g(r.map((function(t){return t.coordinates}))):null}function Ae(t){return t[0].toString()+","+t[1].toString()}function Pe(t){return t}function Re(t,e){var n=function(t){if(null==t)return Pe;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=n=0);var u=2,c=t.length,l=new Array(c);for(l[0]=(e+=t[0])*r+o,l[1]=(n+=t[1])*i+s;u<c;)l[u]=t[u],++u;return l}}(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],o=0,s=i.length;o<s;++o)e.push(n(i[o],o));t<0&&function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}(e,s)}function o(t){return n(t)}function s(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function a(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(a)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=o(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(o);break;case"LineString":n=s(e.arcs);break;case"MultiLineString":n=e.arcs.map(s);break;case"Polygon":n=u(e.arcs);break;case"MultiPolygon":n=e.arcs.map(u);break;default:return null}return{type:r,coordinates:n}}(e)}function Le(t,e){var n={},r={},i={},o=[],s=-1;function a(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach((function(t){n[t<0?~t:t]=1})),o.push(i)}}return e.forEach((function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++s],e[s]=n,e[r]=i)})),e.forEach((function(e){var n,o,s=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=r[r.length-1],e<0?[n,i]:[i,n]}(e),a=s[0],u=s[1];if(n=i[a])if(delete i[n.end],n.push(e),n.end=u,o=r[u]){delete r[o.start];var c=o===n?n:n.concat(o);r[c.start=n.start]=i[c.end=o.end]=c}else r[n.start]=i[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(e),n.start=a,o=i[a]){delete i[o.end];var l=o===n?n:o.concat(n);r[l.start=o.start]=i[l.end=n.end]=l}else r[n.start]=i[n.end]=n;else r[(n=[e]).start=a]=i[n.end=u]=n})),a(i,r),a(r,i),e.forEach((function(t){n[t<0?~t:t]||o.push([t])})),o}function je(t,e){var n={},r=[],i=[];function o(t){t.forEach((function(e){e.forEach((function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)}))})),r.push(t)}function s(e){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(Re(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o)}})),r.forEach((function(t){if(!t._){var e=[],r=[t];for(t._=1,i.push(e);t=r.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].forEach((function(t){t._||(t._=1,r.push(t))}))}))}))}})),r.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:i.map((function(e){var r,i=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].length<2&&i.push(t)}))}))})),(r=(i=Le(t,i)).length)>1)for(var o,a,u=1,c=s(i[0]);u<r;++u)(o=s(i[u]))>c&&(a=i[0],i[0]=i[u],i[u]=a,c=o);return i}))}}function Me(t,e,n,r,i,o){3===arguments.length&&(r=o=Array,i=null);for(var s=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new o(t),u=t-1,c=0;c<t;++c)s[c]=i;function l(r,o){for(var c=e(r)&u,l=s[c],h=0;l!=i;){if(n(l,r))return a[c]=o;if(++h>=t)throw new Error("full hashmap");l=s[c=c+1&u]}return s[c]=r,a[c]=o,o}function h(r,o){for(var c=e(r)&u,l=s[c],h=0;l!=i;){if(n(l,r))return a[c];if(++h>=t)throw new Error("full hashmap");l=s[c=c+1&u]}return s[c]=r,a[c]=o,o}function f(r,o){for(var c=e(r)&u,l=s[c],h=0;l!=i;){if(n(l,r))return a[c];if(++h>=t)break;l=s[c=c+1&u]}return o}function p(){for(var t=[],e=0,n=s.length;e<n;++e){var r=s[e];r!=i&&t.push(r)}return t}return{set:l,maybeSet:h,get:f,keys:p}}function De(t,e){return t[0]===e[0]&&t[1]===e[1]}var Fe=new ArrayBuffer(16),qe=new Float64Array(Fe),Ue=new Uint32Array(Fe);function Be(t){qe[0]=t[0],qe[1]=t[1];var e=Ue[0]^Ue[1];return 2147483647&(e<<5^e>>7^Ue[2]^Ue[3])}function Ve(t){var e,n,r,i,o=t.coordinates,s=t.lines,a=t.rings,u=function(){for(var t=Me(1.4*o.length,w,E,Int32Array,-1,Int32Array),e=new Int32Array(o.length),n=0,r=o.length;n<r;++n)e[n]=t.maybeSet(n,n);return e}(),c=new Int32Array(o.length),l=new Int32Array(o.length),h=new Int32Array(o.length),f=new Int8Array(o.length),p=0;for(e=0,n=o.length;e<n;++e)c[e]=l[e]=h[e]=-1;for(e=0,n=s.length;e<n;++e){var d=s[e],g=d[0],v=d[1];for(r=u[g],i=u[++g],++p,f[r]=1;++g<=v;)b(e,r,r=i,i=u[g]);++p,f[i]=1}for(e=0,n=o.length;e<n;++e)c[e]=-1;for(e=0,n=a.length;e<n;++e){var y=a[e],m=y[0]+1,_=y[1];for(b(e,u[_-1],r=u[m-1],i=u[m]);++m<=_;)b(e,r,r=i,i=u[m])}function b(t,e,n,r){if(c[n]!==t){c[n]=t;var i=l[n];if(i>=0){var o=h[n];i===e&&o===r||i===r&&o===e||(++p,f[n]=1)}else l[n]=e,h[n]=r}}function w(t){return Be(o[t])}function E(t,e){return De(o[t],o[e])}c=l=h=null;var x,I=function(t,e,n,r,i){3===arguments.length&&(r=Array,i=null);for(var o=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=t-1,a=0;a<t;++a)o[a]=i;function u(r){for(var a=e(r)&s,u=o[a],c=0;u!=i;){if(n(u,r))return!0;if(++c>=t)throw new Error("full hashset");u=o[a=a+1&s]}return o[a]=r,!0}function c(r){for(var a=e(r)&s,u=o[a],c=0;u!=i;){if(n(u,r))return!0;if(++c>=t)break;u=o[a=a+1&s]}return!1}function l(){for(var t=[],e=0,n=o.length;e<n;++e){var r=o[e];r!=i&&t.push(r)}return t}return{add:u,has:c,values:l}}(1.4*p,Be,De);for(e=0,n=o.length;e<n;++e)f[x=u[e]]&&I.add(o[x]);return I}function Ge(t,e,n,r){ze(t,e,n),ze(t,e,e+r),ze(t,e+r,n)}function ze(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function We(t){var e,n,r={};for(e in t)r[e]=null==(n=t[e])?{type:null}:("FeatureCollection"===n.type?Ke:"Feature"===n.type?He:Ye)(n);return r}function Ke(t){var e={type:"GeometryCollection",geometries:t.features.map(He)};return null!=t.bbox&&(e.bbox=t.bbox),e}function He(t){var e,n=Ye(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Ye(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Ye)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Xe(t,e){var n=function(t){var e=1/0,n=1/0,r=-1/0,i=-1/0;function o(t){null!=t&&s.hasOwnProperty(t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},Point:function(t){a(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(a)},LineString:function(t){u(t.arcs)},MultiLineString:function(t){t.arcs.forEach(u)},Polygon:function(t){t.arcs.forEach(u)},MultiPolygon:function(t){t.arcs.forEach(c)}};function a(t){var o=t[0],s=t[1];o<e&&(e=o),o>r&&(r=o),s<n&&(n=s),s>i&&(i=s)}function u(t){t.forEach(a)}function c(t){t.forEach(u)}for(var l in t)o(t[l]);return r>=e&&i>=n?[e,n,r,i]:void 0}(t=We(t)),r=e>0&&n&&function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=o-r?(n-1)/(o-r):1,u=s-i?(n-1)/(s-i):1;function c(t){return[Math.round((t[0]-r)*a),Math.round((t[1]-i)*u)]}function l(t,e){for(var n,o,s,c,l,h=-1,f=0,p=t.length,d=new Array(p);++h<p;)n=t[h],c=Math.round((n[0]-r)*a),l=Math.round((n[1]-i)*u),c===o&&l===s||(d[f++]=[o=c,s=l]);for(d.length=f;f<e;)f=d.push([d[0][0],d[0][1]]);return d}function h(t){return l(t,2)}function f(t){return l(t,4)}function p(t){return t.map(f)}function d(t){null!=t&&g.hasOwnProperty(t.type)&&g[t.type](t)}var g={GeometryCollection:function(t){t.geometries.forEach(d)},Point:function(t){t.coordinates=c(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(c)},LineString:function(t){t.arcs=h(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(h)},Polygon:function(t){t.arcs=p(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(p)}};for(var v in t)d(t[v]);return{scale:[1/a,1/u],translate:[r,i]}}(t,n,e),i=function(t){var e,n,r,i,o=t.coordinates,s=t.lines,a=t.rings,u=s.length+a.length;for(delete t.lines,delete t.rings,r=0,i=s.length;r<i;++r)for(e=s[r];e=e.next;)++u;for(r=0,i=a.length;r<i;++r)for(n=a[r];n=n.next;)++u;var c=Me(2*u*1.4,Be,De),l=t.arcs=[];for(r=0,i=s.length;r<i;++r){e=s[r];do{h(e)}while(e=e.next)}for(r=0,i=a.length;r<i;++r)if((n=a[r]).next)do{h(n)}while(n=n.next);else f(n);function h(t){var e,n,r,i,s,a,u,h;if(r=c.get(e=o[t[0]]))for(u=0,h=r.length;u<h;++u)if(p(i=r[u],t))return t[0]=i[0],void(t[1]=i[1]);if(s=c.get(n=o[t[1]]))for(u=0,h=s.length;u<h;++u)if(d(a=s[u],t))return t[1]=a[0],void(t[0]=a[1]);r?r.push(t):c.set(e,[t]),s?s.push(t):c.set(n,[t]),l.push(t)}function f(t){var e,n,r,i,s;if(n=c.get(o[t[0]]))for(i=0,s=n.length;i<s;++i){if(g(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(v(r,t))return t[0]=r[1],void(t[1]=r[0])}if(n=c.get(e=o[t[0]+y(t)]))for(i=0,s=n.length;i<s;++i){if(g(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(v(r,t))return t[0]=r[1],void(t[1]=r[0])}n?n.push(t):c.set(e,[t]),l.push(t)}function p(t,e){var n=t[0],r=e[0],i=t[1];if(n-i!=r-e[1])return!1;for(;n<=i;++n,++r)if(!De(o[n],o[r]))return!1;return!0}function d(t,e){var n=t[0],r=e[0],i=t[1],s=e[1];if(n-i!=r-s)return!1;for(;n<=i;++n,--s)if(!De(o[n],o[s]))return!1;return!0}function g(t,e){var n=t[0],r=e[0],i=t[1]-n;if(i!==e[1]-r)return!1;for(var s=y(t),a=y(e),u=0;u<i;++u)if(!De(o[n+(u+s)%i],o[r+(u+a)%i]))return!1;return!0}function v(t,e){var n=t[0],r=e[0],i=t[1],s=e[1],a=i-n;if(a!==s-r)return!1;for(var u=y(t),c=a-y(e),l=0;l<a;++l)if(!De(o[n+(l+u)%a],o[s-(l+c)%a]))return!1;return!0}function y(t){for(var e=t[0],n=t[1],r=e,i=r,s=o[r];++r<n;){var a=o[r];(a[0]<s[0]||a[0]===s[0]&&a[1]<s[1])&&(i=r,s=a)}return i-e}return t}(function(t){var e,n,r,i=Ve(t),o=t.coordinates,s=t.lines,a=t.rings;for(n=0,r=s.length;n<r;++n)for(var u=s[n],c=u[0],l=u[1];++c<l;)i.has(o[c])&&(e={0:c,1:u[1]},u[1]=c,u=u.next=e);for(n=0,r=a.length;n<r;++n)for(var h=a[n],f=h[0],p=f,d=h[1],g=i.has(o[f]);++p<d;)i.has(o[p])&&(g?(e={0:p,1:h[1]},h[1]=p,h=h.next=e):(Ge(o,f,d,d-p),o[d]=o[f],g=!0,p=f));return t}(function(t){var e=-1,n=[],r=[],i=[];function o(t){t&&s.hasOwnProperty(t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},LineString:function(t){t.arcs=a(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(a)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(c)}};function a(t){for(var r=0,o=t.length;r<o;++r)i[++e]=t[r];var s={0:e-o+1,1:e};return n.push(s),s}function u(t){for(var n=0,o=t.length;n<o;++n)i[++e]=t[n];var s={0:e-o+1,1:e};return r.push(s),s}function c(t){return t.map(u)}for(var l in t)o(t[l]);return{type:"Topology",coordinates:i,lines:n,rings:r,objects:t}}(t))),o=i.coordinates,s=Me(1.4*i.arcs.length,$e,Qe);function a(t){t&&u.hasOwnProperty(t.type)&&u[t.type](t)}t=i.objects,i.bbox=n,i.arcs=i.arcs.map((function(t,e){return s.set(t,e),o.slice(t[0],t[1]+1)})),delete i.coordinates,o=null;var u={GeometryCollection:function(t){t.geometries.forEach(a)},LineString:function(t){t.arcs=c(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(c)},Polygon:function(t){t.arcs=t.arcs.map(c)},MultiPolygon:function(t){t.arcs=t.arcs.map(l)}};function c(t){var e=[];do{var n=s.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function l(t){return t.map(c)}for(var h in t)a(t[h]);return r&&(i.transform=r,i.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,i,o=t[e],s=0,a=1,u=o.length,c=o[0],l=c[0],h=c[1];++s<u;)r=(c=o[s])[0],i=c[1],r===l&&i===h||(o[a++]=[r-l,i-h],l=r,h=i);1===a&&(o[a++]=[0,0]),o.length=a}return t}(i.arcs)),i}function $e(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function Qe(t,e){var n,r=t[0],i=t[1],o=e[0],s=e[1];return i<r&&(n=r,r=i,i=n),s<o&&(n=o,o=s,s=n),r===o&&i===s}function Je(t,e){if(void 0===e&&(e={}),"FeatureCollection"!==U(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==e.mutate&&void 0!==e.mutate||(t=Oe(t));var n=[];Q(t,(function(t){n.push(t.geometry)}));var r=Xe({geoms:m(n).geometry});return function(t){return Re(t,je.apply(this,arguments))}(r,r.objects.geoms.geometries)}function Ze(t,e){if(void 0===e&&(e={}),!N(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==U(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Oe(t));var r=function(t){var e={};Q(t,(function(t){e[t.geometry.type]=!0}));var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!r)throw new Error("geojson must be homogenous");var i=t;switch(r){case"LineString":return ke(i,e);case"Polygon":return Je(i,e);default:throw new Error(r+" is not supported")}}function tn(t,e){void 0===e&&(e={});var n="object"==typeof e?e.mutate:e;if(!t)throw new Error("geojson is required");var r=U(t),i=[];switch(r){case"LineString":i=en(t);break;case"MultiLineString":case"Polygon":L(t).forEach((function(t){i.push(en(t))}));break;case"MultiPolygon":L(t).forEach((function(t){var e=[];t.forEach((function(t){e.push(en(t))})),i.push(e)}));break;case"Point":return t;case"MultiPoint":var o={};L(t).forEach((function(t){var e=t.join("-");o.hasOwnProperty(e)||(i.push(t),o[e]=!0)}));break;default:throw new Error(r+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=i,t):{type:r,coordinates:i}:!0===n?(t.geometry.coordinates=i,t):s({type:r,coordinates:i},t.properties,{bbox:t.bbox,id:t.id})}function en(t){var e=L(t);if(2===e.length&&!nn(e[0],e[1]))return e;var n=[],r=e.length-1,i=n.length;n.push(e[0]);for(var o=1;o<r;o++){var s=n[n.length-1];e[o][0]===s[0]&&e[o][1]===s[1]||(n.push(e[o]),(i=n.length)>2&&rn(n[i-3],n[i-1],n[i-2])&&n.splice(n.length-2,1))}if(n.push(e[e.length-1]),i=n.length,nn(e[0],e[e.length-1])&&i<4)throw new Error("invalid polygon");return rn(n[i-3],n[i-1],n[i-2])&&n.splice(n.length-2,1),n}function nn(t,e){return t[0]===e[0]&&t[1]===e[1]}function rn(t,e,n){var r=n[0],i=n[1],o=t[0],s=t[1],a=e[0],u=e[1],c=a-o,l=u-s;return 0===(r-o)*l-(i-s)*c&&(Math.abs(c)>=Math.abs(l)?c>0?o<=r&&r<=a:a<=r&&r<=o:l>0?s<=i&&i<=u:u<=i&&i<=s)}function on(t,e,n){var r=e.x,i=e.y,o=n.x-r,s=n.y-i;if(0!==o||0!==s){var a=((t.x-r)*o+(t.y-i)*s)/(o*o+s*s);a>1?(r=n.x,i=n.y):a>0&&(r+=o*a,i+=s*a)}return(o=t.x-r)*o+(s=t.y-i)*s}function sn(t,e,n,r,i){for(var o,s=r,a=e+1;a<n;a++){var u=on(t[a],t[e],t[n]);u>s&&(o=a,s=u)}s>r&&(o-e>1&&sn(t,e,o,r,i),i.push(t[o]),n-o>1&&sn(t,o,n,r,i))}function an(t,e){var n=t.length-1,r=[t[0]];return sn(t,0,n,e,r),r.push(t[n]),r}function un(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return an(t=n?t:function(t,e){for(var n,r,i,o,s,a=t[0],u=[a],c=1,l=t.length;c<l;c++)n=t[c],i=a,o=void 0,s=void 0,o=(r=n).x-i.x,s=r.y-i.y,o*o+s*s>e&&(u.push(n),a=n);return a!==n&&u.push(n),u}(t,r),r)}function cn(t,e,n){return un(t.map((function(t){return{x:t[0],y:t[1],z:t[2]}})),e,n).map((function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]}))}function ln(t,e,n){return t.map((function(t){var r=t.map((function(t){return{x:t[0],y:t[1]}}));if(r.length<4)throw new Error("invalid polygon");for(var i=un(r,e,n).map((function(t){return[t.x,t.y]}));!hn(i);)i=un(r,e-=.01*e,n).map((function(t){return[t.x,t.y]}));return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i}))}function hn(t){return!(t.length<3)&&!(3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}var fn=function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return t.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])},t}();function pn(t,e){void 0===e&&(e={});for(var n=e.resolution||1e4,r=e.sharpness||.85,i=[],o=q(t).coordinates.map((function(t){return{x:t[0],y:t[1]}})),s=new fn({duration:n,points:o,sharpness:r}),a=0;a<s.duration;a+=10){var u=s.pos(a);Math.floor(a/100)%2==0&&i.push([u.x,u.y])}return f(i,e.properties)}function dn(t,e){void 0===e&&(e={});var n=Number(t[0]),r=Number(t[1]),i=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[n,r];return l([[s,[i,r],[i,o],[n,o],s]],e.properties,{bbox:t,id:e.id})}function gn(t){return dn(st(t))}function vn(t){var e=t[0],n=t[1],r=t[2],i=t[3];if(be(t.slice(0,2),[r,n])>=be(t.slice(0,2),[e,i])){var o=(n+i)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}var s=(e+r)/2;return[s-(i-n)/2,n,s+(i-n)/2,i]}function yn(t,e,n,r){void 0===r&&(r={});var i=R(t),o=O(i[0]),s=O(i[1]),a=O(n),c=w(e,r.units),l=Math.asin(Math.sin(s)*Math.cos(c)+Math.cos(s)*Math.sin(c)*Math.cos(a));return u([I(o+Math.atan2(Math.sin(a)*Math.sin(c)*Math.cos(s),Math.cos(c)-Math.sin(s)*Math.sin(l))),I(l)],r.properties)}function mn(t,e,n){void 0===n&&(n={});for(var r=n.steps||64,i=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},o=[],s=0;s<r;s++)o.push(yn(t,e,-360*s/r,n).geometry.coordinates);return o.push(o[0]),l([o],i)}function _n(t,e,n){if(void 0===n&&(n={}),!0===n.final)return function(t,e){var n=_n(e,t);return(n+180)%360}(t,e);var r=R(t),i=R(e),o=O(r[0]),s=O(i[0]),a=O(r[1]),u=O(i[1]),c=Math.sin(s-o)*Math.cos(u),l=Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(s-o);return I(Math.atan2(c,l))}function bn(t,e){void 0===e&&(e={});var n=st(t);return u([(n[0]+n[2])/2,(n[1]+n[3])/2],e.properties,e)}function wn(t,e){void 0===e&&(e={});var n=0,r=0,i=0;return V(t,(function(t){n+=t[0],r+=t[1],i++}),!0),u([n/i,r/i],e.properties)}function En(t){var e=[];return"FeatureCollection"===t.type?K(t,(function(t){V(t,(function(n){e.push(u(n,t.properties))}))})):V(t,(function(n){e.push(u(n,t.properties))})),d(e)}var xn=On,In=On;function On(t,e,n){n=n||2;var r,i,o,s,a,u,c,l=e&&e.length,h=l?e[0]*n:t.length,f=Sn(t,0,h,n,!0),p=[];if(!f)return p;if(l&&(f=function(t,e,n,r){var i,o,s,a=[];for(i=0,o=e.length;i<o;i++)(s=Sn(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===s.next&&(s.steiner=!0),a.push(Mn(s));for(a.sort(Rn),i=0;i<a.length;i++)Ln(a[i],n),n=Cn(n,n.next);return n}(t,e,f,n)),t.length>80*n){r=o=t[0],i=s=t[1];for(var d=n;d<h;d+=n)(a=t[d])<r&&(r=a),(u=t[d+1])<i&&(i=u),a>o&&(o=a),u>s&&(s=u);c=0!==(c=Math.max(o-r,s-i))?1/c:0}return Tn(f,p,n,r,i,c),p}function Sn(t,e,n,r,i){var o,s;if(i===Hn(t,e,n,r)>0)for(o=e;o<n;o+=r)s=zn(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=zn(o,t[o],t[o+1],s);return s&&Un(s,s.next)&&(Wn(s),s=s.next),s}function Cn(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Un(r,r.next)&&0!==qn(r.prev,r,r.next))r=r.next;else{if(Wn(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function Tn(t,e,n,r,i,o,s){if(t){!s&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=jn(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,u,c=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ);e++);for(u=c;a>0||u>0&&r;)0!==a&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(s>1)}(i)}(t,r,i,o);for(var a,u,c=t;t.prev!==t.next;)if(a=t.prev,u=t.next,o?kn(t,r,i,o):Nn(t))e.push(a.i/n),e.push(t.i/n),e.push(u.i/n),Wn(t),t=u.next,c=u.next;else if((t=u)===c){s?1===s?Tn(t=An(t,e,n),e,n,r,i,o,2):2===s&&Pn(t,e,n,r,i,o):Tn(Cn(t),e,n,r,i,o,1);break}}}function Nn(t){var e=t.prev,n=t,r=t.next;if(qn(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Dn(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&qn(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function kn(t,e,n,r){var i=t.prev,o=t,s=t.next;if(qn(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,u=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,c=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,l=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,h=jn(a,u,e,n,r),f=jn(c,l,e,n,r),p=t.prevZ,d=t.nextZ;p&&p.z>=h&&d&&d.z<=f;){if(p!==t.prev&&p!==t.next&&Dn(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&qn(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==t.prev&&d!==t.next&&Dn(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&qn(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&Dn(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&qn(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=f;){if(d!==t.prev&&d!==t.next&&Dn(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&qn(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function An(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Un(i,o)&&Bn(i,r,r.next,o)&&Vn(i,o)&&Vn(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Wn(r),Wn(r.next),r=t=o),r=r.next}while(r!==t);return r}function Pn(t,e,n,r,i,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&Fn(s,a)){var u=Gn(s,a);return s=Cn(s,s.next),u=Cn(u,u.next),Tn(s,e,n,r,i,o),void Tn(u,e,n,r,i,o)}a=a.next}s=s.next}while(s!==t)}function Rn(t,e){return t.x-e.x}function Ln(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s){if(s=a,a===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===s)return n.prev;var u,c=n,l=n.x,h=n.y,f=1/0;for(r=n.next;r!==c;)i>=r.x&&r.x>=l&&i!==r.x&&Dn(o<h?i:s,o,l,h,o<h?s:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<f||u===f&&r.x>n.x)&&Vn(r,t)&&(n=r,f=u),r=r.next;return n}(t,e)){var n=Gn(e,t);Cn(n,n.next)}}function jn(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Mn(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function Dn(t,e,n,r,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(r-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function Fn(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Bn(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Vn(t,e)&&Vn(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function qn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Un(t,e){return t.x===e.x&&t.y===e.y}function Bn(t,e,n,r){return!!(Un(t,e)&&Un(n,r)||Un(t,r)&&Un(n,e))||qn(t,e,n)>0!=qn(t,e,r)>0&&qn(n,r,t)>0!=qn(n,r,e)>0}function Vn(t,e){return qn(t.prev,t,t.next)<0?qn(t,e,t.next)>=0&&qn(t,t.prev,e)>=0:qn(t,e,t.prev)<0||qn(t,t.next,e)<0}function Gn(t,e){var n=new Kn(t.i,t.x,t.y),r=new Kn(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function zn(t,e,n,r){var i=new Kn(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Wn(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Kn(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Hn(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}function Yn(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}(t),n=xn(e.vertices,e.holes,2),r=[],i=[];n.forEach((function(t,r){var o=n[r];i.push([e.vertices[2*o],e.vertices[2*o+1]])}));for(var o=0;o<i.length;o+=3){var s=i.slice(o,o+3);s.push(i[o]),r.push(l([s]))}return r}function Xn(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,r=1/0,i=0;return K(e,(function(e,n){var o=be(t,e);o<r&&(i=n,r=o)})),(n=Oe(e.features[i])).properties.featureIndex=i,n.properties.distanceToPoint=r,n}function $n(t){if(!t)throw new Error("geojson is required");var e=[];return Q(t,(function(t){!function(t,e){var n=[],r=t.geometry;if(null!==r){switch(r.type){case"Polygon":n=L(r);break;case"LineString":n=[L(r)]}n.forEach((function(n){(function(t,e){var n=[];return t.reduce((function(t,r){var i=f([t,r],e);return i.bbox=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return[n<i?n:i,r<o?r:o,n>i?n:i,r>o?r:o]}(t,r),n.push(i),r})),n})(n,t.properties).forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),d(e)}On.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(Hn(t,0,o,n));if(i)for(var a=0,u=e.length;a<u;a++){var c=e[a]*n,l=a<u-1?e[a+1]*n:t.length;s-=Math.abs(Hn(t,c,l,n))}var h=0;for(a=0;a<r.length;a+=3){var f=r[a]*n,p=r[a+1]*n,d=r[a+2]*n;h+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},On.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},xn.default=In;var Qn=Bt((function(t,e){function n(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function r(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!p(t[0])||!p(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,r)}function i(t,e,r){void 0===r&&(r={});for(var i=0,o=t;i<o.length;i++){var s=o[i];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,r)}function o(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,r)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function a(t,e,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:t},e,r)}function u(t,e,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:t},e,r)}function c(t,e,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:t},e,r)}function l(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function h(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function f(t){return t%(2*Math.PI)*180/Math.PI}function p(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:e.earthRadius/1.0936},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1/1.0936},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(t){case"Point":return r(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return i(e).geometry;case"MultiPoint":return u(e).geometry;case"MultiLineString":return a(e).geometry;case"MultiPolygon":return c(e).geometry;default:throw new Error(t+" is invalid")}},e.point=r,e.points=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return r(t,e)})),n)},e.polygon=i,e.polygons=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return i(t,e)})),n)},e.lineString=o,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return o(t,e)})),n)},e.featureCollection=s,e.multiLineString=a,e.multiPoint=u,e.multiPolygon=c,e.geometryCollection=function(t,e,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:t},e,r)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=l,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return f(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=f,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return l(h(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=p,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!p(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}}));function Jn(t,e,n){if(null!==t)for(var r,i,o,s,a,u,c,l,h=0,f=0,p=t.type,d="FeatureCollection"===p,g="Feature"===p,v=d?t.features.length:1,y=0;y<v;y++){a=(l=!!(c=d?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var m=0;m<a;m++){var _=0,b=0;if(null!==(s=l?c.geometries[m]:c)){u=s.coordinates;var w=s.type;switch(h=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(u,f,y,_,b))return!1;f++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],f,y,_,b))return!1;f++,"MultiPoint"===w&&_++}"LineString"===w&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-h;i++){if(!1===e(u[r][i],f,y,_,b))return!1;f++}"MultiLineString"===w&&_++,"Polygon"===w&&b++}"Polygon"===w&&_++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(b=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-h;o++){if(!1===e(u[r][i][o],f,y,_,b))return!1;f++}b++}_++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===Jn(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Zn(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function tr(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function er(t,e){var n,r,i,o,s,a,u,c,l,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1;for(n=0;n<g;n++){for(a=p?t.features[n].geometry:d?t.geometry:t,c=p?t.features[n].properties:d?t.properties:{},l=p?t.features[n].bbox:d?t.bbox:void 0,h=p?t.features[n].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,c,l,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],f,c,l,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,c,l,h))return!1;f++}}function nr(t,e){er(t,(function(t,n,r,i,o){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Qn.feature(t,r,{bbox:i,id:o}),n,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var u=0;u<t.coordinates.length;u++){var c={type:s,coordinates:t.coordinates[u]};if(!1===e(Qn.feature(c,r),n,u))return!1}}))}function rr(t,e){nr(t,(function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,u=0,c=0;return!1!==Jn(t,(function(o,l,h,f,p){if(void 0===s||n>a||f>u||p>c)return s=o,a=n,u=f,c=p,void(i=0);var d=Qn.lineString([s,o],t.properties);if(!1===e(d,n,r,p,i))return!1;i++,s=o}))&&void 0}}}))}function ir(t,e){if(!t)throw new Error("geojson is required");nr(t,(function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(Qn.lineString(o[s],t.properties),n,r,s))return!1}}}))}var or=Jn,sr=function(t,e,n,r){var i=n;return Jn(t,(function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)}),r),i},ar=Zn,ur=function(t,e,n){var r=n;return Zn(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},cr=tr,lr=function(t,e,n){var r=n;return tr(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},hr=function(t){var e=[];return Jn(t,(function(t){e.push(t)})),e},fr=er,pr=function(t,e,n){var r=n;return er(t,(function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)})),r},dr=nr,gr=function(t,e,n){var r=n;return nr(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r},vr=rr,yr=function(t,e,n){var r=n,i=!1;return rr(t,(function(t,o,s,a,u){r=!1===i&&void 0===n?t:e(r,t,o,s,a,u),i=!0})),r},mr=ir,_r=function(t,e,n){var r=n;return ir(t,(function(t,i,o,s){r=0===i&&void 0===n?t:e(r,t,i,o,s)})),r},br=function(t,e){if(e=e||{},!Qn.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),Qn.lineString([u[s],u[s+1]],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),Qn.lineString([u[o][s],u[o][s+1]],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s-1),Qn.lineString([u[i][s],u[i][s+1]],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s-1),Qn.lineString([u[i][o][s],u[i][o][s+1]],a,e)}throw new Error("geojson is invalid")},wr=function(t,e){if(e=e||{},!Qn.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return Qn.point(u,a,e);case"MultiPoint":return i<0&&(i=u.length+i),Qn.point(u[i],a,e);case"LineString":return s<0&&(s=u.length+s),Qn.point(u[s],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),Qn.point(u[o][s],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s),Qn.point(u[i][s],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s),Qn.point(u[i][o][s],a,e)}throw new Error("geojson is invalid")},Er=Object.defineProperty({coordEach:or,coordReduce:sr,propEach:ar,propReduce:ur,featureEach:cr,featureReduce:lr,coordAll:hr,geomEach:fr,geomReduce:pr,flattenEach:dr,flattenReduce:gr,segmentEach:vr,segmentReduce:yr,lineEach:mr,lineReduce:_r,findSegment:br,findPoint:wr},"__esModule",{value:!0});function xr(t){var e=[1/0,1/0,-1/0,-1/0];return Er.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}xr.default=xr;var Ir=xr,Or=Object.defineProperty({default:Ir},"__esModule",{value:!0}).default,Sr=Er.featureEach,Cr=(Er.coordEach,Qn.polygon,Qn.featureCollection);function Tr(t){var e=St(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Or(t),St.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:Or(t),e.push(t)})):Sr(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:Or(t),e.push(t)})),St.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Or(t),St.prototype.remove.call(this,t,e)},e.clear=function(){return St.prototype.clear.call(this)},e.search=function(t){var e=St.prototype.search.call(this,this.toBBox(t));return Cr(e)},e.collides=function(t){return St.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=St.prototype.all.call(this);return Cr(t)},e.toJSON=function(){return St.prototype.toJSON.call(this)},e.fromJSON=function(t){return St.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=Or(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=Or(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}var Nr=Tr,kr=Tr;function Ar(t,e){var n={},r=[];if("LineString"===t.type&&(t=s(t)),"LineString"===e.type&&(e=s(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var i=Pr(t,e);return i&&r.push(i),d(r)}var o=Nr();return o.load($n(e)),K($n(t),(function(t){K(o.search(t),(function(e){var i=Pr(t,e);if(i){var o=L(i).join(",");n[o]||(n[o]=!0,r.push(i))}}))})),d(r)}function Pr(t,e){var n=L(t),r=L(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],o=n[0][1],s=n[1][0],a=n[1][1],c=r[0][0],l=r[0][1],h=r[1][0],f=r[1][1],p=(f-l)*(s-i)-(h-c)*(a-o),d=(h-c)*(o-l)-(f-l)*(i-c),g=(s-i)*(o-l)-(a-o)*(i-c);if(0===p)return null;var v=d/p,y=g/p;return v>=0&&v<=1&&y>=0&&y<=1?u([i+v*(s-i),o+v*(a-o)]):null}function Rr(t,e,n){void 0===n&&(n={});var r=u([1/0,1/0],{dist:1/0}),i=0;return Q(t,(function(t){for(var o=L(t),s=0;s<o.length-1;s++){var a=u(o[s]);a.properties.dist=be(e,a,n);var c=u(o[s+1]);c.properties.dist=be(e,c,n);var l=be(a,c,n),h=Math.max(a.properties.dist,c.properties.dist),p=_n(a,c),d=yn(e,h,p+90,n),g=yn(e,h,p-90,n),v=Ar(f([d.geometry.coordinates,g.geometry.coordinates]),f([a.geometry.coordinates,c.geometry.coordinates])),y=null;v.features.length>0&&((y=v.features[0]).properties.dist=be(e,y,n),y.properties.location=i+be(a,y,n)),a.properties.dist<r.properties.dist&&((r=a).properties.index=s,r.properties.location=i),c.properties.dist<r.properties.dist&&((r=c).properties.index=s+1,r.properties.location=i+l),y&&y.properties.dist<r.properties.dist&&((r=y).properties.index=s),i+=l}})),r}function Lr(t,e,r){void 0===r&&(r={});var i=R(t),o=R(e);return o[0]+=o[0]-i[0]>180?-360:i[0]-o[0]>180?360:0,S(function(t,e,r){var i=r=void 0===r?n:Number(r),o=t[1]*Math.PI/180,s=e[1]*Math.PI/180,a=s-o,u=Math.abs(e[0]-t[0])*Math.PI/180;u>Math.PI&&(u-=2*Math.PI);var c=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),l=Math.abs(c)>1e-11?a/c:Math.cos(o);return Math.sqrt(a*a+l*l*u*u)*i}(i,o),"meters",r.units)}function jr(t,e,n){if(void 0===n&&(n={}),n.method||(n.method="geodesic"),n.units||(n.units="kilometers"),!t)throw new Error("pt is required");if(Array.isArray(t)?t=u(t):"Point"===t.type?t=s(t):D(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=f(e):"LineString"===e.type?e=s(e):D(e,"LineString","line");var r=1/0,i=t.geometry.coordinates;return Z(e,(function(t){var e=t.geometry.coordinates[0],o=t.geometry.coordinates[1],s=function(t,e,n,r){var i=[n[0]-e[0],n[1]-e[1]],o=Mr([t[0]-e[0],t[1]-e[1]],i);if(o<=0)return Dr(t,e,{method:r.method,units:"degrees"});var s=Mr(i,i);if(s<=o)return Dr(t,n,{method:r.method,units:"degrees"});var a=o/s,u=[e[0]+a*i[0],e[1]+a*i[1]];return Dr(t,u,{method:r.method,units:"degrees"})}(i,e,o,n);s<r&&(r=s)})),S(r,"degrees",n.units)}function Mr(t,e){return t[0]*e[0]+t[1]*e[1]}function Dr(t,e,n){return"planar"===n.method?Lr(t,e,n):be(t,e,n)}function Fr(t,e,n,r,i,o,s,a){var u,c,l,h,f={x:null,y:null,onLine1:!1,onLine2:!1};return 0===(u=(a-o)*(n-t)-(s-i)*(r-e))?null!==f.x&&null!==f.y&&f:(h=(n-t)*(c=e-o)-(r-e)*(l=t-i),c=((s-i)*c-(a-o)*l)/u,l=h/u,f.x=t+c*(n-t),f.y=e+c*(r-e),c>=0&&c<=1&&(f.onLine1=!0),l>=0&&l<=1&&(f.onLine2=!0),!(!f.onLine1||!f.onLine2)&&[f.x,f.y])}function qr(t){for(var e=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?d([s(t)]):d([t]):t}(t),n=bn(e),r=!1,i=0;!r&&i<e.features.length;){var o,a=e.features[i].geometry,c=!1;if("Point"===a.type)n.geometry.coordinates[0]===a.coordinates[0]&&n.geometry.coordinates[1]===a.coordinates[1]&&(r=!0);else if("MultiPoint"===a.type){var l=!1;for(o=0;!l&&o<a.coordinates.length;)n.geometry.coordinates[0]===a.coordinates[o][0]&&n.geometry.coordinates[1]===a.coordinates[o][1]&&(r=!0,l=!0),o++}else if("LineString"===a.type)for(o=0;!c&&o<a.coordinates.length-1;)Ur(n.geometry.coordinates[0],n.geometry.coordinates[1],a.coordinates[o][0],a.coordinates[o][1],a.coordinates[o+1][0],a.coordinates[o+1][1])&&(c=!0,r=!0),o++;else if("MultiLineString"===a.type)for(var h=0;h<a.coordinates.length;){c=!1,o=0;for(var f=a.coordinates[h];!c&&o<f.length-1;)Ur(n.geometry.coordinates[0],n.geometry.coordinates[1],f[o][0],f[o][1],f[o+1][0],f[o+1][1])&&(c=!0,r=!0),o++;h++}else"Polygon"!==a.type&&"MultiPolygon"!==a.type||ye(n,a)&&(r=!0);i++}if(r)return n;var p=d([]);for(i=0;i<e.features.length;i++)p.features=p.features.concat(En(e.features[i]).features);return u(Xn(n,p).geometry.coordinates)}function Ur(t,e,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}Nr.default=kr;var Br=6378137;function Vr(t){return $(t,(function(t,e){return t+function(t){var e,n=0;switch(t.type){case"Polygon":return Gr(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=Gr(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)}),0)}function Gr(t){var e=0;if(t&&t.length>0){e+=Math.abs(zr(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(zr(t[n]))}return e}function zr(t){var e,n,r,i,o,s,a=0,u=t.length;if(u>2){for(s=0;s<u;s++)s===u-2?(r=u-2,i=u-1,o=0):s===u-1?(r=u-1,i=0,o=1):(r=s,i=s+1,o=s+2),e=t[r],n=t[i],a+=(Wr(t[o][0])-Wr(e[0]))*Math.sin(Wr(n[1]));a=a*Br*Br/2}return a}function Wr(t){return t*Math.PI/180}function Kr(t,e){return void 0===e&&(e={}),tt(t,(function(t,n){var r=n.geometry.coordinates;return t+be(r[0],r[1],e)}),0)}function Hr(t,e,n,r){if(!N(r=r||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var s,a,u,c=i.length,l=0,h=0;h<i.length&&!(e>=l&&h===i.length-1);h++){if(l>e&&0===o.length){if(!(s=e-l))return o.push(i[h]),f(o);a=_n(i[h],i[h-1])-180,u=yn(i[h],s,a,r),o.push(u.geometry.coordinates)}if(l>=n)return(s=n-l)?(a=_n(i[h],i[h-1])-180,u=yn(i[h],s,a,r),o.push(u.geometry.coordinates),f(o)):(o.push(i[h]),f(o));if(l>=e&&o.push(i[h]),h===i.length-1)return f(o);l+=be(i[h],i[h+1],r)}if(l<e&&i.length===c)throw new Error("Start position is beyond line");return f(i[i.length-1])}function Yr(t,e,n){void 0===n&&(n={});for(var r=R(t),i=L(e),o=0;o<i.length-1;o++){var s=!1;if(n.ignoreEndVertices&&(0===o&&(s="start"),o===i.length-2&&(s="end"),0===o&&o+1===i.length-1&&(s="both")),Xr(i[o],i[o+1],r,s))return!0}return!1}function Xr(t,e,n,r){var i=n[0],o=n[1],s=t[0],a=t[1],u=e[0],c=e[1],l=u-s,h=c-a;return 0==(n[0]-s)*h-(n[1]-a)*l&&(r?"start"===r?Math.abs(l)>=Math.abs(h)?l>0?s<i&&i<=u:u<=i&&i<s:h>0?a<o&&o<=c:c<=o&&o<a:"end"===r?Math.abs(l)>=Math.abs(h)?l>0?s<=i&&i<u:u<i&&i<=s:h>0?a<=o&&o<c:c<o&&o<=a:"both"===r&&(Math.abs(l)>=Math.abs(h)?l>0?s<i&&i<u:u<i&&i<s:h>0?a<o&&o<c:c<o&&o<a):Math.abs(l)>=Math.abs(h)?l>0?s<=i&&i<=u:u<=i&&i<=s:h>0?a<=o&&o<=c:c<=o&&o<=a)}function $r(t,e){var n=q(t),r=q(e),i=n.type,o=r.type;switch(i){case"Point":switch(o){case"MultiPoint":return function(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(Jr(e.coordinates[n],t.coordinates)){r=!0;break}return r}(n,r);case"LineString":return Yr(n,r,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return ye(n,r,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)Jr(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(n,r);case"LineString":return function(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!Yr(t.coordinates[r],e))return!1;n||(n=Yr(t.coordinates[r],e,{ignoreEndVertices:!0}))}return n}(n,r);case"Polygon":case"MultiPolygon":return function(t,e){for(var n=!0,r=0;r<t.coordinates.length;r++){var i=ye(t.coordinates[1],e);if(!i){n=!1;break}i=ye(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&i}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!Yr(t.coordinates[n],e))return!1;return!0}(n,r);case"Polygon":case"MultiPolygon":return function(t,e){var n=st(e),r=st(t);if(!Qr(n,r))return!1;for(var i=!1,o=0;o<t.coordinates.length-1;o++){if(!ye(t.coordinates[o],e))return!1;i||(i=ye(t.coordinates[o],e,{ignoreBoundary:!0})),i||(i=ye(Zr(t.coordinates[o],t.coordinates[o+1]),e,{ignoreBoundary:!0}))}return i}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return function(t,e){var n=st(t);if(!Qr(st(e),n))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!ye(t.coordinates[0][r],e))return!1;return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Qr(t,e){return!(t[0]>e[0])&&!(t[2]<e[2])&&!(t[1]>e[1])&&!(t[3]<e[3])}function Jr(t,e){return t[0]===e[0]&&t[1]===e[1]}function Zr(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function ti(t,e,n){void 0===n&&(n={}),n.mask&&!n.units&&(n.units="kilometers");for(var r=[],i=t[0],o=t[1],s=t[2],a=t[3],c=e/be([i,o],[s,o],n)*(s-i),l=e/be([i,o],[i,a],n)*(a-o),h=s-i,f=a-o,p=Math.floor(h/c),g=(f-Math.floor(f/l)*l)/2,v=i+(h-p*c)/2;v<=s;){for(var y=o+g;y<=a;){var m=u([v,y],n.properties);n.mask?$r(m,n.mask)&&r.push(m):r.push(m),y+=l}v+=c}return d(r)}function ei(t,e){void 0===e&&(e={});var n=e.precision,r=e.coordinates,i=e.mutate;if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return V(t,(function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)})),t}function ni(t,e,n){if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var r=t.geometry.coordinates,i=[],o={};if(n){for(var s=[],a=0;a<r.length;a++)for(var u=0;u<r[a].length-1;u++)s.push(g(a,u));var c=St();c.load(s)}for(var l=0;l<r.length;l++)for(var h=0;h<r[l].length-1;h++)if(n)c.search(g(l,h)).forEach((function(t){var e=t.ring,n=t.edge;d(l,h,e,n)}));else for(var f=0;f<r.length;f++)for(var p=0;p<r[f].length-1;p++)d(l,h,f,p);return e||(i={type:"Feature",geometry:{type:"MultiPoint",coordinates:i}}),i;function d(t,n,s,a){var u,c,l=r[t][n],h=r[t][n+1],f=r[s][a],p=r[s][a+1],d=function(t,e,n,r){if(ri(t,n)||ri(t,r)||ri(e,n)||ri(r,n))return null;var i=t[0],o=t[1],s=e[0],a=e[1],u=n[0],c=n[1],l=r[0],h=r[1],f=(i-s)*(c-h)-(o-a)*(u-l);return 0===f?null:[((i*a-o*s)*(u-l)-(i-s)*(u*h-c*l))/f,((i*a-o*s)*(c-h)-(o-a)*(u*h-c*l))/f]}(l,h,f,p);if(null!==d&&(u=h[0]!==l[0]?(d[0]-l[0])/(h[0]-l[0]):(d[1]-l[1])/(h[1]-l[1]),c=p[0]!==f[0]?(d[0]-f[0])/(p[0]-f[0]):(d[1]-f[1])/(p[1]-f[1]),!(u>=1||u<=0||c>=1||c<=0))){var g=d,v=!o[g];v&&(o[g]=!0),e?i.push(e(d,t,n,l,h,u,s,a,f,p,c,v)):i.push(d)}}function g(t,e){var n,i,o,s,a=r[t][e],u=r[t][e+1];return a[0]<u[0]?(n=a[0],i=u[0]):(n=u[0],i=a[0]),a[1]<u[1]?(o=a[1],s=u[1]):(o=u[1],s=a[1]),{minX:n,minY:o,maxX:i,maxY:s,ring:t,edge:e}}}function ri(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!ri(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}var ii=function(t,e,n,r,i){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},oi=function(t,e,n,r,i,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};function si(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function ai(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(si([t[ci(e-1,t.length-1)],t[e],t[ci(e+1,t.length-1)]],!0))var r=1;else r=-1;return r}function ui(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!ui(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function ci(t,e){return(t%e+e)%e}var li=Math.PI/180,hi=180/Math.PI,fi=function(t,e){this.lon=t,this.lat=e,this.x=li*t,this.y=li*e};fi.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},fi.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new fi(e,t)};var pi=function(){this.coords=[],this.length=0};pi.prototype.move_to=function(t){this.length++,this.coords.push(t)};var di=function(t){this.properties=t||{},this.geometries=[]};di.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},di.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var gi=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new fi(t.x,t.y),this.end=new fi(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};function vi(t,e){var n=[],r=Nr();return Q(e,(function(e){if(n.forEach((function(t,e){t.id=e})),n.length){var i=r.search(e);if(i.features.length){var o=mi(e,i);n=n.filter((function(t){return t.id!==o.id})),r.remove(o),K(yi(o,e),(function(t){n.push(t),r.insert(t)}))}}else(n=yi(t,e).features).forEach((function(t){t.bbox||(t.bbox=vn(st(t)))})),r.load(d(n))})),d(n)}function yi(t,e){var n=[],r=L(t)[0],i=L(t)[t.geometry.coordinates.length-1];if(_i(r,R(e))||_i(i,R(e)))return d([t]);var o=Nr(),s=$n(t);o.load(s);var a=o.search(e);if(!a.features.length)return d([t]);var u=mi(e,a),c=H(s,(function(t,r,i){var o=L(r)[1],s=R(e);return i===u.id?(t.push(s),n.push(f(t)),_i(s,o)?[s]:[s,o]):(t.push(o),t)}),[r]);return c.length>1&&n.push(f(c)),d(n)}function mi(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,r=1/0;return K(e,(function(e){var i=Rr(e,t).properties.dist;i<r&&(n=e,r=i)})),n}function _i(t,e){return t[0]===e[0]&&t[1]===e[1]}function bi(t,e,n,r,i){void 0===i&&(i={});var o=i.steps||64,s=wi(n),a=wi(r),u=Array.isArray(t)||"Feature"!==t.type?{}:t.properties;if(s===a)return f(mn(t,e,i).geometry.coordinates[0],u);for(var c=s,l=s<a?a:a+360,h=c,p=[],d=0;h<l;)p.push(yn(t,e,h,i).geometry.coordinates),h=c+360*++d/o;return h>l&&p.push(yn(t,e,l,i).geometry.coordinates),f(p,u)}function wi(t){var e=t%360;return e<0&&(e+=360),e}function Ei(t,e){void 0===e&&(e={});var n=q(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return xi(n,e);case"MultiPolygon":return function(t,e){void 0===e&&(e={});var n=q(t).coordinates,r=e.properties?e.properties:"Feature"===t.type?t.properties:{},i=[];return n.forEach((function(t){i.push(Ii(t,r))})),d(i)}(n,e);default:throw new Error("invalid poly")}}function xi(t,e){return void 0===e&&(e={}),Ii(q(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}function Ii(t,e){return t.length>1?g(t,e):f(t[0],e)}function Oi(t,e){void 0===e&&(e={});var n=e.properties,r=e.autoComplete,i=e.orderCoords,o=e.mutate;switch(r=void 0===r||r,i=void 0===i||i,(o=void 0!==o&&o)||(t=Oe(t)),t.type){case"FeatureCollection":var s=[];return t.features.forEach((function(t){s.push(L(Si(t,{},r,i)))})),y(s,n);default:return Si(t,n,r,i)}}function Si(t,e,n,r){e=e||("Feature"===t.type?t.properties:{});var i=q(t),o=i.coordinates,s=i.type;if(!o.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return n&&(o=Ci(o)),l([o],e);case"MultiLineString":var a=[],u=0;return o.forEach((function(t){if(n&&(t=Ci(t)),r){var e=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.abs(e-r)*Math.abs(n-i)}(st(f(t)));e>u?(a.unshift(t),u=e):a.push(t)}else a.push(t)})),l(a,e);default:throw new Error("geometry type "+s+" is not supported")}}function Ci(t){var e=t[0],n=e[0],r=e[1],i=t[t.length-1],o=i[0],s=i[1];return n===o&&r===s||t.push(e),t}function Ti(t,e){var n,r,i,o,s,a,u;for(r=1;r<=8;r*=2){for(n=[],o=!(ki(i=t[t.length-1],e)&r),s=0;s<t.length;s++)(u=!(ki(a=t[s],e)&r))!==o&&n.push(Ni(i,a,r,e)),u&&n.push(a),i=a,o=u;if(!(t=n).length)break}return n}function Ni(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function ki(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function Ai(t,e){for(var n=[],r=0,i=t;r<i.length;r++){var o=Ti(i[r],e);o.length>0&&(o[0][0]===o[o.length-1][0]&&o[0][1]===o[o.length-1][1]||o.push(o[0]),o.length>=4&&n.push(o))}return n}gi.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),s=hi*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[hi*Math.atan2(i,r),s]},gi.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,s=this.interpolate(o);n.push(s)}for(var a=!1,u=0,c=e&&e.offset?e.offset:10,l=180-c,h=-180+c,f=360-c,p=1;p<n.length;++p){var d=n[p-1][0],g=n[p][0],v=Math.abs(g-d);v>f&&(g>l&&d<h||d>l&&g<h)?a=!0:v>u&&(u=v)}var y=[];if(a&&u<c){var m=[];y.push(m);for(var _=0;_<n.length;++_){var b=parseFloat(n[_][0]);if(_>0&&Math.abs(b-n[_-1][0])>f){var w=parseFloat(n[_-1][0]),E=parseFloat(n[_-1][1]),x=parseFloat(n[_][0]),I=parseFloat(n[_][1]);if(w>-180&&w<h&&180===x&&_+1<n.length&&n[_-1][0]>-180&&n[_-1][0]<h){m.push([-180,n[_][1]]),_++,m.push([n[_][0],n[_][1]]);continue}if(w>l&&w<180&&-180===x&&_+1<n.length&&n[_-1][0]>l&&n[_-1][0]<180){m.push([180,n[_][1]]),_++,m.push([n[_][0],n[_][1]]);continue}if(w<h&&x>l){var O=w;w=x,x=O;var S=E;E=I,I=S}if(w>l&&x<h&&(x+=360),w<=180&&x>=180&&w<x){var C=(180-w)/(x-w),T=C*I+(1-C)*E;m.push([n[_-1][0]>l?180:-180,T]),(m=[]).push([n[_-1][0]>l?-180:180,T]),y.push(m)}else m=[],y.push(m);m.push([b,n[_][1]])}else m.push([n[_][0],n[_][1]])}}else{var N=[];y.push(N);for(var k=0;k<n.length;++k)N.push([n[k][0],n[k][1]])}for(var A=new di(this.properties),P=0;P<y.length;++P){var R=new pi;A.geometries.push(R);for(var L=y[P],j=0;j<L.length;++j)R.move_to(L[j])}return A};var Pi=Bt((function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n})),Ri=Bt((function(t,e){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=n?r:i).supported=r,e.unsupported=i})),Li=Bt((function(t){var e=Array.prototype.slice,n=t.exports=function(t,o,s){return s||(s={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?s.strict?t===o:t==o:function(t,o,s){var a,u;if(r(t)||r(o))return!1;if(t.prototype!==o.prototype)return!1;if(Ri(t))return!!Ri(o)&&(t=e.call(t),o=e.call(o),n(t,o,s));if(i(t)){if(!i(o))return!1;if(t.length!==o.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==o[a])return!1;return!0}try{var c=Pi(t),l=Pi(o)}catch(t){return!1}if(c.length!=l.length)return!1;for(c.sort(),l.sort(),a=c.length-1;a>=0;a--)if(c[a]!=l[a])return!1;for(a=c.length-1;a>=0;a--)if(u=c[a],!n(t[u],o[u],s))return!1;return typeof t==typeof o}(t,o,s))};function r(t){return null==t}function i(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&"function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0])}}));function ji(t,e,n){if(void 0===n&&(n={}),!N(n=n||{}))throw new Error("options is invalid");var r,i=n.tolerance||0,o=[],s=Nr(),a=$n(t);return s.load(a),Z(e,(function(t){var e=!1;K(s.search(t),(function(n){if(!1===e){var o=L(t).sort(),s=L(n).sort();Li(o,s)||(0===i?Yr(o[0],n)&&Yr(o[1],n):Rr(n,o[0]).properties.dist<=i&&Rr(n,o[1]).properties.dist<=i)?(e=!0,r=r?Mi(r,t):t):(0===i?Yr(s[0],t)&&Yr(s[1],t):Rr(t,s[0]).properties.dist<=i&&Rr(t,s[1]).properties.dist<=i)&&(r=r?Mi(r,n):n)}})),!1===e&&r&&(o.push(r),r=void 0)})),r&&o.push(r),d(o)}function Mi(t,e){var n=L(e),r=L(t),i=r[0],o=r[r.length-1],s=t.geometry.coordinates;return Li(n[0],i)?s.unshift(n[1]):Li(n[0],o)?s.push(n[1]):Li(n[1],i)?s.unshift(n[0]):Li(n[1],o)&&s.push(n[0]),t}function Di(t){var e=t%360;return e<0&&(e+=360),e}function Fi(t,e,n){var r;return void 0===n&&(n={}),(r=n.final?qi(R(e),R(t)):qi(R(t),R(e)))>180?-(360-r):r}function qi(t,e){var n=O(t[1]),r=O(e[1]),i=O(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(I(Math.atan2(i,o))+360)%360}function Ui(t,e,r,i){void 0===i&&(i={});var o=e<0,s=S(Math.abs(e),i.units,"meters");o&&(s=-Math.abs(s));var a=R(t),c=function(t,e,r,i){i=void 0===i?n:Number(i);var o=e/i,s=t[0]*Math.PI/180,a=O(t[1]),u=O(r),c=o*Math.cos(u),l=a+c;Math.abs(l)>Math.PI/2&&(l=l>0?Math.PI-l:-Math.PI-l);var h=Math.log(Math.tan(l/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),f=Math.abs(h)>1e-11?c/h:Math.cos(a),p=o*Math.sin(u)/f;return[(180*(s+p)/Math.PI+540)%360-180,180*l/Math.PI]}(a,s,r);return c[0]+=c[0]-a[0]>180?-360:a[0]-c[0]>180?360:0,u(c,i.properties)}function Bi(t,e,n,r,i,o){for(var s=0;s<t.length;s++){var a=t[s],u=t[s+1];s===t.length-1&&(u=t[0]),r=Gi(a,u,e),n<=0&&r>0?Gi(e,a,i)<0||(i=a):n>0&&r<=0&&(Vi(e,a,o)||(o=a)),n=r}return[i,o]}function Vi(t,e,n){return Gi(t,e,n)>0}function Gi(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function zi(t){for(var e,n,r=L(t),i=0,o=1;o<r.length;)e=n||r[0],i+=((n=r[o])[0]-e[0])*(n[1]+e[1]),o++;return i>0}function Wi(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return X(t,(function(t){Wi(t,e)})),t;case"LineString":return Ki(L(t),e),t;case"Polygon":return Hi(L(t),e),t;case"MultiLineString":return L(t).forEach((function(t){Ki(t,e)})),t;case"MultiPolygon":return L(t).forEach((function(t){Hi(t,e)})),t;case"Point":case"MultiPoint":return t}}function Ki(t,e){zi(t)===e&&t.reverse()}function Hi(t,e){zi(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)zi(t[n])===e&&t[n].reverse()}function Yi(t,e){if(!N(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;F(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return K(t,(function(t){var e=L(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return L(t)[0]-L(e)[0]}))})).sort((function(t,n){return e?L(t[0])[1]-L(n[0])[1]:L(n[0])[1]-L(t[0])[1]}))}
/*!
     * @license GNU Affero General Public License.
     * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
     * v. 1.2.0
     * https://github.com/RaumZeit/MarchingSquares.js
     *
     * MarchingSquaresJS is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Affero General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * MarchingSquaresJS is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Affero General Public License for more details.
     *
     * As additional permission under GNU Affero General Public License version 3
     * section 7, third-party projects (personal or commercial) may distribute,
     * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
     * requirement that said third-party project for that reason alone becomes
     * subject to any requirement of the GNU Affero General Public License version 3.
     * Any modifications to MarchingSquaresJS, however, must be shared with the public
     * and made available.
     *
     * In summary this:
     * - allows you to use MarchingSquaresJS at no cost
     * - allows you to use MarchingSquaresJS for both personal and commercial purposes
     * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
     *   license as long as this license notice is included
     * - enables you to keep the source code of your program that uses MarchingSquaresJS
     *   undisclosed
     * - forces you to share any modifications you have made to MarchingSquaresJS,
     *   e.g. bug-fixes
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
     */(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],c=[],l=0;l<u.length;l++){var h=u[l];h.properties[n]?c.push(h.properties[n]):c.push(0),!0===i&&(h.properties.matrixPosition=[a,l])}s.push(c)}return s}var Xi={successCallback:null,verbose:!1,polygons:!1},$i={};function Qi(t,e,n,r){r=r||{};for(var i=Object.keys(Xi),o=0;o<i.length;o++){var s=i[o],a=r[s];a=null!=a?a:Xi[s],$i[s]=a}$i.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var u,c=function(t,e,n){for(var r=t.length-1,i=t[0].length-1,o={rows:r,cols:i,cells:[]},s=e+Math.abs(n),a=0;a<r;++a){o.cells[a]=[];for(var u=0;u<i;++u){var c=0,l=t[a+1][u],h=t[a+1][u+1],f=t[a][u+1],p=t[a][u];if(!(isNaN(l)||isNaN(h)||isNaN(f)||isNaN(p))){c|=l<e?0:l>s?128:64,c|=h<e?0:h>s?32:16,c|=f<e?0:f>s?8:4;var d=+(c|=p<e?0:p>s?2:1),g=0;if(17===c||18===c||33===c||34===c||38===c||68===c||72===c||98===c||102===c||132===c||136===c||137===c||152===c||153===c){var v=(l+h+f+p)/4;g=v>s?2:v<e?0:1,34===c?1===g?c=35:0===g&&(c=136):136===c?1===g?(c=35,g=4):0===g&&(c=34):17===c?1===g?(c=155,g=4):0===g&&(c=153):68===c?1===g?(c=103,g=4):0===g&&(c=102):153===c?1===g&&(c=155):102===c?1===g&&(c=103):152===c?g<2&&(c=156,g=1):137===c?g<2&&(c=139,g=1):98===c?g<2&&(c=99,g=1):38===c?g<2&&(c=39,g=1):18===c?g>0?(c=156,g=4):c=152:33===c?g>0?(c=139,g=4):c=137:72===c?g>0?(c=99,g=4):c=98:132===c&&(g>0?(c=39,g=4):c=38)}if(0!=c&&170!=c){var y,m,_,b,w,E,x,I;y=m=_=b=w=E=x=I=.5;var O=[];1===c?(_=1-Vo(e,f,p),I=1-Vo(e,l,p),O.push(Mo[c])):169===c?(_=Vo(s,p,f),I=Vo(s,p,l),O.push(Mo[c])):4===c?(E=1-Vo(e,h,f),b=Vo(e,p,f),O.push(Lo[c])):166===c?(E=Vo(s,f,h),b=1-Vo(s,f,p),O.push(Lo[c])):16===c?(w=Vo(e,f,h),m=Vo(e,l,h),O.push(Ro[c])):154===c?(w=1-Vo(s,h,f),m=1-Vo(s,h,l),O.push(Ro[c])):64===c?(x=Vo(e,p,l),y=1-Vo(e,h,l),O.push(Fo[c])):106===c?(x=1-Vo(s,l,p),y=Vo(s,l,h),O.push(Fo[c])):168===c?(b=Vo(s,p,f),_=Vo(e,p,f),I=Vo(e,p,l),x=Vo(s,p,l),O.push(jo[c]),O.push(Mo[c])):2===c?(b=1-Vo(e,f,p),_=1-Vo(s,f,p),I=1-Vo(s,l,p),x=1-Vo(e,l,p),O.push(jo[c]),O.push(Mo[c])):162===c?(w=Vo(s,f,h),E=Vo(e,f,h),b=1-Vo(e,f,p),_=1-Vo(s,f,p),O.push(jo[c]),O.push(Mo[c])):8===c?(w=1-Vo(e,h,f),E=1-Vo(s,h,f),b=Vo(s,p,f),_=Vo(e,p,f),O.push(Ro[c]),O.push(Lo[c])):138===c?(w=1-Vo(e,h,f),E=1-Vo(s,h,f),y=1-Vo(s,h,l),m=1-Vo(e,h,l),O.push(Ro[c]),O.push(Lo[c])):32===c?(w=Vo(s,f,h),E=Vo(e,f,h),y=Vo(e,l,h),m=Vo(s,l,h),O.push(Ro[c]),O.push(Lo[c])):42===c?(I=1-Vo(s,l,p),x=1-Vo(e,l,p),y=Vo(e,l,h),m=Vo(s,l,h),O.push(Do[c]),O.push(Fo[c])):128===c&&(I=Vo(e,p,l),x=Vo(s,p,l),y=1-Vo(s,h,l),m=1-Vo(e,h,l),O.push(Do[c]),O.push(Fo[c])),5===c?(E=1-Vo(e,h,f),I=1-Vo(e,l,p),O.push(Lo[c])):165===c?(E=Vo(s,f,h),I=Vo(s,p,l),O.push(Lo[c])):20===c?(b=Vo(e,p,f),m=Vo(e,l,h),O.push(jo[c])):150===c?(b=1-Vo(s,f,p),m=1-Vo(s,h,l),O.push(jo[c])):80===c?(w=Vo(e,f,h),x=Vo(e,p,l),O.push(Ro[c])):90===c?(w=1-Vo(s,h,f),x=1-Vo(s,l,p),O.push(Ro[c])):65===c?(_=1-Vo(e,f,p),y=1-Vo(e,h,l),O.push(Mo[c])):105===c?(_=Vo(s,p,f),y=Vo(s,l,h),O.push(Mo[c])):160===c?(w=Vo(s,f,h),E=Vo(e,f,h),I=Vo(e,p,l),x=Vo(s,p,l),O.push(Ro[c]),O.push(Lo[c])):10===c?(w=1-Vo(e,h,f),E=1-Vo(s,h,f),I=1-Vo(s,l,p),x=1-Vo(e,l,p),O.push(Ro[c]),O.push(Lo[c])):130===c?(b=1-Vo(e,f,p),_=1-Vo(s,f,p),y=1-Vo(s,h,l),m=1-Vo(e,h,l),O.push(jo[c]),O.push(Mo[c])):40===c?(b=Vo(s,p,f),_=Vo(e,p,f),y=Vo(e,l,h),m=Vo(s,l,h),O.push(jo[c]),O.push(Mo[c])):101===c?(E=Vo(s,f,h),y=Vo(s,l,h),O.push(Lo[c])):69===c?(E=1-Vo(e,h,f),y=1-Vo(e,h,l),O.push(Lo[c])):149===c?(I=Vo(s,p,l),m=1-Vo(s,h,l),O.push(Do[c])):21===c?(I=1-Vo(e,l,p),m=Vo(e,l,h),O.push(Do[c])):86===c?(b=1-Vo(s,f,p),x=1-Vo(s,l,p),O.push(jo[c])):84===c?(b=Vo(e,p,f),x=Vo(e,p,l),O.push(jo[c])):89===c?(w=1-Vo(s,h,f),_=Vo(s,p,f),O.push(Mo[c])):81===c?(w=Vo(e,f,h),_=1-Vo(e,f,p),O.push(Mo[c])):96===c?(w=Vo(s,f,h),E=Vo(e,f,h),x=Vo(e,p,l),y=Vo(s,l,h),O.push(Ro[c]),O.push(Lo[c])):74===c?(w=1-Vo(e,h,f),E=1-Vo(s,h,f),x=1-Vo(s,l,p),y=1-Vo(e,h,l),O.push(Ro[c]),O.push(Lo[c])):24===c?(w=1-Vo(s,h,f),b=Vo(s,p,f),_=Vo(e,p,f),m=Vo(e,l,h),O.push(Ro[c]),O.push(Mo[c])):146===c?(w=Vo(e,f,h),b=1-Vo(e,f,p),_=1-Vo(s,f,p),m=1-Vo(s,h,l),O.push(Ro[c]),O.push(Mo[c])):6===c?(E=1-Vo(e,h,f),b=1-Vo(s,f,p),I=1-Vo(s,l,p),x=1-Vo(e,l,p),O.push(Lo[c]),O.push(jo[c])):164===c?(E=Vo(s,f,h),b=Vo(e,p,f),I=Vo(e,p,l),x=Vo(s,p,l),O.push(Lo[c]),O.push(jo[c])):129===c?(_=1-Vo(e,f,p),I=Vo(s,p,l),y=1-Vo(s,h,l),m=1-Vo(e,h,l),O.push(Mo[c]),O.push(Do[c])):41===c?(_=Vo(s,p,f),I=1-Vo(e,l,p),y=Vo(e,l,h),m=Vo(s,l,h),O.push(Mo[c]),O.push(Do[c])):66===c?(b=1-Vo(e,f,p),_=1-Vo(s,f,p),x=1-Vo(s,l,p),y=1-Vo(e,h,l),O.push(jo[c]),O.push(Mo[c])):104===c?(b=Vo(s,p,f),_=Vo(e,p,f),x=Vo(e,p,l),y=Vo(s,l,h),O.push(Mo[c]),O.push(qo[c])):144===c?(w=Vo(e,f,h),I=Vo(e,p,l),x=Vo(s,p,l),m=1-Vo(s,h,l),O.push(Ro[c]),O.push(Fo[c])):26===c?(w=1-Vo(s,h,f),I=1-Vo(s,l,p),x=1-Vo(e,l,p),m=Vo(e,l,h),O.push(Ro[c]),O.push(Fo[c])):36===c?(E=Vo(s,f,h),b=Vo(e,p,f),y=Vo(e,l,h),m=Vo(s,l,h),O.push(Lo[c]),O.push(jo[c])):134===c?(E=1-Vo(e,h,f),b=1-Vo(s,f,p),y=1-Vo(s,h,l),m=1-Vo(e,h,l),O.push(Lo[c]),O.push(jo[c])):9===c?(w=1-Vo(e,h,f),E=1-Vo(s,h,f),_=Vo(s,p,f),I=1-Vo(e,l,p),O.push(Ro[c]),O.push(Lo[c])):161===c?(w=Vo(s,f,h),E=Vo(e,f,h),_=1-Vo(e,f,p),I=Vo(s,p,l),O.push(Ro[c]),O.push(Lo[c])):37===c?(E=Vo(s,f,h),I=1-Vo(e,l,p),y=Vo(e,l,h),m=Vo(s,l,h),O.push(Lo[c]),O.push(Do[c])):133===c?(E=1-Vo(e,h,f),I=Vo(s,p,l),y=1-Vo(s,h,l),m=1-Vo(e,h,l),O.push(Lo[c]),O.push(Do[c])):148===c?(b=Vo(e,p,f),I=Vo(e,p,l),x=Vo(s,p,l),m=1-Vo(s,h,l),O.push(jo[c]),O.push(Fo[c])):22===c?(b=1-Vo(s,f,p),I=1-Vo(s,l,p),x=1-Vo(e,l,p),m=Vo(e,l,h),O.push(jo[c]),O.push(Fo[c])):82===c?(w=Vo(e,f,h),b=1-Vo(e,f,p),_=1-Vo(s,f,p),x=1-Vo(s,l,p),O.push(Ro[c]),O.push(Mo[c])):88===c?(w=1-Vo(s,h,f),b=Vo(s,p,f),_=Vo(e,p,f),x=Vo(e,p,l),O.push(Ro[c]),O.push(Mo[c])):73===c?(w=1-Vo(e,h,f),E=1-Vo(s,h,f),_=Vo(s,p,f),y=1-Vo(e,h,l),O.push(Ro[c]),O.push(Lo[c])):97===c?(w=Vo(s,f,h),E=Vo(e,f,h),_=1-Vo(e,f,p),y=Vo(s,l,h),O.push(Ro[c]),O.push(Lo[c])):145===c?(w=Vo(e,f,h),_=1-Vo(e,f,p),I=Vo(s,p,l),m=1-Vo(s,h,l),O.push(Ro[c]),O.push(Do[c])):25===c?(w=1-Vo(s,h,f),_=Vo(s,p,f),I=1-Vo(e,l,p),m=Vo(e,l,h),O.push(Ro[c]),O.push(Do[c])):70===c?(E=1-Vo(e,h,f),b=1-Vo(s,f,p),x=1-Vo(s,l,p),y=1-Vo(e,h,l),O.push(Lo[c]),O.push(jo[c])):100===c?(E=Vo(s,f,h),b=Vo(e,p,f),x=Vo(e,p,l),y=Vo(s,l,h),O.push(Lo[c]),O.push(jo[c])):34===c?(0===g?(w=1-Vo(e,h,f),E=1-Vo(s,h,f),b=Vo(s,p,f),_=Vo(e,p,f),I=Vo(e,p,l),x=Vo(s,p,l),y=1-Vo(s,h,l),m=1-Vo(e,h,l)):(w=Vo(s,f,h),E=Vo(e,f,h),b=1-Vo(e,f,p),_=1-Vo(s,f,p),I=1-Vo(s,l,p),x=1-Vo(e,l,p),y=Vo(e,l,h),m=Vo(s,l,h)),O.push(Ro[c]),O.push(Lo[c]),O.push(Do[c]),O.push(Fo[c])):35===c?(4===g?(w=1-Vo(e,h,f),E=1-Vo(s,h,f),b=Vo(s,p,f),_=Vo(e,p,f),I=Vo(e,p,l),x=Vo(s,p,l),y=1-Vo(s,h,l),m=1-Vo(e,h,l)):(w=Vo(s,f,h),E=Vo(e,f,h),b=1-Vo(e,f,p),_=1-Vo(s,f,p),I=1-Vo(s,l,p),x=1-Vo(e,l,p),y=Vo(e,l,h),m=Vo(s,l,h)),O.push(Ro[c]),O.push(Lo[c]),O.push(Mo[c]),O.push(Fo[c])):136===c?(0===g?(w=Vo(s,f,h),E=Vo(e,f,h),b=1-Vo(e,f,p),_=1-Vo(s,f,p),I=1-Vo(s,l,p),x=1-Vo(e,l,p),y=Vo(e,l,h),m=Vo(s,l,h)):(w=1-Vo(e,h,f),E=1-Vo(s,h,f),b=Vo(s,p,f),_=Vo(e,p,f),I=Vo(e,p,l),x=Vo(s,p,l),y=1-Vo(s,h,l),m=1-Vo(e,h,l)),O.push(Ro[c]),O.push(Lo[c]),O.push(Do[c]),O.push(Fo[c])):153===c?(0===g?(w=Vo(e,f,h),_=1-Vo(e,f,p),I=1-Vo(e,l,p),m=Vo(e,l,h)):(w=1-Vo(s,h,f),_=Vo(s,p,f),I=Vo(s,p,l),m=1-Vo(s,h,l)),O.push(Ro[c]),O.push(Mo[c])):102===c?(0===g?(E=1-Vo(e,h,f),b=Vo(e,p,f),x=Vo(e,p,l),y=1-Vo(e,h,l)):(E=Vo(s,f,h),b=1-Vo(s,f,p),x=1-Vo(s,l,p),y=Vo(s,l,h)),O.push(Lo[c]),O.push(Fo[c])):155===c?(4===g?(w=Vo(e,f,h),_=1-Vo(e,f,p),I=1-Vo(e,l,p),m=Vo(e,l,h)):(w=1-Vo(s,h,f),_=Vo(s,p,f),I=Vo(s,p,l),m=1-Vo(s,h,l)),O.push(Ro[c]),O.push(Do[c])):103===c?(4===g?(E=1-Vo(e,h,f),b=Vo(e,p,f),x=Vo(e,p,l),y=1-Vo(e,h,l)):(E=Vo(s,f,h),b=1-Vo(s,f,p),x=1-Vo(s,l,p),y=Vo(s,l,h)),O.push(Lo[c]),O.push(jo[c])):152===c?(0===g?(w=Vo(e,f,h),b=1-Vo(e,f,p),_=1-Vo(s,f,p),I=1-Vo(s,l,p),x=1-Vo(e,l,p),m=Vo(e,l,h)):(w=1-Vo(s,h,f),b=Vo(s,p,f),_=Vo(e,p,f),I=Vo(e,p,l),x=Vo(s,p,l),m=1-Vo(s,h,l)),O.push(Ro[c]),O.push(jo[c]),O.push(Mo[c])):156===c?(4===g?(w=Vo(e,f,h),b=1-Vo(e,f,p),_=1-Vo(s,f,p),I=1-Vo(s,l,p),x=1-Vo(e,l,p),m=Vo(e,l,h)):(w=1-Vo(s,h,f),b=Vo(s,p,f),_=Vo(e,p,f),I=Vo(e,p,l),x=Vo(s,p,l),m=1-Vo(s,h,l)),O.push(Ro[c]),O.push(Mo[c]),O.push(Fo[c])):137===c?(0===g?(w=Vo(s,f,h),E=Vo(e,f,h),_=1-Vo(e,f,p),I=1-Vo(e,l,p),y=Vo(e,l,h),m=Vo(s,l,h)):(w=1-Vo(e,h,f),E=1-Vo(s,h,f),_=Vo(s,p,f),I=Vo(s,p,l),y=1-Vo(s,h,l),m=1-Vo(e,h,l)),O.push(Ro[c]),O.push(Lo[c]),O.push(Mo[c])):139===c?(4===g?(w=Vo(s,f,h),E=Vo(e,f,h),_=1-Vo(e,f,p),I=1-Vo(e,l,p),y=Vo(e,l,h),m=Vo(s,l,h)):(w=1-Vo(e,h,f),E=1-Vo(s,h,f),_=Vo(s,p,f),I=Vo(s,p,l),y=1-Vo(s,h,l),m=1-Vo(e,h,l)),O.push(Ro[c]),O.push(Lo[c]),O.push(Do[c])):98===c?(0===g?(w=1-Vo(e,h,f),E=1-Vo(s,h,f),b=Vo(s,p,f),_=Vo(e,p,f),x=Vo(e,p,l),y=1-Vo(e,h,l)):(w=Vo(s,f,h),E=Vo(e,f,h),b=1-Vo(e,f,p),_=1-Vo(s,f,p),x=1-Vo(s,l,p),y=Vo(s,l,h)),O.push(Ro[c]),O.push(Lo[c]),O.push(Fo[c])):99===c?(4===g?(w=1-Vo(e,h,f),E=1-Vo(s,h,f),b=Vo(s,p,f),_=Vo(e,p,f),x=Vo(e,p,l),y=1-Vo(e,h,l)):(w=Vo(s,f,h),E=Vo(e,f,h),b=1-Vo(e,f,p),_=1-Vo(s,f,p),x=1-Vo(s,l,p),y=Vo(s,l,h)),O.push(Ro[c]),O.push(Lo[c]),O.push(Mo[c])):38===c?(0===g?(E=1-Vo(e,h,f),b=Vo(e,p,f),I=Vo(e,p,l),x=Vo(s,p,l),y=1-Vo(s,h,l),m=1-Vo(e,h,l)):(E=Vo(s,f,h),b=1-Vo(s,f,p),I=1-Vo(s,l,p),x=1-Vo(e,l,p),y=Vo(e,l,h),m=Vo(s,l,h)),O.push(Lo[c]),O.push(Do[c]),O.push(Fo[c])):39===c?(4===g?(E=1-Vo(e,h,f),b=Vo(e,p,f),I=Vo(e,p,l),x=Vo(s,p,l),y=1-Vo(s,h,l),m=1-Vo(e,h,l)):(E=Vo(s,f,h),b=1-Vo(s,f,p),I=1-Vo(s,l,p),x=1-Vo(e,l,p),y=Vo(e,l,h),m=Vo(s,l,h)),O.push(Lo[c]),O.push(jo[c]),O.push(Fo[c])):85===c&&(w=1,E=0,b=1,_=0,I=0,x=1,y=0,m=1),(y<0||y>1||m<0||m>1||w<0||w>1||b<0||b>1||I<0||I>1||x<0||x>1)&&console.log("MarchingSquaresJS-isoBands: "+c+" "+d+" "+l+","+h+","+f+","+p+" "+g+" "+y+" "+m+" "+w+" "+E+" "+b+" "+_+" "+I+" "+x),o.cells[a][u]={cval:c,cval_real:d,flipped:g,topleft:y,topright:m,righttop:w,rightbottom:E,bottomright:b,bottomleft:_,leftbottom:I,lefttop:x,edges:O}}}}}return o}(t,e,n);return $i.polygons?($i.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=function(t){var e=[],n=0;return t.cells.forEach((function(t,r){t.forEach((function(t,i){if(void 0!==t){var o=Bo[t.cval](t);"object"==typeof o&&Go(o)?"object"==typeof o[0]&&Go(o[0])?"object"==typeof o[0][0]&&Go(o[0][0])?o.forEach((function(t){t.forEach((function(t){t[0]+=i,t[1]+=r})),e[n++]=t})):(o.forEach((function(t){t[0]+=i,t[1]+=r})),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}}))})),e}(c)):($i.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),u=function(t){for(var e=[],n=t.rows,r=t.cols,i=[],o=0;o<n;o++)for(var s=0;s<r;s++)if(void 0!==t.cells[o][s]&&t.cells[o][s].edges.length>0){var a=Wo(t.cells[o][s]),u=null,c=s,l=o;null!==a&&i.push([a.p[0]+c,a.p[1]+l]);do{if(null===(u=Ko(t.cells[l][c],a.x,a.y,a.o)))break;if(i.push([u.p[0]+c,u.p[1]+l]),c+=u.x,a=u,(l+=u.y)<0||l>=n||c<0||c>=r||void 0===t.cells[l][c]){var h=zo(t,c-=u.x,l-=u.y,u.x,u.y,u.o);if(null===h)break;h.path.forEach((function(t){i.push(t)})),c=h.i,l=h.j,a=h}}while(void 0!==t.cells[l][c]&&t.cells[l][c].edges.length>0);e.push(i),i=[],t.cells[o][s].edges.length>0&&s--}return e}(c)),"function"==typeof $i.successCallback&&$i.successCallback(u),u}var Ji=64,Zi=16,to=[],eo=[],no=[],ro=[],io=[],oo=[],so=[],ao=[],uo=[],co=[],lo=[],ho=[],fo=[],po=[],go=[],vo=[],yo=[],mo=[],_o=[],bo=[],wo=[],Eo=[],xo=[],Io=[];so[85]=co[85]=-1,ao[85]=lo[85]=0,uo[85]=ho[85]=1,_o[85]=Eo[85]=1,bo[85]=xo[85]=0,wo[85]=Io[85]=1,to[85]=ro[85]=0,eo[85]=io[85]=-1,no[85]=go[85]=0,vo[85]=fo[85]=0,yo[85]=po[85]=1,oo[85]=mo[85]=1,Eo[1]=Eo[169]=0,xo[1]=xo[169]=-1,Io[1]=Io[169]=0,fo[1]=fo[169]=-1,po[1]=po[169]=0,go[1]=go[169]=0,co[4]=co[166]=0,lo[4]=lo[166]=-1,ho[4]=ho[166]=1,vo[4]=vo[166]=1,yo[4]=yo[166]=0,mo[4]=mo[166]=0,so[16]=so[154]=0,ao[16]=ao[154]=1,uo[16]=uo[154]=1,ro[16]=ro[154]=1,io[16]=io[154]=0,oo[16]=oo[154]=1,_o[64]=_o[106]=0,bo[64]=bo[106]=1,wo[64]=wo[106]=0,to[64]=to[106]=-1,eo[64]=eo[106]=0,no[64]=no[106]=1,_o[2]=_o[168]=0,bo[2]=bo[168]=-1,wo[2]=wo[168]=1,Eo[2]=Eo[168]=0,xo[2]=xo[168]=-1,Io[2]=Io[168]=0,fo[2]=fo[168]=-1,po[2]=po[168]=0,go[2]=go[168]=0,vo[2]=vo[168]=-1,yo[2]=yo[168]=0,mo[2]=mo[168]=1,so[8]=so[162]=0,ao[8]=ao[162]=-1,uo[8]=uo[162]=0,co[8]=co[162]=0,lo[8]=lo[162]=-1,ho[8]=ho[162]=1,fo[8]=fo[162]=1,po[8]=po[162]=0,go[8]=go[162]=1,vo[8]=vo[162]=1,yo[8]=yo[162]=0,mo[8]=mo[162]=0,so[32]=so[138]=0,ao[32]=ao[138]=1,uo[32]=uo[138]=1,co[32]=co[138]=0,lo[32]=lo[138]=1,ho[32]=ho[138]=0,to[32]=to[138]=1,eo[32]=eo[138]=0,no[32]=no[138]=0,ro[32]=ro[138]=1,io[32]=io[138]=0,oo[32]=oo[138]=1,Eo[128]=Eo[42]=0,xo[128]=xo[42]=1,Io[128]=Io[42]=1,_o[128]=_o[42]=0,bo[128]=bo[42]=1,wo[128]=wo[42]=0,to[128]=to[42]=-1,eo[128]=eo[42]=0,no[128]=no[42]=1,ro[128]=ro[42]=-1,io[128]=io[42]=0,oo[128]=oo[42]=0,co[5]=co[165]=-1,lo[5]=lo[165]=0,ho[5]=ho[165]=0,Eo[5]=Eo[165]=1,xo[5]=xo[165]=0,Io[5]=Io[165]=0,vo[20]=vo[150]=0,yo[20]=yo[150]=1,mo[20]=mo[150]=1,ro[20]=ro[150]=0,io[20]=io[150]=-1,oo[20]=oo[150]=1,so[80]=so[90]=-1,ao[80]=ao[90]=0,uo[80]=uo[90]=1,_o[80]=_o[90]=1,bo[80]=bo[90]=0,wo[80]=wo[90]=1,fo[65]=fo[105]=0,po[65]=po[105]=1,go[65]=go[105]=0,to[65]=to[105]=0,eo[65]=eo[105]=-1,no[65]=no[105]=0,so[160]=so[10]=-1,ao[160]=ao[10]=0,uo[160]=uo[10]=1,co[160]=co[10]=-1,lo[160]=lo[10]=0,ho[160]=ho[10]=0,Eo[160]=Eo[10]=1,xo[160]=xo[10]=0,Io[160]=Io[10]=0,_o[160]=_o[10]=1,bo[160]=bo[10]=0,wo[160]=wo[10]=1,vo[130]=vo[40]=0,yo[130]=yo[40]=1,mo[130]=mo[40]=1,fo[130]=fo[40]=0,po[130]=po[40]=1,go[130]=go[40]=0,to[130]=to[40]=0,eo[130]=eo[40]=-1,no[130]=no[40]=0,ro[130]=ro[40]=0,io[130]=io[40]=-1,oo[130]=oo[40]=1,co[37]=co[133]=0,lo[37]=lo[133]=1,ho[37]=ho[133]=1,Eo[37]=Eo[133]=0,xo[37]=xo[133]=1,Io[37]=Io[133]=0,to[37]=to[133]=-1,eo[37]=eo[133]=0,no[37]=no[133]=0,ro[37]=ro[133]=1,io[37]=io[133]=0,oo[37]=oo[133]=0,vo[148]=vo[22]=-1,yo[148]=yo[22]=0,mo[148]=mo[22]=0,Eo[148]=Eo[22]=0,xo[148]=xo[22]=-1,Io[148]=Io[22]=1,_o[148]=_o[22]=0,bo[148]=bo[22]=1,wo[148]=wo[22]=1,ro[148]=ro[22]=-1,io[148]=io[22]=0,oo[148]=oo[22]=1,so[82]=so[88]=0,ao[82]=ao[88]=-1,uo[82]=uo[88]=1,vo[82]=vo[88]=1,yo[82]=yo[88]=0,mo[82]=mo[88]=1,fo[82]=fo[88]=-1,po[82]=po[88]=0,go[82]=go[88]=1,_o[82]=_o[88]=0,bo[82]=bo[88]=-1,wo[82]=wo[88]=0,so[73]=so[97]=0,ao[73]=ao[97]=1,uo[73]=uo[97]=0,co[73]=co[97]=0,lo[73]=lo[97]=-1,ho[73]=ho[97]=0,fo[73]=fo[97]=1,po[73]=po[97]=0,go[73]=go[97]=0,to[73]=to[97]=1,eo[73]=eo[97]=0,no[73]=no[97]=1,so[145]=so[25]=0,ao[145]=ao[25]=-1,uo[145]=uo[25]=0,fo[145]=fo[25]=1,po[145]=po[25]=0,go[145]=go[25]=1,Eo[145]=Eo[25]=0,xo[145]=xo[25]=1,Io[145]=Io[25]=1,ro[145]=ro[25]=-1,io[145]=io[25]=0,oo[145]=oo[25]=0,co[70]=co[100]=0,lo[70]=lo[100]=1,ho[70]=ho[100]=0,vo[70]=vo[100]=-1,yo[70]=yo[100]=0,mo[70]=mo[100]=1,_o[70]=_o[100]=0,bo[70]=bo[100]=-1,wo[70]=wo[100]=1,to[70]=to[100]=1,eo[70]=eo[100]=0,no[70]=no[100]=0,co[101]=co[69]=0,lo[101]=lo[69]=1,ho[101]=ho[69]=0,to[101]=to[69]=1,eo[101]=eo[69]=0,no[101]=no[69]=0,Eo[149]=Eo[21]=0,xo[149]=xo[21]=1,Io[149]=Io[21]=1,ro[149]=ro[21]=-1,io[149]=io[21]=0,oo[149]=oo[21]=0,vo[86]=vo[84]=-1,yo[86]=yo[84]=0,mo[86]=mo[84]=1,_o[86]=_o[84]=0,bo[86]=bo[84]=-1,wo[86]=wo[84]=1,so[89]=so[81]=0,ao[89]=ao[81]=-1,uo[89]=uo[81]=0,fo[89]=fo[81]=1,po[89]=po[81]=0,go[89]=go[81]=1,so[96]=so[74]=0,ao[96]=ao[74]=1,uo[96]=uo[74]=0,co[96]=co[74]=-1,lo[96]=lo[74]=0,ho[96]=ho[74]=1,_o[96]=_o[74]=1,bo[96]=bo[74]=0,wo[96]=wo[74]=0,to[96]=to[74]=1,eo[96]=eo[74]=0,no[96]=no[74]=1,so[24]=so[146]=0,ao[24]=ao[146]=-1,uo[24]=uo[146]=1,vo[24]=vo[146]=1,yo[24]=yo[146]=0,mo[24]=mo[146]=1,fo[24]=fo[146]=0,po[24]=po[146]=1,go[24]=go[146]=1,ro[24]=ro[146]=0,io[24]=io[146]=-1,oo[24]=oo[146]=0,co[6]=co[164]=-1,lo[6]=lo[164]=0,ho[6]=ho[164]=1,vo[6]=vo[164]=-1,yo[6]=yo[164]=0,mo[6]=mo[164]=0,Eo[6]=Eo[164]=0,xo[6]=xo[164]=-1,Io[6]=Io[164]=1,_o[6]=_o[164]=1,bo[6]=bo[164]=0,wo[6]=wo[164]=0,fo[129]=fo[41]=0,po[129]=po[41]=1,go[129]=go[41]=1,Eo[129]=Eo[41]=0,xo[129]=xo[41]=1,Io[129]=Io[41]=0,to[129]=to[41]=-1,eo[129]=eo[41]=0,no[129]=no[41]=0,ro[129]=ro[41]=0,io[129]=io[41]=-1,oo[129]=oo[41]=0,vo[66]=vo[104]=0,yo[66]=yo[104]=1,mo[66]=mo[104]=0,fo[66]=fo[104]=-1,po[66]=po[104]=0,go[66]=go[104]=1,_o[66]=_o[104]=0,bo[66]=bo[104]=-1,wo[66]=wo[104]=0,to[66]=to[104]=0,eo[66]=eo[104]=-1,no[66]=no[104]=1,so[144]=so[26]=-1,ao[144]=ao[26]=0,uo[144]=uo[26]=0,Eo[144]=Eo[26]=1,xo[144]=xo[26]=0,Io[144]=Io[26]=1,_o[144]=_o[26]=0,bo[144]=bo[26]=1,wo[144]=wo[26]=1,ro[144]=ro[26]=-1,io[144]=io[26]=0,oo[144]=oo[26]=1,co[36]=co[134]=0,lo[36]=lo[134]=1,ho[36]=ho[134]=1,vo[36]=vo[134]=0,yo[36]=yo[134]=1,mo[36]=mo[134]=0,to[36]=to[134]=0,eo[36]=eo[134]=-1,no[36]=no[134]=1,ro[36]=ro[134]=1,io[36]=io[134]=0,oo[36]=oo[134]=0,so[9]=so[161]=-1,ao[9]=ao[161]=0,uo[9]=uo[161]=0,co[9]=co[161]=0,lo[9]=lo[161]=-1,ho[9]=ho[161]=0,fo[9]=fo[161]=1,po[9]=po[161]=0,go[9]=go[161]=0,Eo[9]=Eo[161]=1,xo[9]=xo[161]=0,Io[9]=Io[161]=1,so[136]=0,ao[136]=1,uo[136]=1,co[136]=0,lo[136]=1,ho[136]=0,vo[136]=-1,yo[136]=0,mo[136]=1,fo[136]=-1,po[136]=0,go[136]=0,Eo[136]=0,xo[136]=-1,Io[136]=0,_o[136]=0,bo[136]=-1,wo[136]=1,to[136]=1,eo[136]=0,no[136]=0,ro[136]=1,io[136]=0,oo[136]=1,so[34]=0,ao[34]=-1,uo[34]=0,co[34]=0,lo[34]=-1,ho[34]=1,vo[34]=1,yo[34]=0,mo[34]=0,fo[34]=1,po[34]=0,go[34]=1,Eo[34]=0,xo[34]=1,Io[34]=1,_o[34]=0,bo[34]=1,wo[34]=0,to[34]=-1,eo[34]=0,no[34]=1,ro[34]=-1,io[34]=0,oo[34]=0,so[35]=0,ao[35]=1,uo[35]=1,co[35]=0,lo[35]=-1,ho[35]=1,vo[35]=1,yo[35]=0,mo[35]=0,fo[35]=-1,po[35]=0,go[35]=0,Eo[35]=0,xo[35]=-1,Io[35]=0,_o[35]=0,bo[35]=1,wo[35]=0,to[35]=-1,eo[35]=0,no[35]=1,ro[35]=1,io[35]=0,oo[35]=1,so[153]=0,ao[153]=1,uo[153]=1,fo[153]=-1,po[153]=0,go[153]=0,Eo[153]=0,xo[153]=-1,Io[153]=0,ro[153]=1,io[153]=0,oo[153]=1,co[102]=0,lo[102]=-1,ho[102]=1,vo[102]=1,yo[102]=0,mo[102]=0,_o[102]=0,bo[102]=1,wo[102]=0,to[102]=-1,eo[102]=0,no[102]=1,so[155]=0,ao[155]=-1,uo[155]=0,fo[155]=1,po[155]=0,go[155]=1,Eo[155]=0,xo[155]=1,Io[155]=1,ro[155]=-1,io[155]=0,oo[155]=0,co[103]=0,lo[103]=1,ho[103]=0,vo[103]=-1,yo[103]=0,mo[103]=1,_o[103]=0,bo[103]=-1,wo[103]=1,to[103]=1,eo[103]=0,no[103]=0,so[152]=0,ao[152]=1,uo[152]=1,vo[152]=-1,yo[152]=0,mo[152]=1,fo[152]=-1,po[152]=0,go[152]=0,Eo[152]=0,xo[152]=-1,Io[152]=0,_o[152]=0,bo[152]=-1,wo[152]=1,ro[152]=1,io[152]=0,oo[152]=1,so[156]=0,ao[156]=-1,uo[156]=1,vo[156]=1,yo[156]=0,mo[156]=1,fo[156]=-1,po[156]=0,go[156]=0,Eo[156]=0,xo[156]=-1,Io[156]=0,_o[156]=0,bo[156]=1,wo[156]=1,ro[156]=-1,io[156]=0,oo[156]=1,so[137]=0,ao[137]=1,uo[137]=1,co[137]=0,lo[137]=1,ho[137]=0,fo[137]=-1,po[137]=0,go[137]=0,Eo[137]=0,xo[137]=-1,Io[137]=0,to[137]=1,eo[137]=0,no[137]=0,ro[137]=1,io[137]=0,oo[137]=1,so[139]=0,ao[139]=1,uo[139]=1,co[139]=0,lo[139]=-1,ho[139]=0,fo[139]=1,po[139]=0,go[139]=0,Eo[139]=0,xo[139]=1,Io[139]=0,to[139]=-1,eo[139]=0,no[139]=0,ro[139]=1,io[139]=0,oo[139]=1,so[98]=0,ao[98]=-1,uo[98]=0,co[98]=0,lo[98]=-1,ho[98]=1,vo[98]=1,yo[98]=0,mo[98]=0,fo[98]=1,po[98]=0,go[98]=1,_o[98]=0,bo[98]=1,wo[98]=0,to[98]=-1,eo[98]=0,no[98]=1,so[99]=0,ao[99]=1,uo[99]=0,co[99]=0,lo[99]=-1,ho[99]=1,vo[99]=1,yo[99]=0,mo[99]=0,fo[99]=-1,po[99]=0,go[99]=1,_o[99]=0,bo[99]=-1,wo[99]=0,to[99]=1,eo[99]=0,no[99]=1,co[38]=0,lo[38]=-1,ho[38]=1,vo[38]=1,yo[38]=0,mo[38]=0,Eo[38]=0,xo[38]=1,Io[38]=1,_o[38]=0,bo[38]=1,wo[38]=0,to[38]=-1,eo[38]=0,no[38]=1,ro[38]=-1,io[38]=0,oo[38]=0,co[39]=0,lo[39]=1,ho[39]=1,vo[39]=-1,yo[39]=0,mo[39]=0,Eo[39]=0,xo[39]=-1,Io[39]=1,_o[39]=0,bo[39]=1,wo[39]=0,to[39]=-1,eo[39]=0,no[39]=1,ro[39]=1,io[39]=0,oo[39]=0;var Oo=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},So=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},Co=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},To=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},No=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},ko=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},Ao=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},Po=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Ro=[],Lo=[],jo=[],Mo=[],Do=[],Fo=[],qo=[],Uo=[];Mo[1]=Do[1]=18,Mo[169]=Do[169]=18,jo[4]=Lo[4]=12,jo[166]=Lo[166]=12,Ro[16]=Uo[16]=4,Ro[154]=Uo[154]=4,Fo[64]=qo[64]=22,Fo[106]=qo[106]=22,jo[2]=Fo[2]=17,Mo[2]=Do[2]=18,jo[168]=Fo[168]=17,Mo[168]=Do[168]=18,Ro[8]=Mo[8]=9,Lo[8]=jo[8]=12,Ro[162]=Mo[162]=9,Lo[162]=jo[162]=12,Ro[32]=Uo[32]=4,Lo[32]=qo[32]=1,Ro[138]=Uo[138]=4,Lo[138]=qo[138]=1,Do[128]=Uo[128]=21,Fo[128]=qo[128]=22,Do[42]=Uo[42]=21,Fo[42]=qo[42]=22,Lo[5]=Do[5]=14,Lo[165]=Do[165]=14,jo[20]=Uo[20]=6,jo[150]=Uo[150]=6,Ro[80]=Fo[80]=11,Ro[90]=Fo[90]=11,Mo[65]=qo[65]=3,Mo[105]=qo[105]=3,Ro[160]=Fo[160]=11,Lo[160]=Do[160]=14,Ro[10]=Fo[10]=11,Lo[10]=Do[10]=14,jo[130]=Uo[130]=6,Mo[130]=qo[130]=3,jo[40]=Uo[40]=6,Mo[40]=qo[40]=3,Lo[101]=qo[101]=1,Lo[69]=qo[69]=1,Do[149]=Uo[149]=21,Do[21]=Uo[21]=21,jo[86]=Fo[86]=17,jo[84]=Fo[84]=17,Ro[89]=Mo[89]=9,Ro[81]=Mo[81]=9,Ro[96]=qo[96]=0,Lo[96]=Fo[96]=15,Ro[74]=qo[74]=0,Lo[74]=Fo[74]=15,Ro[24]=jo[24]=8,Mo[24]=Uo[24]=7,Ro[146]=jo[146]=8,Mo[146]=Uo[146]=7,Lo[6]=Fo[6]=15,jo[6]=Do[6]=16,Lo[164]=Fo[164]=15,jo[164]=Do[164]=16,Mo[129]=Uo[129]=7,Do[129]=qo[129]=20,Mo[41]=Uo[41]=7,Do[41]=qo[41]=20,jo[66]=qo[66]=2,Mo[66]=Fo[66]=19,jo[104]=qo[104]=2,Mo[104]=Fo[104]=19,Ro[144]=Do[144]=10,Fo[144]=Uo[144]=23,Ro[26]=Do[26]=10,Fo[26]=Uo[26]=23,Lo[36]=Uo[36]=5,jo[36]=qo[36]=2,Lo[134]=Uo[134]=5,jo[134]=qo[134]=2,Ro[9]=Do[9]=10,Lo[9]=Mo[9]=13,Ro[161]=Do[161]=10,Lo[161]=Mo[161]=13,Lo[37]=Uo[37]=5,Do[37]=qo[37]=20,Lo[133]=Uo[133]=5,Do[133]=qo[133]=20,jo[148]=Do[148]=16,Fo[148]=Uo[148]=23,jo[22]=Do[22]=16,Fo[22]=Uo[22]=23,Ro[82]=jo[82]=8,Mo[82]=Fo[82]=19,Ro[88]=jo[88]=8,Mo[88]=Fo[88]=19,Ro[73]=qo[73]=0,Lo[73]=Mo[73]=13,Ro[97]=qo[97]=0,Lo[97]=Mo[97]=13,Ro[145]=Mo[145]=9,Do[145]=Uo[145]=21,Ro[25]=Mo[25]=9,Do[25]=Uo[25]=21,Lo[70]=qo[70]=1,jo[70]=Fo[70]=17,Lo[100]=qo[100]=1,jo[100]=Fo[100]=17,Ro[34]=Mo[34]=9,Lo[34]=jo[34]=12,Do[34]=Uo[34]=21,Fo[34]=qo[34]=22,Ro[136]=Uo[136]=4,Lo[136]=qo[136]=1,jo[136]=Fo[136]=17,Mo[136]=Do[136]=18,Ro[35]=Uo[35]=4,Lo[35]=jo[35]=12,Mo[35]=Do[35]=18,Fo[35]=qo[35]=22,Ro[153]=Uo[153]=4,Mo[153]=Do[153]=18,Lo[102]=jo[102]=12,Fo[102]=qo[102]=22,Ro[155]=Mo[155]=9,Do[155]=Uo[155]=23,Lo[103]=qo[103]=1,jo[103]=Fo[103]=17,Ro[152]=Uo[152]=4,jo[152]=Fo[152]=17,Mo[152]=Do[152]=18,Ro[156]=jo[156]=8,Mo[156]=Do[156]=18,Fo[156]=Uo[156]=23,Ro[137]=Uo[137]=4,Lo[137]=qo[137]=1,Mo[137]=Do[137]=18,Ro[139]=Uo[139]=4,Lo[139]=Mo[139]=13,Do[139]=qo[139]=20,Ro[98]=Mo[98]=9,Lo[98]=jo[98]=12,Fo[98]=qo[98]=22,Ro[99]=qo[99]=0,Lo[99]=jo[99]=12,Mo[99]=Fo[99]=19,Lo[38]=jo[38]=12,Do[38]=Uo[38]=21,Fo[38]=qo[38]=22,Lo[39]=Uo[39]=5,jo[39]=Do[39]=16,Fo[39]=qo[39]=22;var Bo=[];function Vo(t,e,n){return(t-e)/(n-e)}function Go(t){return t.constructor.toString().indexOf("Array")>-1}function zo(t,e,n,r,i,o){for(var s=t.cells[n][e],a=s.cval_real,u=e+r,c=n+i,l=[],h=!1;!h;){if(void 0===t.cells[c]||void 0===t.cells[c][u])if(c-=i,u-=r,a=(s=t.cells[c][u]).cval_real,-1===i)if(0===o)if(1&a)l.push([u,c]),r=-1,i=0,o=0;else{if(!(4&a)){l.push([u+s.bottomright,c]),r=0,i=1,o=1,h=!0;break}l.push([u+1,c]),r=1,i=0,o=0}else{if(!(1&a)){if(4&a){l.push([u+s.bottomright,c]),r=0,i=1,o=1,h=!0;break}l.push([u+s.bottomleft,c]),r=0,i=1,o=0,h=!0;break}l.push([u,c]),r=-1,i=0,o=0}else if(1===i)if(0===o){if(!(a&Zi)){if(a&Ji){l.push([u+s.topleft,c+1]),r=0,i=-1,o=0,h=!0;break}l.push([u+s.topright,c+1]),r=0,i=-1,o=1,h=!0;break}l.push([u+1,c+1]),r=1,i=0,o=1}else l.push([u+1,c+1]),r=1,i=0,o=1;else if(-1===r)if(0===o){if(!(a&Ji)){if(1&a){l.push([u,c+s.leftbottom]),r=1,i=0,o=0,h=!0;break}l.push([u,c+s.lefttop]),r=1,i=0,o=1,h=!0;break}l.push([u,c+1]),r=0,i=1,o=0}else{if(!(a&Ji)){console.log("MarchingSquaresJS-isoBands: wtf");break}l.push([u,c+1]),r=0,i=1,o=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(4&a)){l.push([u+1,c+s.rightbottom]),r=-1,i=0,o=0,h=!0;break}l.push([u+1,c]),r=0,i=-1,o=1}else{if(!(4&a)){if(a&Zi){l.push([u+1,c+s.righttop]),r=-1,i=0,o=1;break}l.push([u+1,c+s.rightbottom]),r=-1,i=0,o=0,h=!0;break}l.push([u+1,c]),r=0,i=-1,o=1}}else if(a=(s=t.cells[c][u]).cval_real,-1===r)if(0===o)if(void 0!==t.cells[c-1]&&void 0!==t.cells[c-1][u])r=0,i=-1,o=1;else{if(!(1&a)){l.push([u+s.bottomright,c]),r=0,i=1,o=1,h=!0;break}l.push([u,c])}else{if(!(a&Ji)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+c);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[c+1]&&void 0!==t.cells[c+1][u])r=0,i=1,o=0;else{if(!(a&Zi)){l.push([u+s.topleft,c+1]),r=0,i=-1,o=0,h=!0;break}l.push([u+1,c+1]),r=1,i=0,o=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[c][u+1])r=1,i=0,o=1;else{if(!(4&a)){l.push([u+1,c+s.righttop]),r=-1,i=0,o=1,h=!0;break}l.push([u+1,c]),r=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[c][u-1])r=-1,i=0,o=0;else{if(!(a&Ji)){l.push([u,c+s.leftbottom]),r=1,i=0,o=0,h=!0;break}l.push([u,c+1]),r=0,i=1,o=0}}if(c+=i,(u+=r)===e&&c===n)break}return{path:l,i:u,j:c,x:r,y:i,o:o}}function Wo(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],n=t.cval_real;switch(e){case 0:return n&Zi?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return 4&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return 1&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&Zi?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return 4&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return 1&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return 1&n?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&Ji?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return 1&n?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&Ji?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&Ji?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&Ji?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&Ji?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&Zi?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&Ji?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&Zi?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}function Ko(t,e,n,r){var i,o,s,a,u,c=t.cval;switch(e){case-1:switch(r){case 0:i=Lo[c],s=co[c],a=lo[c],u=ho[c];break;default:i=Ro[c],s=so[c],a=ao[c],u=uo[c]}break;case 1:switch(r){case 0:i=Do[c],s=Eo[c],a=xo[c],u=Io[c];break;default:i=Fo[c],s=_o[c],a=bo[c],u=wo[c]}break;default:switch(n){case-1:switch(r){case 0:i=qo[c],s=to[c],a=eo[c],u=no[c];break;default:i=Uo[c],s=ro[c],a=io[c],u=oo[c]}break;case 1:switch(r){case 0:i=Mo[c],s=fo[c],a=po[c],u=go[c];break;default:i=jo[c],s=vo[c],a=yo[c],u=mo[c]}}}if(o=t.edges.indexOf(i),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),c=t.cval_real,i){case 0:c&Zi?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:4&c?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:4&c?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:1&c?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:c&Zi?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:4&c?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:4&c?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:1&c?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:4&c?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:1&c?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:1&c?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:c&Ji?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:4&c?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:1&c?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:1&c?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:c&Ji?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:4&c?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:c&Ji?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:1&c?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:c&Ji?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:c&Ji?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:c&Zi?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:c&Ji?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:c&Zi?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==s&&void 0!==a&&void 0!==u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+s+" "+a+" "+u)),{p:[e,n],x:s,y:a,o:u}}function Ho(t){var e=[],n=[];t.forEach((function(t){var r=Vr(l([t]));n.push(r),e.push({ring:t,area:r})})),n.sort((function(t,e){return e-t}));var r=[];return n.forEach((function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){r.push(e[n].ring),e.splice(n,1);break}})),r}function Yo(t){for(var e=t.map((function(t){return{lrCoordinates:t,grouped:!1}})),n=[];!$o(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var i=[];i.push(e[r].lrCoordinates),e[r].grouped=!0;for(var o=l([e[r].lrCoordinates]),s=r+1;s<e.length;s++)e[s].grouped||Xo(l([e[s].lrCoordinates]),o)&&(i.push(e[s].lrCoordinates),e[s].grouped=!0);n.push(i)}return n}function Xo(t,e){for(var n=En(t),r=0;r<n.features.length;r++)if(!ye(n.features[r],e))return!1;return!0}function $o(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}function Qo(t,e,n){if(!N(n=n||{}))throw new Error("options is invalid");var r=n.pivot,i=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e||(r||(r=wn(t)),!1!==i&&void 0!==i||(t=Oe(t)),V(t,(function(t){var n=Fi(r,t)+e,i=Lr(r,t),o=L(Ui(r,i,n));t[0]=o[0],t[1]=o[1]}))),t}function Jo(t,e,n){if(!N(n=n||{}))throw new Error("options is invalid");var r=n.origin,i=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(r)||"object"==typeof r;return!0!==i&&(t=Oe(t)),"FeatureCollection"!==t.type||o?Zo(t,e,r):(K(t,(function(n,i){t.features[i]=Zo(n,e,r)})),t)}function Zo(t,e,n){var r="Point"===U(t);return n=function(t,e){if(null==e&&(e="centroid"),Array.isArray(e)||"object"==typeof e)return R(e);var n=t.bbox?t.bbox:st(t),r=n[0],i=n[1],o=n[2],s=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return u([r,i]);case"se":case"southeast":case"eastsouth":case"bottomright":return u([o,i]);case"nw":case"northwest":case"westnorth":case"topleft":return u([r,s]);case"ne":case"northeast":case"eastnorth":case"topright":return u([o,s]);case"center":return bn(t);case void 0:case null:case"centroid":return wn(t);default:throw new Error("invalid origin")}}(t,n),1===e||r||V(t,(function(t){var r=Lr(n,t),i=Fi(n,t),o=L(Ui(n,r*e,i));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)})),t}function ts(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function es(t,e){return t[0]*e[1]-e[0]*t[1]}function ns(t,e){return!function(t,e){return 0===es(ts(t),ts(e))}(t,e)&&function(t,e){var n,r,i=t[0],o=ts(t),s=e[0],a=ts(e),u=es(o,a);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(i,function(t,e){return[t*e[0],t*e[1]]}(es((r=i,[(n=s)[0]-r[0],n[1]-r[1]]),a)/u,o))}(t,e)}function rs(t,e,n){var r=[],i=E(e,n),o=L(t),s=[];return o.forEach((function(t,e){if(e!==o.length-1){var n=(c=t,l=o[e+1],h=i,f=Math.sqrt((c[0]-l[0])*(c[0]-l[0])+(c[1]-l[1])*(c[1]-l[1])),p=c[0]+h*(l[1]-c[1])/f,d=l[0]+h*(l[1]-c[1])/f,g=c[1]+h*(c[0]-l[0])/f,v=l[1]+h*(c[0]-l[0])/f,[[p,g],[d,v]]);if(r.push(n),e>0){var a=r[e-1],u=ns(n,a);!1!==u&&(a[1]=u,n[0]=u),s.push(a[0]),e===o.length-2&&(s.push(n[0]),s.push(n[1]))}2===o.length&&(s.push(n[0]),s.push(n[1]))}var c,l,h,f,p,d,g,v})),f(s,t.properties)}function is(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-e[0];return function(t){return(t>0)-(t<0)||+t}(r*(n[1]-e[1])-o*i)}function os(t,e){return e.geometry.coordinates[0].every((function(e){return ye(u(e),t)}))}Bo[1]=Bo[169]=Oo,Bo[4]=Bo[166]=So,Bo[16]=Bo[154]=Co,Bo[64]=Bo[106]=To,Bo[168]=Bo[2]=No,Bo[162]=Bo[8]=ko,Bo[138]=Bo[32]=Ao,Bo[42]=Bo[128]=Po,Bo[5]=Bo[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},Bo[20]=Bo[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},Bo[80]=Bo[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},Bo[65]=Bo[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Bo[160]=Bo[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},Bo[130]=Bo[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},Bo[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Bo[101]=Bo[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},Bo[149]=Bo[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},Bo[86]=Bo[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},Bo[89]=Bo[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},Bo[96]=Bo[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},Bo[24]=Bo[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},Bo[6]=Bo[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},Bo[129]=Bo[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},Bo[66]=Bo[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Bo[144]=Bo[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Bo[36]=Bo[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},Bo[9]=Bo[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Bo[37]=Bo[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Bo[148]=Bo[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Bo[82]=Bo[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},Bo[73]=Bo[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Bo[145]=Bo[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Bo[70]=Bo[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Bo[34]=function(t){return[Po(t),ko(t)]},Bo[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Bo[136]=function(t){return[Ao(t),No(t)]},Bo[153]=function(t){return[Co(t),Oo(t)]},Bo[102]=function(t){return[So(t),To(t)]},Bo[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Bo[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Bo[152]=function(t){return[Co(t),No(t)]},Bo[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Bo[137]=function(t){return[Ao(t),Oo(t)]},Bo[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Bo[98]=function(t){return[ko(t),To(t)]},Bo[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Bo[38]=function(t){return[So(t),Po(t)]},Bo[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var ss=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var r=e.to,i=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]==0&&i.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=is(t.coordinates,r.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}(),as=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return f([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return is(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}(),us=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this[this.edges.length]=t,this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e}),0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=is(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:i>0},t.prototype.toMultiPoint=function(){return v(this.edges.map((function(t){return t.from.coordinates})))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=l([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=gn(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var n,r,i=t.getEnvelope();return e.forEach((function(e){var o,s,a,c,l,h,f=e.getEnvelope();if(r&&(n=r.getEnvelope()),s=i,a=(o=f).geometry.coordinates.map((function(t){return t[0]})),c=o.geometry.coordinates.map((function(t){return t[1]})),l=s.geometry.coordinates.map((function(t){return t[0]})),h=s.geometry.coordinates.map((function(t){return t[1]})),(Math.max(null,a)!==Math.max(null,l)||Math.max(null,c)!==Math.max(null,h)||Math.min(null,a)!==Math.min(null,l)||Math.min(null,c)!==Math.min(null,h))&&os(f,i)){var p=t.map((function(t){return t.from.coordinates})).find((function(t){return!e.some((function(e){return n=t,r=e.from.coordinates,n[0]===r[0]&&n[1]===r[1];var n,r}))}));p&&e.inside(u(p))&&(r&&!os(n,f)||(r=e))}})),r},t.prototype.inside=function(t){return ye(t,this.toPolygon())},t}(),cs=function(){function t(){this.edges=[],this.nodes={}}return t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var n=new t;return Q(e,(function(t){D(t,"LineString","Graph::fromGeoJson"),G(t,(function(t,e){if(t){var r=n.getNode(t),i=n.getNode(e);n.addEdge(r,i)}return e}))})),n},t.prototype.getNode=function(t){var e=ss.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new ss(t)),n},t.prototype.addEdge=function(t,e){var n=new as(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},t.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))},t.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var s=i[o],a=s.symetric,u=void 0,c=void 0;s.label===e&&(u=s),a.label===e&&(c=a),u&&c&&(c&&(r=c),u&&(r&&(r.next=u,r=void 0),n||(n=u)))}r&&(r.next=n)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}})),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}));var e=[];return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e},t.prototype._findIntersectionNodes=function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++r})),r>1&&e.push(n.from),n=n.next};do{r()}while(!t.isEqual(n));return e},t.prototype._findEdgeRing=function(t){var e=t,n=new us;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()},t}();function ls(t,e){var n=!0;return Q(t,(function(t){Q(e,(function(e){if(!1===n)return!1;n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return n=t.coordinates,r=e.coordinates,!(n[0]===r[0]&&n[1]===r[1]);case"LineString":return!hs(e,t);case"Polygon":return!ye(t,e)}break;case"LineString":switch(e.type){case"Point":return!hs(t,e);case"LineString":return!function(t,e){return Ar(t,e).features.length>0}(t,e);case"Polygon":return!fs(e,t)}break;case"Polygon":switch(e.type){case"Point":return!ye(e,t);case"LineString":return!fs(t,e);case"Polygon":return!function(t,e){for(var n=0,r=t.coordinates[0];n<r.length;n++)if(ye(r[n],e))return!0;for(var i=0,o=e.coordinates[0];i<o.length;i++)if(ye(o[i],t))return!0;return Ar(Ei(t),Ei(e)).features.length>0}(e,t)}}var n,r;return!1}(t.geometry,e.geometry)}))})),n}function hs(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(ps(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function fs(t,e){for(var n=0,r=e.coordinates;n<r.length;n++)if(ye(r[n],t))return!0;return Ar(e,Ei(t)).features.length>0}function ps(t,e,n){var r=n[0]-t[0],i=n[1]-t[1],o=e[0]-t[0],s=e[1]-t[1];return 0==r*s-i*o&&(Math.abs(o)>=Math.abs(s)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}function ds(t,e){return!(t[0]>e[0])&&!(t[2]<e[2])&&!(t[1]>e[1])&&!(t[3]<e[3])}function gs(t,e){return t[0]===e[0]&&t[1]===e[1]}function vs(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function ys(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&!n&&!r;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),bs(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?n=!0:r=!0}o++}return n&&r}function ms(t,e){return Ar(t,xi(e)).features.length>0}function _s(t,e){for(var n=!1,r=!1,i=t.coordinates[0].length,o=0;o<i&&n&&r;)ye(u(t.coordinates[0][o]),e)?n=!0:r=!0,o++;return r&&r}function bs(t,e,n,r){var i=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1];return 0==i*a-o*s&&(r?Math.abs(s)>=Math.abs(a)?s>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(s)>=Math.abs(a)?s>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:a>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}var ws=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:Is};function Es(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function xs(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function Is(t,e){return Li(t,e,{strict:!0})}ws.prototype.compare=function(t,e){if(t.type!==e.type||!xs(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=Es(t),i=Es(e);return r.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),i)}}return!1},ws.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},ws.prototype.compareLine=function(t,e,n,r){if(!xs(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var s=this.compareCoord(i[n],o[n]);return this.direction||s?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},ws.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},ws.prototype.comparePath=function(t,e){var n=this;return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},ws.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every((function(t){return this.some((function(e){return i.compareLine(t,e,1,!0)}))}),r)}return!1},ws.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},ws.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},ws.prototype.removePseudo=function(t){return t};var Os=ws;function Ss(t,e){var n=q(t),r=q(e),i=n.type,o=r.type;if("MultiPoint"===i&&"MultiPoint"!==o||("LineString"===i||"MultiLineString"===i)&&"LineString"!==o&&"MultiLineString"!==o||("Polygon"===i||"MultiPolygon"===i)&&"Polygon"!==o&&"MultiPolygon"!==o)throw new Error("features must be of the same type");if("Point"===i)throw new Error("Point geometry not supported");if(new Os({precision:6}).compare(t,e))return!1;var s=0;switch(i){case"MultiPoint":for(var a=0;a<n.coordinates.length;a++)for(var u=0;u<r.coordinates.length;u++){var c=n.coordinates[a],l=r.coordinates[u];if(c[0]===l[0]&&c[1]===l[1])return!0}return!1;case"LineString":case"MultiLineString":Z(t,(function(t){Z(e,(function(e){ji(t,e).features.length&&s++}))}));break;case"Polygon":case"MultiPolygon":Z(t,(function(t){Z(e,(function(e){Ar(t,e).features.length&&s++}))}))}return s>0}function Cs(t,e){var n=!1;return Q(t,(function(t){Q(e,(function(e){if(!0===n)return!0;n=!ls(t.geometry,e.geometry)}))})),n}var Ts=Bt((function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(i,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)})),Ns=Bt((function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(l),a=0,u=0;u<l;u++)s[u]=0;for(var c=0;c<n;c++){var l=this.dataset[c].length;if(o===this.assignments[c]){for(u=0;u<l;u++)s[u]+=this.dataset[c][u];a++}}if(a>0){for(u=0;u<l;u++)s[u]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(r=n(t,e[a]))<i&&(i=r,o=a);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)})),ks=Bt((function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?e>i&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)})),As=Bt((function(t){if(t.exports)var e=ks;function n(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}n.prototype.run=function(t,n,r,i){this._init(t,n,r,i);for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var a=this.clusters.length-1;this._orderedList.push(o);var u=new e(null,null,"asc"),c=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,c,u),this._expandCluster(a,u))}return this.clusters},n.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},n.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},n.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===r._processed[e]){var i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i);void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o))}}))},n.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},n.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},n.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},n.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=n)})),Ps=Bt((function(t){t.exports&&(t.exports={DBSCAN:Ts,KMEANS:Ns,OPTICS:As,PriorityQueue:ks})})),Rs=function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var s=(t[o]||0)-(e[o]||0);i+=s*s}return n?Math.sqrt(i):i},Ls=Rs,js=function(t,e,n){var r=Math.abs(t-e);return n?r:r*r},Ms=Rs,Ds=function(t,e){for(var n={},r=[],i=e<<2,o=t.length,s=t[0].length>0;r.length<e&&i-- >0;){var a=t[Math.floor(Math.random()*o)],u=s?a.join("_"):""+a;n[u]||(n[u]=!0,r.push(a))}if(r.length<e)throw new Error("Error initializating clusters");return r},Fs=function(t,e){var n=t[0].length?Ls:js,r=[],i=t.length,o=t[0].length>0,s=t[Math.floor(Math.random()*i)];for(o&&s.join("_"),r.push(s);r.length<e;){for(var a=[],u=r.length,c=0,l=[],h=0;h<i;h++){for(var f=1/0,p=0;p<u;p++){var d=n(t[h],r[p]);d<=f&&(f=d)}a[h]=f}for(var g=0;g<i;g++)c+=a[g];for(var v=0;v<i;v++)l[v]={i:v,v:t[v],pr:a[v]/c,cs:0};l.sort((function(t,e){return t.pr-e.pr})),l[0].cs=l[0].pr;for(var y=1;y<i;y++)l[y].cs=l[y-1].cs+l[y].pr;for(var m=Math.random(),_=0;_<i-1&&l[_++].cs<m;);r.push(l[_-1].v)}return r};function qs(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}var Us=function(t,e,n,r){var i=[],o=[],s=[],a=[],u=!1,c=r||1e4,l=t.length,h=t[0].length,f=h>0,p=[];if(n)i="kmrand"==n?Ds(t,e):"kmpp"==n?Fs(t,e):n;else for(var d={};i.length<e;){var g=Math.floor(Math.random()*l);d[g]||(d[g]=!0,i.push(t[g]))}do{qs(e,0,p);for(var v=0;v<l;v++){for(var y=1/0,m=0,_=0;_<e;_++)(a=f?Ms(t[v],i[_]):Math.abs(t[v]-i[_]))<=y&&(y=a,m=_);s[v]=m,p[m]++}for(var b=[],w=(o=[],0);w<e;w++)b[w]=f?qs(h,0,b[w]):0,o[w]=i[w];if(f){for(var E=0;E<e;E++)i[E]=[];for(var x=0;x<l;x++)for(var I=b[s[x]],O=t[x],S=0;S<h;S++)I[S]+=O[S];u=!0;for(var C=0;C<e;C++){for(var T=i[C],N=b[C],k=o[C],A=p[C],P=0;P<h;P++)T[P]=N[P]/A||0;if(u)for(var R=0;R<h;R++)if(k[R]!=T[R]){u=!1;break}}}else{for(var L=0;L<l;L++)b[s[L]]+=t[L];for(var j=0;j<e;j++)i[j]=b[j]/p[j]||0;u=!0;for(var M=0;M<e;M++)if(o[M]!=i[M]){u=!1;break}}u=u||--c<=0}while(!u);return{it:1e4-c,k:e,idxs:s,centroids:i}};function Bs(t,e){return x(Fi(t[0],t[1]))===x(Fi(e[0],e[1]))}function Vs(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function Gs(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var zs={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||zs.heuristics.manhattan,o=r.closest||!1,s=new Hs((function(t){return t.f})),a=e;for(e.h=i(e,n),s.push(e);s.size()>0;){var u=s.pop();if(u===n)return Gs(u);u.closed=!0;for(var c=t.neighbors(u),l=0,h=c.length;l<h;++l){var f=c[l];if(!f.closed&&!f.isWall()){var p=u.g+f.getCost(u),d=f.visited;(!d||p<f.g)&&(f.visited=!0,f.parent=u,f.h=f.h||i(f,n),f.g=p,f.f=f.g+f.h,t.markDirty(f),o&&(f.h<a.h||f.h===a.h&&f.g<a.g)&&(a=f),d?s.rescoreElement(f):s.push(f))}}}return o?Gs(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function Ws(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new Ks(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function Ks(t,e,n){this.x=t,this.y=e,this.weight=n}function Hs(t){this.content=[],this.scoreFunction=t}function Ys(t,e){for(var n=0;n<e.features.length;n++)if(ye(t,e.features[n]))return!0;return!1}function Xs(t){return function(){return t}}function $s(t){return t[0]}function Qs(t){return t[1]}function Js(){this._=null}function Zs(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ta(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ea(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function na(t){for(;t.L;)t=t.L;return t}function ra(t,e,n,r){var i=[null,null],o=Ca.push(i)-1;return i.left=t,i.right=e,n&&oa(i,t,e,n),r&&oa(i,e,t,r),Oa[t.index].halfedges.push(o),Oa[e.index].halfedges.push(o),i}function ia(t,e,n){var r=[e,n];return r.left=t,r}function oa(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function sa(t,e,n,r,i){var o,s=t[0],a=t[1],u=s[0],c=s[1],l=0,h=1,f=a[0]-u,p=a[1]-c;if(o=e-u,f||!(o>0)){if(o/=f,f<0){if(o<l)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>l&&(l=o)}if(o=r-u,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>l&&(l=o)}else if(f>0){if(o<l)return;o<h&&(h=o)}if(o=n-c,p||!(o>0)){if(o/=p,p<0){if(o<l)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>l&&(l=o)}if(o=i-c,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>l&&(l=o)}else if(p>0){if(o<l)return;o<h&&(h=o)}return!(l>0||h<1)||(l>0&&(t[0]=[u+l*f,c+l*p]),h<1&&(t[1]=[u+h*f,c+h*p]),!0)}}}}}function aa(t,e,n,r,i){var o=t[1];if(o)return!0;var s,a,u=t[0],c=t.left,l=t.right,h=c[0],f=c[1],p=l[0],d=l[1],g=(h+p)/2,v=(f+d)/2;if(d===f){if(g<e||g>=r)return;if(h>p){if(u){if(u[1]>=i)return}else u=[g,n];o=[g,i]}else{if(u){if(u[1]<n)return}else u=[g,i];o=[g,n]}}else if(a=v-(s=(h-p)/(d-f))*g,s<-1||s>1)if(h>p){if(u){if(u[1]>=i)return}else u=[(n-a)/s,n];o=[(i-a)/s,i]}else{if(u){if(u[1]<n)return}else u=[(i-a)/s,i];o=[(n-a)/s,n]}else if(f<d){if(u){if(u[0]>=r)return}else u=[e,s*e+a];o=[r,s*r+a]}else{if(u){if(u[0]<e)return}else u=[r,s*r+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0}function ua(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function ca(t,e){return e[+(e.left!==t.site)]}function la(t,e){return e[+(e.left===t.site)]}Ws.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)zs.cleanNode(this.nodes[t])},Ws.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)zs.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Ws.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Ws.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},Ws.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],n=0,r=(e=o[s]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},Ks.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Ks.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Ks.prototype.isWall=function(){return 0===this.weight},Hs.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,s=o-1,a=null;if(s<e){var u=this.content[s];(i=this.scoreFunction(u))<r&&(a=s)}if(o<e){var c=this.content[o];this.scoreFunction(c)<(null===a?r:i)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}},Js.prototype={constructor:Js,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=na(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(ta(this,n),n=(t=n).U),n.C=!1,r.C=!0,ea(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(ea(this,n),n=(t=n).U),n.C=!1,r.C=!0,ta(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,s=t.R;if(n=o?s?na(s):o:s,i?i.L===t?i.L=n:i.R=n:this._=n,o&&s?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=s,s.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,ta(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,ea(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,ta(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,ea(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ta(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,ea(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var ha,fa=[];function pa(){Zs(this),this.x=this.y=this.arc=this.site=this.cy=null}function da(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var s=i[0],a=i[1],u=r[0]-s,c=r[1]-a,l=o[0]-s,h=o[1]-a,f=2*(u*h-c*l);if(!(f>=-Na)){var p=u*u+c*c,d=l*l+h*h,g=(h*p-c*d)/f,v=(u*d-l*p)/f,y=fa.pop()||new pa;y.arc=t,y.site=i,y.x=g+s,y.y=(y.cy=v+a)+Math.sqrt(g*g+v*v),t.circle=y;for(var m=null,_=Sa._;_;)if(y.y<_.y||y.y===_.y&&y.x<=_.x){if(!_.L){m=_.P;break}_=_.L}else{if(!_.R){m=_;break}_=_.R}Sa.insert(m,y),m||(ha=y)}}}}function ga(t){var e=t.circle;e&&(e.P||(ha=e.N),Sa.remove(e),fa.push(e),Zs(e),t.circle=null)}var va=[];function ya(){Zs(this),this.edge=this.site=this.circle=null}function ma(t){var e=va.pop()||new ya;return e.site=t,e}function _a(t){ga(t),Ia.remove(t),va.push(t),Zs(t)}function ba(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,s=t.N,a=[t];_a(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<Ta&&Math.abs(r-u.circle.cy)<Ta;)o=u.P,a.unshift(u),_a(u),u=o;a.unshift(u),ga(u);for(var c=s;c.circle&&Math.abs(n-c.circle.x)<Ta&&Math.abs(r-c.circle.cy)<Ta;)s=c.N,a.push(c),_a(c),c=s;a.push(c),ga(c);var l,h=a.length;for(l=1;l<h;++l)c=a[l],u=a[l-1],oa(c.edge,u.site,c.site,i);u=a[0],(c=a[h-1]).edge=ra(u.site,c.site,null,i),da(u),da(c)}function wa(t){for(var e,n,r,i,o=t[0],s=t[1],a=Ia._;a;)if((r=Ea(a,s)-o)>Ta)a=a.L;else{if(!((i=o-xa(a,s))>Ta)){r>-Ta?(e=a.P,n=a):i>-Ta?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){Oa[t.index]={site:t,halfedges:[]}}(t);var u=ma(t);if(Ia.insert(e,u),e||n){if(e===n)return ga(e),n=ma(e.site),Ia.insert(u,n),u.edge=n.edge=ra(e.site,u.site),da(e),void da(n);if(n){ga(e),ga(n);var c=e.site,l=c[0],h=c[1],f=t[0]-l,p=t[1]-h,d=n.site,g=d[0]-l,v=d[1]-h,y=2*(f*v-p*g),m=f*f+p*p,_=g*g+v*v,b=[(v*m-p*_)/y+l,(f*_-g*m)/y+h];oa(n.edge,c,d,b),u.edge=ra(c,t,null,b),n.edge=ra(t,d,null,b),da(e),da(n)}else u.edge=ra(e.site,u.site)}}function Ea(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],u=n[1],c=u-e;if(!c)return a;var l=a-r,h=1/o-1/c,f=l/c;return h?(-f+Math.sqrt(f*f-2*h*(l*l/(-2*c)-u+c/2+i-o/2)))/h+r:(r+a)/2}function xa(t,e){var n=t.N;if(n)return Ea(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var Ia,Oa,Sa,Ca,Ta=1e-6,Na=1e-12;function ka(t,e){return e[1]-t[1]||e[0]-t[0]}function Aa(t,e){var n,r,i,o=t.sort(ka).pop();for(Ca=[],Oa=new Array(t.length),Ia=new Js,Sa=new Js;;)if(i=ha,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(wa(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;ba(i.arc)}if(function(){for(var t,e,n,r,i=0,o=Oa.length;i<o;++i)if((t=Oa[i])&&(r=(e=t.halfedges).length)){var s=new Array(r),a=new Array(r);for(n=0;n<r;++n)s[n]=n,a[n]=ua(t,Ca[e[n]]);for(s.sort((function(t,e){return a[e]-a[t]})),n=0;n<r;++n)a[n]=e[s[n]];for(n=0;n<r;++n)e[n]=a[n]}}(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],c=+e[1][1];!function(t,e,n,r){for(var i,o=Ca.length;o--;)aa(i=Ca[o],t,e,n,r)&&sa(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>Ta||Math.abs(i[0][1]-i[1][1])>Ta)||delete Ca[o]}(s,a,u,c),function(t,e,n,r){var i,o,s,a,u,c,l,h,f,p,d,g,v=Oa.length,y=!0;for(i=0;i<v;++i)if(o=Oa[i]){for(s=o.site,a=(u=o.halfedges).length;a--;)Ca[u[a]]||u.splice(a,1);for(a=0,c=u.length;a<c;)d=(p=la(o,Ca[u[a]]))[0],g=p[1],h=(l=ca(o,Ca[u[++a%c]]))[0],f=l[1],(Math.abs(d-h)>Ta||Math.abs(g-f)>Ta)&&(u.splice(a,0,Ca.push(ia(s,p,Math.abs(d-t)<Ta&&r-g>Ta?[t,Math.abs(h-t)<Ta?f:r]:Math.abs(g-r)<Ta&&n-d>Ta?[Math.abs(f-r)<Ta?h:n,r]:Math.abs(d-n)<Ta&&g-e>Ta?[n,Math.abs(h-n)<Ta?f:e]:Math.abs(g-e)<Ta&&d-t>Ta?[Math.abs(f-e)<Ta?h:t,e]:null))-1),++c);c&&(y=!1)}if(y){var m,_,b,w=1/0;for(i=0,y=null;i<v;++i)(o=Oa[i])&&(b=(m=(s=o.site)[0]-t)*m+(_=s[1]-e)*_)<w&&(w=b,y=o);if(y){var E=[t,e],x=[t,r],I=[n,r],O=[n,e];y.halfedges.push(Ca.push(ia(s=y.site,E,x))-1,Ca.push(ia(s,x,I))-1,Ca.push(ia(s,I,O))-1,Ca.push(ia(s,O,E))-1)}}for(i=0;i<v;++i)(o=Oa[i])&&(o.halfedges.length||delete Oa[i])}(s,a,u,c)}this.edges=Ca,this.cells=Oa,Ia=Sa=Ca=Oa=null}function Pa(t){return(t=t.slice()).push(t[0]),l([t])}function Ra(t,e,n,r){var i=(r=r||{}).steps||64,o=r.units||"kilometers",s=r.angle||0,a=r.pivot||t,u=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!N(r))throw new Error("options must be an object");if(!T(i))throw new Error("steps must be a number");if(!T(s))throw new Error("angle must be a number");var c=R(t);if("degrees"===o)var h=O(s);else e=Ui(t,e,90,{units:o}),n=Ui(t,n,0,{units:o}),e=R(e)[0]-c[0],n=R(n)[1]-c[1];for(var f=[],p=0;p<i;p+=1){var d=-360*p/i,g=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(La(d),2)),v=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(La(d),2));if(d<-90&&d>=-270&&(g=-g),d<-180&&d>=-360&&(v=-v),"degrees"===o){var y=g*Math.cos(h)+v*Math.sin(h),m=v*Math.cos(h)-g*Math.sin(h);g=y,v=m}f.push([g+c[0],v+c[1]])}return f.push(f[0]),"degrees"===o?l([f],u):Qo(l([f],u),s,{pivot:a})}function La(t){var e=t*Math.PI/180;return Math.tan(e)}function ja(t,e){void 0===e&&(e={});var n=0,r=0,i=0;return X(t,(function(t,o,s){var a=s[e.weight];if(!T(a=null==a?1:a))throw new Error("weight value must be a number for feature index "+o);(a=Number(a))>0&&V(t,(function(t){n+=t[0]*a,r+=t[1]*a,i+=a}))})),u([n/i,r/i],e.properties,e)}function Ma(t,e,n,r){var i=n.properties.tolerance||.001,o=0,s=0,a=0,c=0;if(K(n,(function(e){var n=e.properties.weight,r=null==n?1:n;if(!T(r=Number(r)))throw new Error("weight value must be a number");if(r>0){c+=1;var i=r*be(e,t);0===i&&(i=1);var u=r/i;o+=e.geometry.coordinates[0]*u,s+=e.geometry.coordinates[1]*u,a+=u}})),c<1)throw new Error("no features to measure");var l=o/a,h=s/a;return 1===c||0===r||Math.abs(l-e[0])<i&&Math.abs(h-e[1])<i?u([l,h],{medianCandidates:n.properties.medianCandidates}):(n.properties.medianCandidates.push([l,h]),Ma([l,h],t,n,r-1))}function Da(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function Fa(t,e){var n=0,r=0;V(t,(function(i,o,s,a,u){u>n&&(n=u,r=o,e.push([]));var c=o-r,l=t.coordinates[u][c+1],h=i[0],f=i[1],p=l[0],d=l[1];e[u].push([.75*h+.25*p,.75*f+.25*d]),e[u].push([.25*h+.75*p,.25*f+.75*d])}),!0),e.forEach((function(t){t.push(t[0])}))}function qa(t,e){var n=0,r=0,i=0;V(t,(function(o,s,a,u,c){u>i&&(i=u,r=s,e.push([[]])),c>n&&(n=c,r=s,e[u].push([]));var l=s-r,h=t.coordinates[u][c][l+1],f=o[0],p=o[1],d=h[0],g=h[1];e[u][c].push([.75*f+.25*d,.75*p+.25*g]),e[u][c].push([.25*f+.75*d,.25*p+.75*g])}),!0),e.forEach((function(t){t.forEach((function(t){t.push(t[0])}))}))}function Ua(t,e,n){void 0===n&&(n=2);var r=R(t),i=R(e),o=r[0]-i[0],s=r[1]-i[1];return 1===n?Math.abs(o)+Math.abs(s):Math.pow(Math.pow(o,n)+Math.pow(s,n),1/n)}function Ba(t,e){var n=(e=e||{}).threshold||1e4,r=e.p||2,i=e.binary||!1,o=e.alpha||-1,s=e.standardization||!1,a=[];K(t,(function(t){a.push(wn(t))}));for(var u=[],c=0;c<a.length;c++)u[c]=[];for(c=0;c<a.length;c++)for(var l=c;l<a.length;l++){c===l&&(u[c][l]=0);var h=Ua(a[c],a[l],r);u[c][l]=h,u[l][c]=h}for(c=0;c<a.length;c++)for(l=0;l<a.length;l++)0!==(h=u[c][l])&&(u[c][l]=i?h<=n?1:0:h<=n?Math.pow(h,o):0);if(s)for(c=0;c<a.length;c++){var f=u[c].reduce((function(t,e){return t+e}),0);for(l=0;l<a.length;l++)u[c][l]=u[c][l]/f}return u}function Va(t){for(var e=0,n=0,r=t;n<r.length;n++)e+=r[n];return e/t.length}function Ga(t,e){return void 0===e&&(e={}),Wa(t,"mercator",e)}function za(t,e){return void 0===e&&(e={}),Wa(t,"wgs84",e)}function Wa(t,e,n){void 0===n&&(n={});var r=(n=n||{}).mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&T(t[0])?t="mercator"===e?Ka(t):Ha(t):(!0!==r&&(t=Oe(t)),V(t,(function(t){var n="mercator"===e?Ka(t):Ha(t);t[0]=n[0],t[1]=n[1]}))),t}function Ka(t){var e=Math.PI/180,n=6378137,r=20037508.342789244,i=[n*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,n*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return i[0]>r&&(i[0]=r),i[0]<-r&&(i[0]=-r),i[1]>r&&(i[1]=r),i[1]<-r&&(i[1]=-r),i}function Ha(t){var e=180/Math.PI,n=6378137;return[t[0]*e/n,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/n)))*e]}Aa.prototype={constructor:Aa,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return ca(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(o=(i=n.halfedges).length)for(var i,o,s,a,u,c,l=n.site,h=-1,f=e[i[o-1]],p=f.left===l?f.right:f.left;++h<o;)s=p,p=(f=e[i[h]]).left===l?f.right:f.left,s&&p&&r<s.index&&r<p.index&&(u=s,c=p,((a=l)[0]-c[0])*(u[1]-a[1])-(a[0]-u[0])*(c[1]-a[1])<0)&&t.push([l.data,s.data,p.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,o=this,s=o._found||0,a=o.cells.length;!(i=o.cells[s]);)if(++s>=a)return null;var u=t-i.site[0],c=e-i.site[1],l=u*u+c*c;do{i=o.cells[r=s],s=null,i.halfedges.forEach((function(n){var r=o.edges[n],a=r.left;if(a!==i.site&&a||(a=r.right)){var u=t-a[0],c=e-a[1],h=u*u+c*c;h<l&&(l=h,s=a.index)}}))}while(null!==s);return o._found=r,null==n||l<=n*n?i.site:null}};var Ya=Object.freeze({__proto__:null,toMercator:Ga,toWgs84:za});function Xa(t){return Array.isArray(t)?tu(t):t&&t.bbox?tu(t.bbox):[360*Za(),180*Za()]}function $a(t,e){void 0===e&&(e={}),null==t&&(t=1);for(var n=[],r=0;r<t;r++)n.push(u(Xa(e.bbox)));return d(n)}function Qa(t,e){void 0===e&&(e={}),null==t&&(t=1),T(e.num_vertices)&&void 0!==e.num_vertices||(e.num_vertices=10),T(e.max_radial_length)&&void 0!==e.max_radial_length||(e.max_radial_length=10);for(var n=[],r=function(t){var r,i=[],o=Array.apply(null,new Array(e.num_vertices+1)).map(Math.random);o.forEach((function(t,e,n){n[e]=e>0?t+n[e-1]:t})),o.forEach((function(t){t=2*t*Math.PI/o[o.length-1];var n=Math.random();i.push([n*(e.max_radial_length||10)*Math.sin(t),n*(e.max_radial_length||10)*Math.cos(t)])})),i[i.length-1]=i[0],i=i.map((r=Xa(e.bbox),function(t){return[t[0]+r[0],t[1]+r[1]]})),n.push(l([i]))},i=0;i<t;i++)r();return d(n)}function Ja(t,e){if(void 0===e&&(e={}),!N(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_length,o=e.max_rotation;null==t&&(t=1),(!T(r)||void 0===r||r<2)&&(r=10),T(i)&&void 0!==i||(i=1e-4),T(o)&&void 0!==o||(o=Math.PI/8);for(var s=[],a=0;a<t;a++){for(var u=[Xa(n)],c=0;c<r-1;c++){var l=(0===c?2*Math.random()*Math.PI:Math.tan((u[c][1]-u[c-1][1])/(u[c][0]-u[c-1][0])))+(Math.random()-.5)*o*2,h=Math.random()*i;u.push([u[c][0]+h*Math.cos(l),u[c][1]+h*Math.sin(l)])}s.push(f(u))}return d(s)}function Za(){return Math.random()-.5}function tu(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}var eu=Object.freeze({__proto__:null,randomPosition:Xa,randomPoint:$a,randomPolygon:Qa,randomLineString:Ja});function nu(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var n=[];return K(t,(function(t){su(t.properties,e)&&n.push(t)})),d(n)}function ru(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var r=ou(t,e),i=Object.keys(r),o=0;o<i.length;o++){for(var s=i[o],a=r[s],u=[],c=0;c<a.length;c++)u.push(t.features[a[c]]);n(d(u),s,o)}}function iu(t,e,n,r){var i=r;return ru(t,e,(function(t,e,o){i=0===o&&void 0===r?t:n(i,t,e,o)})),i}function ou(t,e){var n={};return K(t,(function(t,r){var i=t.properties||{};if(i.hasOwnProperty(String(e))){var o=i[e];n.hasOwnProperty(o)?n[o].push(r):n[o]=[r]}})),n}function su(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return t.hasOwnProperty(e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!su(t,e[r]))return!1;return!0}return au(t,e)}function au(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0}function uu(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var i=e[r];t.hasOwnProperty(i)&&(n[i]=t[i])}return n}var cu=Object.freeze({__proto__:null,getCluster:nu,clusterEach:ru,clusterReduce:iu,createBins:ou,applyFilter:su,propertiesContainsFilter:au,filterProperties:uu}),lu=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null
/**
     * splaytree v3.1.0
     * Fast Splay tree for Node and browser
     *
     * @author Alexander Milevski <info@w8r.name>
     * @license MIT
     * @preserve
     */};function hu(t,e){return t>e?1:t<e?-1:0}function fu(t,e,n){for(var r=new lu(null,null),i=r,o=r;;){var s=n(t,e.key);if(s<0){if(null===e.left)break;if(n(t,e.left.key)<0){var a=e.left;if(e.left=a.right,a.right=e,null===(e=a).left)break}o.left=e,o=e,e=e.left}else{if(!(s>0))break;if(null===e.right)break;if(n(t,e.right.key)>0&&(a=e.right,e.right=a.left,a.left=e,null===(e=a).right))break;i.right=e,i=e,e=e.right}}return i.right=e.left,o.left=e.right,e.left=r.right,e.right=r.left,e}function pu(t,e,n,r){var i=new lu(t,e);if(null===n)return i.left=i.right=null,i;var o=r(t,(n=fu(t,n,r)).key);return o<0?(i.left=n.left,i.right=n,n.left=null):o>=0&&(i.right=n.right,i.left=n,n.right=null),i}function du(t,e,n){var r=null,i=null;if(e){var o=n((e=fu(t,e,n)).key,t);0===o?(r=e.left,i=e.right):o<0?(i=e.right,e.right=null,r=e):(r=e.left,e.left=null,i=e)}return{left:r,right:i}}function gu(t,e,n,r,i){if(t){r(e+(n?" ":" ")+i(t)+"\n");var o=e+(n?"    ":"   ");t.left&&gu(t.left,o,!1,r,i),t.right&&gu(t.right,o,!0,r,i)}}var vu=function(){function t(t){void 0===t&&(t=hu),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=pu(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new lu(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var r=this._comparator,i=fu(t,this._root,r),o=r(t,i.key);return 0===o?this._root=i:(o<0?(n.left=i.left,n.right=i,i.left=null):o>0&&(n.right=i.right,n.left=i,i.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var r;return null===e?null:0===n(t,(e=fu(t,e,n)).key)?(null===e.left?r=e.right:(r=fu(t,e.left,n)).right=e.right,this._size--,r):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=fu(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=fu(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var n=this._root,r=[],i=!1;!i;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),t.call(e,n),n=n.right):i=!0;return this},t.prototype.range=function(t,e,n,r){for(var i=[],o=this._comparator,s=this._root;0!==i.length||s;)if(s)i.push(s),s=s.left;else{if(o((s=i.pop()).key,e)>0)break;if(o(s.key,t)>=0&&n.call(r,s))return this;s=s.right}return this},t.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},t.prototype.values=function(){var t=[];return this.forEach((function(e){var n=e.data;return t.push(n)})),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,n=!1,r=0,i=[];!n;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),r===t)return e;r++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return function(t){for(var e=t,n=[],r=!1,i=new lu(null,null),o=i;!r;)e?(n.push(e),e=e.left):n.length>0?e=(e=o=o.next=n.pop()).right:r=!0;return o.next=null,i.next}(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=t.length,i=this._comparator;if(n&&_u(t,e,0,r-1,i),null===this._root)this._root=yu(t,e,0,r),this._size=r;else{var o=function(t,e,n){for(var r=new lu(null,null),i=r,o=t,s=e;null!==o&&null!==s;)n(o.key,s.key)<0?(i.next=o,o=o.next):(i.next=s,s=s.next),i=i.next;return null!==o?i.next=o:null!==s&&(i.next=s),r.next}(this.toList(),function(t,e){for(var n=new lu(null,null),r=n,i=0;i<t.length;i++)r=r.next=new lu(t[i],e[i]);return r.next=null,n.next}(t,e),i);r=this._size+r,this._root=mu({head:o},0,r)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return gu(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},t.prototype.update=function(t,e,n){var r=this._comparator,i=du(t,this._root,r),o=i.left,s=i.right;r(t,e)<0?s=pu(e,n,s,r):o=pu(e,n,o,r),this._root=function(t,e,n){return null===e?t:(null===t||((e=fu(t.key,e,n)).left=t),e)}(o,s,r)},t.prototype.split=function(t){return du(t,this._root,this._comparator)},t}();function yu(t,e,n,r){var i=r-n;if(i>0){var o=n+Math.floor(i/2),s=t[o],a=e[o],u=new lu(s,a);return u.left=yu(t,e,n,o),u.right=yu(t,e,o+1,r),u}return null}function mu(t,e,n){var r=n-e;if(r>0){var i=e+Math.floor(r/2),o=mu(t,e,i),s=t.head;return s.left=o,t.head=t.head.next,s.right=mu(t,i+1,n),s}return null}function _u(t,e,n,r,i){if(!(n>=r)){for(var o=t[n+r>>1],s=n-1,a=r+1;;){do{s++}while(i(t[s],o)<0);do{a--}while(i(t[a],o)>0);if(s>=a)break;var u=t[s];t[s]=t[a],t[a]=u,u=e[s],e[s]=e[a],e[a]=u}_u(t,e,n,a,i),_u(t,e,a+1,r,i)}}function bu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Eu(t,e,n){return e&&wu(t.prototype,e),n&&wu(t,n),t}var xu=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},Iu=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},Ou=Number.EPSILON;void 0===Ou&&(Ou=Math.pow(2,-52));var Su=Ou*Ou,Cu=function(t,e){if(-Ou<t&&t<Ou&&-Ou<e&&e<Ou)return 0;var n=t-e;return n*n<Su*t*e?0:t<e?-1:1},Tu=function(){function t(){bu(this,t),this.reset()}return Eu(t,[{key:"reset",value:function(){this.xRounder=new Nu,this.yRounder=new Nu}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),t}(),Nu=function(){function t(){bu(this,t),this.tree=new vu,this.round(0)}return Eu(t,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===Cu(e.key,n.key))return this.tree.remove(t),n.key;var r=this.tree.next(e);return null!==r&&0===Cu(e.key,r.key)?(this.tree.remove(t),r.key):t}}]),t}(),ku=new Tu,Au=function(t,e){return t.x*e.y-t.y*e.x},Pu=function(t,e){return t.x*e.x+t.y*e.y},Ru=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y},o=Au(r,i);return Cu(o,0)},Lu=function(t){return Math.sqrt(Pu(t,t))},ju=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return Pu(i,r)/Lu(i)/Lu(r)},Mu=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},Du=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},Fu=function(){function t(e,n){bu(this,t),void 0===e.events?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}return Eu(t,null,[{key:"compare",value:function(e,n){var r=t.comparePoints(e.point,n.point);return 0!==r?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:Uu.compare(e.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),Eu(t,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,r=e.length;n<r;n++){var i=e[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var r=e+1;r<t;r++){var i=this.point.events[r];void 0===i.consumedBy&&n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,r=function(r){var i,o,s,a,u,c=r.otherSE;n.set(r,{sine:(i=e.point,o=t.point,s=c.point,a={x:o.x-i.x,y:o.y-i.y},u={x:s.x-i.x,y:s.y-i.y},Au(u,a)/Lu(u)/Lu(a)),cosine:ju(e.point,t.point,c.point)})};return function(t,e){n.has(t)||r(t),n.has(e)||r(e);var i=n.get(t),o=i.sine,s=i.cosine,a=n.get(e),u=a.sine,c=a.cosine;return o>=0&&u>=0?s<c?1:s>c?-1:0:o<0&&u<0?s<c?-1:s>c?1:0:u<o?-1:u>o?1:0}}}]),t}(),qu=0,Uu=function(){function t(e,n,r,i){bu(this,t),this.id=++qu,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=r,this.windings=i}return Eu(t,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,r=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;var s=t.leftSE.point.y,a=e.leftSE.point.y,u=t.rightSE.point.y,c=e.rightSE.point.y;if(n<r){if(a<s&&a<u)return 1;if(a>s&&a>u)return-1;var l=t.comparePoint(e.leftSE.point);if(l<0)return 1;if(l>0)return-1;var h=e.comparePoint(t.rightSE.point);return 0!==h?h:-1}if(n>r){if(s<a&&s<c)return-1;if(s>a&&s>c)return 1;var f=e.comparePoint(t.leftSE.point);if(0!==f)return f;var p=t.comparePoint(e.rightSE.point);return p<0?1:p>0?-1:1}if(s<a)return-1;if(s>a)return 1;if(i<o){var d=e.comparePoint(t.rightSE.point);if(0!==d)return d}if(i>o){var g=t.comparePoint(e.rightSE.point);if(g<0)return 1;if(g>0)return-1}if(i!==o){var v=u-s,y=i-n,m=c-a,_=o-r;if(v>y&&m<_)return 1;if(v<y&&m>_)return-1}return i>o?1:i<o||u<c?-1:u>c?1:t.id<e.id?-1:t.id>e.id?1:0}}]),Eu(t,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var i=(t.y-e.y)/r.y,o=e.x+i*r.x;if(t.x===o)return 0;var s=(t.x-e.x)/r.x,a=e.y+s*r.y;return t.y===a?0:t.y<a?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),r=Iu(e,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,u=xu(e,s)&&0===this.comparePoint(s),c=xu(n,i)&&0===t.comparePoint(i),l=xu(e,a)&&0===this.comparePoint(a),h=xu(n,o)&&0===t.comparePoint(o);if(c&&u)return h&&!l?o:!h&&l?a:null;if(c)return l&&i.x===a.x&&i.y===a.y?null:i;if(u)return h&&o.x===s.x&&o.y===s.y?null:s;if(h&&l)return null;if(h)return o;if(l)return a;var f=function(t,e,n,r){if(0===e.x)return Du(n,r,t.x);if(0===r.x)return Du(t,e,n.x);if(0===e.y)return Mu(n,r,t.y);if(0===r.y)return Mu(t,e,n.y);var i=Au(e,r);if(0==i)return null;var o={x:n.x-t.x,y:n.y-t.y},s=Au(o,e)/i,a=Au(o,r)/i;return{x:(t.x+a*e.x+(n.x+s*r.x))/2,y:(t.y+a*e.y+(n.y+s*r.y))/2}}(i,this.vector(),s,t.vector());return null===f?null:xu(r,f)?ku.round(f.x,f.y):null}},{key:"split",value:function(e){var n=[],r=void 0!==e.events,i=new Fu(e,!0),o=new Fu(e,!1),s=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var a=new t(i,s,this.rings.slice(),this.windings.slice());return Fu.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),Fu.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(e){for(var n=this,r=e;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=t.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var s=n;n=r,r=s}for(var a=0,u=r.rings.length;a<u;a++){var c=r.rings[a],l=r.windings[a],h=n.rings.indexOf(c);-1===h?(n.rings.push(c),n.windings.push(l)):n.windings[h]+=l}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var s=this.rings[i],a=this.windings[i],u=e.indexOf(s);-1===u?(e.push(s),n.push(a)):n[u]+=a}for(var c=[],l=[],h=0,f=e.length;h<f;h++)if(0!==n[h]){var p=e[h],d=p.poly;if(-1===l.indexOf(d))if(p.isExterior)c.push(d);else{-1===l.indexOf(d)&&l.push(d);var g=c.indexOf(p.poly);-1!==g&&c.splice(g,1)}}for(var v=0,y=c.length;v<y;v++){var m=c[v].multiPoly;-1===r.indexOf(m)&&r.push(m)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch($u.type){case"union":var n=0===t.length,r=0===e.length;this._isInResult=n!==r;break;case"intersection":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===$u.numMultiPolys&&i<o;break;case"xor":var s=Math.abs(t.length-e.length);this._isInResult=s%2==1;break;case"difference":var a=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=a(t)!==a(e);break;default:throw new Error("Unrecognized operation type found ".concat($u.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,n,r){var i,o,s,a=Fu.comparePoints(e,n);if(a<0)i=e,o=n,s=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));i=n,o=e,s=-1}return new t(new Fu(i,!0),new Fu(o,!1),[r],[s])}}]),t}(),Bu=function(){function t(e,n,r){if(bu(this,t),!Array.isArray(e)||0===e.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],"number"!=typeof e[0][0]||"number"!=typeof e[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=ku.round(e[0][0],e[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,s=1,a=e.length;s<a;s++){if("number"!=typeof e[s][0]||"number"!=typeof e[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=ku.round(e[s][0],e[s][1]);u.x===o.x&&u.y===o.y||(this.segments.push(Uu.fromRing(o,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),o=u)}i.x===o.x&&i.y===o.y||this.segments.push(Uu.fromRing(o,i,this))}return Eu(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}]),t}(),Vu=function(){function t(e,n){if(bu(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Bu(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,i=e.length;r<i;r++){var o=new Bu(e[r],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=n}return Eu(t,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var r=this.interiorRings[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),t}(),Gu=function(){function t(e,n){if(bu(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof e[0][0][0]&&(e=[e])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,i=e.length;r<i;r++){var o=new Vu(e[r],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=n}return Eu(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var r=this.polys[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),t}(),zu=function(){function t(e){bu(this,t),this.events=e;for(var n=0,r=e.length;n<r;n++)e[n].segment.ringOut=this;this.poly=null}return Eu(t,null,[{key:"factory",value:function(e){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];if(o.isInResult()&&!o.ringOut){for(var s=null,a=o.leftSE,u=o.rightSE,c=[a],l=a.point,h=[];s=a,a=u,c.push(a),a.point!==l;)for(;;){var f=a.getAvailableLinkedEvents();if(0===f.length){var p=c[0].point,d=c[c.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===f.length){u=f[0].otherSE;break}for(var g=null,v=0,y=h.length;v<y;v++)if(h[v].point===a.point){g=v;break}if(null===g){h.push({index:c.length,point:a.point});var m=a.getLeftmostComparator(s);u=f.sort(m)[0].otherSE;break}var _=h.splice(g)[0],b=c.splice(_.index);b.unshift(b[0].otherSE),n.push(new t(b.reverse()))}n.push(new t(c))}}return n}}]),Eu(t,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==Ru(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var s=e[0],a=e[1];0===Ru(s,t,a)&&e.shift(),e.push(e[0]);for(var u=this.isExteriorRing()?1:-1,c=this.isExteriorRing()?0:e.length-1,l=this.isExteriorRing()?e.length:-1,h=[],f=c;f!=l;f+=u)h.push([e[f].x,e[f].y]);return h}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var r=this.events[e];Fu.compare(t,r)>0&&(t=r)}for(var i=t.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),t}(),Wu=function(){function t(e){bu(this,t),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return Eu(t,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var r=this.interiorRings[e].getGeom();null!==r&&t.push(r)}return t}}]),t}(),Ku=function(){function t(e){bu(this,t),this.rings=e,this.polys=this._composePolys(e)}return Eu(t,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(!i.poly)if(i.isExteriorRing())e.push(new Wu(i));else{var o=i.enclosingRing();o.poly||e.push(new Wu(o)),o.poly.addInterior(i)}}return e}}]),t}(),Hu=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uu.compare;bu(this,t),this.queue=e,this.tree=new vu(n),this.segments=[]}return Eu(t,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var r=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!r)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=r,o=r,s=void 0,a=void 0;void 0===s;)null===(i=this.tree.prev(i))?s=null:void 0===i.key.consumedBy&&(s=i.key);for(;void 0===a;)null===(o=this.tree.next(o))?a=null:void 0===o.key.consumedBy&&(a=o.key);if(t.isLeft){var u=null;if(s){var c=s.getIntersection(e);if(null!==c&&(e.isAnEndpoint(c)||(u=c),!s.isAnEndpoint(c)))for(var l=this._splitSafely(s,c),h=0,f=l.length;h<f;h++)n.push(l[h])}var p=null;if(a){var d=a.getIntersection(e);if(null!==d&&(e.isAnEndpoint(d)||(p=d),!a.isAnEndpoint(d)))for(var g=this._splitSafely(a,d),v=0,y=g.length;v<y;v++)n.push(g[v])}if(null!==u||null!==p){var m=null;m=null===u?p:null===p||Fu.comparePoints(u,p)<=0?u:p,this.queue.remove(e.rightSE),n.push(e.rightSE);for(var _=e.split(m),b=0,w=_.length;b<w;b++)n.push(_[b])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=s)}else{if(s&&a){var E=s.getIntersection(a);if(null!==E){if(!s.isAnEndpoint(E))for(var x=this._splitSafely(s,E),I=0,O=x.length;I<O;I++)n.push(x[I]);if(!a.isAnEndpoint(E))for(var S=this._splitSafely(a,E),C=0,T=S.length;C<T;C++)n.push(S[C])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.insert(t),r}}]),t}(),Yu="undefined"!=typeof t&&Object({VUE_APP_IS_EMULATOR:"",NODE_ENV:"production",BASE_URL:"/"}).POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Xu="undefined"!=typeof t&&Object({VUE_APP_IS_EMULATOR:"",NODE_ENV:"production",BASE_URL:"/"}).POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,$u=new(function(){function t(){bu(this,t)}return Eu(t,[{key:"run",value:function(t,e,n){$u.type=t,ku.reset();for(var r=[new Gu(e,!0)],i=0,o=n.length;i<o;i++)r.push(new Gu(n[i],!1));if($u.numMultiPolys=r.length,"difference"===$u.type)for(var s=r[0],a=1;a<r.length;)null!==Iu(r[a].bbox,s.bbox)?a++:r.splice(a,1);if("intersection"===$u.type)for(var u=0,c=r.length;u<c;u++)for(var l=r[u],h=u+1,f=r.length;h<f;h++)if(null===Iu(l.bbox,r[h].bbox))return[];for(var p=new vu(Fu.compare),d=0,g=r.length;d<g;d++)for(var v=r[d].getSweepEvents(),y=0,m=v.length;y<m;y++)if(p.insert(v[y]),p.size>Yu)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var _=new Hu(p),b=p.size,w=p.pop();w;){var E=w.key;if(p.size===b){var x=E.segment;throw new Error("Unable to pop() ".concat(E.isLeft?"left":"right"," SweepEvent ")+"[".concat(E.point.x,", ").concat(E.point.y,"] from segment #").concat(x.id," ")+"[".concat(x.leftSE.point.x,", ").concat(x.leftSE.point.y,"] -> ")+"[".concat(x.rightSE.point.x,", ").concat(x.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(p.size>Yu)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(_.segments.length>Xu)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var I=_.process(E),O=0,S=I.length;O<S;O++){var C=I[O];void 0===C.consumedBy&&p.insert(C)}b=p.size,w=p.pop()}ku.reset();var T=zu.factory(_.segments);return new Ku(T).getGeom()}}]),t}()),Qu=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return $u.run("union",t,n)},Ju=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return $u.run("intersection",t,n)},Zu=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return $u.run("difference",t,n)};"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var tc=function(){};tc.prototype.interfaces_=function(){return[]},tc.prototype.getClass=function(){return tc},tc.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var ec=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),nc=function(){},rc={MAX_VALUE:{configurable:!0}};nc.isNaN=function(t){return Number.isNaN(t)},nc.doubleToLongBits=function(t){return t},nc.longBitsToDouble=function(t){return t},nc.isInfinite=function(t){return!Number.isFinite(t)},rc.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(nc,rc);var ic=function(){},oc=function(){},sc=function(){};function ac(){}var uc=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},cc={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};uc.prototype.setOrdinate=function(t,e){switch(t){case uc.X:this.x=e;break;case uc.Y:this.y=e;break;case uc.Z:this.z=e;break;default:throw new ec("Invalid ordinate index: "+t)}},uc.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!tc.equalsWithTolerance(this.x,e.x,n)&&!!tc.equalsWithTolerance(this.y,e.y,n)}},uc.prototype.getOrdinate=function(t){switch(t){case uc.X:return this.x;case uc.Y:return this.y;case uc.Z:return this.z}throw new ec("Invalid ordinate index: "+t)},uc.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||nc.isNaN(this.z))&&nc.isNaN(t.z)},uc.prototype.equals=function(t){return t instanceof uc&&this.equals2D(t)},uc.prototype.equalInZ=function(t,e){return tc.equalsWithTolerance(this.z,t.z,e)},uc.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},uc.prototype.clone=function(){},uc.prototype.copy=function(){return new uc(this)},uc.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},uc.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},uc.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},uc.prototype.hashCode=function(){var t=17;return 37*(t=37*t+uc.hashCode(this.x))+uc.hashCode(this.y)},uc.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},uc.prototype.interfaces_=function(){return[ic,oc,ac]},uc.prototype.getClass=function(){return uc},uc.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=nc.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},cc.DimensionalComparator.get=function(){return lc},cc.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},cc.NULL_ORDINATE.get=function(){return nc.NaN},cc.X.get=function(){return 0},cc.Y.get=function(){return 1},cc.Z.get=function(){return 2},Object.defineProperties(uc,cc);var lc=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new ec("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};lc.prototype.compare=function(t,e){var n=t,r=e,i=lc.compare(n.x,r.x);if(0!==i)return i;var o=lc.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:lc.compare(n.z,r.z)},lc.prototype.interfaces_=function(){return[sc]},lc.prototype.getClass=function(){return lc},lc.compare=function(t,e){return t<e?-1:t>e?1:nc.isNaN(t)?nc.isNaN(e)?0:-1:nc.isNaN(e)?1:0};var hc=function(){};hc.prototype.create=function(){},hc.prototype.interfaces_=function(){return[]},hc.prototype.getClass=function(){return hc};var fc=function(){},pc={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};fc.prototype.interfaces_=function(){return[]},fc.prototype.getClass=function(){return fc},fc.toLocationSymbol=function(t){switch(t){case fc.EXTERIOR:return"e";case fc.BOUNDARY:return"b";case fc.INTERIOR:return"i";case fc.NONE:return"-"}throw new ec("Unknown location value: "+t)},pc.INTERIOR.get=function(){return 0},pc.BOUNDARY.get=function(){return 1},pc.EXTERIOR.get=function(){return 2},pc.NONE.get=function(){return-1},Object.defineProperties(fc,pc);var dc=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},gc=function(){},vc={LOG_10:{configurable:!0}};gc.prototype.interfaces_=function(){return[]},gc.prototype.getClass=function(){return gc},gc.log10=function(t){var e=Math.log(t);return nc.isInfinite(e)||nc.isNaN(e)?e:e/gc.LOG_10},gc.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},gc.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},gc.wrap=function(t,e){return t<0?e- -t%e:t%e},gc.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=t;return e>r&&(r=e),n>r&&(r=n),r}if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=i;return o>u&&(u=o),s>u&&(u=s),a>u&&(u=a),u}},gc.average=function(t,e){return(t+e)/2},vc.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(gc,vc);var yc=function(t){this.str=t};yc.prototype.append=function(t){this.str+=t},yc.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},yc.prototype.toString=function(t){return this.str};var mc=function(t){this.value=t};mc.prototype.intValue=function(){return this.value},mc.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},mc.isNaN=function(t){return Number.isNaN(t)};var _c=function(){};_c.isWhitespace=function(t){return t<=32&&t>=0||127===t},_c.toUpperCase=function(t){return t.toUpperCase()};var bc=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var r=arguments[0];t.call(this,t.parse(r))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i,o)}},wc={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};bc.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},bc.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=bc.magnitude(n._hi),i=bc.TEN.pow(r);(n=n.divide(i)).gt(bc.TEN)?(n=n.divide(bc.TEN),r+=1):n.lt(bc.ONE)&&(n=n.multiply(bc.TEN),r-=1);for(var o=r+1,s=new yc,a=bc.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var c=Math.trunc(n._hi);if(c<0)break;var l=!1,h=0;c>9?(l=!0,h="9"):h="0"+c,s.append(h),n=n.subtract(bc.valueOf(c)).multiply(bc.TEN),l&&n.selfAdd(bc.TEN);var f=!0,p=bc.magnitude(n._hi);if(p<0&&Math.abs(p)>=a-u&&(f=!1),!f)break}return e[0]=r,s.toString()},bc.prototype.sqr=function(){return this.multiply(this)},bc.prototype.doubleValue=function(){return this._hi+this._lo},bc.prototype.subtract=function(){if(arguments[0]instanceof bc){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},bc.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},bc.prototype.isZero=function(){return 0===this._hi&&0===this._lo},bc.prototype.selfSubtract=function(){if(arguments[0]instanceof bc){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},bc.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},bc.prototype.min=function(t){return this.le(t)?this:t},bc.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof bc){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,c=null,l=null,h=null;return u=this._hi/n,h=(i=(c=bc.SPLIT*u)-(i=c-u))*(s=(h=bc.SPLIT*n)-(s=h-n))-(l=u*n)+i*(a=n-s)+(o=u-i)*s+o*a,h=u+(c=(this._hi-l-h+this._lo-u*r)/n),this._hi=h,this._lo=u-h+c,this}},bc.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},bc.prototype.divide=function(){if(arguments[0]instanceof bc){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,s=null,a=null,u=null;n=(o=this._hi/t._hi)-(e=(s=bc.SPLIT*o)-(e=s-o)),u=e*(r=(u=bc.SPLIT*t._hi)-(r=u-t._hi))-(a=o*t._hi)+e*(i=t._hi-r)+n*r+n*i;var c=u=o+(s=(this._hi-a-u+this._lo-o*t._lo)/t._hi),l=o-u+s;return new bc(c,l)}if("number"==typeof arguments[0]){var h=arguments[0];return nc.isNaN(h)?bc.createNaN():bc.copy(this).selfDivide(h,0)}},bc.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},bc.prototype.pow=function(t){if(0===t)return bc.valueOf(1);var e=new bc(this),n=bc.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},bc.prototype.ceil=function(){if(this.isNaN())return bc.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new bc(t,e)},bc.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},bc.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},bc.prototype.setValue=function(){if(arguments[0]instanceof bc){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},bc.prototype.max=function(t){return this.ge(t)?this:t},bc.prototype.sqrt=function(){if(this.isZero())return bc.valueOf(0);if(this.isNegative())return bc.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=bc.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},bc.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof bc){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,s=null,a=null;return o=(i=this._hi+e)-(s=i-this._hi),r=(a=(o=e-s+(this._hi-o))+this._lo)+(i-(n=i+a)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],c=arguments[1],l=null,h=null,f=null,p=null,d=null,g=null,v=null;p=this._hi+u,h=this._lo+c,d=p-(g=p-this._hi),f=h-(v=h-this._lo);var y=(l=p+(g=(d=u-g+(this._hi-d))+h))+(g=(f=c-v+(this._lo-f))+(g+(p-l))),m=g+(l-y);return this._hi=y,this._lo=m,this}},bc.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof bc){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,c=null;i=(u=bc.SPLIT*this._hi)-this._hi,c=bc.SPLIT*n,i=u-i,o=this._hi-i,s=c-n;var l=(u=this._hi*n)+(c=i*(s=c-s)-u+i*(a=n-s)+o*s+o*a+(this._hi*r+this._lo*n)),h=c+(i=u-l);return this._hi=l,this._lo=h,this}},bc.prototype.selfSqr=function(){return this.selfMultiply(this)},bc.prototype.floor=function(){if(this.isNaN())return bc.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new bc(t,e)},bc.prototype.negate=function(){return this.isNaN()?this:new bc(-this._hi,-this._lo)},bc.prototype.clone=function(){},bc.prototype.multiply=function(){if(arguments[0]instanceof bc){var t=arguments[0];return t.isNaN()?bc.createNaN():bc.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return nc.isNaN(e)?bc.createNaN():bc.copy(this).selfMultiply(e,0)}},bc.prototype.isNaN=function(){return nc.isNaN(this._hi)},bc.prototype.intValue=function(){return Math.trunc(this._hi)},bc.prototype.toString=function(){var t=bc.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},bc.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+bc.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+bc.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},bc.prototype.reciprocal=function(){var t,e,n,r,i=null,o=null,s=null,a=null;t=(n=1/this._hi)-(i=(s=bc.SPLIT*n)-(i=s-n)),o=(a=bc.SPLIT*this._hi)-this._hi;var u=n+(s=(1-(r=n*this._hi)-(a=i*(o=a-o)-r+i*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new bc(u,n-u+s)},bc.prototype.toSciNotation=function(){if(this.isZero())return bc.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=bc.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},bc.prototype.abs=function(){return this.isNaN()?bc.NaN:this.isNegative()?this.negate():new bc(this)},bc.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},bc.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},bc.prototype.add=function(){if(arguments[0]instanceof bc){var t=arguments[0];return bc.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return bc.copy(this).selfAdd(e)}},bc.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof bc){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},bc.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},bc.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},bc.prototype.trunc=function(){return this.isNaN()?bc.NaN:this.isPositive()?this.floor():this.ceil()},bc.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},bc.prototype.interfaces_=function(){return[ac,ic,oc]},bc.prototype.getClass=function(){return bc},bc.sqr=function(t){return bc.valueOf(t).selfMultiply(t)},bc.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return bc.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new bc(e)}},bc.sqrt=function(t){return bc.valueOf(t).sqrt()},bc.parse=function(t){for(var e=0,n=t.length;_c.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new bc,s=0,a=0,u=0;!(e>=n);){var c=t.charAt(e);if(e++,_c.isDigit(c)){var l=c-"0";o.selfMultiply(bc.TEN),o.selfAdd(l),s++}else{if("."!==c){if("e"===c||"E"===c){var h=t.substring(e);try{u=mc.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+c+"' at position "+e+" in string "+t)}a=s}}var f=o,p=s-a-u;if(0===p)f=o;else if(p>0){var d=bc.TEN.pow(p);f=o.divide(d)}else if(p<0){var g=bc.TEN.pow(-p);f=o.multiply(g)}return r?f.negate():f},bc.createNaN=function(){return new bc(nc.NaN,nc.NaN)},bc.copy=function(t){return new bc(t)},bc.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},bc.stringOfChar=function(t,e){for(var n=new yc,r=0;r<e;r++)n.append(t);return n.toString()},wc.PI.get=function(){return new bc(3.141592653589793,12246467991473532e-32)},wc.TWO_PI.get=function(){return new bc(6.283185307179586,24492935982947064e-32)},wc.PI_2.get=function(){return new bc(1.5707963267948966,6123233995736766e-32)},wc.E.get=function(){return new bc(2.718281828459045,14456468917292502e-32)},wc.NaN.get=function(){return new bc(nc.NaN,nc.NaN)},wc.EPS.get=function(){return 123259516440783e-46},wc.SPLIT.get=function(){return 134217729},wc.MAX_PRINT_DIGITS.get=function(){return 32},wc.TEN.get=function(){return bc.valueOf(10)},wc.ONE.get=function(){return bc.valueOf(1)},wc.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},wc.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(bc,wc);var Ec=function(){},xc={DP_SAFE_EPSILON:{configurable:!0}};Ec.prototype.interfaces_=function(){return[]},Ec.prototype.getClass=function(){return Ec},Ec.orientationIndex=function(t,e,n){var r=Ec.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=bc.valueOf(e.x).selfAdd(-t.x),o=bc.valueOf(e.y).selfAdd(-t.y),s=bc.valueOf(n.x).selfAdd(-e.x),a=bc.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},Ec.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},Ec.intersection=function(t,e,n,r){var i=bc.valueOf(r.y).selfSubtract(n.y).selfMultiply(bc.valueOf(e.x).selfSubtract(t.x)),o=bc.valueOf(r.x).selfSubtract(n.x).selfMultiply(bc.valueOf(e.y).selfSubtract(t.y)),s=i.subtract(o),a=bc.valueOf(r.x).selfSubtract(n.x).selfMultiply(bc.valueOf(t.y).selfSubtract(n.y)),u=bc.valueOf(r.y).selfSubtract(n.y).selfMultiply(bc.valueOf(t.x).selfSubtract(n.x)),c=a.subtract(u).selfDivide(s).doubleValue(),l=bc.valueOf(t.x).selfAdd(bc.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),h=bc.valueOf(e.x).selfSubtract(t.x).selfMultiply(bc.valueOf(t.y).selfSubtract(n.y)),f=bc.valueOf(e.y).selfSubtract(t.y).selfMultiply(bc.valueOf(t.x).selfSubtract(n.x)),p=h.subtract(f).selfDivide(s).doubleValue(),d=bc.valueOf(n.y).selfAdd(bc.valueOf(r.y).selfSubtract(n.y).selfMultiply(p)).doubleValue();return new uc(l,d)},Ec.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=i-o;if(i>0){if(o<=0)return Ec.signum(s);r=i+o}else{if(!(i<0))return Ec.signum(s);if(o>=0)return Ec.signum(s);r=-i-o}var a=Ec.DP_SAFE_EPSILON*r;return s>=a||-s>=a?Ec.signum(s):2},Ec.signum=function(t){return t>0?1:t<0?-1:0},xc.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(Ec,xc);var Ic=function(){},Oc={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Oc.X.get=function(){return 0},Oc.Y.get=function(){return 1},Oc.Z.get=function(){return 2},Oc.M.get=function(){return 3},Ic.prototype.setOrdinate=function(t,e,n){},Ic.prototype.size=function(){},Ic.prototype.getOrdinate=function(t,e){},Ic.prototype.getCoordinate=function(){},Ic.prototype.getCoordinateCopy=function(t){},Ic.prototype.getDimension=function(){},Ic.prototype.getX=function(t){},Ic.prototype.clone=function(){},Ic.prototype.expandEnvelope=function(t){},Ic.prototype.copy=function(){},Ic.prototype.getY=function(t){},Ic.prototype.toCoordinateArray=function(){},Ic.prototype.interfaces_=function(){return[oc]},Ic.prototype.getClass=function(){return Ic},Object.defineProperties(Ic,Oc);var Sc=function(){},Cc=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Sc),Tc=function(){};Tc.arraycopy=function(t,e,n,r,i){for(var o=0,s=e;s<e+i;s++)n[r+o]=t[s],o++},Tc.getProperty=function(t){return{"line.separator":"\n"}[t]};var Nc=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof uc&&arguments[1]instanceof uc){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2];this.x=u,this.y=c,this.w=l}else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3],g=h.y-f.y,v=f.x-h.x,y=h.x*f.y-f.x*h.y,m=p.y-d.y,_=d.x-p.x,b=p.x*d.y-d.x*p.y;this.x=v*b-_*y,this.y=m*y-g*b,this.w=g*_-m*v}};Nc.prototype.getY=function(){var t=this.y/this.w;if(nc.isNaN(t)||nc.isInfinite(t))throw new Cc;return t},Nc.prototype.getX=function(){var t=this.x/this.w;if(nc.isNaN(t)||nc.isInfinite(t))throw new Cc;return t},Nc.prototype.getCoordinate=function(){var t=new uc;return t.x=this.getX(),t.y=this.getY(),t},Nc.prototype.interfaces_=function(){return[]},Nc.prototype.getClass=function(){return Nc},Nc.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-r.y,u=r.x-n.x,c=n.x*r.y-r.x*n.y,l=i*u-a*o,h=(o*c-u*s)/l,f=(a*s-i*c)/l;if(nc.isNaN(h)||nc.isInfinite(h)||nc.isNaN(f)||nc.isInfinite(f))throw new Cc;return new uc(h,f)};var kc=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof uc){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},Ac={serialVersionUID:{configurable:!0}};kc.prototype.getArea=function(){return this.getWidth()*this.getHeight()},kc.prototype.equals=function(t){if(!(t instanceof kc))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},kc.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new kc;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new kc(e,r,n,i)},kc.prototype.isNull=function(){return this._maxx<this._minx},kc.prototype.getMaxX=function(){return this._maxx},kc.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof uc){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof kc){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},kc.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof kc){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof uc){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},kc.prototype.getMinY=function(){return this._miny},kc.prototype.getMinX=function(){return this._minx},kc.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof uc){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof kc){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},kc.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},kc.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},kc.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},kc.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},kc.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},kc.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},kc.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},kc.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},kc.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},kc.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof kc){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof uc){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},kc.prototype.centre=function(){return this.isNull()?null:new uc((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},kc.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof uc){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof kc){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},kc.prototype.getMaxY=function(){return this._maxy},kc.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},kc.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+uc.hashCode(this._minx))+uc.hashCode(this._maxx))+uc.hashCode(this._miny))+uc.hashCode(this._maxy)},kc.prototype.interfaces_=function(){return[ic,ac]},kc.prototype.getClass=function(){return kc},kc.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),c=Math.min(r.x,i.x),l=Math.max(r.x,i.x);return!(c>u)&&!(l<a)&&(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),c=Math.min(r.y,i.y),l=Math.max(r.y,i.y),!(c>u)&&!(l<a))}},Ac.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(kc,Ac);var Pc={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Rc=function(t){this.geometryFactory=t||new mh};Rc.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=Pc.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=Pc.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],jc[n]&&(e=jc[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Rc.prototype.write=function(t){return this.extractGeometry(t)},Rc.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Lc[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Lc[e].apply(this,[t])+")"};var Lc={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Lc.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Lc.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Lc.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Lc.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Lc.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Lc.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+Lc.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Lc.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},jc={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Pc.spaces);return this.geometryFactory.createPoint(new uc(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPoint();for(var n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Pc.trimParens,"$1"),r.push(jc.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Pc.spaces),r.push(new uc(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Pc.spaces),r.push(new uc(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiLineString();for(var n=t.trim().split(Pc.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Pc.trimParens,"$1"),r.push(jc.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){var e,n,r;if(void 0===t)return this.geometryFactory.createPolygon();for(var i,o=t.trim().split(Pc.parenComma),s=[],a=0,u=o.length;a<u;++a)e=o[a].replace(Pc.trimParens,"$1"),n=jc.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===a?i=r:s.push(r);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var n=t.trim().split(Pc.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Pc.trimParens,"$1"),r.push(jc.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},Mc=function(t){this.parser=new Rc(t)};Mc.prototype.write=function(t){return this.parser.write(t)},Mc.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Dc=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Fc=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Dc),qc=function(){};qc.prototype.interfaces_=function(){return[]},qc.prototype.getClass=function(){return qc},qc.shouldNeverReachHere=function(){if(0===arguments.length)qc.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new Fc("Should never reach here"+(null!==t?": "+t:""))}},qc.isTrue=function(){var t;if(1===arguments.length)qc.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new Fc:new Fc(t)},qc.equals=function(){var t,e,n;if(2===arguments.length)qc.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new Fc("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var Uc=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new uc,this._intPt[1]=new uc,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Bc={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Uc.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},Uc.prototype.getTopologySummary=function(){var t=new yc;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},Uc.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},Uc.prototype.getIntersectionNum=function(){return this._result},Uc.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0],e=this.getEdgeDistance(t,0),n=this.getEdgeDistance(t,1);e>n?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},Uc.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},Uc.prototype.setPrecisionModel=function(t){this._precisionModel=t},Uc.prototype.isInteriorIntersection=function(){var t=this;if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],n=0;n<this._result;n++)if(!t._intPt[n].equals2D(t._inputLines[e][0])&&!t._intPt[n].equals2D(t._inputLines[e][1]))return!0;return!1}},Uc.prototype.getIntersection=function(t){return this._intPt[t]},Uc.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},Uc.prototype.hasIntersection=function(){return this._result!==Uc.NO_INTERSECTION},Uc.prototype.getEdgeDistance=function(t,e){return Uc.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},Uc.prototype.isCollinear=function(){return this._result===Uc.COLLINEAR_INTERSECTION},Uc.prototype.toString=function(){return Mc.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Mc.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},Uc.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},Uc.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},Uc.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},Uc.prototype.interfaces_=function(){return[]},Uc.prototype.getClass=function(){return Uc},Uc.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=r>i?s:a)||t.equals(e)||(o=Math.max(s,a))}return qc.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},Uc.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return qc.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},Bc.DONT_INTERSECT.get=function(){return 0},Bc.DO_INTERSECT.get=function(){return 1},Bc.COLLINEAR.get=function(){return 2},Bc.NO_INTERSECTION.get=function(){return 0},Bc.POINT_INTERSECTION.get=function(){return 1},Bc.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(Uc,Bc);var Vc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new kc(this._inputLines[0][0],this._inputLines[0][1]),n=new kc(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,kc.intersects(n,r,e)&&0===Wc.orientationIndex(n,r,e)&&0===Wc.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=Nc.intersection(t,n,r,i)}catch(a){if(!(a instanceof Cc))throw a;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new uc(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=Ec.intersection(t,e,n,r),s=this.isInSegmentEnvelopes(o);Tc.out.println("DD in env = "+s+"  --------------------- "+o),i.distance(o)>1e-4&&Tc.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new uc(t),o=new uc(e),s=new uc(n),a=new uc(r),u=new uc;this.normalizeToEnvCentre(i,o,s,a,u);var c=this.safeHCoordinateIntersection(i,o,s,a);return c.x+=u.x,c.y+=u.y,c},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=kc.intersects(e,n,r),s=kc.intersects(e,n,i),a=kc.intersects(r,i,e),u=kc.intersects(r,i,n);return o&&s?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||s||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,c=n.x<r.x?n.x:r.x,l=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,f=n.y>r.y?n.y:r.y,p=((o>c?o:c)+(a<h?a:h))/2,d=((s>l?s:l)+(u<f?u:f))/2;i.x=p,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!kc.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=Wc.orientationIndex(e,n,r),s=Wc.orientationIndex(e,n,i);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=Wc.orientationIndex(r,i,e),u=Wc.orientationIndex(r,i,n);return a>0&&u>0||a<0&&u<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===s||0===a||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new uc(r):0===s?this._intPt[0]=new uc(i):0===a?this._intPt[0]=new uc(e):0===u&&(this._intPt[0]=new uc(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=Wc.distancePointLine(t,n,r),s=Wc.distancePointLine(e,n,r);return s<o&&(o=s,i=e),(s=Wc.distancePointLine(n,t,e))<o&&(o=s,i=n),(s=Wc.distancePointLine(r,t,e))<o&&(o=s,i=r),i},e}(Uc),Gc=function(){};Gc.prototype.interfaces_=function(){return[]},Gc.prototype.getClass=function(){return Gc},Gc.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return Gc.signOfDet2x2(r,i,o,s)},Gc.signOfDet2x2=function(t,e,n,r){var i=null,o=null,s=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(s=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=s*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(s=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=s*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var zc=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};zc.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,u=Gc.signOfDet2x2(i,o,s,a);if(0===u)return this._isPointOnSegment=!0,null;a<o&&(u=-u),u>0&&this._crossingCount++}},zc.prototype.isPointInPolygon=function(){return this.getLocation()!==fc.EXTERIOR},zc.prototype.getLocation=function(){return this._isPointOnSegment?fc.BOUNDARY:this._crossingCount%2==1?fc.INTERIOR:fc.EXTERIOR},zc.prototype.isOnSegment=function(){return this._isPointOnSegment},zc.prototype.interfaces_=function(){return[]},zc.prototype.getClass=function(){return zc},zc.locatePointInRing=function(){if(arguments[0]instanceof uc&&dc(arguments[1],Ic)){for(var t=arguments[0],e=arguments[1],n=new zc(t),r=new uc,i=new uc,o=1;o<e.size();o++)if(e.getCoordinate(o,r),e.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof uc&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],u=new zc(s),c=1;c<a.length;c++){var l=a[c],h=a[c-1];if(u.countSegment(l,h),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var Wc=function(){},Kc={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Wc.prototype.interfaces_=function(){return[]},Wc.prototype.getClass=function(){return Wc},Wc.orientationIndex=function(t,e,n){return Ec.orientationIndex(t,e,n)},Wc.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y,s=t[r-1].y;e+=i*(s-o)}return e/2}if(dc(arguments[0],Ic)){var a=arguments[0],u=a.size();if(u<3)return 0;var c=new uc,l=new uc,h=new uc;a.getCoordinate(0,l),a.getCoordinate(1,h);var f=l.x;h.x-=f;for(var p=0,d=1;d<u-1;d++)c.y=l.y,l.x=h.x,l.y=h.y,a.getCoordinate(d+1,h),h.x-=f,p+=l.x*(c.y-h.y);return p/2}},Wc.distanceLineLine=function(t,e,n,r){if(t.equals(e))return Wc.distancePointLine(t,n,r);if(n.equals(r))return Wc.distancePointLine(r,t,e);var i=!1;if(kc.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var s=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=s/o;(u<0||u>1||a<0||a>1)&&(i=!0)}}else i=!0;return i?gc.min(Wc.distancePointLine(t,n,r),Wc.distancePointLine(e,n,r),Wc.distancePointLine(n,t,e),Wc.distancePointLine(r,t,e)):0},Wc.isPointInRing=function(t,e){return Wc.locatePointInRing(t,e)!==fc.EXTERIOR},Wc.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new uc;t.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<e;s++){t.getCoordinate(s,r);var a=r.x,u=r.y,c=a-i,l=u-o;n+=Math.sqrt(c*c+l*l),i=a,o=u}return n},Wc.isCCW=function(t){var e=t.length-1;if(e<3)throw new ec("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var s=r;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(n)&&s!==r);var a=r;do{a=(a+1)%e}while(t[a].equals2D(n)&&a!==r);var u=t[s],c=t[a];if(u.equals2D(n)||c.equals2D(n)||u.equals2D(c))return!1;var l=Wc.computeOrientation(u,n,c),h=!1;return h=0===l?u.x>c.x:l>0,h},Wc.locatePointInRing=function(t,e){return zc.locatePointInRing(t,e)},Wc.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},Wc.computeOrientation=function(t,e,n){return Wc.orientationIndex(t,e,n)},Wc.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new ec("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=Wc.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),c=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(c<=0)return o.distance(s);if(c>=1)return o.distance(a);var l=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(l)*Math.sqrt(u)}},Wc.isOnLine=function(t,e){for(var n=new Vc,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},Kc.CLOCKWISE.get=function(){return-1},Kc.RIGHT.get=function(){return Wc.CLOCKWISE},Kc.COUNTERCLOCKWISE.get=function(){return 1},Kc.LEFT.get=function(){return Wc.COUNTERCLOCKWISE},Kc.COLLINEAR.get=function(){return 0},Kc.STRAIGHT.get=function(){return Wc.COLLINEAR},Object.defineProperties(Wc,Kc);var Hc=function(){};Hc.prototype.filter=function(t){},Hc.prototype.interfaces_=function(){return[]},Hc.prototype.getClass=function(){return Hc};var Yc=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},Xc={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Yc.prototype.isGeometryCollection=function(){return this.getSortIndex()===Yc.SORTINDEX_GEOMETRYCOLLECTION},Yc.prototype.getFactory=function(){return this._factory},Yc.prototype.getGeometryN=function(t){return this},Yc.prototype.getArea=function(){return 0},Yc.prototype.isRectangle=function(){return!1},Yc.prototype.equals=function(){if(arguments[0]instanceof Yc){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof Yc))return!1;var n=e;return this.equalsExact(n)}},Yc.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},Yc.prototype.geometryChanged=function(){this.apply(Yc.geometryChangedFilter)},Yc.prototype.geometryChangedAction=function(){this._envelope=null},Yc.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},Yc.prototype.getLength=function(){return 0},Yc.prototype.getNumGeometries=function(){return 1},Yc.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},Yc.prototype.getUserData=function(){return this._userData},Yc.prototype.getSRID=function(){return this._SRID},Yc.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Yc.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===Yc.SORTINDEX_GEOMETRYCOLLECTION)throw new ec("This method does not support GeometryCollection arguments")},Yc.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},Yc.prototype.norm=function(){var t=this.copy();return t.normalize(),t},Yc.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Yc.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new kc(this._envelope)},Yc.prototype.setSRID=function(t){this._SRID=t},Yc.prototype.setUserData=function(t){this._userData=t},Yc.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),s=i.compareTo(o);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0},Yc.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Yc.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Yc.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Yc.SORTINDEX_MULTIPOINT||this.getSortIndex()===Yc.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Yc.SORTINDEX_MULTIPOLYGON},Yc.prototype.interfaces_=function(){return[oc,ic,ac]},Yc.prototype.getClass=function(){return Yc},Yc.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},Yc.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},Xc.serialVersionUID.get=function(){return 0x799ea46522854c00},Xc.SORTINDEX_POINT.get=function(){return 0},Xc.SORTINDEX_MULTIPOINT.get=function(){return 1},Xc.SORTINDEX_LINESTRING.get=function(){return 2},Xc.SORTINDEX_LINEARRING.get=function(){return 3},Xc.SORTINDEX_MULTILINESTRING.get=function(){return 4},Xc.SORTINDEX_POLYGON.get=function(){return 5},Xc.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Xc.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Xc.geometryChangedFilter.get=function(){return $c},Object.defineProperties(Yc,Xc);var $c=function(){};$c.interfaces_=function(){return[Hc]},$c.filter=function(t){t.geometryChangedAction()};var Qc=function(){};Qc.prototype.filter=function(t){},Qc.prototype.interfaces_=function(){return[]},Qc.prototype.getClass=function(){return Qc};var Jc=function(){},Zc={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Jc.prototype.isInBoundary=function(t){},Jc.prototype.interfaces_=function(){return[]},Jc.prototype.getClass=function(){return Jc},Zc.Mod2BoundaryNodeRule.get=function(){return tl},Zc.EndPointBoundaryNodeRule.get=function(){return el},Zc.MultiValentEndPointBoundaryNodeRule.get=function(){return nl},Zc.MonoValentEndPointBoundaryNodeRule.get=function(){return rl},Zc.MOD2_BOUNDARY_RULE.get=function(){return new tl},Zc.ENDPOINT_BOUNDARY_RULE.get=function(){return new el},Zc.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new nl},Zc.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new rl},Zc.OGC_SFS_BOUNDARY_RULE.get=function(){return Jc.MOD2_BOUNDARY_RULE},Object.defineProperties(Jc,Zc);var tl=function(){};tl.prototype.isInBoundary=function(t){return t%2==1},tl.prototype.interfaces_=function(){return[Jc]},tl.prototype.getClass=function(){return tl};var el=function(){};el.prototype.isInBoundary=function(t){return t>0},el.prototype.interfaces_=function(){return[Jc]},el.prototype.getClass=function(){return el};var nl=function(){};nl.prototype.isInBoundary=function(t){return t>1},nl.prototype.interfaces_=function(){return[Jc]},nl.prototype.getClass=function(){return nl};var rl=function(){};rl.prototype.isInBoundary=function(t){return 1===t},rl.prototype.interfaces_=function(){return[Jc]},rl.prototype.getClass=function(){return rl};var il=function(){};function ol(t){this.message=t||""}il.prototype.add=function(){},il.prototype.addAll=function(){},il.prototype.isEmpty=function(){},il.prototype.iterator=function(){},il.prototype.size=function(){},il.prototype.toArray=function(){},il.prototype.remove=function(){},ol.prototype=new Error,ol.prototype.name="IndexOutOfBoundsException";var sl=function(){};sl.prototype.hasNext=function(){},sl.prototype.next=function(){},sl.prototype.remove=function(){};var al=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(il);function ul(t){this.message=t||""}ul.prototype=new Error,ul.prototype.name="NoSuchElementException";var cl=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof il&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,il]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new ll(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new ol;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(al),ll=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new ul;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(sl),hl=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){var e=this;if(2===arguments.length){for(var n=arguments[0],r=arguments[1],i=!1,o=n.iterator();o.hasNext();)e.add(o.next(),r),i=!0;return i}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var e=this;if(1===arguments.length){var n=arguments[0];t.prototype.add.call(this,n)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var r=arguments[0],i=arguments[1];return this.add(r,i,!0),!0}if(arguments[0]instanceof uc&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1];if(!s&&this.size()>=1){var a=this.get(this.size()-1);if(a.equals2D(o))return null}t.prototype.add.call(this,o)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var u=arguments[0],c=arguments[1];return this.add(u,c),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var l=arguments[0],h=arguments[1],f=arguments[2];if(f)for(var p=0;p<l.length;p++)e.add(l[p],h);else for(var d=l.length-1;d>=0;d--)e.add(l[d],h);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof uc){var g=arguments[0],v=arguments[1],y=arguments[2];if(!y){var m=this.size();if(m>0){if(g>0){var _=this.get(g-1);if(_.equals2D(v))return null}if(g<m){var b=this.get(g);if(b.equals2D(v))return null}}}t.prototype.add.call(this,g,v)}}else if(4===arguments.length){var w=arguments[0],E=arguments[1],x=arguments[2],I=arguments[3],O=1;x>I&&(O=-1);for(var S=x;S!==I;S+=O)e.add(w[S],E);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new uc(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(cl),fl=function(){},pl={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};pl.ForwardComparator.get=function(){return dl},pl.BidirectionalComparator.get=function(){return gl},pl.coordArrayType.get=function(){return new Array(0).fill(null)},fl.prototype.interfaces_=function(){return[]},fl.prototype.getClass=function(){return fl},fl.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},fl.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(fl.indexOf(r,e)<0)return r}return null},fl.scroll=function(t,e){var n=fl.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);Tc.arraycopy(t,n,r,0,t.length-n),Tc.arraycopy(t,0,r,t.length-n,n),Tc.arraycopy(r,0,t,0,t.length)},fl.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(0!==o.compare(r[s],i[s]))return!1;return!0}},fl.intersection=function(t,e){for(var n=new hl,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},fl.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},fl.removeRepeatedPoints=function(t){return fl.hasRepeatedPoints(t)?new hl(t,!1).toCoordinateArray():t},fl.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},fl.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},fl.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new uc(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new uc(r[i+u])},fl.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},fl.envelope=function(t){for(var e=new kc,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},fl.toCoordinateArray=function(t){return t.toArray(fl.coordArrayType)},fl.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},fl.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},fl.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},fl.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},fl.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},fl.extract=function(t,e,n){e=gc.clamp(e,0,t.length);var r=(n=gc.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,s=e;s<=n;s++)i[o++]=t[s];return i},Object.defineProperties(fl,pl);var dl=function(){};dl.prototype.compare=function(t,e){return fl.compare(t,e)},dl.prototype.interfaces_=function(){return[sc]},dl.prototype.getClass=function(){return dl};var gl=function(){};gl.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=fl.compare(n,r);return fl.isEqualReversed(n,r)?0:i},gl.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=fl.increasingDirection(n),o=fl.increasingDirection(r),s=i>0?0:n.length-1,a=o>0?0:n.length-1,u=0;u<n.length;u++){var c=n[s].compareTo(r[a]);if(0!==c)return c;s+=i,a+=o}return 0},gl.prototype.interfaces_=function(){return[sc]},gl.prototype.getClass=function(){return gl};var vl=function(){};vl.prototype.get=function(){},vl.prototype.put=function(){},vl.prototype.size=function(){},vl.prototype.values=function(){},vl.prototype.entrySet=function(){};var yl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(vl);function ml(t){this.message=t||""}function _l(){}ml.prototype=new Error,ml.prototype.name="OperationNotSupported",_l.prototype=new il,_l.prototype.contains=function(){};var bl=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof il&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new wl(this)},e}(_l),wl=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new ul;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new ml},e}(sl);function El(t){return null===t?0:t.color}function xl(t){return null===t?null:t.parent}function Il(t,e){null!==t&&(t.color=e)}function Ol(t){return null===t?null:t.left}function Sl(t){return null===t?null:t.right}function Cl(){this.root_=null,this.size_=0}Cl.prototype=new yl,Cl.prototype.get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},Cl.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},Cl.prototype.fixAfterInsertion=function(t){var e=this;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(xl(t)===Ol(xl(xl(t)))){var n=Sl(xl(xl(t)));1===El(n)?(Il(xl(t),0),Il(n,0),Il(xl(xl(t)),1),t=xl(xl(t))):(t===Sl(xl(t))&&(t=xl(t),e.rotateLeft(t)),Il(xl(t),0),Il(xl(xl(t)),1),e.rotateRight(xl(xl(t))))}else{var r=Ol(xl(xl(t)));1===El(r)?(Il(xl(t),0),Il(r,0),Il(xl(xl(t)),1),t=xl(xl(t))):(t===Ol(xl(t))&&(t=xl(t),e.rotateRight(t)),Il(xl(t),0),Il(xl(xl(t)),1),e.rotateLeft(xl(xl(t))))}this.root_.color=0},Cl.prototype.values=function(){var t=new cl,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Cl.successor(e));)t.add(e.value);return t},Cl.prototype.entrySet=function(){var t=new bl,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Cl.successor(e));)t.add(e);return t},Cl.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Cl.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Cl.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Cl.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},Cl.prototype.size=function(){return this.size_};var Tl=function(){};function Nl(){}function kl(){this.array_=[],arguments[0]instanceof il&&this.addAll(arguments[0])}Tl.prototype.interfaces_=function(){return[]},Tl.prototype.getClass=function(){return Tl},Nl.prototype=new _l,kl.prototype=new Nl,kl.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},kl.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},kl.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},kl.prototype.remove=function(t){throw new ml},kl.prototype.size=function(){return this.array_.length},kl.prototype.isEmpty=function(){return 0===this.array_.length},kl.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},kl.prototype.iterator=function(){return new Al(this)};var Al=function(t){this.treeSet_=t,this.position_=0};Al.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new ul;return this.treeSet_.array_[this.position_++]},Al.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Al.prototype.remove=function(){throw new ml};var Pl=function(){};Pl.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},Pl.asList=function(t){for(var e=new cl,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var Rl=function(){},Ll={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Ll.P.get=function(){return 0},Ll.L.get=function(){return 1},Ll.A.get=function(){return 2},Ll.FALSE.get=function(){return-1},Ll.TRUE.get=function(){return-2},Ll.DONTCARE.get=function(){return-3},Ll.SYM_FALSE.get=function(){return"F"},Ll.SYM_TRUE.get=function(){return"T"},Ll.SYM_DONTCARE.get=function(){return"*"},Ll.SYM_P.get=function(){return"0"},Ll.SYM_L.get=function(){return"1"},Ll.SYM_A.get=function(){return"2"},Rl.prototype.interfaces_=function(){return[]},Rl.prototype.getClass=function(){return Rl},Rl.toDimensionSymbol=function(t){switch(t){case Rl.FALSE:return Rl.SYM_FALSE;case Rl.TRUE:return Rl.SYM_TRUE;case Rl.DONTCARE:return Rl.SYM_DONTCARE;case Rl.P:return Rl.SYM_P;case Rl.L:return Rl.SYM_L;case Rl.A:return Rl.SYM_A}throw new ec("Unknown dimension value: "+t)},Rl.toDimensionValue=function(t){switch(_c.toUpperCase(t)){case Rl.SYM_FALSE:return Rl.FALSE;case Rl.SYM_TRUE:return Rl.TRUE;case Rl.SYM_DONTCARE:return Rl.DONTCARE;case Rl.SYM_P:return Rl.P;case Rl.SYM_L:return Rl.L;case Rl.SYM_A:return Rl.A}throw new ec("Unknown dimension symbol: "+t)},Object.defineProperties(Rl,Ll);var jl=function(){};jl.prototype.filter=function(t){},jl.prototype.interfaces_=function(){return[]},jl.prototype.getClass=function(){return jl};var Ml=function(){};Ml.prototype.filter=function(t,e){},Ml.prototype.isDone=function(){},Ml.prototype.isGeometryChanged=function(){},Ml.prototype.interfaces_=function(){return[]},Ml.prototype.getClass=function(){return Ml};var Dl=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new ec("geometries must not contain null elements")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new kc,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n;if(this._geometries.length!==i._geometries.length)return!1;for(var o=0;o<this._geometries.length;o++)if(!e._geometries[o].equalsExact(i._geometries[o],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Pl.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Rl.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Rl.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new kl(Pl.asList(this._geometries)),r=new kl(Pl.asList(e._geometries));return this.compare(n,r)}if(2===arguments.length){for(var i=arguments[0],o=arguments[1],s=i,a=this.getNumGeometries(),u=s.getNumGeometries(),c=0;c<a&&c<u;){var l=t.getGeometryN(c),h=s.getGeometryN(c),f=l.compareToSameClass(h,o);if(0!==f)return f;c++}return c<a?1:c<u?-1:0}},e.prototype.apply=function(){var t=this;if(dc(arguments[0],Qc))for(var e=arguments[0],n=0;n<this._geometries.length;n++)t._geometries[n].apply(e);else if(dc(arguments[0],Ml)){var r=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(t._geometries[i].apply(r),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(dc(arguments[0],jl)){var o=arguments[0];o.filter(this);for(var s=0;s<this._geometries.length;s++)t._geometries[s].apply(o)}else if(dc(arguments[0],Hc)){var a=arguments[0];a.filter(this);for(var u=0;u<this._geometries.length;u++)t._geometries[u].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),qc.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(Yc),Fl=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Yc.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Rl.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new ql(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Tl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(Dl),ql=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=Jc.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};ql.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},ql.prototype.getBoundary=function(){return this._geom instanceof $l?this.boundaryLineString(this._geom):this._geom instanceof Fl?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},ql.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},ql.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},ql.prototype.computeBoundaryCoordinates=function(t){var e=this,n=new cl;this._endpointMap=new Cl;for(var r=0;r<t.getNumGeometries();r++){var i=t.getGeometryN(r);0!==i.getNumPoints()&&(e.addEndpoint(i.getCoordinateN(0)),e.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var s=o.next(),a=s.getValue().count;e._bnRule.isInBoundary(a)&&n.add(s.getKey())}return fl.toCoordinateArray(n)},ql.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Ul,this._endpointMap.put(t,e)),e.count++},ql.prototype.interfaces_=function(){return[]},ql.prototype.getClass=function(){return ql},ql.getBoundary=function(){if(1===arguments.length){var t=arguments[0],e=new ql(t);return e.getBoundary()}if(2===arguments.length){var n=arguments[0],r=arguments[1],i=new ql(n,r);return i.getBoundary()}};var Ul=function(){this.count=null};function Bl(){}function Vl(){}Ul.prototype.interfaces_=function(){return[]},Ul.prototype.getClass=function(){return Ul};var Gl=function(){};function zl(){}function Wl(){}function Kl(){}var Hl=function(){},Yl={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Hl.prototype.interfaces_=function(){return[]},Hl.prototype.getClass=function(){return Hl},Hl.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Hl.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new zl,n=new Bl(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",s=new Vl(Hl.getStackTrace(r)),a=new Kl(s),u=0;u<i;u++)try{o+=a.readLine()+Hl.NEWLINE}catch(t){if(!(t instanceof Wl))throw t;qc.shouldNeverReachHere()}return o}},Hl.split=function(t,e){for(var n=e.length,r=new cl,i=""+t,o=i.indexOf(e);o>=0;){var s=i.substring(0,o);r.add(s),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var a=new Array(r.size()).fill(null),u=0;u<a.length;u++)a[u]=r.get(u);return a},Hl.toString=function(){if(1===arguments.length){var t=arguments[0];return Hl.SIMPLE_ORDINATE_FORMAT.format(t)}},Hl.spaces=function(t){return Hl.chars(" ",t)},Yl.NEWLINE.get=function(){return Tc.getProperty("line.separator")},Yl.SIMPLE_ORDINATE_FORMAT.get=function(){return new Gl("0.#")},Object.defineProperties(Hl,Yl);var Xl=function(){};Xl.prototype.interfaces_=function(){return[]},Xl.prototype.getClass=function(){return Xl},Xl.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Xl.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,Ic.X)===t.getOrdinate(e-1,Ic.X)&&t.getOrdinate(0,Ic.Y)===t.getOrdinate(e-1,Ic.Y)},Xl.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(t.getOrdinate(i,o)!==e.getOrdinate(i,o)&&(!nc.isNaN(s)||!nc.isNaN(a)))return!1}return!0},Xl.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Xl.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Xl.copy(e,i-1,r,o,1);return r},Xl.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Xl.swap(t,r,e-r)},Xl.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Xl.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Xl.copyCoord(t,e+o,n,r+o)},Xl.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new yc;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Hl.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Xl.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Xl.createClosedRing(t,e,4):e.getOrdinate(0,Ic.X)===e.getOrdinate(n-1,Ic.X)&&e.getOrdinate(0,Ic.Y)===e.getOrdinate(n-1,Ic.Y)?e:Xl.createClosedRing(t,e,n+1)},Xl.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Xl.copy(e,0,r,0,i);for(var o=i;o<n;o++)Xl.copy(e,0,r,o,1);return r};var $l=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new kc:this._points.expandEnvelope(new kc)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n;if(this._points.size()!==i._points.size())return!1;for(var o=0;o<this._points.size();o++)if(!e.equal(e._points.getCoordinate(o),i._points.getCoordinate(o),r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=this,e=0;e<Math.trunc(this._points.size()/2);e++){var n=t._points.size()-1-e;if(!t._points.getCoordinate(e).equals(t._points.getCoordinate(n)))return t._points.getCoordinate(e).compareTo(t._points.getCoordinate(n))>0&&Xl.reverse(t._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Rl.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return Wc.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Xl.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=e,r=0,i=0;r<this._points.size()&&i<n._points.size();){var o=t._points.getCoordinate(r).compareTo(n._points.getCoordinate(i));if(0!==o)return o;r++,i++}return r<this._points.size()?1:i<n._points.size()?-1:0}if(2===arguments.length){var s=arguments[0],a=arguments[1],u=s;return a.compare(this._points,u._points)}},e.prototype.apply=function(){var t=this;if(dc(arguments[0],Qc))for(var e=arguments[0],n=0;n<this._points.size();n++)e.filter(t._points.getCoordinate(n));else if(dc(arguments[0],Ml)){var r=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(r.filter(t._points,i),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(dc(arguments[0],jl)){var o=arguments[0];o.filter(this)}else if(dc(arguments[0],Hc)){var s=arguments[0];s.filter(this)}},e.prototype.getBoundary=function(){return new ql(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new ec("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Tl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(Yc),Ql=function(){};Ql.prototype.interfaces_=function(){return[]},Ql.prototype.getClass=function(){return Ql};var Jl=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new kc;var t=new kc;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Rl.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length){var n=arguments[0],r=arguments[1],i=n;return r.compare(this._coordinates,i._coordinates)}},e.prototype.apply=function(){if(dc(arguments[0],Qc)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(dc(arguments[0],Ml)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(dc(arguments[0],jl)){var n=arguments[0];n.filter(this)}else if(dc(arguments[0],Hc)){var r=arguments[0];r.filter(this)}},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),qc.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Ql]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(Yc),Zl=function(){};Zl.prototype.interfaces_=function(){return[]},Zl.prototype.getClass=function(){return Zl};var th=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new ec("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new ec("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(Wc.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(Wc.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),c=t.getY(a);if(u!==o===(c!==s))return!1;o=u,s=c}return!0},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n,o=this._shell,s=i._shell;if(!o.equalsExact(s,r))return!1;if(this._holes.length!==i._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!e._holes[a].equalsExact(i._holes[a],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){var t=this;if(0===arguments.length){this.normalize(this._shell,!0);for(var e=0;e<this._holes.length;e++)t.normalize(t._holes[e],!1);Pl.sort(this._holes)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];if(n.isEmpty())return null;var i=new Array(n.getCoordinates().length-1).fill(null);Tc.arraycopy(n.getCoordinates(),0,i,0,i.length);var o=fl.minCoordinate(n.getCoordinates());fl.scroll(i,o),Tc.arraycopy(i,0,n.getCoordinates(),0,i.length),n.getCoordinates()[i.length]=i[0],Wc.isCCW(n.getCoordinates())===r&&fl.reverse(n.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=this._shell,r=e._shell;return n.compareToSameClass(r)}if(2===arguments.length){var i=arguments[0],o=arguments[1],s=i,a=this._shell,u=s._shell,c=a.compareToSameClass(u,o);if(0!==c)return c;for(var l=this.getNumInteriorRing(),h=s.getNumInteriorRing(),f=0;f<l&&f<h;){var p=t.getInteriorRingN(f),d=s.getInteriorRingN(f),g=p.compareToSameClass(d,o);if(0!==g)return g;f++}return f<l?1:f<h?-1:0}},e.prototype.apply=function(t){var e=this;if(dc(t,Qc)){this._shell.apply(t);for(var n=0;n<this._holes.length;n++)e._holes[n].apply(t)}else if(dc(t,Ml)){if(this._shell.apply(t),!t.isDone())for(var r=0;r<this._holes.length&&(e._holes[r].apply(t),!t.isDone());r++);t.isGeometryChanged()&&this.geometryChanged()}else if(dc(t,jl))t.filter(this);else if(dc(t,Hc)){t.filter(this),this._shell.apply(t);for(var i=0;i<this._holes.length;i++)e._holes[i].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Zl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(Yc),eh=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Yc.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Rl.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Ql]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(Dl),nh=function(t){function e(e,n){e instanceof uc&&n instanceof mh&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Yc.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Rl.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Xl.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new ec("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new ec("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}($l),rh=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Yc.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new cl,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Zl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(Dl),ih=function(t){this._factory=t||null,this._isUserDataCopied=!1},oh={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};ih.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},ih.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},ih.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Dl?this.editGeometryCollection(t,e):t instanceof th?this.editPolygon(t,e):t instanceof Jl||t instanceof $l?e.edit(t,this._factory):(qc.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},ih.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new cl,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===eh?this._factory.createMultiPoint(r.toArray([])):n.getClass()===Fl?this._factory.createMultiLineString(r.toArray([])):n.getClass()===rh?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},ih.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new cl,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||i.add(s)}return this._factory.createPolygon(r,i.toArray([]))},ih.prototype.interfaces_=function(){return[]},ih.prototype.getClass=function(){return ih},ih.GeometryEditorOperation=function(){},oh.NoOpGeometryOperation.get=function(){return sh},oh.CoordinateOperation.get=function(){return ah},oh.CoordinateSequenceOperation.get=function(){return uh},Object.defineProperties(ih,oh);var sh=function(){};sh.prototype.edit=function(t,e){return t},sh.prototype.interfaces_=function(){return[ih.GeometryEditorOperation]},sh.prototype.getClass=function(){return sh};var ah=function(){};ah.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof nh?e.createLinearRing(n):t instanceof $l?e.createLineString(n):t instanceof Jl?n.length>0?e.createPoint(n[0]):e.createPoint():t},ah.prototype.interfaces_=function(){return[ih.GeometryEditorOperation]},ah.prototype.getClass=function(){return ah};var uh=function(){};uh.prototype.edit=function(t,e){return t instanceof nh?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof $l?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Jl?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},uh.prototype.interfaces_=function(){return[ih.GeometryEditorOperation]},uh.prototype.getClass=function(){return uh};var ch=function(){var t=this;if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)t._coordinates[n]=new uc}else if(dc(arguments[0],Ic)){var r=arguments[0];if(null===r)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._coordinates=new Array(r.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)t._coordinates[i]=r.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],s=arguments[1];this._coordinates=o,this._dimension=s,null===o&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],u=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=u;for(var c=0;c<a;c++)t._coordinates[c]=new uc}},lh={serialVersionUID:{configurable:!0}};ch.prototype.setOrdinate=function(t,e,n){switch(e){case Ic.X:this._coordinates[t].x=n;break;case Ic.Y:this._coordinates[t].y=n;break;case Ic.Z:this._coordinates[t].z=n;break;default:throw new ec("invalid ordinateIndex")}},ch.prototype.size=function(){return this._coordinates.length},ch.prototype.getOrdinate=function(t,e){switch(e){case Ic.X:return this._coordinates[t].x;case Ic.Y:return this._coordinates[t].y;case Ic.Z:return this._coordinates[t].z}return nc.NaN},ch.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},ch.prototype.getCoordinateCopy=function(t){return new uc(this._coordinates[t])},ch.prototype.getDimension=function(){return this._dimension},ch.prototype.getX=function(t){return this._coordinates[t].x},ch.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ch(t,this._dimension)},ch.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ch.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ch(t,this._dimension)},ch.prototype.toString=function(){if(this._coordinates.length>0){var t=new yc(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ch.prototype.getY=function(t){return this._coordinates[t].y},ch.prototype.toCoordinateArray=function(){return this._coordinates},ch.prototype.interfaces_=function(){return[Ic,ac]},ch.prototype.getClass=function(){return ch},lh.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ch,lh);var hh=function(){},fh={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};hh.prototype.readResolve=function(){return hh.instance()},hh.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new ch(t)}if(dc(arguments[0],Ic)){var e=arguments[0];return new ch(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return r>3&&(r=3),r<2?new ch(n):new ch(n,r)}},hh.prototype.interfaces_=function(){return[hc,ac]},hh.prototype.getClass=function(){return hh},hh.instance=function(){return hh.instanceObject},fh.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},fh.instanceObject.get=function(){return new hh},Object.defineProperties(hh,fh);var ph=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new cl,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new bl;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(vl),dh=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof vh){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},gh={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};dh.prototype.equals=function(t){if(!(t instanceof dh))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},dh.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new mc(n).compareTo(new mc(r))},dh.prototype.getScale=function(){return this._scale},dh.prototype.isFloating=function(){return this._modelType===dh.FLOATING||this._modelType===dh.FLOATING_SINGLE},dh.prototype.getType=function(){return this._modelType},dh.prototype.toString=function(){var t="UNKNOWN";return this._modelType===dh.FLOATING?t="Floating":this._modelType===dh.FLOATING_SINGLE?t="Floating-Single":this._modelType===dh.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},dh.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return nc.isNaN(t)||this._modelType===dh.FLOATING_SINGLE?t:this._modelType===dh.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof uc){var e=arguments[0];if(this._modelType===dh.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},dh.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===dh.FLOATING?t=16:this._modelType===dh.FLOATING_SINGLE?t=6:this._modelType===dh.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},dh.prototype.setScale=function(t){this._scale=Math.abs(t)},dh.prototype.interfaces_=function(){return[ac,ic]},dh.prototype.getClass=function(){return dh},dh.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},gh.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},gh.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(dh,gh);var vh=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},yh={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};vh.prototype.readResolve=function(){return vh.nameToTypeMap.get(this._name)},vh.prototype.toString=function(){return this._name},vh.prototype.interfaces_=function(){return[ac]},vh.prototype.getClass=function(){return vh},yh.serialVersionUID.get=function(){return-552860263173159e4},yh.nameToTypeMap.get=function(){return new ph},Object.defineProperties(vh,yh),dh.Type=vh,dh.FIXED=new vh("FIXED"),dh.FLOATING=new vh("FLOATING"),dh.FLOATING_SINGLE=new vh("FLOATING SINGLE");var mh=function t(){this._precisionModel=new dh,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?dc(arguments[0],hc)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof dh&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},_h={serialVersionUID:{configurable:!0}};mh.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new uc(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new uc(t.getMinX(),t.getMinY()),new uc(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new uc(t.getMinX(),t.getMinY()),new uc(t.getMinX(),t.getMaxY()),new uc(t.getMaxX(),t.getMaxY()),new uc(t.getMaxX(),t.getMinY()),new uc(t.getMinX(),t.getMinY())]),null)},mh.prototype.createLineString=function(t){return t?t instanceof Array?new $l(this.getCoordinateSequenceFactory().create(t),this):dc(t,Ic)?new $l(t,this):void 0:new $l(this.getCoordinateSequenceFactory().create([]),this)},mh.prototype.createMultiLineString=function(){if(0===arguments.length)return new Fl(null,this);if(1===arguments.length){var t=arguments[0];return new Fl(t,this)}},mh.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(mh.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof th)return this.createMultiPolygon(mh.toPolygonArray(t));if(a instanceof $l)return this.createMultiLineString(mh.toLineStringArray(t));if(a instanceof Jl)return this.createMultiPoint(mh.toPointArray(t));qc.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},mh.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},mh.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof uc){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(dc(arguments[0],Ic)){var e=arguments[0];return new Jl(e,this)}}},mh.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},mh.prototype.createPolygon=function(){if(0===arguments.length)return new th(null,null,this);if(1===arguments.length){if(dc(arguments[0],Ic)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof nh){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return new th(r,i,this)}},mh.prototype.getSRID=function(){return this._SRID},mh.prototype.createGeometryCollection=function(){if(0===arguments.length)return new Dl(null,this);if(1===arguments.length){var t=arguments[0];return new Dl(t,this)}},mh.prototype.createGeometry=function(t){return new ih(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},mh.prototype.getPrecisionModel=function(){return this._precisionModel},mh.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(dc(arguments[0],Ic)){var e=arguments[0];return new nh(e,this)}}},mh.prototype.createMultiPolygon=function(){if(0===arguments.length)return new rh(null,this);if(1===arguments.length){var t=arguments[0];return new rh(t,this)}},mh.prototype.createMultiPoint=function(){var t=this;if(0===arguments.length)return new eh(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];return new eh(e,this)}if(arguments[0]instanceof Array){var n=arguments[0];return this.createMultiPoint(null!==n?this.getCoordinateSequenceFactory().create(n):null)}if(dc(arguments[0],Ic)){var r=arguments[0];if(null===r)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(r.size()).fill(null),o=0;o<r.size();o++){var s=t.getCoordinateSequenceFactory().create(1,r.getDimension());Xl.copy(r,o,s,0,1),i[o]=t.createPoint(s)}return this.createMultiPoint(i)}}},mh.prototype.interfaces_=function(){return[ac]},mh.prototype.getClass=function(){return mh},mh.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},mh.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},mh.getDefaultCoordinateSequenceFactory=function(){return hh.instance()},mh.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},mh.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},mh.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},mh.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},mh.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},mh.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},mh.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},_h.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(mh,_h);var bh=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],wh=function(t){this.geometryFactory=t||new mh};wh.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!Eh[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==bh.indexOf(n)?Eh[n].apply(this,[e.coordinates]):"GeometryCollection"===n?Eh[n].apply(this,[e.geometries]):Eh[n].apply(this,[e])},wh.prototype.write=function(t){var e=t.getGeometryType();if(!xh[e])throw new Error("Geometry is not supported");return xh[e].apply(this,[t])};var Eh={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!Eh[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Eh.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new uc(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new uc(t[0],t[1]),new uc(t[2],t[1]),new uc(t[2],t[3]),new uc(t[0],t[3]),new uc(t[0],t[1])])},Point:function(t){var e=new uc(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Eh.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Eh.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Eh.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Eh.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],s=Eh.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);r.push(a)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(Eh.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},xh={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:xh.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=xh.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(xh.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=xh.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=xh.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=xh.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=xh.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(xh[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},Ih=function(t){this.geometryFactory=t||new mh,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new wh(this.geometryFactory)};Ih.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===dh.FIXED&&this.reducePrecision(e),e},Ih.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Oh=function(){this.parser=new wh(this.geometryFactory)};Oh.prototype.write=function(t){return this.parser.write(t)};var Sh=function(){},Ch={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function Th(t){this.message=t||""}function Nh(){this.array_=[]}Sh.prototype.interfaces_=function(){return[]},Sh.prototype.getClass=function(){return Sh},Sh.opposite=function(t){return t===Sh.LEFT?Sh.RIGHT:t===Sh.RIGHT?Sh.LEFT:t},Ch.ON.get=function(){return 0},Ch.LEFT.get=function(){return 1},Ch.RIGHT.get=function(){return 2},Object.defineProperties(Sh,Ch),Th.prototype=new Error,Th.prototype.name="EmptyStackException",Nh.prototype=new al,Nh.prototype.add=function(t){return this.array_.push(t),!0},Nh.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Nh.prototype.push=function(t){return this.array_.push(t),t},Nh.prototype.pop=function(t){if(0===this.array_.length)throw new Th;return this.array_.pop()},Nh.prototype.peek=function(){if(0===this.array_.length)throw new Th;return this.array_[this.array_.length-1]},Nh.prototype.empty=function(){return 0===this.array_.length},Nh.prototype.isEmpty=function(){return this.empty()},Nh.prototype.search=function(t){return this.array_.indexOf(t)},Nh.prototype.size=function(){return this.array_.length},Nh.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var kh=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};kh.prototype.getCoordinate=function(){return this._minCoord},kh.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},kh.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();qc.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=Wc.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===Wc.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===Wc.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},kh.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Sh.LEFT;return n[e].y<n[e+1].y&&(r=Sh.RIGHT),r},kh.prototype.getEdge=function(){return this._orientedDe},kh.prototype.checkForRightmostCoordinate=function(t){for(var e=this,n=t.getEdge().getCoordinates(),r=0;r<n.length-1;r++)(null===e._minCoord||n[r].x>e._minCoord.x)&&(e._minDe=t,e._minIndex=r,e._minCoord=n[r])},kh.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},kh.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}qc.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Sh.LEFT&&(this._orientedDe=this._minDe.getSym())},kh.prototype.interfaces_=function(){return[]},kh.prototype.getClass=function(){return kh};var Ah=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new uc(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Dc),Ph=function(){this.array_=[]};Ph.prototype.addLast=function(t){this.array_.push(t)},Ph.prototype.removeFirst=function(){return this.array_.shift()},Ph.prototype.isEmpty=function(){return 0===this.array_.length};var Rh=function(){this._finder=null,this._dirEdgeList=new cl,this._nodes=new cl,this._rightMostCoord=null,this._env=null,this._finder=new kh};Rh.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Rh.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Rh.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Ah("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Rh.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Sh.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Rh.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Rh.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Sh.RIGHT)>=1&&e.getDepth(Sh.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Rh.prototype.computeDepths=function(t){var e=new bl,n=new Ph,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},Rh.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Rh.prototype.getEnvelope=function(){if(null===this._env){for(var t=new kc,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Rh.prototype.addReachable=function(t){var e=new Nh;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Rh.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Sh.LEFT,t.getDepth(Sh.RIGHT)),e.setDepth(Sh.RIGHT,t.getDepth(Sh.LEFT))},Rh.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Rh.prototype.getNodes=function(){return this._nodes},Rh.prototype.getDirectedEdges=function(){return this._dirEdgeList},Rh.prototype.interfaces_=function(){return[ic]},Rh.prototype.getClass=function(){return Rh};var Lh=function t(){var e=this;if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var n=arguments[0];this.init(n.length)}else if(Number.isInteger(arguments[0])){var r=arguments[0];this.init(1),this.location[Sh.ON]=r}else if(arguments[0]instanceof t){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var o=0;o<this.location.length;o++)e.location[o]=i.location[o]}}else if(3===arguments.length){var s=arguments[0],a=arguments[1],u=arguments[2];this.init(3),this.location[Sh.ON]=s,this.location[Sh.LEFT]=a,this.location[Sh.RIGHT]=u}};Lh.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Lh.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==fc.NONE)return!1;return!0},Lh.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===fc.NONE&&(this.location[e]=t)},Lh.prototype.isLine=function(){return 1===this.location.length},Lh.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Sh.ON]=this.location[Sh.ON],e[Sh.LEFT]=fc.NONE,e[Sh.RIGHT]=fc.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===fc.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Lh.prototype.getLocations=function(){return this.location},Lh.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Sh.LEFT];this.location[Sh.LEFT]=this.location[Sh.RIGHT],this.location[Sh.RIGHT]=t},Lh.prototype.toString=function(){var t=new yc;return this.location.length>1&&t.append(fc.toLocationSymbol(this.location[Sh.LEFT])),t.append(fc.toLocationSymbol(this.location[Sh.ON])),this.location.length>1&&t.append(fc.toLocationSymbol(this.location[Sh.RIGHT])),t.toString()},Lh.prototype.setLocations=function(t,e,n){this.location[Sh.ON]=t,this.location[Sh.LEFT]=e,this.location[Sh.RIGHT]=n},Lh.prototype.get=function(t){return t<this.location.length?this.location[t]:fc.NONE},Lh.prototype.isArea=function(){return this.location.length>1},Lh.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===fc.NONE)return!0;return!1},Lh.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Sh.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Lh.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(fc.NONE)},Lh.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Lh.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Lh.prototype.interfaces_=function(){return[]},Lh.prototype.getClass=function(){return Lh};var jh=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Lh(e),this.elt[1]=new Lh(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Lh(n.elt[0]),this.elt[1]=new Lh(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Lh(fc.NONE),this.elt[1]=new Lh(fc.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Lh(o,s,a),this.elt[1]=new Lh(o,s,a)}else if(4===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2],h=arguments[3];this.elt[0]=new Lh(fc.NONE,fc.NONE,fc.NONE),this.elt[1]=new Lh(fc.NONE,fc.NONE,fc.NONE),this.elt[u].setLocations(c,l,h)}};jh.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},jh.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},jh.prototype.isNull=function(t){return this.elt[t].isNull()},jh.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},jh.prototype.isLine=function(t){return this.elt[t].isLine()},jh.prototype.merge=function(t){for(var e=this,n=0;n<2;n++)null===e.elt[n]&&null!==t.elt[n]?e.elt[n]=new Lh(t.elt[n]):e.elt[n].merge(t.elt[n])},jh.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},jh.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Sh.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},jh.prototype.toString=function(){var t=new yc;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},jh.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},jh.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},jh.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Sh.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},jh.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},jh.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},jh.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Lh(this.elt[t].location[0]))},jh.prototype.interfaces_=function(){return[]},jh.prototype.getClass=function(){return jh},jh.toLineLabel=function(t){for(var e=new jh(fc.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Mh=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new cl,this._pts=new cl,this._label=new jh(fc.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new cl,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Mh.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=Wc.isCCW(this._ring.getCoordinates())},Mh.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Mh.prototype.computePoints=function(t){var e=this;this._startDe=t;var n=t,r=!0;do{if(null===n)throw new Ah("Found null DirectedEdge");if(n.getEdgeRing()===e)throw new Ah("Directed Edge visited twice during ring-building at "+n.getCoordinate());e._edges.add(n);var i=n.getLabel();qc.isTrue(i.isArea()),e.mergeLabel(i),e.addPoints(n.getEdge(),n.isForward(),r),r=!1,e.setEdgeRing(n,e),n=e.getNext(n)}while(n!==this._startDe)},Mh.prototype.getLinearRing=function(){return this._ring},Mh.prototype.getCoordinate=function(t){return this._pts.get(t)},Mh.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var e=this._startDe;do{var n=e.getNode().getEdges().getOutgoingDegree(t);n>t._maxNodeDegree&&(t._maxNodeDegree=n),e=t.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},Mh.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var s=r.length-2;n&&(s=r.length-1);for(var a=s;a>=0;a--)this._pts.add(r[a])}},Mh.prototype.isHole=function(){return this._isHole},Mh.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Mh.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Wc.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Mh.prototype.addHole=function(t){this._holes.add(t)},Mh.prototype.isShell=function(){return null===this._shell},Mh.prototype.getLabel=function(){return this._label},Mh.prototype.getEdges=function(){return this._edges},Mh.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Mh.prototype.getShell=function(){return this._shell},Mh.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=e.getLocation(n,Sh.RIGHT);if(r===fc.NONE)return null;if(this._label.getLocation(n)===fc.NONE)return this._label.setLocation(n,r),null}},Mh.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Mh.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Mh.prototype.interfaces_=function(){return[]},Mh.prototype.getClass=function(){return Mh};var Dh=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Mh),Fh=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new cl,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Dh(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Mh),qh=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};qh.prototype.setVisited=function(t){this._isVisited=t},qh.prototype.setInResult=function(t){this._isInResult=t},qh.prototype.isCovered=function(){return this._isCovered},qh.prototype.isCoveredSet=function(){return this._isCoveredSet},qh.prototype.setLabel=function(t){this._label=t},qh.prototype.getLabel=function(){return this._label},qh.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},qh.prototype.updateIM=function(t){qc.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},qh.prototype.isInResult=function(){return this._isInResult},qh.prototype.isVisited=function(){return this._isVisited},qh.prototype.interfaces_=function(){return[]},qh.prototype.getClass=function(){return qh};var Uh=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new jh(0,fc.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=fc.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==fc.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new jh(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var t=this;if(arguments[0]instanceof e){var n=arguments[0];this.mergeLabel(n._label)}else if(arguments[0]instanceof jh)for(var r=arguments[0],i=0;i<2;i++){var o=t.computeMergedLocation(r,i),s=t._label.getLocation(i);s===fc.NONE&&t._label.setLocation(i,o)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=fc.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case fc.BOUNDARY:n=fc.INTERIOR;break;case fc.INTERIOR:default:n=fc.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qh),Bh=function(){this.nodeMap=new Cl,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};Bh.prototype.find=function(t){return this.nodeMap.get(t)},Bh.prototype.addNode=function(){if(arguments[0]instanceof uc){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Uh){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},Bh.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Bh.prototype.iterator=function(){return this.nodeMap.values().iterator()},Bh.prototype.values=function(){return this.nodeMap.values()},Bh.prototype.getBoundaryNodes=function(t){for(var e=new cl,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===fc.BOUNDARY&&e.add(r)}return e},Bh.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Bh.prototype.interfaces_=function(){return[]},Bh.prototype.getClass=function(){return Bh};var Vh=function(){},Gh={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Vh.prototype.interfaces_=function(){return[]},Vh.prototype.getClass=function(){return Vh},Vh.isNorthern=function(t){return t===Vh.NE||t===Vh.NW},Vh.isOpposite=function(t,e){return t!==e&&2===(t-e+4)%4},Vh.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Vh.isInHalfPlane=function(t,e){return e===Vh.SE?t===Vh.SE||t===Vh.SW:t===e||t===e+1},Vh.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new ec("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Vh.NE:Vh.SE:e>=0?Vh.NW:Vh.SW}if(arguments[0]instanceof uc&&arguments[1]instanceof uc){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new ec("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Vh.NE:Vh.SE:r.y>=n.y?Vh.NW:Vh.SW}},Gh.NE.get=function(){return 0},Gh.NW.get=function(){return 1},Gh.SW.get=function(){return 2},Gh.SE.get=function(){return 3},Object.defineProperties(Vh,Gh);var zh=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=null;this._edge=e,this.init(n,r),this._label=i}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this._edge=o,this.init(s,a),this._label=u}};zh.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:Wc.computeOrientation(t._p0,t._p1,this._p1)},zh.prototype.getDy=function(){return this._dy},zh.prototype.getCoordinate=function(){return this._p0},zh.prototype.setNode=function(t){this._node=t},zh.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},zh.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},zh.prototype.getDirectedCoordinate=function(){return this._p1},zh.prototype.getDx=function(){return this._dx},zh.prototype.getLabel=function(){return this._label},zh.prototype.getEdge=function(){return this._edge},zh.prototype.getQuadrant=function(){return this._quadrant},zh.prototype.getNode=function(){return this._node},zh.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},zh.prototype.computeLabel=function(t){},zh.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Vh.quadrant(this._dx,this._dy),qc.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},zh.prototype.interfaces_=function(){return[ic]},zh.prototype.getClass=function(){return zh};var Wh=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new jh(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Ah("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=this,e=!0,n=0;n<2;n++)t._label.isArea(n)&&t._label.getLocation(n,Sh.LEFT)===fc.INTERIOR&&t._label.getLocation(n,Sh.RIGHT)===fc.INTERIOR||(e=!1);return e},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Sh.LEFT]+"/"+this._depth[Sh.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,fc.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,fc.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Sh.LEFT&&(r=-1);var i=Sh.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===fc.EXTERIOR&&e===fc.INTERIOR?1:t===fc.INTERIOR&&e===fc.EXTERIOR?-1:0},e}(zh),Kh=function(){};Kh.prototype.createNode=function(t){return new Uh(t,null)},Kh.prototype.interfaces_=function(){return[]},Kh.prototype.getClass=function(){return Kh};var Hh=function(){if(this._edges=new cl,this._nodes=null,this._edgeEndList=new cl,0===arguments.length)this._nodes=new Bh(new Kh);else if(1===arguments.length){var t=arguments[0];this._nodes=new Bh(t)}};Hh.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Hh.prototype.find=function(t){return this._nodes.find(t)},Hh.prototype.addNode=function(){if(arguments[0]instanceof Uh){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof uc){var e=arguments[0];return this._nodes.addNode(e)}},Hh.prototype.getNodeIterator=function(){return this._nodes.iterator()},Hh.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Hh.prototype.debugPrintln=function(t){Tc.out.println(t)},Hh.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===fc.BOUNDARY},Hh.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Hh.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&Wc.computeOrientation(t,e,r)===Wc.COLLINEAR&&Vh.quadrant(t,e)===Vh.quadrant(n,r)},Hh.prototype.getEdgeEnds=function(){return this._edgeEndList},Hh.prototype.debugPrint=function(t){Tc.out.print(t)},Hh.prototype.getEdgeIterator=function(){return this._edges.iterator()},Hh.prototype.findEdgeInSameDirection=function(t,e){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(n.matchInSameDirection(t,e,o[0],o[1]))return i;if(n.matchInSameDirection(t,e,o[o.length-1],o[o.length-2]))return i}return null},Hh.prototype.insertEdge=function(t){this._edges.add(t)},Hh.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Hh.prototype.addEdges=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next();e._edges.add(r);var i=new Wh(r,!0),o=new Wh(r,!1);i.setSym(o),o.setSym(i),e.add(i),e.add(o)}},Hh.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Hh.prototype.getNodes=function(){return this._nodes.values()},Hh.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},Hh.prototype.interfaces_=function(){return[]},Hh.prototype.getClass=function(){return Hh},Hh.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Yh=function(){this._geometryFactory=null,this._shellList=new cl;var t=arguments[0];this._geometryFactory=t};Yh.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Yh.prototype.computePolygons=function(t){for(var e=new cl,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Yh.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Ah("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Yh.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new cl,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else r.add(o)}return r},Yh.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Yh.prototype.buildMaximalEdgeRings=function(t){for(var e=new cl,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Fh(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Yh.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Yh.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Yh.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),c=u.getLinearRing(),l=c.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var h=!1;l.contains(r)&&Wc.isPointInRing(i,c.getCoordinates())&&(h=!0),h&&(null===o||s.contains(l))&&(o=u)}return o},Yh.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return qc.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Yh.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Hh.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new cl,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Yh.prototype.interfaces_=function(){return[]},Yh.prototype.getClass=function(){return Yh};var Xh=function(){};Xh.prototype.getBounds=function(){},Xh.prototype.interfaces_=function(){return[]},Xh.prototype.getClass=function(){return Xh};var $h=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};$h.prototype.getItem=function(){return this._item},$h.prototype.getBounds=function(){return this._bounds},$h.prototype.interfaces_=function(){return[Xh,ac]},$h.prototype.getClass=function(){return $h};var Qh=function(){this._size=null,this._items=null,this._size=0,this._items=new cl,this._items.add(null)};Qh.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Qh.prototype.size=function(){return this._size},Qh.prototype.reorder=function(t){for(var e=this,n=null,r=this._items.get(t);2*t<=this._size&&((n=2*t)!==e._size&&e._items.get(n+1).compareTo(e._items.get(n))<0&&n++,e._items.get(n).compareTo(r)<0);t=n)e._items.set(t,e._items.get(n));this._items.set(t,r)},Qh.prototype.clear=function(){this._size=0,this._items.clear()},Qh.prototype.isEmpty=function(){return 0===this._size},Qh.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Qh.prototype.interfaces_=function(){return[]},Qh.prototype.getClass=function(){return Qh};var Jh=function(){};Jh.prototype.visitItem=function(t){},Jh.prototype.interfaces_=function(){return[]},Jh.prototype.getClass=function(){return Jh};var Zh=function(){};Zh.prototype.insert=function(t,e){},Zh.prototype.remove=function(t,e){},Zh.prototype.query=function(){},Zh.prototype.interfaces_=function(){return[]},Zh.prototype.getClass=function(){return Zh};var tf=function(){if(this._childBoundables=new cl,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},ef={serialVersionUID:{configurable:!0}};tf.prototype.getLevel=function(){return this._level},tf.prototype.size=function(){return this._childBoundables.size()},tf.prototype.getChildBoundables=function(){return this._childBoundables},tf.prototype.addChildBoundable=function(t){qc.isTrue(null===this._bounds),this._childBoundables.add(t)},tf.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},tf.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},tf.prototype.interfaces_=function(){return[Xh,ac]},tf.prototype.getClass=function(){return tf},ef.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(tf,ef);var nf=function(){};nf.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},nf.min=function(t){return nf.sort(t),t.get(0)},nf.sort=function(t,e){var n=t.toArray();e?Pl.sort(n,e):Pl.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},nf.singletonList=function(t){var e=new cl;return e.add(t),e};var rf=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};rf.prototype.expandToQueue=function(t,e){var n=rf.isComposite(this._boundable1),r=rf.isComposite(this._boundable2);if(n&&r)return rf.area(this._boundable1)>rf.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new ec("neither boundable is composite")},rf.prototype.isLeaves=function(){return!(rf.isComposite(this._boundable1)||rf.isComposite(this._boundable2))},rf.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},rf.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),s=new rf(o,e,this._itemDistance);s.getDistance()<r&&n.add(s)}},rf.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},rf.prototype.getDistance=function(){return this._distance},rf.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},rf.prototype.interfaces_=function(){return[ic]},rf.prototype.getClass=function(){return rf},rf.area=function(t){return t.getBounds().getArea()},rf.isComposite=function(t){return t instanceof tf};var of=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new cl,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];qc.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},sf={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};of.prototype.getNodeCapacity=function(){return this._nodeCapacity},of.prototype.lastNode=function(t){return t.get(t.size()-1)},of.prototype.size=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var e=arguments[0],n=0,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof tf?n+=t.size(i):i instanceof $h&&(n+=1)}return n}},of.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof $h&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},of.prototype.itemsTree=function(){var t=this;if(0===arguments.length){this.build();var e=this.itemsTree(this._root);return null===e?new cl:e}if(1===arguments.length){for(var n=arguments[0],r=new cl,i=n.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof tf){var s=t.itemsTree(o);null!==s&&r.add(s)}else o instanceof $h?r.add(o.getItem()):qc.shouldNeverReachHere()}return r.size()<=0?null:r}},of.prototype.insert=function(t,e){qc.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new $h(t,e))},of.prototype.boundablesAtLevel=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new cl;return this.boundablesAtLevel(e,this._root,n),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(qc.isTrue(r>-2),i.getLevel()===r)return o.add(i),null;for(var s=i.getChildBoundables().iterator();s.hasNext();){var a=s.next();a instanceof tf?t.boundablesAtLevel(r,a,o):(qc.isTrue(a instanceof $h),-1===r&&o.add(a))}return null}},of.prototype.query=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.build();var n=new cl;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,n),n}if(2===arguments.length){var r=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,i)}else if(3===arguments.length)if(dc(arguments[2],Jh)&&arguments[0]instanceof Object&&arguments[1]instanceof tf)for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getChildBoundables(),c=0;c<u.size();c++){var l=u.get(c);t.getIntersectsOp().intersects(l.getBounds(),o)&&(l instanceof tf?t.query(o,l,a):l instanceof $h?a.visitItem(l.getItem()):qc.shouldNeverReachHere())}else if(dc(arguments[2],al)&&arguments[0]instanceof Object&&arguments[1]instanceof tf)for(var h=arguments[0],f=arguments[1],p=arguments[2],d=f.getChildBoundables(),g=0;g<d.size();g++){var v=d.get(g);t.getIntersectsOp().intersects(v.getBounds(),h)&&(v instanceof tf?t.query(h,v,p):v instanceof $h?p.add(v.getItem()):qc.shouldNeverReachHere())}},of.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},of.prototype.getRoot=function(){return this.build(),this._root},of.prototype.remove=function(){var t=this;if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,n)}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=this.removeItem(i,o);if(s)return!0;for(var a=null,u=i.getChildBoundables().iterator();u.hasNext();){var c=u.next();if(t.getIntersectsOp().intersects(c.getBounds(),r)&&c instanceof tf&&(s=t.remove(r,c,o))){a=c;break}}return null!==a&&a.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(a),s}},of.prototype.createHigherLevels=function(t,e){qc.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},of.prototype.depth=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var e=arguments[0],n=0,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof tf){var o=t.depth(i);o>n&&(n=o)}}return n+1}},of.prototype.createParentBoundables=function(t,e){var n=this;qc.isTrue(!t.isEmpty());var r=new cl;r.add(this.createNode(e));var i=new cl(t);nf.sort(i,this.getComparator());for(var o=i.iterator();o.hasNext();){var s=o.next();n.lastNode(r).getChildBoundables().size()===n.getNodeCapacity()&&r.add(n.createNode(e)),n.lastNode(r).addChildBoundable(s)}return r},of.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},of.prototype.interfaces_=function(){return[ac]},of.prototype.getClass=function(){return of},of.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},sf.IntersectsOp.get=function(){return af},sf.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},sf.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(of,sf);var af=function(){},uf=function(){};uf.prototype.distance=function(t,e){},uf.prototype.interfaces_=function(){return[]},uf.prototype.getClass=function(){return uf};var cf=function(t){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,t.call(this,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){qc.isTrue(t.length>0);for(var n=new cl,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},e.prototype.createNode=function(t){return new lf(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new cl;for(var s=0;i.hasNext()&&s<n;){var a=i.next();r[o].add(a),s++}}return r},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(dc(arguments[2],Jh)&&arguments[0]instanceof Object&&arguments[1]instanceof tf){var i=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,i,o,s)}else if(dc(arguments[2],al)&&arguments[0]instanceof Object&&arguments[1]instanceof tf){var a=arguments[0],u=arguments[1],c=arguments[2];t.prototype.query.call(this,a,u,c)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){qc.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new cl(t);nf.sort(i,e.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(dc(arguments[0],uf)){var t=arguments[0],n=new rf(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof rf){var r=arguments[0];return this.nearestNeighbour(r,nc.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&dc(arguments[1],uf)){var i=arguments[0],o=arguments[1],s=new rf(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof rf&&"number"==typeof arguments[1]){var a=arguments[0],u=arguments[1],c=u,l=null,h=new Qh;for(h.add(a);!h.isEmpty()&&c>0;){var f=h.poll(),p=f.getDistance();if(p>=c)break;f.isLeaves()?(c=p,l=f):f.expandToQueue(h,c)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var d=arguments[0],g=arguments[1],v=arguments[2],y=new $h(d,g),m=new rf(this.getRoot(),y,v);return this.nearestNeighbour(m)[0]}},e.prototype.interfaces_=function(){return[Zh,ac]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return lf},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[sc]},compare:function(n,r){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(r.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[sc]},compare:function(n,r){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(r.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(of),lf=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new kc(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(tf),hf=function(){};hf.prototype.interfaces_=function(){return[]},hf.prototype.getClass=function(){return hf},hf.relativeSign=function(t,e){return t<e?-1:t>e?1:0},hf.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=hf.relativeSign(e.x,n.x),i=hf.relativeSign(e.y,n.y);switch(t){case 0:return hf.compareValue(r,i);case 1:return hf.compareValue(i,r);case 2:return hf.compareValue(i,-r);case 3:return hf.compareValue(-r,i);case 4:return hf.compareValue(-r,-i);case 5:return hf.compareValue(-i,-r);case 6:return hf.compareValue(-i,r);case 7:return hf.compareValue(r,-i)}return qc.shouldNeverReachHere("invalid octant value"),0},hf.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var ff=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new uc(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};ff.prototype.getCoordinate=function(){return this.coord},ff.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},ff.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:hf.compare(this._segmentOctant,this.coord,e.coord)},ff.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},ff.prototype.isInterior=function(){return this._isInterior},ff.prototype.interfaces_=function(){return[ic]},ff.prototype.getClass=function(){return ff};var pf=function(){this._nodeMap=new Cl,this._edge=null;var t=arguments[0];this._edge=t};pf.prototype.getSplitCoordinates=function(){var t=new hl;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},pf.prototype.addCollapsedNodes=function(){var t=new cl;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},pf.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},pf.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new mc(e+1))}},pf.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new uc(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new uc(e.coord))},pf.prototype.iterator=function(){return this._nodeMap.values().iterator()},pf.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},pf.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},pf.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new mc(e[0])),r=i}},pf.prototype.getEdge=function(){return this._edge},pf.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},pf.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new uc(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return i&&(o[s]=new uc(e.coord)),new yf(o,this._edge.getData())},pf.prototype.add=function(t,e){var n=new ff(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(qc.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},pf.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Dc("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new Dc("bad split edge end point at "+i)},pf.prototype.interfaces_=function(){return[]},pf.prototype.getClass=function(){return pf};var df=function(){};df.prototype.interfaces_=function(){return[]},df.prototype.getClass=function(){return df},df.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new ec("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof uc&&arguments[1]instanceof uc){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(0===s&&0===a)throw new ec("Cannot compute the octant for two identical points "+i);return df.octant(s,a)}};var gf=function(){};gf.prototype.getCoordinates=function(){},gf.prototype.size=function(){},gf.prototype.getCoordinate=function(t){},gf.prototype.isClosed=function(){},gf.prototype.setData=function(t){},gf.prototype.getData=function(){},gf.prototype.interfaces_=function(){return[]},gf.prototype.getClass=function(){return gf};var vf=function(){};vf.prototype.addIntersection=function(t,e){},vf.prototype.interfaces_=function(){return[gf]},vf.prototype.getClass=function(){return vf};var yf=function(){this._nodeList=new pf(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};yf.prototype.getCoordinates=function(){return this._pts},yf.prototype.size=function(){return this._pts.length},yf.prototype.getCoordinate=function(t){return this._pts[t]},yf.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},yf.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},yf.prototype.setData=function(t){this._data=t},yf.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:df.octant(t,e)},yf.prototype.getData=function(){return this._data},yf.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[3],o=new uc(n.getIntersection(i));this.addIntersection(o,r)}},yf.prototype.toString=function(){return Mc.toLineString(new ch(this._pts))},yf.prototype.getNodeList=function(){return this._nodeList},yf.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},yf.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},yf.prototype.interfaces_=function(){return[vf]},yf.prototype.getClass=function(){return yf},yf.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new cl;return yf.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();o.getNodeList().addSplitEdges(r)}};var mf=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new uc,this.p1=new uc;else if(1===arguments.length){var t=arguments[0];this.p0=new uc(t.p0),this.p1=new uc(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new uc(e,n),this.p1=new uc(r,i)}},_f={serialVersionUID:{configurable:!0}};mf.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},mf.prototype.orientationIndex=function(){if(arguments[0]instanceof mf){var t=arguments[0],e=Wc.orientationIndex(this.p0,this.p1,t.p0),n=Wc.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof uc){var r=arguments[0];return Wc.orientationIndex(this.p0,this.p1,r)}},mf.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},mf.prototype.isVertical=function(){return this.p0.x===this.p1.x},mf.prototype.equals=function(t){if(!(t instanceof mf))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},mf.prototype.intersection=function(t){var e=new Vc;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},mf.prototype.project=function(){if(arguments[0]instanceof uc){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new uc(t);var e=this.projectionFactor(t),n=new uc;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof mf){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var s=this.project(r.p0);i<0&&(s=this.p0),i>1&&(s=this.p1);var a=this.project(r.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new mf(s,a)}},mf.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},mf.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},mf.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},mf.prototype.distancePerpendicular=function(t){return Wc.distancePointLinePerpendicular(t,this.p0,this.p1)},mf.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},mf.prototype.midPoint=function(){return mf.midPoint(this.p0,this.p1)},mf.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?nc.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},mf.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=nc.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(i=s.distance(t.p1))<r&&(r=i,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},mf.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},mf.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},mf.prototype.getLength=function(){return this.p0.distance(this.p1)},mf.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},mf.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},mf.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},mf.prototype.lineIntersection=function(t){try{return Nc.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof Cc))throw t}return null},mf.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},mf.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*i/s,u=e*o/s}return new uc(n-u,r+a)},mf.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},mf.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||nc.isNaN(e))&&(e=1),e},mf.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},mf.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},mf.prototype.distance=function(){if(arguments[0]instanceof mf){var t=arguments[0];return Wc.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof uc){var e=arguments[0];return Wc.distancePointLine(e,this.p0,this.p1)}},mf.prototype.pointAlong=function(t){var e=new uc;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},mf.prototype.hashCode=function(){var t=nc.doubleToLongBits(this.p0.x);t^=31*nc.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=nc.doubleToLongBits(this.p1.x);return n^=31*nc.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},mf.prototype.interfaces_=function(){return[ic,ac]},mf.prototype.getClass=function(){return mf},mf.midPoint=function(t,e){return new uc((t.x+e.x)/2,(t.y+e.y)/2)},_f.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(mf,_f);var bf=function(){this.tempEnv1=new kc,this.tempEnv2=new kc,this._overlapSeg1=new mf,this._overlapSeg2=new mf};bf.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},bf.prototype.interfaces_=function(){return[]},bf.prototype.getClass=function(){return bf};var wf=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};wf.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},wf.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,r),s<n&&this.computeSelect(t,s,n,r)},wf.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},wf.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},wf.prototype.setId=function(t){this._id=t},wf.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},wf.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new kc(t,e)}return this._env},wf.prototype.getEndIndex=function(){return this._end},wf.prototype.getStartIndex=function(){return this._start},wf.prototype.getContext=function(){return this._context},wf.prototype.getId=function(){return this._id},wf.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var s=this._pts[t],a=this._pts[e],u=n._pts[r],c=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,c),!o.tempEnv1.intersects(o.tempEnv2))return null;var l=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<l&&(r<h&&this.computeOverlapsInternal(t,l,n,r,h,o),h<i&&this.computeOverlapsInternal(t,l,n,h,i,o)),l<e&&(r<h&&this.computeOverlapsInternal(l,e,n,r,h,o),h<i&&this.computeOverlapsInternal(l,e,n,h,i,o))},wf.prototype.interfaces_=function(){return[]},wf.prototype.getClass=function(){return wf};var Ef=function(){};Ef.prototype.interfaces_=function(){return[]},Ef.prototype.getClass=function(){return Ef},Ef.getChainStartIndices=function(t){var e=0,n=new cl;n.add(new mc(e));do{var r=Ef.findChainEnd(t,e);n.add(new mc(r)),e=r}while(e<t.length-1);return Ef.toIntArray(n)},Ef.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Vh.quadrant(t[n],t[n+1]),i=e+1;i<t.length;){if(!t[i-1].equals2D(t[i])&&Vh.quadrant(t[i-1],t[i])!==r)break;i++}return i-1},Ef.getChains=function(){if(1===arguments.length){var t=arguments[0];return Ef.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new cl,i=Ef.getChainStartIndices(e),o=0;o<i.length-1;o++){var s=new wf(e,i[o],i[o+1],n);r.add(s)}return r}},Ef.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var xf=function(){};xf.prototype.computeNodes=function(t){},xf.prototype.getNodedSubstrings=function(){},xf.prototype.interfaces_=function(){return[]},xf.prototype.getClass=function(){return xf};var If=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};If.prototype.setSegmentIntersector=function(t){this._segInt=t},If.prototype.interfaces_=function(){return[xf]},If.prototype.getClass=function(){return If};var Of=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new cl,this._index=new cf,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return yf.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=this,n=Ef.getChains(t.getCoordinates(),t).iterator();n.hasNext();){var r=n.next();r.setId(e._idCounter++),e._index.insert(r.getEnvelope(),r),e._monoChains.add(r)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=this,e=new Sf(this._segInt),n=this._monoChains.iterator();n.hasNext();)for(var r=n.next(),i=t._index.query(r.getEnvelope()).iterator();i.hasNext();){var o=i.next();if(o.getId()>r.getId()&&(r.computeOverlaps(o,e),t._nOverlaps++),t._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return Sf},Object.defineProperties(e,n),e}(If),Sf=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3],o=e.getContext(),s=r.getContext();this._si.processIntersections(o,n,s,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(bf),Cf=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},Tf={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Cf.prototype.getEndCapStyle=function(){return this._endCapStyle},Cf.prototype.isSingleSided=function(){return this._isSingleSided},Cf.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Cf.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Cf.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Cf.JOIN_ROUND&&(this._quadrantSegments=Cf.DEFAULT_QUADRANT_SEGMENTS)},Cf.prototype.getJoinStyle=function(){return this._joinStyle},Cf.prototype.setJoinStyle=function(t){this._joinStyle=t},Cf.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Cf.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Cf.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Cf.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Cf.prototype.getMitreLimit=function(){return this._mitreLimit},Cf.prototype.setMitreLimit=function(t){this._mitreLimit=t},Cf.prototype.setSingleSided=function(t){this._isSingleSided=t},Cf.prototype.interfaces_=function(){return[]},Cf.prototype.getClass=function(){return Cf},Cf.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Tf.CAP_ROUND.get=function(){return 1},Tf.CAP_FLAT.get=function(){return 2},Tf.CAP_SQUARE.get=function(){return 3},Tf.JOIN_ROUND.get=function(){return 1},Tf.JOIN_MITRE.get=function(){return 2},Tf.JOIN_BEVEL.get=function(){return 3},Tf.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Tf.DEFAULT_MITRE_LIMIT.get=function(){return 5},Tf.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Cf,Tf);var Nf=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Wc.COUNTERCLOCKWISE,this._inputLine=t||null},kf={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Nf.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(i,o,s)&&!!this.isShallow(i,o,s,r)&&this.isShallowSampled(i,o,t,n,r)},Nf.prototype.deleteShallowConcavities=function(){for(var t=this,e=1,n=this.findNextNonDeletedIndex(e),r=this.findNextNonDeletedIndex(n),i=!1;r<this._inputLine.length;){var o=!1;t.isDeletable(e,n,r,t._distanceTol)&&(t._isDeleted[n]=Nf.DELETE,o=!0,i=!0),e=o?r:n,n=t.findNextNonDeletedIndex(e),r=t.findNextNonDeletedIndex(n)}return i},Nf.prototype.isShallowConcavity=function(t,e,n,r){return Wc.computeOrientation(t,e,n)===this._angleOrientation&&Wc.distancePointLine(e,t,n)<r},Nf.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Nf.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<r;s+=o)if(!this.isShallow(t,e,this._inputLine[s],i))return!1;return!0},Nf.prototype.isConcave=function(t,e,n){var r=Wc.computeOrientation(t,e,n)===this._angleOrientation;return r},Nf.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=Wc.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Nf.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Nf.DELETE;)e++;return e},Nf.prototype.isShallow=function(t,e,n,r){return Wc.distancePointLine(e,t,n)<r},Nf.prototype.collapseLine=function(){for(var t=new hl,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Nf.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Nf.prototype.interfaces_=function(){return[]},Nf.prototype.getClass=function(){return Nf},Nf.simplify=function(t,e){return new Nf(t).simplify(e)},kf.INIT.get=function(){return 0},kf.DELETE.get=function(){return 1},kf.KEEP.get=function(){return 1},kf.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Nf,kf);var Af=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new cl},Pf={COORDINATE_ARRAY_TYPE:{configurable:!0}};Af.prototype.getCoordinates=function(){return this._ptList.toArray(Af.COORDINATE_ARRAY_TYPE)},Af.prototype.setPrecisionModel=function(t){this._precisionModel=t},Af.prototype.addPt=function(t){var e=new uc(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Af.prototype.revere=function(){},Af.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},Af.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Af.prototype.toString=function(){return(new mh).createLineString(this.getCoordinates()).toString()},Af.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new uc(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Af.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Af.prototype.interfaces_=function(){return[]},Af.prototype.getClass=function(){return Af},Pf.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Af,Pf);var Rf=function(){},Lf={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Rf.prototype.interfaces_=function(){return[]},Rf.prototype.getClass=function(){return Rf},Rf.toDegrees=function(t){return 180*t/Math.PI},Rf.normalize=function(t){for(;t>Math.PI;)t-=Rf.PI_TIMES_2;for(;t<=-Math.PI;)t+=Rf.PI_TIMES_2;return t},Rf.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Rf.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},Rf.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},Rf.interiorAngle=function(t,e,n){var r=Rf.angle(e,t),i=Rf.angle(e,n);return Math.abs(i-r)},Rf.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Rf.PI_TIMES_2;t>=Rf.PI_TIMES_2&&(t=0)}else{for(;t>=Rf.PI_TIMES_2;)t-=Rf.PI_TIMES_2;t<0&&(t=0)}return t},Rf.angleBetween=function(t,e,n){var r=Rf.angle(e,t),i=Rf.angle(e,n);return Rf.diff(r,i)},Rf.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Rf.toRadians=function(t){return t*Math.PI/180},Rf.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Rf.COUNTERCLOCKWISE:n<0?Rf.CLOCKWISE:Rf.NONE},Rf.angleBetweenOriented=function(t,e,n){var r=Rf.angle(e,t),i=Rf.angle(e,n)-r;return i<=-Math.PI?i+Rf.PI_TIMES_2:i>Math.PI?i-Rf.PI_TIMES_2:i},Lf.PI_TIMES_2.get=function(){return 2*Math.PI},Lf.PI_OVER_2.get=function(){return Math.PI/2},Lf.PI_OVER_4.get=function(){return Math.PI/4},Lf.COUNTERCLOCKWISE.get=function(){return Wc.COUNTERCLOCKWISE},Lf.CLOCKWISE.get=function(){return Wc.CLOCKWISE},Lf.NONE.get=function(){return Wc.COLLINEAR},Object.defineProperties(Rf,Lf);var jf=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new mf,this._seg1=new mf,this._offset0=new mf,this._offset1=new mf,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new Vc,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Cf.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Mf={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};jf.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=Wc.computeOrientation(this._s0,this._s1,this._s2),r=n===Wc.CLOCKWISE&&this._side===Sh.LEFT||n===Wc.COUNTERCLOCKWISE&&this._side===Sh.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},jf.prototype.addLineEndCap=function(t,e){var n=new mf(t,e),r=new mf;this.computeOffsetSegment(n,Sh.LEFT,this._distance,r);var i=new mf;this.computeOffsetSegment(n,Sh.RIGHT,this._distance,i);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case Cf.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,Wc.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Cf.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Cf.CAP_SQUARE:var u=new uc;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var c=new uc(r.p1.x+u.x,r.p1.y+u.y),l=new uc(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(c),this._segList.addPt(l)}},jf.prototype.getCoordinates=function(){return this._segList.getCoordinates()},jf.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Nc.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof Cc))throw t;o=new uc(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},jf.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=n.x-t.x,c=n.y-t.y,l=Math.atan2(c,u);r===Wc.CLOCKWISE?a<=l&&(a+=2*Math.PI):a>=l&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,l,r,i),this._segList.addPt(n)},jf.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*jf.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Cf.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Cf.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},jf.prototype.createSquare=function(t){this._segList.addPt(new uc(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new uc(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new uc(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new uc(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},jf.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},jf.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},jf.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},jf.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},jf.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Rf.angle(i,this._seg0.p0),s=Rf.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,a=Rf.normalize(o+s),u=Rf.normalize(a+Math.PI),c=r*n,l=n-c*Math.abs(Math.sin(s)),h=i.x+c*Math.cos(u),f=i.y+c*Math.sin(u),p=new uc(h,f),d=new mf(i,p),g=d.pointAlongOffset(1,l),v=d.pointAlongOffset(1,-l);this._side===Sh.LEFT?(this._segList.addPt(g),this._segList.addPt(v)):(this._segList.addPt(v),this._segList.addPt(g))},jf.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Sh.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=i*n*o/a,c=i*n*s/a;r.p0.x=t.p0.x-c,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-c,r.p1.y=t.p1.y+u},jf.prototype.addFilletArc=function(t,e,n,r,i){var o=r===Wc.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,c=0,l=new uc;c<s;){var h=e+o*c;l.x=t.x+i*Math.cos(h),l.y=t.y+i*Math.sin(h),this._segList.addPt(l),c+=u}},jf.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*jf.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new uc((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new uc((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},jf.prototype.createCircle=function(t){var e=new uc(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},jf.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},jf.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Af,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*jf.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},jf.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Cf.JOIN_BEVEL||this._bufParams.getJoinStyle()===Cf.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Wc.CLOCKWISE,this._distance))},jf.prototype.closeRing=function(){this._segList.closeRing()},jf.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},jf.prototype.interfaces_=function(){return[]},jf.prototype.getClass=function(){return jf},Mf.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Mf.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Mf.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Mf.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(jf,Mf);var Df=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Df.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&fl.reverse(o),o},Df.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Nf.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Sh.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(t,!1);var a=Nf.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],Sh.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(a[c],!0)}n.addLastSegment(),n.closeRing()},Df.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Sh.RIGHT&&(r=-r);var i=Nf.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(i[s],a)}n.closeRing()},Df.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Nf.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Sh.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var s=Nf.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],Sh.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},Df.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Cf.CAP_ROUND:e.createCircle(t);break;case Cf.CAP_SQUARE:e.createSquare(t)}},Df.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Df.prototype.getBufferParameters=function(){return this._bufParams},Df.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Df.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Df.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Df.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Nf.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Sh.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{var a=Nf.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],Sh.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(a[c],!0)}n.addLastSegment()},Df.prototype.getSegGen=function(t){return new jf(this._precisionModel,this._bufParams,t)},Df.prototype.interfaces_=function(){return[]},Df.prototype.getClass=function(){return Df},Df.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new uc(t[n]);return e};var Ff=function(){this._subgraphs=null,this._seg=new mf,this._cga=new Wc;var t=arguments[0];this._subgraphs=t},qf={DepthSegment:{configurable:!0}};Ff.prototype.findStabbedSegments=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=new cl,r=this._subgraphs.iterator();r.hasNext();){var i=r.next(),o=i.getEnvelope();e.y<o.getMinY()||e.y>o.getMaxY()||t.findStabbedSegments(e,i.getDirectedEdges(),n)}return n}if(3===arguments.length)if(dc(arguments[2],al)&&arguments[0]instanceof uc&&arguments[1]instanceof Wh)for(var s=arguments[0],a=arguments[1],u=arguments[2],c=a.getEdge().getCoordinates(),l=0;l<c.length-1;l++){t._seg.p0=c[l],t._seg.p1=c[l+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse();var h=Math.max(t._seg.p0.x,t._seg.p1.x);if(!(h<s.x)&&!(t._seg.isHorizontal()||s.y<t._seg.p0.y||s.y>t._seg.p1.y||Wc.computeOrientation(t._seg.p0,t._seg.p1,s)===Wc.RIGHT)){var f=a.getDepth(Sh.LEFT);t._seg.p0.equals(c[l])||(f=a.getDepth(Sh.RIGHT));var p=new Uf(t._seg,f);u.add(p)}}else if(dc(arguments[2],al)&&arguments[0]instanceof uc&&dc(arguments[1],al))for(var d=arguments[0],g=arguments[1],v=arguments[2],y=g.iterator();y.hasNext();){var m=y.next();m.isForward()&&t.findStabbedSegments(d,m,v)}},Ff.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:nf.min(e)._leftDepth},Ff.prototype.interfaces_=function(){return[]},Ff.prototype.getClass=function(){return Ff},qf.DepthSegment.get=function(){return Uf},Object.defineProperties(Ff,qf);var Uf=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new mf(t),this._leftDepth=e};Uf.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!==(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Uf.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Uf.prototype.toString=function(){return this._upwardSeg.toString()},Uf.prototype.interfaces_=function(){return[ic]},Uf.prototype.getClass=function(){return Uf};var Bf=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Bf.prototype.area=function(){return Bf.area(this.p0,this.p1,this.p2)},Bf.prototype.signedArea=function(){return Bf.signedArea(this.p0,this.p1,this.p2)},Bf.prototype.interpolateZ=function(t){if(null===t)throw new ec("Supplied point is null.");return Bf.interpolateZ(t,this.p0,this.p1,this.p2)},Bf.prototype.longestSideLength=function(){return Bf.longestSideLength(this.p0,this.p1,this.p2)},Bf.prototype.isAcute=function(){return Bf.isAcute(this.p0,this.p1,this.p2)},Bf.prototype.circumcentre=function(){return Bf.circumcentre(this.p0,this.p1,this.p2)},Bf.prototype.area3D=function(){return Bf.area3D(this.p0,this.p1,this.p2)},Bf.prototype.centroid=function(){return Bf.centroid(this.p0,this.p1,this.p2)},Bf.prototype.inCentre=function(){return Bf.inCentre(this.p0,this.p1,this.p2)},Bf.prototype.interfaces_=function(){return[]},Bf.prototype.getClass=function(){return Bf},Bf.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Bf.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Bf.det=function(t,e,n,r){return t*r-e*n},Bf.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,s=n.x-i,a=r.x-i,u=n.y-o,c=r.y-o,l=s*c-a*u,h=t.x-i,f=t.y-o,p=(c*h-a*f)/l,d=(-u*h+s*f)/l;return e.z+p*(n.z-e.z)+d*(r.z-e.z)},Bf.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),s=r;return i>s&&(s=i),o>s&&(s=o),s},Bf.isAcute=function(t,e,n){return!!Rf.isAcute(t,e,n)&&!!Rf.isAcute(e,n,t)&&!!Rf.isAcute(n,t,e)},Bf.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,s=t.y-i,a=e.x-r,u=e.y-i,c=2*Bf.det(o,s,a,u),l=Bf.det(s,o*o+s*s,u,a*a+u*u),h=Bf.det(o,o*o+s*s,a,a*a+u*u);return new uc(r-l/c,i+h/c)},Bf.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Nc(t.x+n/2,t.y+r/2,1),o=new Nc(t.x-r+n/2,t.y+n+r/2,1);return new Nc(i,o)},Bf.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new uc(t.x+i*o,t.y+i*s)},Bf.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,u=n.z-t.z,c=i*u-o*a,l=o*s-r*u,h=r*a-i*s,f=c*c+l*l+h*h,p=Math.sqrt(f)/2;return p},Bf.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new uc(r,i)},Bf.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),s=r+i+o,a=(r*t.x+i*e.x+o*n.x)/s,u=(r*t.y+i*e.y+o*n.y)/s;return new uc(a,u)};var Vf=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new cl;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};Vf.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,fc.EXTERIOR,fc.INTERIOR)},Vf.prototype.addPolygon=function(t){var e=this,n=this._distance,r=Sh.LEFT;this._distance<0&&(n=-this._distance,r=Sh.RIGHT);var i=t.getExteriorRing(),o=fl.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,n,r,fc.EXTERIOR,fc.INTERIOR);for(var s=0;s<t.getNumInteriorRing();s++){var a=t.getInteriorRingN(s),u=fl.removeRepeatedPoints(a.getCoordinates());e._distance>0&&e.isErodedCompletely(a,-e._distance)||e.addPolygonRing(u,n,Sh.opposite(r),fc.INTERIOR,fc.EXTERIOR)}},Vf.prototype.isTriangleErodedCompletely=function(t,e){var n=new Bf(t[0],t[1],t[2]),r=n.inCentre();return Wc.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},Vf.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=fl.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,fc.EXTERIOR,fc.INTERIOR)},Vf.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new yf(t,new jh(0,fc.BOUNDARY,e,n));this._curveList.add(r)},Vf.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Vf.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<nh.MINIMUM_VALID_SIZE)return null;var o=r,s=i;t.length>=nh.MINIMUM_VALID_SIZE&&Wc.isCCW(t)&&(o=i,s=r,n=Sh.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},Vf.prototype.add=function(t){if(t.isEmpty())return null;t instanceof th?this.addPolygon(t):t instanceof $l?this.addLineString(t):t instanceof Jl?this.addPoint(t):(t instanceof eh||t instanceof Fl||t instanceof rh||t instanceof Dl)&&this.addCollection(t)},Vf.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},Vf.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Vf.prototype.interfaces_=function(){return[]},Vf.prototype.getClass=function(){return Vf};var Gf=function(){};Gf.prototype.locate=function(t){},Gf.prototype.interfaces_=function(){return[]},Gf.prototype.getClass=function(){return Gf};var zf=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};zf.prototype.next=function(){if(this._atStart)return this._atStart=!1,zf.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new ul;var t=this._parent.getGeometryN(this._index++);return t instanceof Dl?(this._subcollectionIterator=new zf(t),this._subcollectionIterator.next()):t},zf.prototype.remove=function(){throw new Error(this.getClass().getName())},zf.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},zf.prototype.interfaces_=function(){return[sl]},zf.prototype.getClass=function(){return zf},zf.isAtomic=function(t){return!(t instanceof Dl)};var Wf=function(){this._geom=null;var t=arguments[0];this._geom=t};Wf.prototype.locate=function(t){return Wf.locate(t,this._geom)},Wf.prototype.interfaces_=function(){return[Gf]},Wf.prototype.getClass=function(){return Wf},Wf.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&Wc.isPointInRing(t,e.getCoordinates())},Wf.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Wf.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(Wf.isPointInRing(t,i))return!1}return!0},Wf.containsPoint=function(t,e){if(e instanceof th)return Wf.containsPointInPolygon(t,e);if(e instanceof Dl)for(var n=new zf(e);n.hasNext();){var r=n.next();if(r!==e&&Wf.containsPoint(t,r))return!0}return!1},Wf.locate=function(t,e){return e.isEmpty()?fc.EXTERIOR:Wf.containsPoint(t,e)?fc.INTERIOR:fc.EXTERIOR};var Kf=function(){this._edgeMap=new Cl,this._edgeList=null,this._ptInAreaLocation=[fc.NONE,fc.NONE]};Kf.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Kf.prototype.propagateSideLabels=function(t){for(var e=fc.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Sh.LEFT)!==fc.NONE&&(e=r.getLocation(t,Sh.LEFT))}if(e===fc.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Sh.ON)===fc.NONE&&a.setLocation(t,Sh.ON,i),a.isArea(t)){var u=a.getLocation(t,Sh.LEFT),c=a.getLocation(t,Sh.RIGHT);if(c!==fc.NONE){if(c!==i)throw new Ah("side location conflict",s.getCoordinate());u===fc.NONE&&qc.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),i=u}else qc.isTrue(a.getLocation(t,Sh.LEFT)===fc.NONE,"found single null side"),a.setLocation(t,Sh.RIGHT,i),a.setLocation(t,Sh.LEFT,i)}}},Kf.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Kf.prototype.print=function(t){Tc.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Kf.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Kf.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Sh.LEFT);qc.isTrue(r!==fc.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var s=o.next().getLabel();qc.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,Sh.LEFT),u=s.getLocation(t,Sh.RIGHT);if(a===u)return!1;if(u!==i)return!1;i=a}return!0},Kf.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Kf.prototype.iterator=function(){return this.getEdges().iterator()},Kf.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new cl(this._edgeMap.values())),this._edgeList},Kf.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===fc.NONE&&(this._ptInAreaLocation[t]=Wf.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Kf.prototype.toString=function(){var t=new yc;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Kf.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Kf.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===fc.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var c=fc.NONE;if(e[u])c=fc.EXTERIOR;else{var l=s.getCoordinate();c=this.getLocation(u,l,t)}a.setAllLocationsIfNull(u,c)}},Kf.prototype.getDegree=function(){return this._edgeMap.size()},Kf.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Kf.prototype.interfaces_=function(){return[]},Kf.prototype.getClass=function(){return Kf};var Hf=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){var t=this;this.getResultAreaEdges();for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var o=t._resultAreaEdgeList.get(i),s=o.getSym();if(o.getLabel().isArea())switch(null===e&&o.isInResult()&&(e=o),r){case t._SCANNING_FOR_INCOMING:if(!s.isInResult())continue;n=s,r=t._LINKING_TO_OUTGOING;break;case t._LINKING_TO_OUTGOING:if(!o.isInResult())continue;n.setNext(o),r=t._SCANNING_FOR_INCOMING}}if(r===this._LINKING_TO_OUTGOING){if(null===e)throw new Ah("no outgoing dirEdge found",this.getCoordinate());qc.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),n.setNext(e)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return Vh.isNorthern(i)&&Vh.isNorthern(o)?n:Vh.isNorthern(i)||Vh.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(qc.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){Tc.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new cl;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=this.findIndex(e),r=e.getDepth(Sh.LEFT),i=e.getDepth(Sh.RIGHT),o=this.computeDepths(n+1,this._edgeList.size(),r),s=this.computeDepths(0,n,o);if(s!==i)throw new Ah("depth mismatch at "+e.getCoordinate())}else if(3===arguments.length){for(var a=arguments[0],u=arguments[1],c=arguments[2],l=c,h=a;h<u;h++){var f=t._edgeList.get(h);f.setEdgeDepths(Sh.RIGHT,l),l=f.getDepth(Sh.LEFT)}return l}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=this,n=null,r=null,i=this._SCANNING_FOR_INCOMING,o=this._resultAreaEdgeList.size()-1;o>=0;o--){var s=e._resultAreaEdgeList.get(o),a=s.getSym();switch(null===n&&s.getEdgeRing()===t&&(n=s),i){case e._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;r=a,i=e._LINKING_TO_OUTGOING;break;case e._LINKING_TO_OUTGOING:if(s.getEdgeRing()!==t)continue;r.setNextMin(s),i=e._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(qc.isTrue(null!==n,"found null for first outgoing dirEdge"),qc.isTrue(n.getEdgeRing()===t,"unable to link last incoming dirEdge"),r.setNextMin(n))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){var n=e.next();n.isInResult()&&t++}return t}if(1===arguments.length){for(var r=arguments[0],i=0,o=this.iterator();o.hasNext();){var s=o.next();s.getEdgeRing()===r&&i++}return i}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=fc.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=fc.INTERIOR;break}if(r.isInResult()){t=fc.EXTERIOR;break}}}if(t===fc.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===fc.INTERIOR):(s.isInResult()&&(i=fc.EXTERIOR),a.isInResult()&&(i=fc.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new jh(fc.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==fc.INTERIOR&&o!==fc.BOUNDARY||this._label.setLocation(i,fc.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Kf),Yf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Uh(t,new Hf)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Kh),Xf=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Xf.prototype.compareTo=function(t){var e=t;return Xf.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Xf.prototype.interfaces_=function(){return[ic]},Xf.prototype.getClass=function(){return Xf},Xf.orientation=function(t){return 1===fl.increasingDirection(t)},Xf.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,s=e?t.length:-1,a=r?n.length:-1,u=e?0:t.length-1,c=r?0:n.length-1;;){var l=t[u].compareTo(n[c]);if(0!==l)return l;var h=(u+=i)===s,f=(c+=o)===a;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0}};var $f=function(){this._edges=new cl,this._ocaMap=new Cl};$f.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},$f.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},$f.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},$f.prototype.iterator=function(){return this._edges.iterator()},$f.prototype.getEdges=function(){return this._edges},$f.prototype.get=function(t){return this._edges.get(t)},$f.prototype.findEqualEdge=function(t){var e=new Xf(t.getCoordinates());return this._ocaMap.get(e)},$f.prototype.add=function(t){this._edges.add(t);var e=new Xf(t.getCoordinates());this._ocaMap.put(e,t)},$f.prototype.interfaces_=function(){return[]},$f.prototype.getClass=function(){return $f};var Qf=function(){};Qf.prototype.processIntersections=function(t,e,n,r){},Qf.prototype.isDone=function(){},Qf.prototype.interfaces_=function(){return[]},Qf.prototype.getClass=function(){return Qf};var Jf=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Jf.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Jf.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Jf.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Jf.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Jf.prototype.getLineIntersector=function(){return this._li},Jf.prototype.hasProperIntersection=function(){return this._hasProper},Jf.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Jf.prototype.hasIntersection=function(){return this._hasIntersection},Jf.prototype.isDone=function(){return!1},Jf.prototype.hasInteriorIntersection=function(){return this._hasInterior},Jf.prototype.interfaces_=function(){return[Qf]},Jf.prototype.getClass=function(){return Jf},Jf.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Zf=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new uc(t),this.segmentIndex=e,this.dist=n};Zf.prototype.getSegmentIndex=function(){return this.segmentIndex},Zf.prototype.getCoordinate=function(){return this.coord},Zf.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Zf.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Zf.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Zf.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Zf.prototype.getDistance=function(){return this.dist},Zf.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Zf.prototype.interfaces_=function(){return[ic]},Zf.prototype.getClass=function(){return Zf};var tp=function(){this._nodeMap=new Cl,this.edge=null;var t=arguments[0];this.edge=t};tp.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},tp.prototype.iterator=function(){return this._nodeMap.values().iterator()},tp.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},tp.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},tp.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new uc(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return i&&(o[s]=e.coord),new op(o,new jh(this.edge._label))},tp.prototype.add=function(t,e,n){var r=new Zf(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},tp.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},tp.prototype.interfaces_=function(){return[]},tp.prototype.getClass=function(){return tp};var ep=function(){};ep.prototype.getChainStartIndices=function(t){var e=0,n=new cl;n.add(new mc(e));do{var r=this.findChainEnd(t,e);n.add(new mc(r)),e=r}while(e<t.length-1);return ep.toIntArray(n)},ep.prototype.findChainEnd=function(t,e){for(var n=Vh.quadrant(t[e],t[e+1]),r=e+1;r<t.length;){if(Vh.quadrant(t[r-1],t[r])!==n)break;r++}return r-1},ep.prototype.interfaces_=function(){return[]},ep.prototype.getClass=function(){return ep},ep.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var np=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new kc,this.env2=new kc;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new ep;this.startIndex=e.getChainStartIndices(this.pts)};np.prototype.getCoordinates=function(){return this.pts},np.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},np.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},np.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],c=arguments[5],l=this.pts[i],h=this.pts[o],f=s.pts[a],p=s.pts[u];if(o-i==1&&u-a==1)return c.addIntersections(this.e,i,s.e,a),null;if(this.env1.init(l,h),this.env2.init(f,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((a+u)/2);i<d&&(a<g&&this.computeIntersectsForChain(i,d,s,a,g,c),g<u&&this.computeIntersectsForChain(i,d,s,g,u,c)),d<o&&(a<g&&this.computeIntersectsForChain(d,o,s,a,g,c),g<u&&this.computeIntersectsForChain(d,o,s,g,u,c))}},np.prototype.getStartIndexes=function(){return this.startIndex},np.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},np.prototype.interfaces_=function(){return[]},np.prototype.getClass=function(){return np};var rp=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},ip={NULL_VALUE:{configurable:!0}};rp.prototype.getDepth=function(t,e){return this._depth[t][e]},rp.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},rp.prototype.isNull=function(){var t=this;if(0===arguments.length){for(var e=0;e<2;e++)for(var n=0;n<3;n++)if(t._depth[e][n]!==rp.NULL_VALUE)return!1;return!0}if(1===arguments.length){var r=arguments[0];return this._depth[r][1]===rp.NULL_VALUE}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._depth[i][o]===rp.NULL_VALUE}},rp.prototype.normalize=function(){for(var t=this,e=0;e<2;e++)if(!t.isNull(e)){var n=t._depth[e][1];t._depth[e][2]<n&&(n=t._depth[e][2]),n<0&&(n=0);for(var r=1;r<3;r++){var i=0;t._depth[e][r]>n&&(i=1),t._depth[e][r]=i}}},rp.prototype.getDelta=function(t){return this._depth[t][Sh.RIGHT]-this._depth[t][Sh.LEFT]},rp.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?fc.EXTERIOR:fc.INTERIOR},rp.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},rp.prototype.add=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=0;n<2;n++)for(var r=1;r<3;r++){var i=e.getLocation(n,r);i!==fc.EXTERIOR&&i!==fc.INTERIOR||(t.isNull(n,r)?t._depth[n][r]=rp.depthAtLocation(i):t._depth[n][r]+=rp.depthAtLocation(i))}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];a===fc.INTERIOR&&this._depth[o][s]++}},rp.prototype.interfaces_=function(){return[]},rp.prototype.getClass=function(){return rp},rp.depthAtLocation=function(t){return t===fc.EXTERIOR?0:t===fc.INTERIOR?1:rp.NULL_VALUE},ip.NULL_VALUE.get=function(){return-1},Object.defineProperties(rp,ip);var op=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new tp(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new rp,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,jh.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(r=!1),this.pts[s].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new np(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new kc;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new uc(t.getIntersection(r)),o=e,s=t.getEdgeDistance(n,r),a=o+1;if(a<this.pts.length){var u=this.pts[a];i.equals2D(u)&&(o=a,s=0)}this.eiList.add(i,o,s)},e.prototype.toString=function(){var t=new yc;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Sh.ON),e.getLocation(1,Sh.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Sh.LEFT),e.getLocation(1,Sh.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Sh.RIGHT),e.getLocation(1,Sh.RIGHT),2))},e}(qh),sp=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new $f,this._bufParams=t||null};sp.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},sp.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new jh(t.getLabel())).flip(),n.merge(r);var i=sp.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(sp.depthDelta(t.getLabel()))},sp.prototype.buildSubgraphs=function(t,e){for(var n=new cl,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),s=new Ff(n).getDepth(o);i.computeDepth(s),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},sp.prototype.createSubgraphs=function(t){for(var e=new cl,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Rh;i.create(r),e.add(i)}}return nf.sort(e,nf.reverseOrder()),e},sp.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},sp.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Of,n=new Vc;return n.setPrecisionModel(t),e.setSegmentIntersector(new Jf(n)),e},sp.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Df(n,this._bufParams),i=new Vf(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new Hh(new Yf),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new Yh(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},sp.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=i.getData(),a=new op(i.getCoordinates(),new jh(s));this.insertUniqueEdge(a)}}},sp.prototype.setNoder=function(t){this._workingNoder=t},sp.prototype.interfaces_=function(){return[]},sp.prototype.getClass=function(){return sp},sp.depthDelta=function(t){var e=t.getLocation(0,Sh.LEFT),n=t.getLocation(0,Sh.RIGHT);return e===fc.INTERIOR&&n===fc.EXTERIOR?1:e===fc.EXTERIOR&&n===fc.INTERIOR?-1:0},sp.convertSegStrings=function(t){for(var e=new mh,n=new cl;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var ap=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ap.prototype.rescale=function(){var t=this;if(dc(arguments[0],il))for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.rescale(r.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],o=0;o<i.length;o++)i[o].x=i[o].x/t._scaleFactor+t._offsetX,i[o].y=i[o].y/t._scaleFactor+t._offsetY;2===i.length&&i[0].equals2D(i[1])&&Tc.out.println(i)}},ap.prototype.scale=function(){var t=this;if(dc(arguments[0],il)){for(var e=arguments[0],n=new cl,r=e.iterator();r.hasNext();){var i=r.next();n.add(new yf(t.scale(i.getCoordinates()),i.getData()))}return n}if(arguments[0]instanceof Array){for(var o=arguments[0],s=new Array(o.length).fill(null),a=0;a<o.length;a++)s[a]=new uc(Math.round((o[a].x-t._offsetX)*t._scaleFactor),Math.round((o[a].y-t._offsetY)*t._scaleFactor),o[a].z);var u=fl.removeRepeatedPoints(s);return u}},ap.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ap.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ap.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ap.prototype.interfaces_=function(){return[xf]},ap.prototype.getClass=function(){return ap};var up=function(){this._li=new Vc,this._segStrings=null;var t=arguments[0];this._segStrings=t},cp={fact:{configurable:!0}};up.prototype.checkEndPtVertexIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next(),r=n.getCoordinates();t.checkEndPtVertexIntersections(r[0],t._segStrings),t.checkEndPtVertexIntersections(r[r.length-1],t._segStrings)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=o.iterator();s.hasNext();)for(var a=s.next(),u=a.getCoordinates(),c=1;c<u.length-1;c++)if(u[c].equals(i))throw new Dc("found endpt/interior pt intersection at index "+c+" :pt "+i)},up.prototype.checkInteriorIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();)for(var n=e.next(),r=this._segStrings.iterator();r.hasNext();){var i=r.next();t.checkInteriorIntersections(n,i)}else if(2===arguments.length)for(var o=arguments[0],s=arguments[1],a=o.getCoordinates(),u=s.getCoordinates(),c=0;c<a.length-1;c++)for(var l=0;l<u.length-1;l++)t.checkInteriorIntersections(o,c,s,l);else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3];if(h===p&&f===d)return null;var g=h.getCoordinates()[f],v=h.getCoordinates()[f+1],y=p.getCoordinates()[d],m=p.getCoordinates()[d+1];if(this._li.computeIntersection(g,v,y,m),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,g,v)||this.hasInteriorIntersection(this._li,y,m)))throw new Dc("found non-noded intersection at "+g+"-"+v+" and "+y+"-"+m)}},up.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},up.prototype.checkCollapses=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next();t.checkCollapses(n)}else if(1===arguments.length)for(var r=arguments[0],i=r.getCoordinates(),o=0;o<i.length-2;o++)t.checkCollapse(i[o],i[o+1],i[o+2])},up.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},up.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Dc("found non-noded collapse at "+up.fact.createLineString([t,e,n]))},up.prototype.interfaces_=function(){return[]},up.prototype.getClass=function(){return up},cp.fact.get=function(){return new mh},Object.defineProperties(up,cp);var lp=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new ec("Scale factor must be non-zero");1!==e&&(this._pt=new uc(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new uc,this._p1Scaled=new uc),this.initCorners(this._pt)},hp={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};lp.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return qc.isTrue(!(s&&a),"Found bad envelope test"),a},lp.prototype.initCorners=function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new uc(this._maxx,this._maxy),this._corner[1]=new uc(this._minx,this._maxy),this._corner[2]=new uc(this._minx,this._miny),this._corner[3]=new uc(this._maxx,this._miny)},lp.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},lp.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},lp.prototype.getCoordinate=function(){return this._originalPt},lp.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},lp.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=lp.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new kc(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},lp.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},lp.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!n||!r)||!!t.equals(this._pt)||!!e.equals(this._pt))))},lp.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},lp.prototype.interfaces_=function(){return[]},lp.prototype.getClass=function(){return lp},hp.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(lp,hp);var fp=function(){this.tempEnv1=new kc,this.selectedSegment=new mf};fp.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},fp.prototype.interfaces_=function(){return[]},fp.prototype.getClass=function(){return fp};var pp=function(){this._index=null;var t=arguments[0];this._index=t},dp={HotPixelSnapAction:{configurable:!0}};pp.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new gp(e,n,r);return this._index.query(i,{interfaces_:function(){return[Jh]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},pp.prototype.interfaces_=function(){return[]},pp.prototype.getClass=function(){return pp},dp.HotPixelSnapAction.get=function(){return gp},Object.defineProperties(pp,dp);var gp=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],n=arguments[1],r=e.getContext();if(null!==this._parentEdge&&r===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(r,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fp),vp=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new cl};vp.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},vp.prototype.isDone=function(){return!1},vp.prototype.getInteriorIntersections=function(){return this._interiorIntersections},vp.prototype.interfaces_=function(){return[Qf]},vp.prototype.getClass=function(){return vp};var yp=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new Vc,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};yp.prototype.checkCorrectness=function(t){var e=yf.getNodedSubstrings(t),n=new up(e);try{n.checkValid()}catch(t){if(!(t instanceof Sc))throw t;t.printStackTrace()}},yp.prototype.getNodedSubstrings=function(){return yf.getNodedSubstrings(this._nodedSegStrings)},yp.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},yp.prototype.findInteriorIntersections=function(t,e){var n=new vp(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},yp.prototype.computeVertexSnaps=function(){var t=this;if(dc(arguments[0],il))for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.computeVertexSnaps(r)}else if(arguments[0]instanceof yf)for(var i=arguments[0],o=i.getCoordinates(),s=0;s<o.length;s++){var a=new lp(o[s],t._scaleFactor,t._li),u=t._pointSnapper.snap(a,i,s);u&&i.addIntersection(o[s],s)}},yp.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new Of,this._pointSnapper=new pp(this._noder.getIndex()),this.snapRound(t,this._li)},yp.prototype.computeIntersectionSnaps=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next(),i=new lp(r,e._scaleFactor,e._li);e._pointSnapper.snap(i)}},yp.prototype.interfaces_=function(){return[xf]},yp.prototype.getClass=function(){return yp};var mp=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Cf,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},_p={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};mp.prototype.bufferFixedPrecision=function(t){var e=new ap(new yp(new dh(1)),t.getScale()),n=new sp(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},mp.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=mp.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Ah))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=mp.precisionScaleFactor(this._argGeom,this._distance,n),i=new dh(r);this.bufferFixedPrecision(i)}},mp.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===dh.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},mp.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},mp.prototype.bufferOriginalPrecision=function(){try{var t=new sp(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Dc))throw t;this._saveException=t}},mp.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},mp.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},mp.prototype.interfaces_=function(){return[]},mp.prototype.getClass=function(){return mp},mp.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new mp(t),r=n.getResultGeometry(e);return r}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Yc&&"number"==typeof arguments[1]){var i=arguments[0],o=arguments[1],s=arguments[2],a=new mp(i);a.setQuadrantSegments(s);var u=a.getResultGeometry(o);return u}if(arguments[2]instanceof Cf&&arguments[0]instanceof Yc&&"number"==typeof arguments[1]){var c=arguments[0],l=arguments[1],h=arguments[2],f=new mp(c,h),p=f.getResultGeometry(l);return p}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],v=arguments[2],y=arguments[3],m=new mp(d);m.setQuadrantSegments(v),m.setEndCapStyle(y);var _=m.getResultGeometry(g);return _}},mp.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=gc.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},_p.CAP_ROUND.get=function(){return Cf.CAP_ROUND},_p.CAP_BUTT.get=function(){return Cf.CAP_FLAT},_p.CAP_FLAT.get=function(){return Cf.CAP_FLAT},_p.CAP_SQUARE.get=function(){return Cf.CAP_SQUARE},_p.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(mp,_p);var bp=function(){this._pt=[new uc,new uc],this._distance=nc.NaN,this._isNull=!0};bp.prototype.getCoordinates=function(){return this._pt},bp.prototype.getCoordinate=function(t){return this._pt[t]},bp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},bp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},bp.prototype.getDistance=function(){return this._distance},bp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},bp.prototype.interfaces_=function(){return[]},bp.prototype.getClass=function(){return bp};var wp=function(){};wp.prototype.interfaces_=function(){return[]},wp.prototype.getClass=function(){return wp},wp.computeDistance=function(){if(arguments[2]instanceof bp&&arguments[0]instanceof $l&&arguments[1]instanceof uc)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=t.getCoordinates(),i=new mf,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var s=i.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof bp&&arguments[0]instanceof th&&arguments[1]instanceof uc){var a=arguments[0],u=arguments[1],c=arguments[2];wp.computeDistance(a.getExteriorRing(),u,c);for(var l=0;l<a.getNumInteriorRing();l++)wp.computeDistance(a.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof bp&&arguments[0]instanceof Yc&&arguments[1]instanceof uc){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof $l)wp.computeDistance(h,f,p);else if(h instanceof th)wp.computeDistance(h,f,p);else if(h instanceof Dl)for(var d=h,g=0;g<d.getNumGeometries();g++){var v=d.getGeometryN(g);wp.computeDistance(v,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof bp&&arguments[0]instanceof mf&&arguments[1]instanceof uc){var y=arguments[0],m=arguments[1],_=arguments[2],b=y.closestPoint(m);_.setMinimum(b,m)}};var Ep=function(t){this._maxPtDist=new bp,this._inputGeom=t||null},xp={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Ep.prototype.computeMaxMidpointDistance=function(t){var e=new Op(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Ep.prototype.computeMaxVertexDistance=function(t){var e=new Ip(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Ep.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},Ep.prototype.getDistancePoints=function(){return this._maxPtDist},Ep.prototype.interfaces_=function(){return[]},Ep.prototype.getClass=function(){return Ep},xp.MaxPointDistanceFilter.get=function(){return Ip},xp.MaxMidpointDistanceFilter.get=function(){return Op},Object.defineProperties(Ep,xp);var Ip=function(t){this._maxPtDist=new bp,this._minPtDist=new bp,this._geom=t||null};Ip.prototype.filter=function(t){this._minPtDist.initialize(),wp.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ip.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ip.prototype.interfaces_=function(){return[Qc]},Ip.prototype.getClass=function(){return Ip};var Op=function(t){this._maxPtDist=new bp,this._minPtDist=new bp,this._geom=t||null};Op.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new uc((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),wp.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Op.prototype.isDone=function(){return!1},Op.prototype.isGeometryChanged=function(){return!1},Op.prototype.getMaxPointDistance=function(){return this._maxPtDist},Op.prototype.interfaces_=function(){return[Ml]},Op.prototype.getClass=function(){return Op};var Sp=function(t){this._comps=t||null};Sp.prototype.filter=function(t){t instanceof th&&this._comps.add(t)},Sp.prototype.interfaces_=function(){return[jl]},Sp.prototype.getClass=function(){return Sp},Sp.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Sp.getPolygons(t,new cl)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof th?n.add(e):e instanceof Dl&&e.apply(new Sp(n)),n}};var Cp=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Cp.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof nh){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof $l&&this._lines.add(t)},Cp.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Cp.prototype.interfaces_=function(){return[Hc]},Cp.prototype.getClass=function(){return Cp},Cp.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Cp.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Cp.getLines(e,n))}},Cp.getLines=function(){if(1===arguments.length){var t=arguments[0];return Cp.getLines(t,!1)}if(2===arguments.length){if(dc(arguments[0],il)&&dc(arguments[1],il)){for(var e=arguments[0],n=arguments[1],r=e.iterator();r.hasNext();){var i=r.next();Cp.getLines(i,n)}return n}if(arguments[0]instanceof Yc&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1],a=new cl;return o.apply(new Cp(a,s)),a}if(arguments[0]instanceof Yc&&dc(arguments[1],il)){var u=arguments[0],c=arguments[1];return u instanceof $l?c.add(u):u.apply(new Cp(c)),c}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&dc(arguments[0],il)&&dc(arguments[1],il)){for(var l=arguments[0],h=arguments[1],f=arguments[2],p=l.iterator();p.hasNext();){var d=p.next();Cp.getLines(d,h,f)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Yc&&dc(arguments[1],il)){var g=arguments[0],v=arguments[1],y=arguments[2];return g.apply(new Cp(v,y)),v}}};var Tp=function(){if(this._boundaryRule=Jc.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new ec("Rule must be non-null");this._boundaryRule=t}};Tp.prototype.locateInternal=function(){var t=this;if(arguments[0]instanceof uc&&arguments[1]instanceof th){var e=arguments[0],n=arguments[1];if(n.isEmpty())return fc.EXTERIOR;var r=n.getExteriorRing(),i=this.locateInPolygonRing(e,r);if(i===fc.EXTERIOR)return fc.EXTERIOR;if(i===fc.BOUNDARY)return fc.BOUNDARY;for(var o=0;o<n.getNumInteriorRing();o++){var s=n.getInteriorRingN(o),a=t.locateInPolygonRing(e,s);if(a===fc.INTERIOR)return fc.EXTERIOR;if(a===fc.BOUNDARY)return fc.BOUNDARY}return fc.INTERIOR}if(arguments[0]instanceof uc&&arguments[1]instanceof $l){var u=arguments[0],c=arguments[1];if(!c.getEnvelopeInternal().intersects(u))return fc.EXTERIOR;var l=c.getCoordinates();return c.isClosed()||!u.equals(l[0])&&!u.equals(l[l.length-1])?Wc.isOnLine(u,l)?fc.INTERIOR:fc.EXTERIOR:fc.BOUNDARY}if(arguments[0]instanceof uc&&arguments[1]instanceof Jl){var h=arguments[0],f=arguments[1],p=f.getCoordinate();return p.equals2D(h)?fc.INTERIOR:fc.EXTERIOR}},Tp.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?Wc.locatePointInRing(t,e.getCoordinates()):fc.EXTERIOR},Tp.prototype.intersects=function(t,e){return this.locate(t,e)!==fc.EXTERIOR},Tp.prototype.updateLocationInfo=function(t){t===fc.INTERIOR&&(this._isIn=!0),t===fc.BOUNDARY&&this._numBoundaries++},Tp.prototype.computeLocation=function(t,e){var n=this;if(e instanceof Jl&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof $l)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof th)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Fl)for(var r=e,i=0;i<r.getNumGeometries();i++){var o=r.getGeometryN(i);n.updateLocationInfo(n.locateInternal(t,o))}else if(e instanceof rh)for(var s=e,a=0;a<s.getNumGeometries();a++){var u=s.getGeometryN(a);n.updateLocationInfo(n.locateInternal(t,u))}else if(e instanceof Dl)for(var c=new zf(e);c.hasNext();){var l=c.next();l!==e&&n.computeLocation(t,l)}},Tp.prototype.locate=function(t,e){return e.isEmpty()?fc.EXTERIOR:e instanceof $l||e instanceof th?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?fc.BOUNDARY:this._numBoundaries>0||this._isIn?fc.INTERIOR:fc.EXTERIOR)},Tp.prototype.interfaces_=function(){return[]},Tp.prototype.getClass=function(){return Tp};var Np=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},kp={INSIDE_AREA:{configurable:!0}};Np.prototype.isInsideArea=function(){return this._segIndex===Np.INSIDE_AREA},Np.prototype.getCoordinate=function(){return this._pt},Np.prototype.getGeometryComponent=function(){return this._component},Np.prototype.getSegmentIndex=function(){return this._segIndex},Np.prototype.interfaces_=function(){return[]},Np.prototype.getClass=function(){return Np},kp.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Np,kp);var Ap=function(t){this._pts=t||null};Ap.prototype.filter=function(t){t instanceof Jl&&this._pts.add(t)},Ap.prototype.interfaces_=function(){return[jl]},Ap.prototype.getClass=function(){return Ap},Ap.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Jl?nf.singletonList(t):Ap.getPoints(t,new cl)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Jl?n.add(e):e instanceof Dl&&e.apply(new Ap(n)),n}};var Pp=function(){this._locations=null;var t=arguments[0];this._locations=t};Pp.prototype.filter=function(t){(t instanceof Jl||t instanceof $l||t instanceof th)&&this._locations.add(new Np(t,0,t.getCoordinate()))},Pp.prototype.interfaces_=function(){return[jl]},Pp.prototype.getClass=function(){return Pp},Pp.getLocations=function(t){var e=new cl;return t.apply(new Pp(e)),e};var Rp=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Tp,this._minDistanceLocation=null,this._minDistance=nc.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Rp.prototype.computeContainmentDistance=function(){var t=this;if(0===arguments.length){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=1-n,o=Sp.getPolygons(this._geom[n]);if(o.size()>0){var s=Pp.getLocations(this._geom[i]);if(this.computeContainmentDistance(s,o,r),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=r[0],this._minDistanceLocation[n]=r[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&dc(arguments[0],al)&&dc(arguments[1],al)){for(var a=arguments[0],u=arguments[1],c=arguments[2],l=0;l<a.size();l++)for(var h=a.get(l),f=0;f<u.size();f++)if(t.computeContainmentDistance(h,u.get(f),c),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Np&&arguments[1]instanceof th){var p=arguments[0],d=arguments[1],g=arguments[2],v=p.getCoordinate();if(fc.EXTERIOR!==this._ptLocator.locate(v,d))return this._minDistance=0,g[0]=p,g[1]=new Np(d,v),null}},Rp.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s);if(r.computeMinDistance(o,a,n),r._minDistance<=r._terminateDistance)return null}},Rp.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Cp.getLines(this._geom[0]),n=Cp.getLines(this._geom[1]),r=Ap.getPoints(this._geom[0]),i=Ap.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Rp.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Rp.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Rp.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Rp.prototype.computeMinDistance=function(){var t=this;if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof $l&&arguments[1]instanceof Jl){var e=arguments[0],n=arguments[1],r=arguments[2];if(e.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var i=e.getCoordinates(),o=n.getCoordinate(),s=0;s<i.length-1;s++){var a=Wc.distancePointLine(o,i[s],i[s+1]);if(a<t._minDistance){t._minDistance=a;var u=new mf(i[s],i[s+1]),c=u.closestPoint(o);r[0]=new Np(e,s,c),r[1]=new Np(n,0,o)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof $l&&arguments[1]instanceof $l){var l=arguments[0],h=arguments[1],f=arguments[2];if(l.getEnvelopeInternal().distance(h.getEnvelopeInternal())>this._minDistance)return null;for(var p=l.getCoordinates(),d=h.getCoordinates(),g=0;g<p.length-1;g++)for(var v=0;v<d.length-1;v++){var y=Wc.distanceLineLine(p[g],p[g+1],d[v],d[v+1]);if(y<t._minDistance){t._minDistance=y;var m=new mf(p[g],p[g+1]),_=new mf(d[v],d[v+1]),b=m.closestPoints(_);f[0]=new Np(l,g,b[0]),f[1]=new Np(h,v,b[1])}if(t._minDistance<=t._terminateDistance)return null}}},Rp.prototype.computeMinDistancePoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s),u=o.getCoordinate().distance(a.getCoordinate());if(u<r._minDistance&&(r._minDistance=u,n[0]=new Np(o,0,o.getCoordinate()),n[1]=new Np(a,0,a.getCoordinate())),r._minDistance<=r._terminateDistance)return null}},Rp.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new ec("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Rp.prototype.computeMinDistanceLines=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s);if(r.computeMinDistance(o,a,n),r._minDistance<=r._terminateDistance)return null}},Rp.prototype.interfaces_=function(){return[]},Rp.prototype.getClass=function(){return Rp},Rp.distance=function(t,e){return new Rp(t,e).distance()},Rp.isWithinDistance=function(t,e,n){return new Rp(t,e,n).distance()<=n},Rp.nearestPoints=function(t,e){return new Rp(t,e).nearestPoints()};var Lp=function(){this._pt=[new uc,new uc],this._distance=nc.NaN,this._isNull=!0};Lp.prototype.getCoordinates=function(){return this._pt},Lp.prototype.getCoordinate=function(t){return this._pt[t]},Lp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Lp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Lp.prototype.toString=function(){return Mc.toLineString(this._pt[0],this._pt[1])},Lp.prototype.getDistance=function(){return this._distance},Lp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Lp.prototype.interfaces_=function(){return[]},Lp.prototype.getClass=function(){return Lp};var jp=function(){};jp.prototype.interfaces_=function(){return[]},jp.prototype.getClass=function(){return jp},jp.computeDistance=function(){if(arguments[2]instanceof Lp&&arguments[0]instanceof $l&&arguments[1]instanceof uc)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new mf,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Lp&&arguments[0]instanceof th&&arguments[1]instanceof uc){var a=arguments[0],u=arguments[1],c=arguments[2];jp.computeDistance(a.getExteriorRing(),u,c);for(var l=0;l<a.getNumInteriorRing();l++)jp.computeDistance(a.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof Lp&&arguments[0]instanceof Yc&&arguments[1]instanceof uc){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof $l)jp.computeDistance(h,f,p);else if(h instanceof th)jp.computeDistance(h,f,p);else if(h instanceof Dl)for(var d=h,g=0;g<d.getNumGeometries();g++){var v=d.getGeometryN(g);jp.computeDistance(v,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof Lp&&arguments[0]instanceof mf&&arguments[1]instanceof uc){var y=arguments[0],m=arguments[1],_=arguments[2],b=y.closestPoint(m);_.setMinimum(b,m)}};var Mp=function(){this._g0=null,this._g1=null,this._ptDist=new Lp,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Dp={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Mp.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Mp.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new ec("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Mp.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Mp.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Mp.prototype.computeOrientedDistance=function(t,e,n){var r=new Fp(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new qp(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Mp.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Mp.prototype.interfaces_=function(){return[]},Mp.prototype.getClass=function(){return Mp},Mp.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Mp(t,e);return n.distance()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=new Mp(r,i);return s.setDensifyFraction(o),s.distance()}},Dp.MaxPointDistanceFilter.get=function(){return Fp},Dp.MaxDensifiedByFractionDistanceFilter.get=function(){return qp},Object.defineProperties(Mp,Dp);var Fp=function(){this._maxPtDist=new Lp,this._minPtDist=new Lp,this._euclideanDist=new jp,this._geom=null;var t=arguments[0];this._geom=t};Fp.prototype.filter=function(t){this._minPtDist.initialize(),jp.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Fp.prototype.getMaxPointDistance=function(){return this._maxPtDist},Fp.prototype.interfaces_=function(){return[Qc]},Fp.prototype.getClass=function(){return Fp};var qp=function(){this._maxPtDist=new Lp,this._minPtDist=new Lp,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};qp.prototype.filter=function(t,e){var n=this;if(0===e)return null;for(var r=t.getCoordinate(e-1),i=t.getCoordinate(e),o=(i.x-r.x)/this._numSubSegs,s=(i.y-r.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var u=r.x+a*o,c=r.y+a*s,l=new uc(u,c);n._minPtDist.initialize(),jp.computeDistance(n._geom,l,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}},qp.prototype.isDone=function(){return!1},qp.prototype.isGeometryChanged=function(){return!1},qp.prototype.getMaxPointDistance=function(){return this._maxPtDist},qp.prototype.interfaces_=function(){return[Ml]},qp.prototype.getClass=function(){return qp};var Up=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Bp={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Up.prototype.checkMaximumDistance=function(t,e,n){var r=new Mp(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Mc.toLineString(i[0],i[1])+")"}},Up.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Up.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Up.VERBOSE&&Tc.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Up.prototype.checkNegativeValid=function(){if(!(this._input instanceof th||this._input instanceof rh||this._input instanceof Dl))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Up.prototype.getErrorIndicator=function(){return this._errorIndicator},Up.prototype.checkMinimumDistance=function(t,e,n){var r=new Rp(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Mc.toLineString(i[0],i[1])+" )"}},Up.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Up.prototype.getErrorLocation=function(){return this._errorLocation},Up.prototype.getPolygonLines=function(t){for(var e=new cl,n=new Cp(e),r=Sp.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},Up.prototype.getErrorMessage=function(){return this._errMsg},Up.prototype.interfaces_=function(){return[]},Up.prototype.getClass=function(){return Up},Bp.VERBOSE.get=function(){return!1},Bp.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Up,Bp);var Vp=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Gp={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Vp.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Vp.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Vp.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new kc(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new kc(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Vp.prototype.checkDistance=function(){var t=new Up(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Vp.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Vp.prototype.checkPolygonal=function(){this._result instanceof th||this._result instanceof rh||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Vp.prototype.getErrorIndicator=function(){return this._errorIndicator},Vp.prototype.getErrorLocation=function(){return this._errorLocation},Vp.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Vp.prototype.report=function(t){if(!Vp.VERBOSE)return null;Tc.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Vp.prototype.getErrorMessage=function(){return this._errorMsg},Vp.prototype.interfaces_=function(){return[]},Vp.prototype.getClass=function(){return Vp},Vp.isValidMsg=function(t,e,n){var r=new Vp(t,e,n);return r.isValid()?null:r.getErrorMessage()},Vp.isValid=function(t,e,n){return!!new Vp(t,e,n).isValid()},Gp.VERBOSE.get=function(){return!1},Gp.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Vp,Gp);var zp=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};zp.prototype.getCoordinates=function(){return this._pts},zp.prototype.size=function(){return this._pts.length},zp.prototype.getCoordinate=function(t){return this._pts[t]},zp.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},zp.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:df.octant(this.getCoordinate(t),this.getCoordinate(t+1))},zp.prototype.setData=function(t){this._data=t},zp.prototype.getData=function(){return this._data},zp.prototype.toString=function(){return Mc.toLineString(new ch(this._pts))},zp.prototype.interfaces_=function(){return[gf]},zp.prototype.getClass=function(){return zp};var Wp=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new cl,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Wp.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Wp.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Wp.prototype.getIntersectionSegments=function(){return this._intSegments},Wp.prototype.count=function(){return this._intersectionCount},Wp.prototype.getIntersections=function(){return this._intersections},Wp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Wp.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Wp.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Wp.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Wp.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Wp.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Wp.prototype.interfaces_=function(){return[Qf]},Wp.prototype.getClass=function(){return Wp},Wp.createAllIntersectionsFinder=function(t){var e=new Wp(t);return e.setFindAllIntersections(!0),e},Wp.createAnyIntersectionFinder=function(t){return new Wp(t)},Wp.createIntersectionCounter=function(t){var e=new Wp(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Kp=function(){this._li=new Vc,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Kp.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Kp.prototype.getIntersections=function(){return this._segInt.getIntersections()},Kp.prototype.isValid=function(){return this.execute(),this._isValid},Kp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Kp.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Wp(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Of;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Kp.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Ah(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Kp.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Mc.toLineString(t[0],t[1])+" and "+Mc.toLineString(t[2],t[3])},Kp.prototype.interfaces_=function(){return[]},Kp.prototype.getClass=function(){return Kp},Kp.computeIntersections=function(t){var e=new Kp(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Hp=function t(){this._nv=null;var e=arguments[0];this._nv=new Kp(t.toSegmentStrings(e))};Hp.prototype.checkValid=function(){this._nv.checkValid()},Hp.prototype.interfaces_=function(){return[]},Hp.prototype.getClass=function(){return Hp},Hp.toSegmentStrings=function(t){for(var e=new cl,n=t.iterator();n.hasNext();){var r=n.next();e.add(new zp(r.getCoordinates(),r))}return e},Hp.checkValid=function(t){new Hp(t).checkValid()};var Yp=function(t){this._mapOp=t};Yp.prototype.map=function(t){for(var e=new cl,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(mh.toGeometryArray(e))},Yp.prototype.interfaces_=function(){return[]},Yp.prototype.getClass=function(){return Yp},Yp.map=function(t,e){return new Yp(e).map(t)};var Xp=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new cl,this._resultLineList=new cl;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Xp.prototype.collectLines=function(t){for(var e=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next();e.collectLineEdge(r,t,e._lineEdgesList),e.collectBoundaryTouchEdge(r,t,e._lineEdgesList)}},Xp.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Xp.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Xp.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Nd.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Xp.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Xp.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Xp.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Xp.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(qc.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Nd.isResultOfOp(r,e)&&e===Nd.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Xp.prototype.interfaces_=function(){return[]},Xp.prototype.getClass=function(){return Xp};var $p=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new cl;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};$p.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},$p.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!n.isInResult()&&!n.isIncidentEdgeInResult()&&(0===n.getEdges().getDegree()||t===Nd.INTERSECTION)){var r=n.getLabel();Nd.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},$p.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},$p.prototype.interfaces_=function(){return[]},$p.prototype.getClass=function(){return $p};var Qp=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Qp.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Qp.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof nh&&!r.isEmpty()||(n=!1);for(var i=new cl,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof nh||(n=!1),i.add(s))}if(n)return this._factory.createPolygon(r,i.toArray([]));var a=new cl;return null!==r&&a.add(r),a.addAll(i),this._factory.buildGeometry(a)},Qp.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Qp.prototype.getInputGeometry=function(){return this._inputGeom},Qp.prototype.transformMultiLineString=function(t,e){for(var n=new cl,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Qp.prototype.transformCoordinates=function(t,e){return this.copy(t)},Qp.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Qp.prototype.transformMultiPoint=function(t,e){for(var n=new cl,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Qp.prototype.transformMultiPolygon=function(t,e){for(var n=new cl,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Qp.prototype.copy=function(t){return t.copy()},Qp.prototype.transformGeometryCollection=function(t,e){for(var n=new cl,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(mh.toGeometryArray(n)):this._factory.buildGeometry(n)},Qp.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Jl)return this.transformPoint(t,null);if(t instanceof eh)return this.transformMultiPoint(t,null);if(t instanceof nh)return this.transformLinearRing(t,null);if(t instanceof $l)return this.transformLineString(t,null);if(t instanceof Fl)return this.transformMultiLineString(t,null);if(t instanceof th)return this.transformPolygon(t,null);if(t instanceof rh)return this.transformMultiPolygon(t,null);if(t instanceof Dl)return this.transformGeometryCollection(t,null);throw new ec("Unknown Geometry subtype: "+t.getClass().getName())},Qp.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Qp.prototype.interfaces_=function(){return[]},Qp.prototype.getClass=function(){return Qp};var Jp=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new mf,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof $l&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=t.isClosed(r),this._snapTolerance=i}};Jp.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new uc(o)),0===r&&this._isClosed&&t.set(t.size()-1,new uc(o)))}},Jp.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Jp.prototype.snapTo=function(t){var e=new hl(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Jp.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new uc(i),!1)}},Jp.prototype.findSegmentIndexToSnap=function(t,e){for(var n=this,r=nc.MAX_VALUE,i=-1,o=0;o<e.size()-1;o++){if(n._seg.p0=e.get(o),n._seg.p1=e.get(o+1),n._seg.p0.equals2D(t)||n._seg.p1.equals2D(t)){if(n._allowSnappingToSourceVertices)continue;return-1}var s=n._seg.distance(t);s<n._snapTolerance&&s<r&&(r=s,i=o)}return i},Jp.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Jp.prototype.interfaces_=function(){return[]},Jp.prototype.getClass=function(){return Jp},Jp.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Zp=function(t){this._srcGeom=t||null},td={SNAP_PRECISION_FACTOR:{configurable:!0}};Zp.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new ed(e,n).transform(this._srcGeom)},Zp.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new ed(t,n,!0).transform(this._srcGeom),i=r;return e&&dc(i,Zl)&&(i=r.buffer(0)),i},Zp.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Zp.prototype.extractTargetCoordinates=function(t){for(var e=new kl,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Zp.prototype.computeMinimumSegmentLength=function(t){for(var e=nc.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Zp.prototype.interfaces_=function(){return[]},Zp.prototype.getClass=function(){return Zp},Zp.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Zp(t);r[0]=i.snapTo(e,n);var o=new Zp(e);return r[1]=o.snapTo(r[0],n),r},Zp.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Zp.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===dh.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Zp.computeOverlaySnapTolerance(i),Zp.computeOverlaySnapTolerance(o))}},Zp.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Zp.SNAP_PRECISION_FACTOR},Zp.snapToSelf=function(t,e,n){return new Zp(t).snapToSelf(e,n)},td.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Zp,td);var ed=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Jp(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Qp),nd=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};nd.prototype.getCommon=function(){return nc.longBitsToDouble(this._commonBits)},nd.prototype.add=function(t){var e=nc.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=nd.signExpBits(this._commonBits),this._isFirst=!1,null):nd.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=nd.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=nd.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},nd.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=nc.longBitsToDouble(t),n=nc.toBinaryString(t),r="0000000000000000000000000000000000000000000000000000000000000000"+n,i=r.substring(r.length-64),o=i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]";return o}},nd.prototype.interfaces_=function(){return[]},nd.prototype.getClass=function(){return nd},nd.getBit=function(t,e){return 0!=(t&1<<e)?1:0},nd.signExpBits=function(t){return t>>52},nd.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},nd.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(nd.getBit(t,r)!==nd.getBit(e,r))return n;n++}return 52};var rd=function(){this._commonCoord=null,this._ccFilter=new od},id={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};rd.prototype.addCommonBits=function(t){var e=new sd(this._commonCoord);t.apply(e),t.geometryChanged()},rd.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new uc(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new sd(e);return t.apply(n),t.geometryChanged(),t},rd.prototype.getCommonCoordinate=function(){return this._commonCoord},rd.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},rd.prototype.interfaces_=function(){return[]},rd.prototype.getClass=function(){return rd},id.CommonCoordinateFilter.get=function(){return od},id.Translater.get=function(){return sd},Object.defineProperties(rd,id);var od=function(){this._commonBitsX=new nd,this._commonBitsY=new nd};od.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},od.prototype.getCommonCoordinate=function(){return new uc(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},od.prototype.interfaces_=function(){return[Qc]},od.prototype.getClass=function(){return od};var sd=function(){this.trans=null;var t=arguments[0];this.trans=t};sd.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},sd.prototype.isDone=function(){return!1},sd.prototype.isGeometryChanged=function(){return!0},sd.prototype.interfaces_=function(){return[Ml]},sd.prototype.getClass=function(){return sd};var ad=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ad.prototype.selfSnap=function(t){return new Zp(t).snapTo(t,this._snapTolerance)},ad.prototype.removeCommonBits=function(t){this._cbr=new rd,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ad.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ad.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Nd.overlayOp(e[0],e[1],t);return this.prepareResult(n)},ad.prototype.checkValid=function(t){t.isValid()||Tc.out.println("Snapped geometry is invalid")},ad.prototype.computeSnapTolerance=function(){this._snapTolerance=Zp.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ad.prototype.snap=function(t){var e=this.removeCommonBits(t);return Zp.snap(e[0],e[1],this._snapTolerance)},ad.prototype.interfaces_=function(){return[]},ad.prototype.getClass=function(){return ad},ad.overlayOp=function(t,e,n){return new ad(t,e).getResultGeometry(n)},ad.union=function(t,e){return ad.overlayOp(t,e,Nd.UNION)},ad.intersection=function(t,e){return ad.overlayOp(t,e,Nd.INTERSECTION)},ad.symDifference=function(t,e){return ad.overlayOp(t,e,Nd.SYMDIFFERENCE)},ad.difference=function(t,e){return ad.overlayOp(t,e,Nd.DIFFERENCE)};var ud=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};ud.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Nd.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Dc))throw t;r=t}if(!n)try{e=ad.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Dc?r:t}return e},ud.prototype.interfaces_=function(){return[]},ud.prototype.getClass=function(){return ud},ud.overlayOp=function(t,e,n){return new ud(t,e).getResultGeometry(n)},ud.union=function(t,e){return ud.overlayOp(t,e,Nd.UNION)},ud.intersection=function(t,e){return ud.overlayOp(t,e,Nd.INTERSECTION)},ud.symDifference=function(t,e){return ud.overlayOp(t,e,Nd.SYMDIFFERENCE)},ud.difference=function(t,e){return ud.overlayOp(t,e,Nd.DIFFERENCE)};var cd=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};cd.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},cd.prototype.interfaces_=function(){return[]},cd.prototype.getClass=function(){return cd};var ld=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},hd={INSERT:{configurable:!0},DELETE:{configurable:!0}};ld.prototype.isDelete=function(){return this._eventType===ld.DELETE},ld.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},ld.prototype.getObject=function(){return this._obj},ld.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},ld.prototype.getInsertEvent=function(){return this._insertEvent},ld.prototype.isInsert=function(){return this._eventType===ld.INSERT},ld.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},ld.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},ld.prototype.interfaces_=function(){return[ic]},ld.prototype.getClass=function(){return ld},hd.INSERT.get=function(){return 1},hd.DELETE.get=function(){return 2},Object.defineProperties(ld,hd);var fd=function(){};fd.prototype.interfaces_=function(){return[]},fd.prototype.getClass=function(){return fd};var pd=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};pd.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(pd.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},pd.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},pd.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},pd.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},pd.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},pd.prototype.hasProperIntersection=function(){return this._hasProper},pd.prototype.hasIntersection=function(){return this._hasIntersection},pd.prototype.isDone=function(){return this._isDone},pd.prototype.isBoundaryPoint=function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},pd.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},pd.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},pd.prototype.interfaces_=function(){return[]},pd.prototype.getClass=function(){return pd},pd.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var dd=function(t){function e(){t.call(this),this.events=new cl,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){nf.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var n=0;n<this.events.size();n++){var r=t.events.get(n);if(r.isInsert()&&t.processOverlaps(n,r.getDeleteEventIndex(),r,e),e.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof pd&&dc(arguments[0],al)&&dc(arguments[1],al)){var i=arguments[0],o=arguments[1],s=arguments[2];this.addEdges(i,i),this.addEdges(o,o),this.computeIntersections(s)}else if("boolean"==typeof arguments[2]&&dc(arguments[0],al)&&arguments[1]instanceof pd){var a=arguments[0],u=arguments[1],c=arguments[2];c?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(u)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new cd(n,i),s=new ld(e,n.getMinX(i),o);this.events.add(s),this.events.add(new ld(n.getMaxX(i),s))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(i.computeIntersections(a,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.addEdge(r,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=i.iterator();s.hasNext();){var a=s.next();t.addEdge(a,o)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fd),gd=function(){this._min=nc.POSITIVE_INFINITY,this._max=nc.NEGATIVE_INFINITY},vd={NodeComparator:{configurable:!0}};gd.prototype.getMin=function(){return this._min},gd.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},gd.prototype.getMax=function(){return this._max},gd.prototype.toString=function(){return Mc.toLineString(new uc(this._min,0),new uc(this._max,0))},gd.prototype.interfaces_=function(){return[]},gd.prototype.getClass=function(){return gd},vd.NodeComparator.get=function(){return yd},Object.defineProperties(gd,vd);var yd=function(){};yd.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},yd.prototype.interfaces_=function(){return[sc]},yd.prototype.getClass=function(){return yd};var md=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(gd),_d=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(gd),bd=function(){this._leaves=new cl,this._root=null,this._level=0};bd.prototype.buildTree=function(){nf.sort(this._leaves,new gd.NodeComparator);for(var t=this._leaves,e=null,n=new cl;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},bd.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new md(t,e,n))},bd.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},bd.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},bd.prototype.printNode=function(t){Tc.out.println(Mc.toLineString(new uc(t._min,this._level),new uc(t._max,this._level)))},bd.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},bd.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new _d(t.get(n),t.get(n+1));e.add(i)}}},bd.prototype.interfaces_=function(){return[]},bd.prototype.getClass=function(){return bd};var wd=function(){this._items=new cl};wd.prototype.visitItem=function(t){this._items.add(t)},wd.prototype.getItems=function(){return this._items},wd.prototype.interfaces_=function(){return[Jh]},wd.prototype.getClass=function(){return wd};var Ed=function(){this._index=null;var t=arguments[0];if(!dc(t,Zl))throw new ec("Argument must be Polygonal");this._index=new Od(t)},xd={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Ed.prototype.locate=function(t){var e=new zc(t),n=new Id(e);return this._index.query(t.y,t.y,n),e.getLocation()},Ed.prototype.interfaces_=function(){return[Gf]},Ed.prototype.getClass=function(){return Ed},xd.SegmentVisitor.get=function(){return Id},xd.IntervalIndexedGeometry.get=function(){return Od},Object.defineProperties(Ed,xd);var Id=function(){this._counter=null;var t=arguments[0];this._counter=t};Id.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Id.prototype.interfaces_=function(){return[Jh]},Id.prototype.getClass=function(){return Id};var Od=function(){this._index=new bd;var t=arguments[0];this.init(t)};Od.prototype.init=function(t){for(var e=Cp.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},Od.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new mf(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},Od.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new wd;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},Od.prototype.interfaces_=function(){return[]},Od.prototype.getClass=function(){return Od};var Sd=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new ph,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Tp,2===arguments.length){var e=arguments[0],n=arguments[1],r=Jc.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;r.getLocation(t,Sh.ON)===fc.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new pd(n,!0,!1);o.setIsDoneIfProperInt(i);var s=this.createEdgeSetIntersector(),a=this._parentGeom instanceof nh||this._parentGeom instanceof th||this._parentGeom instanceof rh,u=r||!a;return s.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new pd(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Jl){var t=arguments[0],e=t.getCoordinate();this.insertPoint(this._argIndex,e,fc.INTERIOR)}else if(arguments[0]instanceof uc){var n=arguments[0];this.insertPoint(this._argIndex,n,fc.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),fc.EXTERIOR,fc.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,fc.INTERIOR,fc.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],fc.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],fc.BOUNDARY)},e.prototype.addLineString=function(t){var e=fl.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new op(e,new jh(this._argIndex,fc.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),qc.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===fc.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=fl.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;Wc.isCCW(r)&&(i=n,o=e);var s=new op(r,new jh(this._argIndex,fc.BOUNDARY,i,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,r[0],fc.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new jh(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new dd},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof rh&&(this._useBoundaryDeterminationRule=!1),e instanceof th)this.addPolygon(e);else if(e instanceof $l)this.addLineString(e);else if(e instanceof Jl)this.addPoint(e);else if(e instanceof eh)this.addCollection(e);else if(e instanceof Fl)this.addCollection(e);else if(e instanceof rh)this.addCollection(e);else{if(!(e instanceof Dl))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return dc(this._parentGeom,Zl)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Ed(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?fc.BOUNDARY:fc.INTERIOR},e}(Hh),Cd=function(){if(this._li=new Vc,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Sd(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=Jc.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Sd(0,e,r),this._arg[1]=new Sd(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Sd(0,i,s),this._arg[1]=new Sd(1,o,s)}};Cd.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Cd.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Cd.prototype.interfaces_=function(){return[]},Cd.prototype.getClass=function(){return Cd};var Td=function(){};Td.prototype.interfaces_=function(){return[]},Td.prototype.getClass=function(){return Td},Td.map=function(){if(arguments[0]instanceof Yc&&dc(arguments[1],Td.MapOp)){for(var t=arguments[0],e=arguments[1],n=new cl,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(dc(arguments[0],il)&&dc(arguments[1],Td.MapOp)){for(var o=arguments[0],s=arguments[1],a=new cl,u=o.iterator();u.hasNext();){var c=u.next(),l=s.map(c);null!==l&&a.add(l)}return a}},Td.MapOp=function(){};var Nd=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Tp,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new $f,this._resultPolyList=new cl,this._resultLineList=new cl,this._resultPointList=new cl,this._graph=new Hh(new Yf),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new jh(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new cl;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==fc.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new cl,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new cl;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Hp.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Yh(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Xp(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new $p(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Sh.RIGHT),i.getLocation(1,Sh.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(qc.isTrue(!r.isNull(i,Sh.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Sh.LEFT,r.getLocation(i,Sh.LEFT)),qc.isTrue(!r.isNull(i,Sh.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Sh.RIGHT,r.getLocation(i,Sh.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Cd);Nd.overlayOp=function(t,e,n){return new Nd(t,e).getResultGeometry(n)},Nd.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Nd.createEmptyResult(Nd.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Yp.map(t,{interfaces_:function(){return[Td.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ud.overlayOp(t,e,Nd.INTERSECTION)},Nd.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Nd.createEmptyResult(Nd.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ud.overlayOp(t,e,Nd.SYMDIFFERENCE)},Nd.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Nd.INTERSECTION:o=Math.min(r,i);break;case Nd.UNION:o=Math.max(r,i);break;case Nd.DIFFERENCE:o=r;break;case Nd.SYMDIFFERENCE:o=Math.max(r,i)}return o},Nd.createEmptyResult=function(t,e,n,r){var i=null;switch(Nd.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Nd.difference=function(t,e){return t.isEmpty()?Nd.createEmptyResult(Nd.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ud.overlayOp(t,e,Nd.DIFFERENCE))},Nd.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Nd.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];switch(i===fc.BOUNDARY&&(i=fc.INTERIOR),o===fc.BOUNDARY&&(o=fc.INTERIOR),s){case Nd.INTERSECTION:return i===fc.INTERIOR&&o===fc.INTERIOR;case Nd.UNION:return i===fc.INTERIOR||o===fc.INTERIOR;case Nd.DIFFERENCE:return i===fc.INTERIOR&&o!==fc.INTERIOR;case Nd.SYMDIFFERENCE:return i===fc.INTERIOR&&o!==fc.INTERIOR||i!==fc.INTERIOR&&o===fc.INTERIOR}return!1}},Nd.INTERSECTION=1,Nd.UNION=2,Nd.DIFFERENCE=3,Nd.SYMDIFFERENCE=4;var kd=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Tp,this._seg=new mf;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};kd.prototype.isWithinToleranceOfBoundary=function(t){for(var e=this,n=0;n<this._linework.getNumGeometries();n++)for(var r=e._linework.getGeometryN(n).getCoordinateSequence(),i=0;i<r.size()-1;i++)if(r.getCoordinate(i,e._seg.p0),r.getCoordinate(i+1,e._seg.p1),e._seg.distance(t)<=e._boundaryDistanceTolerance)return!0;return!1},kd.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?fc.BOUNDARY:this._ptLocator.locate(t,this._g)},kd.prototype.extractLinework=function(t){var e=new Ad;t.apply(e);var n=e.getLinework(),r=mh.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},kd.prototype.interfaces_=function(){return[]},kd.prototype.getClass=function(){return kd};var Ad=function(){this._linework=null,this._linework=new cl};Ad.prototype.getLinework=function(){return this._linework},Ad.prototype.filter=function(t){if(t instanceof th){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Ad.prototype.interfaces_=function(){return[jl]},Ad.prototype.getClass=function(){return Ad};var Pd=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Pd.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Pd.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Pd.prototype.getPoints=function(t){for(var e=new cl,n=Cp.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Pd.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,s=Math.sqrt(i*i+o*o),a=n*i/s,u=n*o/s,c=(e.x+t.x)/2,l=(e.y+t.y)/2;if(this._doLeft){var h=new uc(c-u,l+a);r.add(h)}if(this._doRight){var f=new uc(c+u,l-a);r.add(f)}},Pd.prototype.interfaces_=function(){return[]},Pd.prototype.getClass=function(){return Pd};var Rd=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new cl;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new kd(this._geom[0],this._boundaryDistanceTolerance),new kd(this._geom[1],this._boundaryDistanceTolerance),new kd(this._geom[2],this._boundaryDistanceTolerance)]},Ld={TOLERANCE:{configurable:!0}};Rd.prototype.reportResult=function(t,e,n){Tc.out.println("Overlay result invalid - A:"+fc.toLocationSymbol(e[0])+" B:"+fc.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+fc.toLocationSymbol(e[2]))},Rd.prototype.isValid=function(t){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var e=this.checkValid(t);return e},Rd.prototype.checkValid=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=0;n<this._testCoords.size();n++){var r=t._testCoords.get(n);if(!t.checkValid(e,r))return t._invalidLocation=r,!1}return!0}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),!!Rd.hasLocation(this._location,fc.BOUNDARY)||this.isValidResult(i,this._location)}},Rd.prototype.addTestPts=function(t){var e=new Pd(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Rd.prototype.isValidResult=function(t,e){var n=Nd.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===fc.INTERIOR);return r||this.reportResult(t,e,n),r},Rd.prototype.getInvalidLocation=function(){return this._invalidLocation},Rd.prototype.interfaces_=function(){return[]},Rd.prototype.getClass=function(){return Rd},Rd.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Rd.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Zp.computeSizeBasedSnapTolerance(t),Zp.computeSizeBasedSnapTolerance(e))},Rd.isValid=function(t,e,n,r){return new Rd(t,e,r).isValid(n)},Ld.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Rd,Ld);var jd=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};jd.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},jd.prototype.combine=function(){for(var t=new cl,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},jd.prototype.interfaces_=function(){return[]},jd.prototype.getClass=function(){return jd},jd.combine=function(){if(1===arguments.length){var t=arguments[0],e=new jd(t);return e.combine()}if(2===arguments.length){var n=arguments[0],r=arguments[1],i=new jd(jd.createList(n,r));return i.combine()}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=new jd(jd.createList(o,s,a));return u.combine()}},jd.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},jd.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new cl;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=new cl;return s.add(r),s.add(i),s.add(o),s}};var Md=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new cl)},Dd={STRTREE_NODE_CAPACITY:{configurable:!0}};Md.prototype.reduceToGeometries=function(t){for(var e=new cl,n=t.iterator();n.hasNext();){var r=n.next(),i=null;dc(r,al)?i=this.unionTree(r):r instanceof Yc&&(i=r),e.add(i)}return e},Md.prototype.extractByEnvelope=function(t,e,n){for(var r=new cl,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Md.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return jd.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Md.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new cf(Md.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Md.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Md.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Md.getGeometry(e,n),Md.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,r);return this.unionSafe(s,a)}},Md.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Md.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Md.prototype.unionActual=function(t,e){return Md.restrictToPolygons(t.union(e))},Md.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Md.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new cl,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),s=this.unionActual(i,o);return r.add(s),jd.combine(r)},Md.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0],e=t.get(0).getFactory(),n=e.buildGeometry(t),r=n.buffer(0);return r}if(2===arguments.length){var i=arguments[0],o=arguments[1],s=i.getFactory(),a=s.createGeometryCollection([i,o]),u=a.buffer(0);return u}},Md.prototype.interfaces_=function(){return[]},Md.prototype.getClass=function(){return Md},Md.restrictToPolygons=function(t){if(dc(t,Zl))return t;var e=Sp.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(mh.toPolygonArray(e))},Md.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Md.union=function(t){return new Md(t).union()},Dd.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Md,Dd);var Fd=function(){};function qd(){return new Ud}function Ud(){this.reset()}Fd.prototype.interfaces_=function(){return[]},Fd.prototype.getClass=function(){return Fd},Fd.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Nd.createEmptyResult(Nd.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ud.overlayOp(t,e,Nd.UNION)},Ud.prototype={constructor:Ud,reset:function(){this.s=this.t=0},add:function(t){Vd(Bd,t,this.t),Vd(this,Bd.s,this.s),this.s?this.t+=Bd.t:this.s=Bd.t},valueOf:function(){return this.s}};var Bd=new Ud;function Vd(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var Gd=1e-6,zd=Math.PI,Wd=zd/2,Kd=zd/4,Hd=2*zd,Yd=180/zd,Xd=zd/180,$d=Math.abs,Qd=Math.atan,Jd=Math.atan2,Zd=Math.cos,tg=Math.sin,eg=Math.sqrt;function ng(t){return t>1?0:t<-1?zd:Math.acos(t)}function rg(t){return t>1?Wd:t<-1?-Wd:Math.asin(t)}function ig(){}function og(t,e){t&&cg.hasOwnProperty(t.type)&&cg[t.type](t,e)}var sg,ag,ug={Feature:function(t,e){og(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)og(n[r].geometry,e)}},cg={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){lg(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)lg(n[r],e,0)},Polygon:function(t,e){hg(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)hg(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)og(n[r],e)}};function lg(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function hg(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)lg(t[n],e,1);e.polygonEnd()}function fg(t){return[Jd(t[1],t[0]),rg(t[2])]}function pg(t){var e=t[0],n=t[1],r=Zd(n);return[r*Zd(e),r*tg(e),tg(n)]}function dg(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function gg(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function vg(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function yg(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function mg(t){var e=eg(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function _g(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function bg(t,e){return[t>zd?t-Hd:t<-zd?t+Hd:t,e]}function wg(t){return function(e,n){return[(e+=t)>zd?e-Hd:e<-zd?e+Hd:e,n]}}function Eg(t){var e=wg(t);return e.invert=wg(-t),e}function xg(t,e){var n=Zd(t),r=tg(t),i=Zd(e),o=tg(e);function s(t,e){var s=Zd(e),a=Zd(t)*s,u=tg(t)*s,c=tg(e),l=c*n+a*r;return[Jd(u*i-l*o,a*n-c*r),rg(l*i+u*o)]}return s.invert=function(t,e){var s=Zd(e),a=Zd(t)*s,u=tg(t)*s,c=tg(e),l=c*i-u*o;return[Jd(u*i+c*o,a*n+l*r),rg(l*n-a*r)]},s}function Ig(t,e){(e=pg(e))[0]-=t,mg(e);var n=ng(-e[1]);return((-e[2]<0?-n:n)+Hd-Gd)%Hd}function Og(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:ig,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Sg(t,e){return $d(t[0]-e[0])<Gd&&$d(t[1]-e[1])<Gd}function Cg(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Tg(t,e,n,r,i){var o,s,a=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],s=t[e];if(Sg(r,s)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else a.push(n=new Cg(r,t,null,!0)),u.push(n.o=new Cg(r,null,n,!1)),a.push(n=new Cg(s,t,null,!1)),u.push(n.o=new Cg(s,null,n,!0))}})),a.length){for(u.sort(e),Ng(a),Ng(u),o=0,s=u.length;o<s;++o)u[o].e=n=!n;for(var c,l,h=a[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,s=c.length;o<s;++o)i.point((l=c[o])[0],l[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(p)for(c=f.p.z,o=c.length-1;o>=0;--o)i.point((l=c[o])[0],l[1]);else r(f.x,f.p.x,-1,i);f=f.p}c=(f=f.o).z,p=!p}while(!f.v);i.lineEnd()}}}function Ng(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function kg(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ag(t){for(var e,n,r,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(n=new Array(s);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--s]=r[e];return n}qd(),qd(),qd(),bg.invert=bg,1===(sg=kg).length&&(ag=sg,sg=function(t,e){return kg(ag(t),e)});var Pg=1e9,Rg=-Pg;function Lg(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,a,c){var l=0,h=0;if(null==i||(l=s(i,a))!==(h=s(o,a))||u(i,o)<0^a>0)do{c.point(0===l||3===l?t:n,l>1?r:e)}while((l=(l+a+4)%4)!==h);else c.point(o[0],o[1])}function s(r,i){return $d(r[0]-t)<Gd?i>0?0:3:$d(r[0]-n)<Gd?i>0?2:1:$d(r[1]-e)<Gd?i>0?1:0:i>0?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){var u,c,l,h,f,p,d,g,v,y,m,_=s,b=Og(),w={point:E,lineStart:function(){w.point=x,c&&c.push(l=[]),y=!0,v=!1,d=g=NaN},lineEnd:function(){u&&(x(h,f),p&&v&&b.rejoin(),u.push(b.result())),w.point=E,v&&_.lineEnd()},polygonStart:function(){_=b,u=[],c=[],m=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=c.length;n<i;++n)for(var o,s,a=c[n],u=1,l=a.length,h=a[0],f=h[0],p=h[1];u<l;++u)o=f,s=p,f=(h=a[u])[0],p=h[1],s<=r?p>r&&(f-o)*(r-s)>(p-s)*(t-o)&&++e:p<=r&&(f-o)*(r-s)<(p-s)*(t-o)&&--e;return e}(),n=m&&e,i=(u=Ag(u)).length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),i&&Tg(u,a,e,o,s),s.polygonEnd()),_=s,u=c=l=null}};function E(t,e){i(t,e)&&_.point(t,e)}function x(o,s){var a=i(o,s);if(c&&l.push([o,s]),y)h=o,f=s,p=a,y=!1,a&&(_.lineStart(),_.point(o,s));else if(a&&v)_.point(o,s);else{var u=[d=Math.max(Rg,Math.min(Pg,d)),g=Math.max(Rg,Math.min(Pg,g))],b=[o=Math.max(Rg,Math.min(Pg,o)),s=Math.max(Rg,Math.min(Pg,s))];!function(t,e,n,r,i,o){var s,a=t[0],u=t[1],c=0,l=1,h=e[0]-a,f=e[1]-u;if(s=n-a,h||!(s>0)){if(s/=h,h<0){if(s<c)return;s<l&&(l=s)}else if(h>0){if(s>l)return;s>c&&(c=s)}if(s=i-a,h||!(s<0)){if(s/=h,h<0){if(s>l)return;s>c&&(c=s)}else if(h>0){if(s<c)return;s<l&&(l=s)}if(s=r-u,f||!(s>0)){if(s/=f,f<0){if(s<c)return;s<l&&(l=s)}else if(f>0){if(s>l)return;s>c&&(c=s)}if(s=o-u,f||!(s<0)){if(s/=f,f<0){if(s>l)return;s>c&&(c=s)}else if(f>0){if(s<c)return;s<l&&(l=s)}return c>0&&(t[0]=a+c*h,t[1]=u+c*f),l<1&&(e[0]=a+l*h,e[1]=u+l*f),!0}}}}}(u,b,t,e,n,r)?a&&(_.lineStart(),_.point(o,s),m=!1):(v||(_.lineStart(),_.point(u[0],u[1])),_.point(b[0],b[1]),a||_.lineEnd(),m=!1)}d=o,g=s,v=a}return w}}var jg=qd();function Mg(t){return t}qd(),qd(),qd();var Dg=1/0,Fg=Dg,qg=-Dg,Ug=qg,Bg={point:function(t,e){t<Dg&&(Dg=t),t>qg&&(qg=t),e<Fg&&(Fg=e),e>Ug&&(Ug=e)},lineStart:ig,lineEnd:ig,polygonStart:ig,polygonEnd:ig,result:function(){var t=[[Dg,Fg],[qg,Ug]];return qg=Ug=-(Fg=Dg=1/0),t}};function Vg(t,e,n,r){return function(i,o){var s,a,u,c=e(o),l=i.invert(r[0],r[1]),h=Og(),f=e(h),p=!1,d={point:g,lineStart:y,lineEnd:m,polygonStart:function(){d.point=_,d.lineStart=b,d.lineEnd=w,a=[],s=[]},polygonEnd:function(){d.point=g,d.lineStart=y,d.lineEnd=m,a=Ag(a);var t=function(t,e){var n=e[0],r=e[1],i=[tg(n),-Zd(n),0],o=0,s=0;jg.reset();for(var a=0,u=t.length;a<u;++a)if(l=(c=t[a]).length)for(var c,l,h=c[l-1],f=h[0],p=h[1]/2+Kd,d=tg(p),g=Zd(p),v=0;v<l;++v,f=m,d=b,g=w,h=y){var y=c[v],m=y[0],_=y[1]/2+Kd,b=tg(_),w=Zd(_),E=m-f,x=E>=0?1:-1,I=x*E,O=I>zd,S=d*b;if(jg.add(Jd(S*x*tg(I),g*w+S*Zd(I))),o+=O?E+x*Hd:E,O^f>=n^m>=n){var C=gg(pg(h),pg(y));mg(C);var T=gg(i,C);mg(T);var N=(O^E>=0?-1:1)*rg(T[2]);(r>N||r===N&&(C[0]||C[1]))&&(s+=O^E>=0?1:-1)}}return(o<-1e-6||o<Gd&&jg<-1e-6)^1&s}(s,l);a.length?(p||(o.polygonStart(),p=!0),Tg(a,zg,t,n,o)):t&&(p||(o.polygonStart(),p=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),p&&(o.polygonEnd(),p=!1),a=s=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function g(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function v(t,e){var n=i(t,e);c.point(n[0],n[1])}function y(){d.point=v,c.lineStart()}function m(){d.point=g,c.lineEnd()}function _(t,e){u.push([t,e]);var n=i(t,e);f.point(n[0],n[1])}function b(){f.lineStart(),u=[]}function w(){_(u[0][0],u[0][1]),f.lineEnd();var t,e,n,r,i=f.clean(),c=h.result(),l=c.length;if(u.pop(),s.push(u),u=null,l)if(1&i){if((e=(n=c[0]).length-1)>0){for(p||(o.polygonStart(),p=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else l>1&&2&i&&c.push(c.pop().concat(c.shift())),a.push(c.filter(Gg))}return d}}function Gg(t){return t.length>1}function zg(t,e){return((t=t.x)[0]<0?t[1]-Wd-Gd:Wd-t[1])-((e=e.x)[0]<0?e[1]-Wd-Gd:Wd-e[1])}qd();var Wg=Vg((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?zd:-zd,u=$d(o-n);$d(u-zd)<Gd?(t.point(n,r=(r+s)/2>0?Wd:-Wd),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),e=0):i!==a&&u>=zd&&($d(n-i)<Gd&&(n-=i*Gd),$d(o-a)<Gd&&(o-=a*Gd),r=function(t,e,n,r){var i,o,s=tg(t-n);return $d(s)>Gd?Qd((tg(e)*(o=Zd(r))*tg(n)-tg(r)*(i=Zd(e))*tg(t))/(i*o*s)):(e+r)/2}(n,r,o,s),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),e=0),t.point(n=o,r=s),i=a},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*Wd,r.point(-zd,i),r.point(0,i),r.point(zd,i),r.point(zd,0),r.point(zd,-i),r.point(0,-i),r.point(-zd,-i),r.point(-zd,0),r.point(-zd,i);else if($d(t[0]-e[0])>Gd){var o=t[0]<e[0]?zd:-zd;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-zd,-Wd]);function Kg(t,e){var n=Zd(t),r=n>0,i=$d(n)>Gd;function o(t,e){return Zd(t)*Zd(e)>n}function s(t,e,r){var i=[1,0,0],o=gg(pg(t),pg(e)),s=dg(o,o),a=o[0],u=s-a*a;if(!u)return!r&&t;var c=n*s/u,l=-n*a/u,h=gg(i,o),f=yg(i,c);vg(f,yg(o,l));var p=h,d=dg(f,p),g=dg(p,p),v=d*d-g*(dg(f,f)-1);if(!(v<0)){var y=eg(v),m=yg(p,(-d-y)/g);if(vg(m,f),m=fg(m),!r)return m;var _,b=t[0],w=e[0],E=t[1],x=e[1];w<b&&(_=b,b=w,w=_);var I=w-b,O=$d(I-zd)<Gd;if(!O&&x<E&&(_=E,E=x,x=_),O||I<Gd?O?E+x>0^m[1]<($d(m[0]-b)<Gd?E:x):E<=m[1]&&m[1]<=x:I>zd^(b<=m[0]&&m[0]<=w)){var S=yg(p,(-d+y)/g);return vg(S,f),[m,fg(S)]}}}function a(e,n){var i=r?t:zd-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return Vg(o,(function(t){var e,n,u,c,l;return{lineStart:function(){c=u=!1,l=1},point:function(h,f){var p,d=[h,f],g=o(h,f),v=r?g?0:a(h,f):g?a(h+(h<0?zd:-zd),f):0;if(!e&&(c=u=g)&&t.lineStart(),g!==u&&(!(p=s(e,d))||Sg(e,p)||Sg(d,p))&&(d[0]+=Gd,d[1]+=Gd,g=o(d[0],d[1])),g!==u)l=0,g?(t.lineStart(),p=s(d,e),t.point(p[0],p[1])):(p=s(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(i&&e&&r^g){var y;v&n||!(y=s(d,e,!0))||(l=0,r?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!g||e&&Sg(e,d)||t.point(d[0],d[1]),e=d,u=g,n=v},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return l|(c&&u)<<1}}}),(function(n,r,i,o){!function(t,e,n,r,i,o){if(n){var s=Zd(e),a=tg(e),u=r*n;null==i?(i=e+r*Hd,o=e-u/2):(i=Ig(s,i),o=Ig(s,o),(r>0?i<o:i>o)&&(i+=r*Hd));for(var c,l=i;r>0?l>o:l<o;l-=u)c=fg([s,-a*Zd(l),-a*tg(l)]),t.point(c[0],c[1])}}(o,t,e,i,n,r)}),r?[0,-t]:[-zd,t-zd])}function Hg(t){return function(e){var n=new Yg;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Yg(){}function Xg(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),function(t,e){t&&ug.hasOwnProperty(t.type)?ug[t.type](t,e):og(t,e)}(n,t.stream(Bg));var s=Bg.result(),a=Math.min(r/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),u=+e[0][0]+(r-a*(s[1][0]+s[0][0]))/2,c=+e[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([u,c])}Yg.prototype={constructor:Yg,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var $g=Zd(30*Xd);function Qg(t,e){return+e?function(t,e){function n(r,i,o,s,a,u,c,l,h,f,p,d,g,v){var y=c-r,m=l-i,_=y*y+m*m;if(_>4*e&&g--){var b=s+f,w=a+p,E=u+d,x=eg(b*b+w*w+E*E),I=rg(E/=x),O=$d($d(E)-1)<Gd||$d(o-h)<Gd?(o+h)/2:Jd(w,b),S=t(O,I),C=S[0],T=S[1],N=C-r,k=T-i,A=m*N-y*k;(A*A/_>e||$d((y*N+m*k)/_-.5)>.3||s*f+a*p+u*d<$g)&&(n(r,i,o,s,a,u,C,T,O,b/=x,w/=x,E,g,v),v.point(C,T),n(C,T,O,b,w,E,c,l,h,f,p,d,g,v))}}return function(e){var r,i,o,s,a,u,c,l,h,f,p,d,g={point:v,lineStart:y,lineEnd:_,polygonStart:function(){e.polygonStart(),g.lineStart=b},polygonEnd:function(){e.polygonEnd(),g.lineStart=y}};function v(n,r){n=t(n,r),e.point(n[0],n[1])}function y(){l=NaN,g.point=m,e.lineStart()}function m(r,i){var o=pg([r,i]),s=t(r,i);n(l,h,c,f,p,d,l=s[0],h=s[1],c=r,f=o[0],p=o[1],d=o[2],16,e),e.point(l,h)}function _(){g.point=v,e.lineEnd()}function b(){y(),g.point=w,g.lineEnd=E}function w(t,e){m(r=t,e),i=l,o=h,s=f,a=p,u=d,g.point=m}function E(){n(l,h,c,f,p,d,i,o,r,s,a,u,16,e),g.lineEnd=_,_()}return g}}(t,e):function(t){return Hg({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var Jg=Hg({point:function(t,e){this.stream.point(t*Xd,e*Xd)}});function Zg(t){return function(t){var e,n,r,i,o,s,a,u,c,l,h=150,f=480,p=250,d=0,g=0,v=0,y=0,m=0,_=null,b=Wg,w=null,E=Mg,x=.5,I=Qg(C,x);function O(t){return[(t=o(t[0]*Xd,t[1]*Xd))[0]*h+n,r-t[1]*h]}function S(t){return(t=o.invert((t[0]-n)/h,(r-t[1])/h))&&[t[0]*Yd,t[1]*Yd]}function C(t,i){return[(t=e(t,i))[0]*h+n,r-t[1]*h]}function T(){o=_g(i=function(t,e,n){return(t%=Hd)?e||n?_g(Eg(t),xg(e,n)):Eg(t):e||n?xg(e,n):bg}(v,y,m),e);var t=e(d,g);return n=f-t[0]*h,r=p+t[1]*h,N()}function N(){return c=l=null,O}return O.stream=function(t){return c&&l===t?c:c=Jg(b(i,I(E(l=t))))},O.clipAngle=function(t){return arguments.length?(b=+t?Kg(_=t*Xd,6*Xd):(_=null,Wg),N()):_*Yd},O.clipExtent=function(t){return arguments.length?(E=null==t?(w=s=a=u=null,Mg):Lg(w=+t[0][0],s=+t[0][1],a=+t[1][0],u=+t[1][1]),N()):null==w?null:[[w,s],[a,u]]},O.scale=function(t){return arguments.length?(h=+t,T()):h},O.translate=function(t){return arguments.length?(f=+t[0],p=+t[1],T()):[f,p]},O.center=function(t){return arguments.length?(d=t[0]%360*Xd,g=t[1]%360*Xd,T()):[d*Yd,g*Yd]},O.rotate=function(t){return arguments.length?(v=t[0]%360*Xd,y=t[1]%360*Xd,m=t.length>2?t[2]%360*Xd:0,T()):[v*Yd,y*Yd,m*Yd]},O.precision=function(t){return arguments.length?(I=Qg(C,x=t*t),N()):eg(x)},O.fitExtent=function(t,e){return Xg(O,t,e)},O.fitSize=function(t,e){return function(t,e,n){return Xg(t,[[0,0],e],n)}(O,t,e)},function(){return e=t.apply(this,arguments),O.invert=e.invert&&S,T()}}((function(){return t}))()}var tv=function(t){return function(e,n){var r=Zd(e),i=Zd(n),o=t(r*i);return[o*i*tg(e),o*tg(n)]}}((function(t){return(t=ng(t))&&t/tg(t)}));function ev(){return Zg(tv).scale(79.4188).clipAngle(179.999)}function nv(t,e,r,i){var o=t.properties||{},a="Feature"===t.type?t.geometry:t;if("GeometryCollection"===a.type){var u=[];return X(t,(function(t){var n=nv(t,e,r,i);n&&u.push(n)})),d(u)}var c=function(t){var e=bn(t).geometry.coordinates,r=[-e[0],-e[1]];return ev().rotate(r).scale(n)}(a),l={type:a.type,coordinates:iv(a.coordinates,c)},h=(new Ih).read(l),f=b(w(e,r),"meters"),p=mp.bufferOp(h,f,i);if(!rv((p=(new Oh).write(p)).coordinates))return s({type:p.type,coordinates:ov(p.coordinates,c)},o)}function rv(t){return Array.isArray(t[0])?rv(t[0]):isNaN(t[0])}function iv(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return iv(t,e)}))}function ov(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return ov(t,e)}))}function sv(t,e,n){void 0===n&&(n={});var r=q(t),i=q(e),o=Qu(r.coordinates,i.coordinates);return 0===o.length?null:1===o.length?l(o[0],n.properties):y(o,n.properties)}function av(t,e,n){void 0===n&&(n={});var r=q(t),i=q(e),o=Ju(r.coordinates,i.coordinates);return 0===o.length?null:1===o.length?l(o[0],n.properties):y(o,n.properties)}
/**
     * @license get-closest https://github.com/cosmosio/get-closest
     *
     * The MIT License (MIT)
     *
     * Copyright (c) 2014-2017 Olivier Scherrer <pode.fr@gmail.com>
     */function uv(t,e){return function(t,e,n){var r,i;if(!Array.isArray(e))throw new Error("Get closest expects an array as second argument");return e.forEach((function(e,o){var s=n(e,t);s>=0&&(void 0===i||s<i)&&(i=s,r=o)})),r}(t,e,(function(t,e){return t-e}))}function cv(t,e){return Ar(f(Y(t)),f(Y(e))).features.length>0}function lv(t,e,n){void 0===n&&(n={});var r=JSON.stringify(n.properties||{}),i=t[0],o=t[1],s=t[2],a=t[3],u=(o+a)/2,c=(i+s)/2,l=2*e/be([i,u],[s,u],n)*(s-i),h=2*e/be([c,o],[c,a],n)*(a-o),f=l/2,p=2*f,g=Math.sqrt(3)/2*h,v=s-i,y=a-o,m=3/4*p,_=g,b=(v-p)/(p-f/2),w=Math.floor(b),E=(w*m-f/2-v)/2-f/2+m/2,x=Math.floor((y-g)/g),I=(y-x*g)/2,O=x*g-y>g/2;O&&(I-=g/4);for(var S=[],C=[],T=0;T<6;T++){var N=2*Math.PI/6*T;S.push(Math.cos(N)),C.push(Math.sin(N))}for(var k=[],A=0;A<=w;A++)for(var P=0;P<=x;P++){var R=A%2==1;if((0!==P||!R)&&(0!==P||!O)){var L=A*m+i-E,j=P*_+o+I;if(R&&(j-=g/2),!0===n.triangles)fv([L,j],l/2,h/2,JSON.parse(r),S,C).forEach((function(t){n.mask?av(n.mask,t)&&k.push(t):k.push(t)}));else{var M=hv([L,j],l/2,h/2,JSON.parse(r),S,C);n.mask?av(n.mask,M)&&k.push(M):k.push(M)}}}return d(k)}function hv(t,e,n,r,i,o){for(var s=[],a=0;a<6;a++){var u=t[0]+e*i[a],c=t[1]+n*o[a];s.push([u,c])}return s.push(s[0].slice()),l([s],r)}function fv(t,e,n,r,i,o){for(var s=[],a=0;a<6;a++){var u=[];u.push(t),u.push([t[0]+e*i[a],t[1]+n*o[a]]),u.push([t[0]+e*i[(a+1)%6],t[1]+n*o[(a+1)%6]]),u.push(t),s.push(l([u],r))}return s}function pv(t){if(t.features.length<=1)return t;var e=function(t){var e=St(),n=[];return Q(t,(function(t,e){var r=st(t);n.push({minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],geojson:t,index:e})})),e.load(n),e}(t),n=[],r={};return Q(t,(function(t,i){if(r[i])return!0;for(e.remove({index:i},dv),r[i]=!0;;){var o=st(t),s=e.search({minX:o[0],minY:o[1],maxX:o[2],maxY:o[3]});if(s.length>0)for(var a=s.map((function(t){return r[t.index]=!0,e.remove({index:t.index},dv),t.geojson})),u=0,c=a.length;u<c;u++)t=sv(t,a[u]);if(0===s.length)break}n.push(t)})),d(n)}function dv(t,e){return t.index===e.index}function gv(t,e,n){return void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});for(var i=[],o=t[0],s=t[1],a=t[2],u=t[3],c=e/be([o,s],[a,s],r)*(a-o),h=n/be([o,s],[o,u],r)*(u-s),f=a-o,p=u-s,g=Math.floor(f/c),v=Math.floor(p/h),y=(p-v*h)/2,m=o+(f-g*c)/2,_=0;_<g;_++){for(var b=s+y,w=0;w<v;w++){var E=l([[[m,b],[m,b+h],[m+c,b+h],[m+c,b],[m,b]]],r.properties);r.mask?Cs(r.mask,E)&&i.push(E):i.push(E),b+=h}m+=c}return d(i)}(t,e,e,n)}function vv(t,e,n){void 0===n&&(n={});for(var r=[],i=e/be([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),o=e/be([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),s=0,a=t[0];a<=t[2];){for(var u=0,c=t[1];c<=t[3];){var h=null,f=null;s%2==0&&u%2==0?(h=l([[[a,c],[a,c+o],[a+i,c],[a,c]]],n.properties),f=l([[[a,c+o],[a+i,c+o],[a+i,c],[a,c+o]]],n.properties)):s%2==0&&u%2==1?(h=l([[[a,c],[a+i,c+o],[a+i,c],[a,c]]],n.properties),f=l([[[a,c],[a,c+o],[a+i,c+o],[a,c]]],n.properties)):u%2==0&&s%2==1?(h=l([[[a,c],[a,c+o],[a+i,c+o],[a,c]]],n.properties),f=l([[[a,c],[a+i,c+o],[a+i,c],[a,c]]],n.properties)):u%2==1&&s%2==1&&(h=l([[[a,c],[a,c+o],[a+i,c],[a,c]]],n.properties),f=l([[[a,c+o],[a+i,c+o],[a+i,c],[a,c+o]]],n.properties)),n.mask?(av(n.mask,h)&&r.push(h),av(n.mask,f)&&r.push(f)):(r.push(h),r.push(f)),c+=o,u++}s++,a+=i}return d(r)}tv.invert=function(t){return function(e,n){var r=eg(e*e+n*n),i=t(r),o=tg(i),s=Zd(i);return[Jd(e*o,r*s),rg(r&&n*o/r)]}}((function(t){return t})),e.along=function(t,e,n){void 0===n&&(n={});for(var r=q(t).coordinates,i=0,o=0;o<r.length&&!(e>=i&&o===r.length-1);o++){if(i>=e){var s=e-i;if(s){var a=_n(r[o],r[o-1])-180;return yn(r[o],s,a,n)}return u(r[o])}i+=be(r[o],r[o+1],n)}return u(r[r.length-1])},e.angle=function(t,e,n,r){if(void 0===r&&(r={}),!N(r))throw new Error("options is invalid");if(!t)throw new Error("startPoint is required");if(!e)throw new Error("midPoint is required");if(!n)throw new Error("endPoint is required");var i=t,o=e,s=n,a=x(!0!==r.mercator?_n(i,o):Fi(i,o)),u=x(!0!==r.mercator?_n(s,o):Fi(s,o)),c=Math.abs(a-u);return!0===r.explementary?360-c:c},e.applyFilter=su,e.area=Vr,e.areaFactors=o,e.bbox=st,e.bboxClip=function(t,e){var n=q(t),r=n.type,i="Feature"===t.type?t.properties:{},o=n.coordinates;switch(r){case"LineString":case"MultiLineString":var s=[];return"LineString"===r&&(o=[o]),o.forEach((function(t){!function(t,e,n){var r,i,o,s,a,u=t.length,c=ki(t[0],e),l=[];for(n||(n=[]),r=1;r<u;r++){for(i=t[r-1],s=a=ki(o=t[r],e);;){if(!(c|s)){l.push(i),s!==a?(l.push(o),r<u-1&&(n.push(l),l=[])):r===u-1&&l.push(o);break}if(c&s)break;c?c=ki(i=Ni(i,o,c,e),e):s=ki(o=Ni(i,o,s,e),e)}c=a}l.length&&n.push(l)}(t,e,s)})),1===s.length?f(s[0],i):g(s,i);case"Polygon":return l(Ai(o,e),i);case"MultiPolygon":return y(o.map((function(t){return Ai(t,e)})),i);default:throw new Error("geometry "+r+" not supported")}},e.bboxPolygon=dn,e.bearing=_n,e.bearingToAngle=x,e.bearingToAzimuth=x,e.bezier=pn,e.bezierSpline=pn,e.booleanClockwise=zi,e.booleanContains=function(t,e){var n=q(t),r=q(e),i=n.type,o=r.type,s=n.coordinates,a=r.coordinates;switch(i){case"Point":switch(o){case"Point":return gs(s,a);default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"Point":return function(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(gs(t.coordinates[n],e.coordinates)){r=!0;break}return r}(n,r);case"MultiPoint":return function(t,e){for(var n=0,r=e.coordinates;n<r.length;n++){for(var i=r[n],o=!1,s=0,a=t.coordinates;s<a.length;s++)if(gs(i,a[s])){o=!0;break}if(!o)return!1}return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return Yr(r,n,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,r=0,i=e.coordinates;r<i.length;r++){var o=i[r];if(Yr({type:"Point",coordinates:o},t,{ignoreEndVertices:!0})&&(n=!0),!Yr({type:"Point",coordinates:o},t,{ignoreEndVertices:!1}))return!1}return n}(n,r);case"MultiPoint":return function(t,e){for(var n=!1,r=0,i=e.coordinates;r<i.length;r++){var o=i[r];if(Yr(o,t,{ignoreEndVertices:!0})&&(n=!0),!Yr(o,t))return!1}return!!n}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return ye(r,n,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,r=0,i=st(t),o=st(e);if(!ds(i,o))return!1;for(;r<e.coordinates.length-1;r++)if(ye({type:"Point",coordinates:vs(e.coordinates[r],e.coordinates[r+1])},t,{ignoreBoundary:!0})){n=!0;break}return n}(n,r);case"Polygon":return function(t,e){if("Feature"===t.type&&null===t.geometry)return!1;if("Feature"===e.type&&null===e.geometry)return!1;var n=st(t),r=st(e);if(!ds(n,r))return!1;for(var i=q(e).coordinates,o=0,s=i;o<s.length;o++)for(var a=0,u=s[o];a<u.length;a++)if(!ye(u[a],t))return!1;return!0}(n,r);case"MultiPoint":return function(t,e){for(var n=0,r=e.coordinates;n<r.length;n++)if(!ye(r[n],t,{ignoreBoundary:!0}))return!1;return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},e.booleanCrosses=function(t,e){var n=q(t),r=q(e),i=n.type,o=r.type;switch(i){case"MultiPoint":switch(o){case"LineString":return ys(n,r);case"Polygon":return _s(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return ys(r,n);case"LineString":return function(t,e){if(Ar(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var r=0;r<e.coordinates.length-1;r++){var i=!0;if(0!==r&&r!==e.coordinates.length-2||(i=!1),bs(t.coordinates[n],t.coordinates[n+1],e.coordinates[r],i))return!0}return!1}(n,r);case"Polygon":return ms(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return _s(r,n);case"LineString":return ms(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},e.booleanDisjoint=ls,e.booleanEqual=function(t,e){return q(t).type===q(e).type&&new Os({precision:6}).compare(tn(t),tn(e))},e.booleanIntersects=Cs,e.booleanOverlap=Ss,e.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==Vs(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==Vs(e,"line2"))throw new Error("line2 must be a LineString");for(var n=$n(tn(t)).features,r=$n(tn(e)).features,i=0;i<n.length;i++){var o=n[i].geometry.coordinates;if(!r[i])break;if(!Bs(o,r[i].geometry.coordinates))return!1}return!0},e.booleanPointInPolygon=ye,e.booleanPointOnLine=Yr,e.booleanWithin=$r,e.buffer=function(t,e,n){var r=(n=n||{}).units||"kilometers",i=n.steps||8;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return X(t,(function(t){var n=nv(t,e,r,i);n&&o.push(n)})),d(o);case"FeatureCollection":return K(t,(function(t){var n=nv(t,e,r,i);n&&K(n,(function(t){t&&o.push(t)}))})),d(o)}return nv(t,e,r,i)},e.center=bn,e.centerMean=ja,e.centerMedian=function(t,e){if(void 0===e&&(e={}),!N(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!T(n))throw new Error("counter must be a number");var r=e.weight,i=ja(t,{weight:e.weight}),o=d([]);return K(t,(function(t){o.features.push(wn(t,{properties:{weight:t.properties[r]}}))})),o.properties={tolerance:e.tolerance,medianCandidates:[]},Ma(i.geometry.coordinates,[0,0],o,n)},e.centerOfMass=function t(e,n){switch(void 0===n&&(n={}),U(e)){case"Point":return u(R(e),n.properties);case"Polygon":var r=[];V(e,(function(t){r.push(t)}));var i,o,s,a,c,l,h,f,p=wn(e,{properties:n.properties}),d=p.geometry.coordinates,g=0,v=0,y=0,m=r.map((function(t){return[t[0]-d[0],t[1]-d[1]]}));for(i=0;i<r.length-1;i++)a=(o=m[i])[0],l=o[1],c=(s=m[i+1])[0],y+=f=a*(h=s[1])-c*l,g+=(a+c)*f,v+=(l+h)*f;if(0===y)return p;var _=1/(.5*y*6);return u([d[0]+_*g,d[1]+_*v],n.properties);default:var b=ve(e);return b?t(b,{properties:n.properties}):wn(e,{properties:n.properties})}},e.centroid=wn,e.circle=mn,e.cleanCoords=tn,e.clone=Oe,e.clusterEach=ru,e.clusterReduce=iu,e.clusters=cu,e.clustersDbscan=function(t,e,n){void 0===n&&(n={}),!0!==n.mutate&&(t=Oe(t)),n.minPoints=n.minPoints||3;var r=new Ps.DBSCAN,i=r.run(Y(t),S(e,n.units),n.minPoints,be),o=-1;return i.forEach((function(e){o++,e.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=o,n.properties.dbscan="core"}))})),r.noise.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster?n.properties.dbscan="edge":n.properties.dbscan="noise"})),t},e.clustersKmeans=function(t,e){void 0===e&&(e={});var n=t.features.length;e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(n/2)),e.numberOfClusters>n&&(e.numberOfClusters=n),!0!==e.mutate&&(t=Oe(t));var r=Y(t),i=r.slice(0,e.numberOfClusters),o=Us(r,e.numberOfClusters,i),s={};return o.centroids.forEach((function(t,e){s[e]=t})),K(t,(function(t,e){var n=o.idxs[e];t.properties.cluster=n,t.properties.centroid=s[n]})),t},e.collect=function(t,e,n,r){var i=St(6),o=e.features.map((function(t){return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:t.properties[n]}}));return i.load(o),t.features.forEach((function(t){t.properties||(t.properties={});var e=st(t),n=i.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),o=[];n.forEach((function(e){ye([e.minX,e.minY],t)&&o.push(e.property)})),t.properties[r]=o})),t},e.collectionOf=F,e.combine=function(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},n=Object.keys(e).reduce((function(t,e){return t[e.replace("Multi","")]=e,t}),{});function r(t,n,r){r?e[n].coordinates=e[n].coordinates.concat(t.geometry.coordinates):e[n].coordinates.push(t.geometry.coordinates),e[n].properties.push(t.properties)}return K(t,(function(t){t.geometry&&(e[t.geometry.type]?r(t,t.geometry.type,!0):n[t.geometry.type]&&r(t,n[t.geometry.type],!1))})),d(Object.keys(e).filter((function(t){return e[t].coordinates.length})).sort().map((function(t){return s({type:t,coordinates:e[t].coordinates},{collectedProperties:e[t].properties})})))},e.concave=function(t,e){void 0===e&&(e={});var n=e.maxEdge||1/0,r=we(function(t){var e=[],n={};return K(t,(function(t){if(t.geometry){var r=t.geometry.coordinates.join("-");n.hasOwnProperty(r)||(e.push(t),n[r]=!0)}})),d(e)}(t));if(r.features=r.features.filter((function(t){var r=t.geometry.coordinates[0][0],i=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],s=be(r,i,e),a=be(i,o,e),u=be(r,o,e);return s<=n&&a<=n&&u<=n})),r.features.length<1)return null;var i=Ze(r);return 1===i.coordinates.length&&(i.coordinates=i.coordinates[0],i.type="Polygon"),s(i)},e.containsNumber=j,e.convertArea=C,e.convertDistance=S,e.convertLength=S,e.convex=ve,e.coordAll=Y,e.coordEach=V,e.coordReduce=G,e.createBins=ou,e.degrees2radians=O,e.degreesToRadians=O,e.destination=yn,e.difference=function(t,e){var n=q(t),r=q(e),i=t.properties||{},o=Zu(n.coordinates,r.coordinates);return 0===o.length?null:1===o.length?l(o[0],i):y(o,i)},e.dissolve=function(t,e){if(!N(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;F(t,"Polygon","dissolve");var r=Oe(t),i=r.features,o=[];i.forEach((function(t,e){t.properties.origIndexPosition=e}));var s=Nr();for(var a in s.load(r),i){var u=i[a],c=!1;if(s.search(u).features.forEach((function(t){u=i[a];var e=t.properties.origIndexPosition;if(o.length>0&&0!==e)if(e>o[o.length-1])e-=o.length;else{var r=uv(e,o);0!==r&&(e-=r)}if(e!==+a){var l=i[e];l&&u&&(void 0!==n&&l.properties[n]!==u.properties[n]||Ss(u,l)&&cv(u,l)&&(i[a]=sv(u,l),o.push(t.properties.origIndexPosition),o.sort((function(t,e){return t-e})),s.remove(t),i.splice(e,1),u.properties.origIndexPosition=a,s.remove(u,(function(t,e){return t.properties.origIndexPosition===e.properties.origIndexPosition})),c=!0))}})),c){if(!u)continue;u.properties.origIndexPosition=a,s.insert(u),a--}}return i.forEach((function(t){delete t.properties.origIndexPosition,delete t.bbox})),r},e.distance=be,e.distanceToDegrees=E,e.distanceToRadians=w,e.distanceWeight=Ba,e.earthRadius=n,e.ellipse=Ra,e.envelope=gn,e.explode=En,e.factors=r,e.feature=s,e.featureCollection=d,e.featureEach=K,e.featureOf=D,e.featureReduce=H,e.filterProperties=uu,e.findPoint=it,e.findSegment=rt,e.flatten=function(t){if(!t)throw new Error("geojson is required");var e=[];return Q(t,(function(t){e.push(t)})),d(e)},e.flattenEach=Q,e.flattenReduce=J,e.flip=function(t,e){if(!N(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=Oe(t)),V(t,(function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e})),t},e.geojsonType=M,e.geomEach=X,e.geomReduce=$,e.geometry=a,e.geometryCollection=m,e.getCluster=nu,e.getCoord=R,e.getCoords=L,e.getGeom=q,e.getType=U,e.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;return t=R(t),e=R(e),r=r||{},i=i||100,o=o||10,new gi({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(i,{offset:o}).json()},e.helpers=P,e.hexGrid=lv,e.inside=ye,e.interpolate=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.gridType,i=n.property,o=n.weight;if(!t)throw new Error("points is required");if(F(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");i=i||"elevation",r=r||"square",o=o||1;var s,a=st(t);switch(r){case"point":case"points":s=ti(a,e,n);break;case"square":case"squares":s=gv(a,e,n);break;case"hex":case"hexes":s=lv(a,e,n);break;case"triangle":case"triangles":s=vv(a,e,n);break;default:throw new Error("invalid gridType")}var u=[];return K(s,(function(e){var s=0,a=0;K(t,(function(t){var u,c=be("point"===r?e:wn(e),t,n);if(void 0!==i&&(u=t.properties[i]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===c&&(s=u);var l=1/Math.pow(c,o);a+=l,s+=l*u}));var c=Oe(e);c.properties[i]=s/a,u.push(c)})),d(u)},e.intersect=av,e.invariant=B,e.isNumber=T,e.isObject=N,e.isobands=function(t,e,n){if(!N(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(F(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!N(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var s=Yi(t,{zProperty:r,flip:!0}),a=function(t,e,n){for(var r=[],i=1;i<e.length;i++){var o=+e[i-1],s=+e[i],a=Yo(Ho(Qi(t,o,s-o))),u={};u.groupedRings=a,u[n]=o+"-"+s,r.push(u)}return r}(s,e,r);return d((a=function(t,e,n){var r=st(n),i=r[2]-r[0],o=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,c=e.length-1,l=i/u,h=o/c,f=function(t){t[0]=t[0]*l+s,t[1]=t[1]*h+a};return t.forEach((function(t){t.groupedRings.forEach((function(t){t.forEach((function(t){t.forEach(f)}))}))})),t}(a,s,t)).map((function(t,e){if(o[e]&&!N(o[e]))throw new Error("Each mappedProperty is required to be an Object");var n=ht({},i,o[e]);return n[r]=t[r],y(t.groupedRings,n)})))},e.isolines=function(t,e,n){if(!N(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(F(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!N(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var s=_t(t,{zProperty:r,flip:!0});return d(function(t,e,n){var r=st(n),i=r[2]-r[0],o=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,c=e.length-1,l=i/u,h=o/c,f=function(t){t[0]=t[0]*l+s,t[1]=t[1]*h+a};return t.forEach((function(t){V(t,f)})),t}(function(t,e,n,r,i){for(var o=[],s=1;s<e.length;s++){var a=+e[s],u=ht({},r,i[s]);u[n]=a;var c=g(dt(t,a),u);o.push(c)}return o}(s,e,r,i,o),s,t))},e.kinks=function(t){var e,n,r={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach((function(t){e.forEach((function(e){for(var n=0;n<t.length-1;n++)for(var i=n;i<e.length-1;i++){if(t===e){if(1===Math.abs(n-i))continue;if(0===n&&i===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var o=Fr(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[i][0],e[i][1],e[i+1][0],e[i+1][1]);o&&r.features.push(u([o[0],o[1]]))}}))})),r},e.length=Kr,e.lengthToDegrees=E,e.lengthToRadians=w,e.lineArc=bi,e.lineChunk=function(t,e,n){if(!N(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return Q(t,(function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,r){var i=Kr(t,{units:n});if(i<=e)return r(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++)r(Hr(t,e*s,e*(s+1),{units:n}),s)}(t,e,r,(function(t){o.push(t)}))})),d(o)},e.lineDistance=Kr,e.lineEach=et,e.lineIntersect=Ar,e.lineOffset=function(t,e,n){if(!N(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var i=U(t),o=t.properties;switch(i){case"LineString":return rs(t,e,r);case"MultiLineString":var s=[];return Q(t,(function(t){s.push(rs(t,e,r).geometry.coordinates)})),g(s,o);default:throw new Error("geometry "+i+" is not supported")}},e.lineOverlap=ji,e.lineReduce=nt,e.lineSegment=$n,e.lineSlice=function(t,e,n){var r=L(n);if("LineString"!==U(n))throw new Error("line must be a LineString");for(var i,o=Rr(n,t),s=Rr(n,e),a=[(i=o.properties.index<=s.properties.index?[o,s]:[s,o])[0].geometry.coordinates],u=i[0].properties.index+1;u<i[1].properties.index+1;u++)a.push(r[u]);return a.push(i[1].geometry.coordinates),f(a,n.properties)},e.lineSliceAlong=Hr,e.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=U(t),r=U(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=ei(e,{precision:7});switch(r){case"Point":return yi(t,i);case"MultiPoint":return vi(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return vi(t,Ar(t,i))}},e.lineString=f,e.lineStringToPolygon=Oi,e.lineStrings=p,e.lineToPolygon=Oi,e.mask=function(t,e){var n,r,i=function(t){var e=[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]];return l(t&&t.geometry.coordinates||e)}(e),o=(n=[],r=[],Q(t,(function(t){var e=t.geometry.coordinates,i=e[0],o=e.slice(1);n.push(l([i])),o.forEach((function(t){r.push(l([t]))}))})),[d(n),d(r)]),s=o[0],a=o[1];return function(t,e,n){var r=[];return r.push(t.geometry.coordinates[0]),Q(e,(function(t){r.push(t.geometry.coordinates[0])})),Q(n,(function(t){r.push(t.geometry.coordinates[0])})),l(r)}(i,s=pv(s),a=pv(a))},e.meta=ot,e.midpoint=function(t,e){return yn(t,be(t,e)/2,_n(t,e))},e.moranIndex=function(t,e){var n=e.inputField,r=e.threshold||1e5,i=e.p||2,o=e.binary||!1,s=Ba(t,{alpha:e.alpha||-1,binary:o,p:i,standardization:e.standardization||!0,threshold:r}),a=[];K(t,(function(t){var e=t.properties||{};a.push(e[n])}));for(var u=Va(a),c=function(t){for(var e=Va(t),n=0,r=0,i=t;r<i.length;r++){var o=i[r];n+=Math.pow(o-e,2)}return n/t.length}(a),l=0,h=0,f=0,p=0,d=s.length,g=0;g<d;g++){for(var v=0,y=0;y<d;y++)l+=s[g][y]*(a[g]-u)*(a[y]-u),h+=s[g][y],f+=Math.pow(s[g][y]+s[y][g],2),v+=s[g][y]+s[y][g];p+=Math.pow(v,2)}var m=l/h/c,_=-1/(d-1),b=(d*d*(f*=.5)-d*p+h*h*3)/((d-1)*(d+1)*(h*h))-_*_,w=Math.sqrt(b);return{expectedMoranIndex:_,moranIndex:m,stdNorm:w,zNorm:(m-_)/w}},e.multiLineString=g,e.multiPoint=v,e.multiPolygon=y,e.nearest=Xn,e.nearestPoint=Xn,e.nearestPointOnLine=Rr,e.nearestPointToLine=function(t,e,n){void 0===n&&(n={});var r=n.units,i=n.properties||{},o=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return X(t,(function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})})),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter((function(t){return"Point"===t.geometry.type})),t;default:throw new Error("points must be a Point Collection")}}(t);if(!o.features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==U(e))throw new Error("line must be a LineString");var s=1/0,a=null;return K(o,(function(t){var n=jr(t,e,{units:r});n<s&&(s=n,a=t)})),a&&(a.properties=ht({dist:s},a.properties,i)),a},e.planepoint=function(t,e){var n=R(t),r=q(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=e.properties||{},o=i.a,s=i.b,a=i.c,u=n[0],c=n[1],l=r[0][0],h=r[0][1],f=void 0!==o?o:r[0][2],p=r[1][0],d=r[1][1],g=void 0!==s?s:r[1][2],v=r[2][0],y=r[2][1],m=void 0!==a?a:r[2][2];return(m*(u-l)*(c-d)+f*(u-p)*(c-y)+g*(u-v)*(c-h)-g*(u-l)*(c-y)-m*(u-p)*(c-h)-f*(u-v)*(c-d))/((u-l)*(c-d)+(u-p)*(c-y)+(u-v)*(c-h)-(u-l)*(c-y)-(u-p)*(c-h)-(u-v)*(c-d))},e.point=u,e.pointGrid=ti,e.pointOnFeature=qr,e.pointOnLine=Rr,e.pointOnSurface=qr,e.pointToLineDistance=jr,e.points=c,e.pointsWithinPolygon=_e,e.polygon=l,e.polygonSmooth=function(t,e){var n=[],r=e.iterations||1;if(!t)throw new Error("inputPolys is required");return X(t,(function(t,e,i){var o,s,a;switch(t.type){case"Polygon":o=[[]];for(var u=0;u<r;u++)a=[[]],s=t,u>0&&(s=l(o).geometry),Fa(s,a),o=a.slice(0);n.push(l(o,i));break;case"MultiPolygon":o=[[[]]];for(var c=0;c<r;c++)a=[[[]]],s=t,c>0&&(s=y(o).geometry),qa(s,a),o=a.slice(0);n.push(y(o,i));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}})),d(n)},e.polygonTangents=function(t,e){var n,r,i,o,s=L(t),a=L(e),c=st(e),l=0,h=null;switch(s[0]>c[0]&&s[0]<c[2]&&s[1]>c[1]&&s[1]<c[3]&&(l=(h=Xn(t,En(e))).properties.featureIndex),U(e)){case"Polygon":n=a[0][l],r=a[0][0],null!==h&&h.geometry.coordinates[1]<s[1]&&(r=a[0][l]),o=Gi(a[0][0],a[0][a[0].length-1],s);var f=Bi(a[0],s,o,i,n,r);n=f[0],r=f[1];break;case"MultiPolygon":for(var p=0,g=0,v=0,y=0;y<a[0].length;y++){p=y;for(var m=!1,_=0;_<a[0][y].length;_++){if(g=_,v===l){m=!0;break}v++}if(m)break}n=a[0][p][g],r=a[0][p][g],o=Gi(a[0][0][0],a[0][0][a[0][0].length-1],s),a.forEach((function(t){var e=Bi(t[0],s,o,i,n,r);n=e[0],r=e[1]}))}return d([u(n),u(r)])},e.polygonToLine=Ei,e.polygonToLineString=Ei,e.polygonize=function(t){var e=cs.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter((function(t){return t.isValid()})).forEach((function(t){t.isHole()?n.push(t):r.push(t)})),n.forEach((function(t){us.findEdgeRingContaining(t,r)&&r.push(t)})),d(r.map((function(t){return t.toPolygon()})))},e.polygons=h,e.projection=Ya,e.propEach=z,e.propReduce=W,e.propertiesContainsFilter=au,e.radians2degrees=I,e.radiansToDegrees=I,e.radiansToDistance=b,e.radiansToLength=b,e.random=eu,e.randomLineString=Ja,e.randomPoint=$a,e.randomPolygon=Qa,e.randomPosition=Xa,e.rewind=function(t,e){if(!N(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=Oe(t));var i=[];switch(t.type){case"GeometryCollection":return X(t,(function(t){Wi(t,n)})),t;case"FeatureCollection":return K(t,(function(t){K(Wi(t,n),(function(t){i.push(t)}))})),d(i)}return Wi(t,n)},e.rhumbBearing=Fi,e.rhumbDestination=Ui,e.rhumbDistance=Lr,e.round=_,e.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return d(function(t,e){for(var n,r,i=t.slice(0),o=t.length,s=o-e;o-- >s;)n=i[r=Math.floor((o+1)*Math.random())],i[r]=i[o],i[o]=n;return i.slice(s)}(t.features,e))},e.sector=function(t,e,n,r,i){if(!N(i=i||{}))throw new Error("options is invalid");var o=i.properties;if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(Di(n)===Di(r))return mn(t,e,i);var s=L(t),a=bi(t,e,n,r,i),u=[[s]];return V(a,(function(t){u[0].push(t)})),u[0].push(s),l(u,o)},e.segmentEach=Z,e.segmentReduce=tt,e.shortestPath=function(t,e,n){if(!N(n=n||{}))throw new Error("options is invalid");var r=n.resolution,i=n.minDistance,o=n.obstacles||d([]);if(!t)throw new Error("start is required");if(!e)throw new Error("end is required");if(r&&!T(r)||r<=0)throw new Error("options.resolution must be a number, greater than 0");if(i)throw new Error("options.minDistance is not yet implemented");var a=R(t),c=R(e);switch(t=u(a),e=u(c),U(o)){case"FeatureCollection":if(0===o.features.length)return f([a,c]);break;case"Polygon":o=d([s(q(o))]);break;default:throw new Error("invalid obstacles")}var l=o;l.features.push(t),l.features.push(e);var h=st(Jo(dn(st(l)),1.15));r||(r=be([h[0],h[1]],[h[2],h[1]],n)/100),l.features.pop(),l.features.pop();for(var p=h[0],g=h[1],v=h[2],y=h[3],m=r/be([p,g],[v,g],n)*(v-p),_=r/be([p,g],[p,y],n)*(y-g),b=v-p,w=y-g,E=Math.floor(b/m),x=Math.floor(w/_),I=(b-E*m)/2,O=[],S=[],C=[],k=[],A=1/0,P=1/0,L=y-(w-x*_)/2,j=0;L>=g;){for(var M=[],D=[],F=p+I,B=0;F<=v;){var V=u([F,L]),G=Ys(V,o);M.push(G?0:1),D.push(F+"|"+L);var z=be(V,t);!G&&z<A&&(A=z,C={x:B,y:j});var W=be(V,e);!G&&W<P&&(P=W,k={x:B,y:j}),F+=m,B++}S.push(M),O.push(D),L-=_,j++}var K=new Ws(S,{diagonal:!0}),H=K.grid[C.y][C.x],Y=K.grid[k.y][k.x],X=zs.search(K,H,Y),$=[a];return X.forEach((function(t){var e=O[t.x][t.y].split("|");$.push([+e[0],+e[1]])})),$.push(c),tn(f($))},e.simplify=function(t,e){if(!N(e=e||{}))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,r=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==i&&(t=Oe(t)),X(t,(function(t){!function(t,e,n){var r=t.type;if("Point"===r||"MultiPoint"===r)return t;tn(t,!0);var i=t.coordinates;switch(r){case"LineString":t.coordinates=cn(i,e,n);break;case"MultiLineString":t.coordinates=i.map((function(t){return cn(t,e,n)}));break;case"Polygon":t.coordinates=ln(i,e,n);break;case"MultiPolygon":t.coordinates=i.map((function(t){return ln(t,e,n)}))}}(t,n,r)})),t},e.square=vn,e.squareGrid=gv,e.standardDeviationalEllipse=function(t,e){if(!N(e=e||{}))throw new Error("options is invalid");var n=e.steps||64,r=e.weight,i=e.properties||{};if(!T(n))throw new Error("steps must be a number");if(!N(i))throw new Error("properties must be a number");var o=Y(t).length,s=ja(t,{weight:r}),a=0,u=0,c=0;K(t,(function(t){var e=t.properties[r]||1,n=Da(L(t),L(s));a+=Math.pow(n.x,2)*e,u+=Math.pow(n.y,2)*e,c+=n.x*n.y*e}));var l=a-u,h=Math.sqrt(Math.pow(l,2)+4*Math.pow(c,2)),f=2*c,p=Math.atan((l+h)/f),g=180*p/Math.PI,v=0,y=0,m=0;K(t,(function(t){var e=t.properties[r]||1,n=Da(L(t),L(s));v+=Math.pow(n.x*Math.cos(p)-n.y*Math.sin(p),2)*e,y+=Math.pow(n.x*Math.sin(p)+n.y*Math.cos(p),2)*e,m+=e}));var _=Math.sqrt(2*v/m),b=Math.sqrt(2*y/m),w=Ra(s,_,b,{units:"degrees",angle:g,steps:n,properties:i}),E=_e(t,d([w])),x={meanCenterCoordinates:L(s),semiMajorAxis:_,semiMinorAxis:b,numberOfFeatures:o,angle:g,percentageWithinEllipse:100*Y(E).length/o};return w.properties.standardDeviationalEllipse=x,w},e.tag=function(t,e,n,r){return t=Oe(t),e=Oe(e),K(t,(function(t){t.properties||(t.properties={}),K(e,(function(e){void 0===t.properties[r]&&ye(t,e)&&(t.properties[r]=e.properties[n])}))})),t},e.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Yn(t.geometry.coordinates):t.geometry.coordinates.forEach((function(t){e.features=e.features.concat(Yn(t))})),e},e.tin=we,e.toMercator=Ga,e.toWgs84=za,e.transformRotate=Qo,e.transformScale=Jo,e.transformTranslate=function(t,e,n,r){if(!N(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.zTranslation,s=r.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n+=180),!1!==s&&void 0!==s||(t=Oe(t)),V(t,(function(t){var r=L(Ui(t,e,n,{units:i}));t[0]=r[0],t[1]=r[1],o&&3===t.length&&(t[2]+=o)})),t},e.triangleGrid=vv,e.truncate=ei,e.union=sv,e.unitsFactors=i,e.unkinkPolygon=function(t){var e=[];return Q(t,(function(t){"Polygon"===t.geometry.type&&K(function(t){if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var e=t.geometry.coordinates.length,n=[],r=0;r<e;r++){var i=t.geometry.coordinates[r];ui(i[0],i[i.length-1])||i.push(i[0]),n.push.apply(n,i.slice(0,i.length-1))}if(!function(t){for(var e={},n=1,r=0,i=t.length;r<i;++r){if(e.hasOwnProperty(t[r])){n=0;break}e[t[r]]=1}return n}(n))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var o=n.length,s=ni(t,(function(t,e,n,r,i,o,s,a,u,c,l,h){return[t,e,n,r,i,o,s,a,u,c,l,h]})),a=s.length;if(0==a){var u=[];for(r=0;r<e;r++)u.push(l([t.geometry.coordinates[r]],{parent:-1,winding:ai(t.geometry.coordinates[r])}));var c=d(u);return F(),q(),c}var h=[],f=[];for(r=0;r<e;r++){h.push([]);for(var p=0;p<t.geometry.coordinates[r].length-1;p++)h[r].push([new ii(t.geometry.coordinates[r][ci(p+1,t.geometry.coordinates[r].length-1)],1,[r,p],[r,ci(p+1,t.geometry.coordinates[r].length-1)],void 0)]),f.push(new oi(t.geometry.coordinates[r][p],[r,ci(p-1,t.geometry.coordinates[r].length-1)],[r,p],void 0,void 0,!1,!0))}for(r=0;r<a;r++)h[s[r][1]][s[r][2]].push(new ii(s[r][0],s[r][5],[s[r][1],s[r][2]],[s[r][6],s[r][7]],void 0)),s[r][11]&&f.push(new oi(s[r][0],[s[r][1],s[r][2]],[s[r][6],s[r][7]],void 0,void 0,!0,!0));var g=f.length;for(r=0;r<h.length;r++)for(p=0;p<h[r].length;p++)h[r][p].sort((function(t,e){return t.param<e.param?-1:1}));var v=[];for(r=0;r<g;r++)v.push({minX:f[r].coord[0],minY:f[r].coord[1],maxX:f[r].coord[0],maxY:f[r].coord[1],index:r});var y=St();for(y.load(v),r=0;r<h.length;r++)for(p=0;p<h[r].length;p++)for(var m=0;m<h[r][p].length;m++){b=m==h[r][p].length-1?h[r][ci(p+1,t.geometry.coordinates[r].length-1)][0].coord:h[r][p][m+1].coord;var _=y.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0];h[r][p][m].nxtIsectAlongEdgeIn=_.index}for(r=0;r<h.length;r++)for(p=0;p<h[r].length;p++)for(m=0;m<h[r][p].length;m++){var b=h[r][p][m].coord,w=(_=y.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0]).index;w<o?f[w].nxtIsectAlongRingAndEdge2=h[r][p][m].nxtIsectAlongEdgeIn:ui(f[w].ringAndEdge1,h[r][p][m].ringAndEdgeIn)?f[w].nxtIsectAlongRingAndEdge1=h[r][p][m].nxtIsectAlongEdgeIn:f[w].nxtIsectAlongRingAndEdge2=h[r][p][m].nxtIsectAlongEdgeIn}var E=[];for(r=0,p=0;p<e;p++){var x=r;for(m=0;m<t.geometry.coordinates[p].length-1;m++)f[r].coord[0]<f[x].coord[0]&&(x=r),r++;var I=f[x].nxtIsectAlongRingAndEdge2;for(m=0;m<f.length;m++)if(f[m].nxtIsectAlongRingAndEdge1==x||f[m].nxtIsectAlongRingAndEdge2==x){var O=m;break}var S=si([f[O].coord,f[x].coord,f[I].coord],!0)?1:-1;E.push({isect:x,parent:-1,winding:S})}for(E.sort((function(t,e){return f[t.isect].coord>f[e.isect].coord?-1:1})),u=[];E.length>0;){var C=E.pop(),T=C.isect,N=C.parent,k=C.winding,A=u.length,P=[f[T].coord],R=T;if(f[T].ringAndEdge1Walkable)var L=f[T].ringAndEdge1,j=f[T].nxtIsectAlongRingAndEdge1;else L=f[T].ringAndEdge2,j=f[T].nxtIsectAlongRingAndEdge2;for(;!ui(f[T].coord,f[j].coord);){P.push(f[j].coord);var M=void 0;for(r=0;r<E.length;r++)if(E[r].isect==j){M=r;break}if(null!=M&&E.splice(M,1),ui(L,f[j].ringAndEdge1)){if(L=f[j].ringAndEdge2,f[j].ringAndEdge2Walkable=!1,f[j].ringAndEdge1Walkable){var D={isect:j};si([f[R].coord,f[j].coord,f[f[j].nxtIsectAlongRingAndEdge2].coord],1==k)?(D.parent=N,D.winding=-k):(D.parent=A,D.winding=k),E.push(D)}R=j,j=f[j].nxtIsectAlongRingAndEdge2}else L=f[j].ringAndEdge1,f[j].ringAndEdge1Walkable=!1,f[j].ringAndEdge2Walkable&&(D={isect:j},si([f[R].coord,f[j].coord,f[f[j].nxtIsectAlongRingAndEdge1].coord],1==k)?(D.parent=N,D.winding=-k):(D.parent=A,D.winding=k),E.push(D)),R=j,j=f[j].nxtIsectAlongRingAndEdge1}P.push(f[j].coord),u.push(l([P],{index:A,parent:N,winding:k,netWinding:void 0}))}function F(){for(var t=[],e=0;e<c.features.length;e++)-1==c.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,r=0;r<c.features.length;r++)t[e]!=r&&ye(c.features[t[e]].geometry.coordinates[0][0],c.features[r],{ignoreBoundary:!0})&&Vr(c.features[r])<1/0&&(n=r);c.features[t[e]].properties.parent=n}}function q(){for(var t=0;t<c.features.length;t++)if(-1==c.features[t].properties.parent){var e=c.features[t].properties.winding;c.features[t].properties.netWinding=e,U(t,e)}}function U(t,e){for(var n=0;n<c.features.length;n++)if(c.features[n].properties.parent==t){var r=e+c.features[n].properties.winding;c.features[n].properties.netWinding=r,U(n,r)}}return c=d(u),F(),q(),c}(t),(function(n){e.push(l(n.geometry.coordinates,t.properties))}))})),d(e)},e.validateBBox=k,e.validateId=A,e.voronoi=function(t,e){if(!N(e=e||{}))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return F(t,"Point","points"),d(function(){var t=$s,e=Qs,n=null;function r(r){return new Aa(r.map((function(n,i){var o=[Math.round(t(n,i,r)/Ta)*Ta,Math.round(e(n,i,r)/Ta)*Ta];return o.index=i,o.data=n,o})),n)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t="function"==typeof e?e:Xs(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:Xs(+t),r):e},r.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r}().x((function(t){return t.geometry.coordinates[0]})).y((function(t){return t.geometry.coordinates[1]})).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(Pa))},e.within=_e,Object.defineProperty(e,"__esModule",{value:!0})}))}).call(this,n("4362"))},"5a34":function(t,e,n){var r=n("44e7");t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},"5bd2":function(t,e,n){"use strict";var r=n("dd76"),i=n("216d"),o=n("7a23"),s={name:"Dialog",inheritAttrs:!1,emits:["update:visible","show","hide","maximize","unmaximize","dragend"],props:{header:null,footer:null,visible:Boolean,modal:Boolean,contentStyle:null,contentClass:String,rtl:Boolean,maximizable:Boolean,dismissableMask:Boolean,closable:{type:Boolean,default:!0},closeOnEscape:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},autoZIndex:{type:Boolean,default:!0},ariaCloseLabel:{type:String,default:"close"},position:{type:String,default:"center"},breakpoints:{type:Object,default:null},draggable:{type:Boolean,default:!0},keepInViewport:{type:Boolean,default:!0},minX:{type:Number,default:0},minY:{type:Number,default:0}},data(){return{containerVisible:this.visible,maximized:!1}},documentKeydownListener:null,container:null,mask:null,styleElement:null,dragging:null,documentDragListener:null,documentDragEndListener:null,lastPageX:null,lastPageY:null,updated(){this.visible&&(this.containerVisible=this.visible)},beforeUnmount(){this.unbindDocumentState(),this.unbindGlobalListeners(),this.destroyStyle(),this.mask=null,this.container&&this.autoZIndex&&r["f"].clear(this.container),this.container=null},mounted(){this.breakpoints&&this.createStyle()},methods:{close(){this.$emit("update:visible",!1)},onBeforeEnter(t){this.autoZIndex&&r["f"].set("modal",t,this.baseZIndex+this.$primevue.config.zIndex.modal),t.setAttribute(this.attributeSelector,"")},onEnter(){this.mask.style.zIndex=String(parseInt(this.container.style.zIndex,10)-1),this.$emit("show"),this.focus(),this.enableDocumentSettings(),this.bindGlobalListeners()},onBeforeLeave(){r["b"].addClass(this.mask,"p-dialog-mask-leave")},onLeave(){this.$emit("hide")},onAfterLeave(t){this.autoZIndex&&r["f"].clear(t),this.containerVisible=!1,this.unbindDocumentState(),this.unbindGlobalListeners()},onMaskClick(t){this.dismissableMask&&this.closable&&this.modal&&this.mask===t.target&&this.close()},focus(){let t=this.container.querySelector("[autofocus]");t&&t.focus()},maximize(t){this.maximized?(this.maximized=!1,this.$emit("unmaximize",t)):(this.maximized=!0,this.$emit("maximize",t)),this.modal||(this.maximized?r["b"].addClass(document.body,"p-overflow-hidden"):r["b"].removeClass(document.body,"p-overflow-hidden"))},enableDocumentSettings(){(this.modal||this.maximizable&&this.maximized)&&r["b"].addClass(document.body,"p-overflow-hidden")},unbindDocumentState(){(this.modal||this.maximizable&&this.maximized)&&r["b"].removeClass(document.body,"p-overflow-hidden")},onKeyDown(t){if(9===t.which){t.preventDefault();let e=r["b"].getFocusableElements(this.container);if(e&&e.length>0)if(document.activeElement){let n=e.indexOf(document.activeElement);t.shiftKey?-1==n||0===n?e[e.length-1].focus():e[n-1].focus():-1==n||n===e.length-1?e[0].focus():e[n+1].focus()}else e[0].focus()}else 27===t.which&&this.closeOnEscape&&this.close()},bindDocumentKeyDownListener(){this.documentKeydownListener||(this.documentKeydownListener=this.onKeyDown.bind(this),window.document.addEventListener("keydown",this.documentKeydownListener))},unbindDocumentKeyDownListener(){this.documentKeydownListener&&(window.document.removeEventListener("keydown",this.documentKeydownListener),this.documentKeydownListener=null)},getPositionClass(){const t=["left","right","top","topleft","topright","bottom","bottomleft","bottomright"],e=t.find(t=>t===this.position);return e?"p-dialog-"+e:""},containerRef(t){this.container=t},maskRef(t){this.mask=t},createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let t="";for(let e in this.breakpoints)t+=`\n                        @media screen and (max-width: ${e}) {\n                            .p-dialog[${this.attributeSelector}] {\n                                width: ${this.breakpoints[e]} !important;\n                            }\n                        }\n                    `;this.styleElement.innerHTML=t}},destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)},initDrag(t){r["b"].hasClass(t.target,"p-dialog-header-icon")||r["b"].hasClass(t.target.parentElement,"p-dialog-header-icon")||this.draggable&&(this.dragging=!0,this.lastPageX=t.pageX,this.lastPageY=t.pageY,this.container.style.margin="0",r["b"].addClass(document.body,"p-unselectable-text"))},bindGlobalListeners(){this.draggable&&(this.bindDocumentDragListener(),this.bindDocumentDragEndListener()),this.closeOnEscape&&this.closable&&this.bindDocumentKeyDownListener()},unbindGlobalListeners(){this.unbindDocumentDragListener(),this.unbindDocumentDragEndListener(),this.unbindDocumentKeyDownListener()},bindDocumentDragListener(){this.documentDragListener=t=>{if(this.dragging){let e=r["b"].getOuterWidth(this.container),n=r["b"].getOuterHeight(this.container),i=t.pageX-this.lastPageX,o=t.pageY-this.lastPageY,s=this.container.getBoundingClientRect(),a=s.left+i,u=s.top+o,c=r["b"].getViewport();this.container.style.position="fixed",this.keepInViewport?(a>=this.minX&&a+e<c.width&&(this.lastPageX=t.pageX,this.container.style.left=a+"px"),u>=this.minY&&u+n<c.height&&(this.lastPageY=t.pageY,this.container.style.top=u+"px")):(this.lastPageX=t.pageX,this.container.style.left=a+"px",this.lastPageY=t.pageY,this.container.style.top=u+"px")}},window.document.addEventListener("mousemove",this.documentDragListener)},unbindDocumentDragListener(){this.documentDragListener&&(window.document.removeEventListener("mousemove",this.documentDragListener),this.documentDragListener=null)},bindDocumentDragEndListener(){this.documentDragEndListener=t=>{this.dragging&&(this.dragging=!1,r["b"].removeClass(document.body,"p-unselectable-text"),this.$emit("dragend",t))},window.document.addEventListener("mouseup",this.documentDragEndListener)},unbindDocumentDragEndListener(){this.documentDragEndListener&&(window.document.removeEventListener("mouseup",this.documentDragEndListener),this.documentDragEndListener=null)}},computed:{maskClass(){return["p-dialog-mask",{"p-component-overlay":this.modal},this.getPositionClass()]},dialogClass(){return["p-dialog p-component",{"p-dialog-rtl":this.rtl,"p-dialog-maximized":this.maximizable&&this.maximized,"p-input-filled":"filled"===this.$primevue.config.inputStyle,"p-ripple-disabled":!1===this.$primevue.config.ripple}]},maximizeIconClass(){return["p-dialog-header-maximize-icon pi",{"pi-window-maximize":!this.maximized,"pi-window-minimize":this.maximized}]},ariaId(){return Object(r["e"])()},ariaLabelledById(){return null!=this.header?this.ariaId+"_header":null},attributeSelector(){return Object(r["e"])()},contentStyleClass(){return["p-dialog-content",this.contentClass]}},directives:{ripple:i["a"]}};const a={class:"p-dialog-header-icons"},u=Object(o["j"])("span",{class:"p-dialog-header-close-icon pi pi-times"},null,-1),c={key:1,class:"p-dialog-footer"};function l(t,e,n,r,i,s){const l=Object(o["D"])("ripple");return Object(o["u"])(),Object(o["g"])(o["b"],{to:"body"},[i.containerVisible?(Object(o["u"])(),Object(o["g"])("div",{key:0,ref:s.maskRef,class:s.maskClass,onClick:e[4]||(e[4]=(...t)=>s.onMaskClick&&s.onMaskClick(...t))},[Object(o["j"])(o["c"],{name:"p-dialog",onBeforeEnter:s.onBeforeEnter,onEnter:s.onEnter,onBeforeLeave:s.onBeforeLeave,onLeave:s.onLeave,onAfterLeave:s.onAfterLeave,appear:""},{default:Object(o["L"])(()=>[n.visible?(Object(o["u"])(),Object(o["g"])("div",Object(o["o"])({key:0,ref:s.containerRef,class:s.dialogClass},t.$attrs,{role:"dialog","aria-labelledby":s.ariaLabelledById,"aria-modal":n.modal}),[n.showHeader?(Object(o["u"])(),Object(o["g"])("div",{key:0,class:"p-dialog-header",onMousedown:e[3]||(e[3]=(...t)=>s.initDrag&&s.initDrag(...t))},[Object(o["B"])(t.$slots,"header",{},()=>[n.header?(Object(o["u"])(),Object(o["g"])("span",{key:0,id:s.ariaLabelledById,class:"p-dialog-title"},Object(o["F"])(n.header),9,["id"])):Object(o["h"])("",!0)]),Object(o["j"])("div",a,[n.maximizable?Object(o["M"])((Object(o["u"])(),Object(o["g"])("button",{key:0,class:"p-dialog-header-icon p-dialog-header-maximize p-link",onClick:e[1]||(e[1]=(...t)=>s.maximize&&s.maximize(...t)),type:"button",tabindex:"-1"},[Object(o["j"])("span",{class:s.maximizeIconClass},null,2)],512)),[[l]]):Object(o["h"])("",!0),n.closable?Object(o["M"])((Object(o["u"])(),Object(o["g"])("button",{key:1,class:"p-dialog-header-icon p-dialog-header-close p-link",onClick:e[2]||(e[2]=(...t)=>s.close&&s.close(...t)),"aria-label":n.ariaCloseLabel,type:"button",tabindex:"-1"},[u],8,["aria-label"])),[[l]]):Object(o["h"])("",!0)])],32)):Object(o["h"])("",!0),Object(o["j"])("div",{class:s.contentStyleClass,style:n.contentStyle},[Object(o["B"])(t.$slots,"default")],6),n.footer||t.$slots.footer?(Object(o["u"])(),Object(o["g"])("div",c,[Object(o["B"])(t.$slots,"footer",{},()=>[Object(o["i"])(Object(o["F"])(n.footer),1)])])):Object(o["h"])("",!0)],16,["aria-labelledby","aria-modal"])):Object(o["h"])("",!0)]),_:3},8,["onBeforeEnter","onEnter","onBeforeLeave","onLeave","onAfterLeave"])],2)):Object(o["h"])("",!0)])}function h(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var f="\n.p-dialog-mask {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    pointer-events: none;\n    background-color: transparent;\n    -webkit-transition-property: background-color;\n    transition-property: background-color;\n}\n.p-dialog-mask.p-component-overlay {\n    pointer-events: auto;\n}\n.p-dialog {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    pointer-events: auto;\n    max-height: 90%;\n    -webkit-transform: scale(1);\n            transform: scale(1);\n}\n.p-dialog-content {\n    overflow-y: auto;\n}\n.p-dialog-header {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n    -ms-flex-negative: 0;\n        flex-shrink: 0;\n}\n.p-dialog-footer {\n    -ms-flex-negative: 0;\n        flex-shrink: 0;\n}\n.p-dialog .p-dialog-header-icons {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.p-dialog .p-dialog-header-icon {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    overflow: hidden;\n    position: relative;\n}\n\n/* Fluid */\n.p-fluid .p-dialog-footer .p-button {\n    width: auto;\n}\n\n/* Animation */\n/* Center */\n.p-dialog-enter-active {\n    -webkit-transition: all 150ms cubic-bezier(0, 0, 0.2, 1);\n    transition: all 150ms cubic-bezier(0, 0, 0.2, 1);\n}\n.p-dialog-leave-active {\n    -webkit-transition: all 150ms cubic-bezier(0.4, 0.0, 0.2, 1);\n    transition: all 150ms cubic-bezier(0.4, 0.0, 0.2, 1);\n}\n.p-dialog-enter-from,\n.p-dialog-leave-to {\n    opacity: 0;\n    -webkit-transform: scale(0.7);\n            transform: scale(0.7);\n}\n.p-dialog-mask.p-dialog-mask-leave {\n    background-color: transparent;\n}\n\n/* Top, Bottom, Left, Right, Top* and Bottom* */\n.p-dialog-top .p-dialog,\n.p-dialog-bottom .p-dialog,\n.p-dialog-left .p-dialog,\n.p-dialog-right .p-dialog,\n.p-dialog-topleft .p-dialog,\n.p-dialog-topright .p-dialog,\n.p-dialog-bottomleft .p-dialog,\n.p-dialog-bottomright .p-dialog {\n    margin: .75rem;\n    -webkit-transform: translate3d(0px, 0px, 0px);\n            transform: translate3d(0px, 0px, 0px);\n}\n.p-dialog-top .p-dialog-enter-active,\n.p-dialog-top .p-dialog-leave-active,\n.p-dialog-bottom .p-dialog-enter-active,\n.p-dialog-bottom .p-dialog-leave-active,\n.p-dialog-left .p-dialog-enter-active,\n.p-dialog-left .p-dialog-leave-active,\n.p-dialog-right .p-dialog-enter-active,\n.p-dialog-right .p-dialog-leave-active,\n.p-dialog-topleft .p-dialog-enter-active,\n.p-dialog-topleft .p-dialog-leave-active,\n.p-dialog-topright .p-dialog-enter-active,\n.p-dialog-topright .p-dialog-leave-active,\n.p-dialog-bottomleft .p-dialog-enter-active,\n.p-dialog-bottomleft .p-dialog-leave-active,\n.p-dialog-bottomright .p-dialog-enter-active,\n.p-dialog-bottomright .p-dialog-leave-active {\n    -webkit-transition: all .3s ease-out;\n    transition: all .3s ease-out;\n}\n.p-dialog-top .p-dialog-enter-from,\n.p-dialog-top .p-dialog-leave-to {\n    -webkit-transform: translate3d(0px, -100%, 0px);\n            transform: translate3d(0px, -100%, 0px);\n}\n.p-dialog-bottom .p-dialog-enter-from,\n.p-dialog-bottom .p-dialog-leave-to {\n    -webkit-transform: translate3d(0px, 100%, 0px);\n            transform: translate3d(0px, 100%, 0px);\n}\n.p-dialog-left .p-dialog-enter-from,\n.p-dialog-left .p-dialog-leave-to,\n.p-dialog-topleft .p-dialog-enter-from,\n.p-dialog-topleft .p-dialog-leave-to,\n.p-dialog-bottomleft .p-dialog-enter-from,\n.p-dialog-bottomleft .p-dialog-leave-to {\n    -webkit-transform: translate3d(-100%, 0px, 0px);\n            transform: translate3d(-100%, 0px, 0px);\n}\n.p-dialog-right .p-dialog-enter-from,\n.p-dialog-right .p-dialog-leave-to,\n.p-dialog-topright .p-dialog-enter-from,\n.p-dialog-topright .p-dialog-leave-to,\n.p-dialog-bottomright .p-dialog-enter-from,\n.p-dialog-bottomright .p-dialog-leave-to {\n    -webkit-transform: translate3d(100%, 0px, 0px);\n            transform: translate3d(100%, 0px, 0px);\n}\n\n/* Maximize */\n.p-dialog-maximized {\n    -webkit-transition: none;\n    transition: none;\n    -webkit-transform: none;\n            transform: none;\n    width: 100vw !important;\n    max-height: 100%;\n    height: 100%;\n}\n.p-dialog-maximized .p-dialog-content {\n    -webkit-box-flex: 1;\n        -ms-flex-positive: 1;\n            flex-grow: 1;\n}\n\n/* Position */\n.p-dialog-left {\n    -webkit-box-pack: start;\n        -ms-flex-pack: start;\n            justify-content: flex-start;\n}\n.p-dialog-right {\n    -webkit-box-pack: end;\n        -ms-flex-pack: end;\n            justify-content: flex-end;\n}\n.p-dialog-top {\n    -webkit-box-align: start;\n        -ms-flex-align: start;\n            align-items: flex-start;\n}\n.p-dialog-topleft {\n    -webkit-box-pack: start;\n        -ms-flex-pack: start;\n            justify-content: flex-start;\n    -webkit-box-align: start;\n        -ms-flex-align: start;\n            align-items: flex-start;\n}\n.p-dialog-topright {\n    -webkit-box-pack: end;\n        -ms-flex-pack: end;\n            justify-content: flex-end;\n    -webkit-box-align: start;\n        -ms-flex-align: start;\n            align-items: flex-start;\n}\n.p-dialog-bottom {\n    -webkit-box-align: end;\n        -ms-flex-align: end;\n            align-items: flex-end;\n}\n.p-dialog-bottomleft {\n    -webkit-box-pack: start;\n        -ms-flex-pack: start;\n            justify-content: flex-start;\n    -webkit-box-align: end;\n        -ms-flex-align: end;\n            align-items: flex-end;\n}\n.p-dialog-bottomright {\n    -webkit-box-pack: end;\n        -ms-flex-pack: end;\n            justify-content: flex-end;\n    -webkit-box-align: end;\n        -ms-flex-align: end;\n            align-items: flex-end;\n}\n.p-confirm-dialog .p-dialog-content {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n";h(f),s.render=l,e["a"]=s},"5c6c":function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"5fcf":function(t,e,n){"use strict";var r=n("cc84"),i=n("ffa6"),o=n("9ab4"),s=n("a8e9"),a=n("abfd");function u(t){return t&&"object"===typeof t&&"default"in t?t:{default:t}}var c,l=u(r),h=(c={},c["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",c["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",c["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",c["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",c["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",c["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",c["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",c["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",c["recaptcha-error"]="ReCAPTCHA error.",c),f=new s.ErrorFactory("appCheck","AppCheck",h),p=new Map,d={activated:!1,tokenObservers:[]},g={enabled:!1};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(t){return p.get(t)||d}function y(t,e){p.set(t,e)}function m(){return g}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _(){return self.grecaptcha}function b(t){if(!v(t).activated)throw f.create("use-before-activation",{appName:t.name})}function w(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var E="https://www.google.com/recaptcha/api.js";function x(t,e){var n=v(t),r=new s.Deferred;y(t,o.__assign(o.__assign({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+t.name,a=document.createElement("div");a.id=i,a.style.display="none",document.body.appendChild(a);var u=_();return u?u.ready((function(){O(t,e,u,i),r.resolve(u)})):S((function(){var n=_();if(!n)throw new Error("no recaptcha");n.ready((function(){O(t,e,n,i),r.resolve(n)}))})),r.promise}function I(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(r){switch(r.label){case 0:return b(t),e=v(t).reCAPTCHAState,[4,e.initialized.promise];case 1:return n=r.sent(),[2,new Promise((function(e,r){var i=v(t).reCAPTCHAState;n.ready((function(){e(n.execute(i.widgetId,{action:"fire_app_check"}))}))}))]}}))}))}function O(t,e,n,r){var i=n.render(r,{sitekey:e,size:"invisible"}),s=v(t);y(t,o.__assign(o.__assign({},s),{reCAPTCHAState:o.__assign(o.__assign({},s.reCAPTCHAState),{widgetId:i})}))}function S(t){var e=document.createElement("script");e.src=""+E,e.onload=t,document.head.appendChild(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var C="https://content-firebaseappcheck.googleapis.com/v1beta",T="exchangeRecaptchaToken",N="exchangeDebugToken",k={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4},A=function(){function t(t,e,n,r,i){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return t.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((function(){}))},t.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},t.prototype.isRunning=function(){return!!this.pending},t.prototype.process=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new s.Deferred,[4,P(this.getNextRun(t))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new s.Deferred,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch((function(){})),[3,7];case 6:return e=n.sent(),this.retryPolicy(e)?this.process(!1).catch((function(){})):this.stop(),[3,7];case 7:return[2]}}))}))},t.prototype.getNextRun=function(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e},t}();function P(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R(t,e){var n=t.url,r=t.body;return o.__awaiter(this,void 0,void 0,(function(){var t,i,s,a,u,c,l,h,p,d;return o.__generator(this,(function(o){switch(o.label){case 0:t={"Content-Type":"application/json"},i=e.getImmediate({optional:!0}),i&&(t["X-Firebase-Client"]=i.getPlatformInfoString()),s={method:"POST",body:JSON.stringify(r),headers:t},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(n,s)];case 2:return a=o.sent(),[3,4];case 3:throw u=o.sent(),f.create("fetch-network-error",{originalErrorMessage:u.message});case 4:if(200!==a.status)throw f.create("fetch-status-error",{httpStatus:a.status});o.label=5;case 5:return o.trys.push([5,7,,8]),[4,a.json()];case 6:return c=o.sent(),[3,8];case 7:throw l=o.sent(),f.create("fetch-parse-error",{originalErrorMessage:l.message});case 8:if(h=c.ttl.match(/^([\d.]+)(s)$/),!h||!h[2]||isNaN(Number(h[1])))throw f.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+c.ttl});return p=1e3*Number(h[1]),d=Date.now(),[2,{token:c.attestationToken,expireTimeMillis:d+p,issuedAtTimeMillis:d}]}}))}))}function L(t,e){var n=t.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:C+"/projects/"+r+"/apps/"+i+":"+T+"?key="+o,body:{recaptcha_token:e}}}function j(t,e){var n=t.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:C+"/projects/"+r+"/apps/"+i+":"+N+"?key="+o,body:{debug_token:e}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var M="firebase-app-check-database",D=1,F="firebase-app-check-store",q="debug-token",U=null;function B(){return U||(U=new Promise((function(t,e){try{var n=indexedDB.open(M,D);n.onsuccess=function(e){t(e.target.result)},n.onerror=function(t){var n;e(f.create("storage-open",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(F,{keyPath:"compositeKey"})}}}catch(r){e(f.create("storage-open",{originalErrorMessage:r.message}))}})),U)}function V(t){return H(Y(t))}function G(t,e){return K(Y(t),e)}function z(t){return K(q,t)}function W(){return H(q)}function K(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,s;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,B()];case 1:return n=o.sent(),r=n.transaction(F,"readwrite"),i=r.objectStore(F),s=i.put({compositeKey:t,value:e}),[2,new Promise((function(t,e){s.onsuccess=function(e){t()},r.onerror=function(t){var n;e(f.create("storage-set",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function H(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r,i;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,B()];case 1:return e=o.sent(),n=e.transaction(F,"readonly"),r=n.objectStore(F),i=r.get(t),[2,new Promise((function(t,e){i.onsuccess=function(e){var n=e.target.result;t(n?n.value:void 0)},n.onerror=function(t){var n;e(f.create("storage-get",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function Y(t){return t.options.appId+"-"+t.name}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var X=new a.Logger("@firebase/app-check");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!s.isIndexedDBAvailable())return[3,5];e=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,V(t)];case 2:return e=r.sent(),[3,4];case 3:return n=r.sent(),X.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,e];case 5:return[2,void 0]}}))}))}function Q(t,e){return s.isIndexedDBAvailable()?G(t,e).catch((function(t){X.warn("Failed to write token to indexeddb. Error: "+t)})):Promise.resolve()}function J(){return o.__awaiter(this,void 0,void 0,(function(){var t,e;return o.__generator(this,(function(n){switch(n.label){case 0:t=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,W()];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return t?[2,t]:(e=w(),z(e).catch((function(t){return X.warn("Failed to persist debug token to indexeddb. Error: "+t)})),console.log("AppCheck debug token: "+e+". You will need to whitelist it in the Firebase console for it to work"),[2,e])}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(){var t=m();return t.enabled}function tt(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){if(t=m(),t.enabled&&t.token)return[2,t.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")}))}))}function et(){var t=s.getGlobal();if("string"===typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===t.FIREBASE_APPCHECK_DEBUG_TOKEN){var e=m();e.enabled=!0;var n=new s.Deferred;e.token=n,"string"===typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(J())}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt={error:"UNKNOWN_ERROR"};function rt(t){return s.base64.encodeString(JSON.stringify(t),!1)}function it(t,e,n){return void 0===n&&(n=!1),o.__awaiter(this,void 0,void 0,(function(){var r,i,a,u,c,l,h,p,d,g,m,_,w,E;return o.__generator(this,(function(x){switch(x.label){case 0:return b(t),r=v(t),i=r.token,a=void 0,i?[3,2]:[4,$(t)];case 1:u=x.sent(),u&&ct(u)&&(i=u,y(t,o.__assign(o.__assign({},r),{token:i})),ut(t,{token:i.token})),x.label=2;case 2:return!n&&i&&ct(i)?[2,{token:i.token}]:Z()?(l=R,h=j,p=[t],[4,tt()]):[3,6];case 3:return[4,l.apply(void 0,[h.apply(void 0,p.concat([x.sent()])),e])];case 4:return c=x.sent(),[4,Q(t,c)];case 5:return x.sent(),y(t,o.__assign(o.__assign({},r),{token:c})),[2,{token:c.token}];case 6:return x.trys.push([6,12,,13]),r.customProvider?[4,r.customProvider.getToken()]:[3,8];case 7:return d=x.sent(),g=s.issuedAtTime(d.token),m=null!==g&&g<Date.now()&&g>0?1e3*g:Date.now(),i=o.__assign(o.__assign({},d),{issuedAtTimeMillis:m}),[3,11];case 8:return[4,I(t).catch((function(t){throw f.create("recaptcha-error")}))];case 9:return _=x.sent(),[4,R(L(t,_),e)];case 10:i=x.sent(),x.label=11;case 11:return[3,13];case 12:return w=x.sent(),X.error(w),a=w,[3,13];case 13:return i?[3,14]:(E=lt(a),[3,16]);case 14:return E={token:i.token},y(t,o.__assign(o.__assign({},r),{token:i})),[4,Q(t,i)];case 15:x.sent(),x.label=16;case 16:return ut(t,E),[2,E]}}))}))}function ot(t,e,n,r,i){var s=v(t),a={next:r,error:i,type:n},u=o.__assign(o.__assign({},s),{tokenObservers:o.__spreadArray(o.__spreadArray([],s.tokenObservers),[a])});if(!u.tokenRefresher){var c=at(t,e);u.tokenRefresher=c}if(u.tokenRefresher.isRunning()||!0!==s.isTokenAutoRefreshEnabled||u.tokenRefresher.start(),s.token&&ct(s.token)){var l=s.token;Promise.resolve().then((function(){return r({token:l.token})})).catch((function(){}))}y(t,u)}function st(t,e){var n=v(t),r=n.tokenObservers.filter((function(t){return t.next!==e}));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),y(t,o.__assign(o.__assign({},n),{tokenObservers:r}))}function at(t,e){var n=this;return new A((function(){return o.__awaiter(n,void 0,void 0,(function(){var n,r;return o.__generator(this,(function(i){switch(i.label){case 0:return n=v(t),n.token?[3,2]:[4,it(t,e)];case 1:return r=i.sent(),[3,4];case 2:return[4,it(t,e,!0)];case 3:r=i.sent(),i.label=4;case 4:if(r.error)throw r.error;return[2]}}))}))}),(function(){return!0}),(function(){var e=v(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5,r=e.token.expireTimeMillis-3e5;return n=Math.min(n,r),Math.max(0,n-Date.now())}return 0}),k.RETRIAL_MIN_WAIT,k.RETRIAL_MAX_WAIT)}function ut(t,e){for(var n=v(t).tokenObservers,r=0,i=n;r<i.length;r++){var o=i[r];try{"EXTERNAL"===o.type&&null!=e.error?o.error(e.error):o.next(e)}catch(s){}}}function ct(t){return t.expireTimeMillis-Date.now()>0}function lt(t){return{token:rt(nt),error:t}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(t,e,n){var r=v(t);if(r.activated)throw f.create("already-activated",{appName:t.name});var i=o.__assign(o.__assign({},r),{activated:!0});"string"===typeof e?i.siteKey=e:i.customProvider=e,i.isTokenAutoRefreshEnabled=void 0===n?t.automaticDataCollectionEnabled:n,y(t,i),i.siteKey&&x(t,i.siteKey).catch((function(){}))}function ft(t,e){var n=v(t);n.tokenRefresher&&(!0===e?n.tokenRefresher.start():n.tokenRefresher.stop()),y(t,o.__assign(o.__assign({},n),{isTokenAutoRefreshEnabled:e}))}function pt(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var r;return o.__generator(this,(function(i){switch(i.label){case 0:return[4,it(t,e,n)];case 1:if(r=i.sent(),r.error)throw r.error;return[2,{token:r.token}]}}))}))}function dt(t,e,n,r,i){var o=function(){},s=function(){};return o=null!=n.next?n.next.bind(n):n,null!=n.error?s=n.error.bind(n):r&&(s=r),ot(t,e,"EXTERNAL",o,s),function(){return st(t,o)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(t,e){return{app:t,activate:function(e,n){return ht(t,e,n)},setTokenAutoRefreshEnabled:function(e){return ft(t,e)},getToken:function(n){return pt(t,e,n)},onTokenChanged:function(n,r,i){return dt(t,e,n,r)},INTERNAL:{delete:function(){for(var e=v(t).tokenObservers,n=0,r=e;n<r.length;n++){var i=r[n];st(t,i.next)}return Promise.resolve()}}}}function vt(t,e){return{getToken:function(n){return it(t,e,n)},addTokenListener:function(n){return ot(t,e,"INTERNAL",n)},removeTokenListener:function(e){return st(t,e)}}}var yt="@firebase/app-check",mt="0.2.0",_t="appCheck",bt="app-check-internal";function wt(t){t.INTERNAL.registerComponent(new i.Component(_t,(function(t){var e=t.getProvider("app").getImmediate(),n=t.getProvider("platform-logger");return gt(e,n)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(t,e,n){var r=t.getProvider(bt);r.initialize()}))),t.INTERNAL.registerComponent(new i.Component(bt,(function(t){var e=t.getProvider("app").getImmediate(),n=t.getProvider("platform-logger");return vt(e,n)}),"PUBLIC").setInstantiationMode("EXPLICIT")),t.registerVersion(yt,mt)}wt(l["default"]),et()},"605d":function(t,e,n){var r=n("c6b6"),i=n("da84");t.exports="process"==r(i.process)},"60da":function(t,e,n){"use strict";var r=n("83ab"),i=n("d039"),o=n("df75"),s=n("7418"),a=n("d1e7"),u=n("7b0b"),c=n("44ad"),l=Object.assign,h=Object.defineProperty;t.exports=!l||i((function(){if(r&&1!==l({b:1},l(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!=l({},t)[n]||o(l({},e)).join("")!=i}))?function(t,e){var n=u(t),i=arguments.length,l=1,h=s.f,f=a.f;while(i>l){var p,d=c(arguments[l++]),g=h?o(d).concat(h(d)):o(d),v=g.length,y=0;while(v>y)p=g[y++],r&&!f.call(d,p)||(n[p]=d[p])}return n}:l},"62e4":function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},6547:function(t,e,n){var r=n("a691"),i=n("1d80"),o=function(t){return function(e,n){var o,s,a=String(i(e)),u=r(n),c=a.length;return u<0||u>=c?t?"":void 0:(o=a.charCodeAt(u),o<55296||o>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):s-56320+(o-55296<<10)+65536)}};t.exports={codeAt:o(!1),charAt:o(!0)}},"65f0":function(t,e,n){var r=n("861d"),i=n("e8b5"),o=n("b622"),s=o("species");t.exports=function(t,e){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?r(n)&&(n=n[s],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},"69f3":function(t,e,n){var r,i,o,s=n("7f9a"),a=n("da84"),u=n("861d"),c=n("9112"),l=n("5135"),h=n("c6cd"),f=n("f772"),p=n("d012"),d=a.WeakMap,g=function(t){return o(t)?i(t):r(t,{})},v=function(t){return function(e){var n;if(!u(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}};if(s){var y=h.state||(h.state=new d),m=y.get,_=y.has,b=y.set;r=function(t,e){return e.facade=t,b.call(y,t,e),e},i=function(t){return m.call(y,t)||{}},o=function(t){return _.call(y,t)}}else{var w=f("state");p[w]=!0,r=function(t,e){return e.facade=t,c(t,w,e),e},i=function(t){return l(t,w)?t[w]:{}},o=function(t){return l(t,w)}}t.exports={set:r,get:i,has:o,enforce:g,getterFor:v}},"6b75":function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",(function(){return r}))},"6b8c":function(t,e,n){"use strict";var r=n("dd76");function i(t){const e=t.$_ptooltipModifiers;e.focus?(t.addEventListener("focus",l),t.addEventListener("blur",h)):(t.addEventListener("mouseenter",u),t.addEventListener("mouseleave",c),t.addEventListener("click",f))}function o(t){const e=t.$_ptooltipModifiers;e.focus?(t.removeEventListener("focus",l),t.removeEventListener("blur",h)):(t.removeEventListener("mouseenter",u),t.removeEventListener("mouseleave",c),t.removeEventListener("click",f))}function s(t){t.$_ptooltipScrollHandler||(t.$_ptooltipScrollHandler=new r["a"](t,(function(){d(t)}))),t.$_ptooltipScrollHandler.bindScrollListener()}function a(t){t.$_ptooltipScrollHandler&&t.$_ptooltipScrollHandler.unbindScrollListener()}function u(t){p(t.currentTarget)}function c(t){d(t.currentTarget)}function l(t){p(t.currentTarget)}function h(t){d(t.currentTarget)}function f(t){d(t.currentTarget)}function p(t){if(!t.$_ptooltipValue)return;let e=v(t);m(t),r["b"].fadeIn(e,250),window.addEventListener("resize",(function e(){d(t),this.removeEventListener("resize",e)})),s(t),r["f"].set("tooltip",e,t.$_ptooltipZIndex)}function d(t){y(t),a(t),r["f"].clear(t)}function g(t){return document.getElementById(t.$_ptooltipId)}function v(t){const e=Object(r["e"])()+"_tooltip";t.$_ptooltipId=e;let n=document.createElement("div");n.id=e;let i=document.createElement("div");i.className="p-tooltip-arrow",n.appendChild(i);let o=document.createElement("div");return o.className="p-tooltip-text",o.innerHTML=t.$_ptooltipValue,n.appendChild(o),document.body.appendChild(n),n.style.display="inline-block",n}function y(t){if(t){let e=g(t);e&&e.parentElement&&document.body.removeChild(e),t.$_ptooltipId=null}}function m(t){const e=t.$_ptooltipModifiers;e.top?(E(t),O(t)&&x(t)):e.left?(w(t),O(t)&&(b(t),O(t)&&(E(t),O(t)&&x(t)))):e.bottom?(x(t),O(t)&&E(t)):(b(t),O(t)&&(w(t),O(t)&&(E(t),O(t)&&x(t))))}function _(t){let e=t.getBoundingClientRect(),n=e.left+r["b"].getWindowScrollLeft(),i=e.top+r["b"].getWindowScrollTop();return{left:n,top:i}}function b(t){I(t,"right");let e=g(t),n=_(t),i=n.left+r["b"].getOuterWidth(t),o=n.top+(r["b"].getOuterHeight(t)-r["b"].getOuterHeight(e))/2;e.style.left=i+"px",e.style.top=o+"px"}function w(t){I(t,"left");let e=g(t),n=_(t),i=n.left-r["b"].getOuterWidth(e),o=n.top+(r["b"].getOuterHeight(t)-r["b"].getOuterHeight(e))/2;e.style.left=i+"px",e.style.top=o+"px"}function E(t){I(t,"top");let e=g(t),n=_(t),i=n.left+(r["b"].getOuterWidth(t)-r["b"].getOuterWidth(e))/2,o=n.top-r["b"].getOuterHeight(e);e.style.left=i+"px",e.style.top=o+"px"}function x(t){I(t,"bottom");let e=g(t),n=_(t),i=n.left+(r["b"].getOuterWidth(t)-r["b"].getOuterWidth(e))/2,o=n.top+r["b"].getOuterHeight(t);e.style.left=i+"px",e.style.top=o+"px"}function I(t,e){let n=g(t);n.style.left="-999px",n.style.top="-999px",n.className="p-tooltip p-component p-tooltip-"+e}function O(t){let e=g(t),n=e.getBoundingClientRect(),i=n.top,o=n.left,s=r["b"].getOuterWidth(e),a=r["b"].getOuterHeight(e),u=r["b"].getViewport();return o+s>u.width||o<0||i<0||i+a>u.height}function S(t){return r["b"].hasClass(t,"p-inputwrapper")?r["b"].findSingle(t,"input"):t}const C={beforeMount(t,e){let n=S(t);n.$_ptooltipModifiers=e.modifiers,n.$_ptooltipValue=e.value,n.$_ptooltipZIndex=e.instance.$primevue&&e.instance.$primevue.config&&e.instance.$primevue.config.zIndex.tooltip,i(n)},unmounted(t){let e=S(t);y(e),o(e),e.$_ptooltipScrollHandler&&(e.$_ptooltipScrollHandler.destroy(),e.$_ptooltipScrollHandler=null),r["f"].clear(t)},updated(t,e){let n=S(t);n.$_ptooltipModifiers=e.modifiers,n.$_ptooltipValue=e.value}};e["a"]=C},"6c02":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return ue})),n.d(e,"b",(function(){return G})),n.d(e,"c",(function(){return fe})),n.d(e,"d",(function(){return he}));var r=n("7a23");
/*!
  * vue-router v4.0.0-rc.6
  * (c) 2020 Eduardo San Martin Morote
  * @license MIT
  */const i="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag,o=t=>i?Symbol(t):"_vr_"+t,s=o("rvlm"),a=o("rvd"),u=o("r"),c=o("rl"),l="undefined"!==typeof window;function h(t){return t.__esModule||i&&"Module"===t[Symbol.toStringTag]}const f=Object.assign;function p(t,e){const n={};for(const r in e){const i=e[r];n[r]=Array.isArray(i)?i.map(t):t(i)}return n}let d=()=>{};const g=/\/$/,v=t=>t.replace(g,"");function y(t,e,n="/"){let r,i={},o="",s="";const a=e.indexOf("?"),u=e.indexOf("#",a>-1?a:0);return a>-1&&(r=e.slice(0,a),o=e.slice(a+1,u>-1?u:e.length),i=t(o)),u>-1&&(r=r||e.slice(0,u),s=e.slice(u,e.length)),r=O(null!=r?r:e,n),{fullPath:r+(o&&"?")+o+s,path:r,query:i,hash:s}}function m(t,e){let n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function _(t,e){return!e||t.toLowerCase().indexOf(e.toLowerCase())?t:t.slice(e.length)||"/"}function b(t,e,n){let r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&w(e.matched[r],n.matched[i])&&E(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function w(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function E(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let n in t)if(!x(t[n],e[n]))return!1;return!0}function x(t,e){return Array.isArray(t)?I(t,e):Array.isArray(e)?I(e,t):t===e}function I(t,e){return Array.isArray(e)?t.length===e.length&&t.every((t,n)=>t===e[n]):1===t.length&&t[0]===e}function O(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/");let i,o,s=n.length-1;for(i=0;i<r.length;i++)if(o=r[i],1!==s&&"."!==o){if(".."!==o)break;s--}return n.slice(0,s).join("/")+"/"+r.slice(i-(i===r.length?1:0)).join("/")}var S,C;(function(t){t["pop"]="pop",t["push"]="push"})(S||(S={})),function(t){t["back"]="back",t["forward"]="forward",t["unknown"]=""}(C||(C={}));function T(t){if(!t)if(l){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return"/"!==t[0]&&"#"!==t[0]&&(t="/"+t),v(t)}const N=/^[^#]+#/;function k(t,e){return t.replace(N,"#")+e}function A(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const P=()=>({left:window.pageXOffset,top:window.pageYOffset});function R(t){let e;if("el"in t){let n=t.el;const r="string"===typeof n&&n.startsWith("#");0;const i="string"===typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=A(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(null!=e.left?e.left:window.pageXOffset,null!=e.top?e.top:window.pageYOffset)}function L(t,e){const n=history.state?history.state.position-e:-1;return n+t}const j=new Map;function M(t,e){j.set(t,e)}function D(t){const e=j.get(t);return j.delete(t),e}let F=()=>location.protocol+"//"+location.host;function q(t,e){const{pathname:n,search:r,hash:i}=e,o=t.indexOf("#");if(o>-1){let t=i.slice(1);return"/"!==t[0]&&(t="/"+t),_(t,"")}const s=_(n,t);return s+r+i}function U(t,e,n,r){let i=[],o=[],s=null;const a=({state:o})=>{const a=q(t,location),u=n.value,c=e.value;let l=0;if(o){if(n.value=a,e.value=o,s&&s===u)return void(s=null);l=c?o.position-c.position:0}else r(a);i.forEach(t=>{t(n.value,u,{delta:l,type:S.pop,direction:l?l>0?C.forward:C.back:C.unknown})})};function u(){s=n.value}function c(t){i.push(t);const e=()=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)};return o.push(e),e}function l(){const{history:t}=window;t.state&&t.replaceState(f({},t.state,{scroll:P()}),"")}function h(){for(const t of o)t();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",l)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",l),{pauseListeners:u,listen:c,destroy:h}}function B(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?P():null}}function V(t){const{history:e,location:n}=window;let r={value:q(t,n)},i={value:e.state};function o(r,o,s){const a=t.indexOf("#"),u=a>-1?t.slice(a)+r:F()+t+r;try{e[s?"replaceState":"pushState"](o,"",u),i.value=o}catch(c){console.error(c),n[s?"replace":"assign"](u)}}function s(t,n){const s=f({},e.state,B(i.value.back,t,i.value.forward,!0),n,{position:i.value.position});o(t,s,!0),r.value=t}function a(t,n){const s=f({},i.value,e.state,{forward:t,scroll:P()});o(s.current,s,!0);const a=f({},B(r.value,t,null),{position:s.position+1},n);o(t,a,!1),r.value=t}return i.value||o(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0),{location:r,state:i,push:a,replace:s}}function G(t){t=T(t);const e=V(t),n=U(t,e.state,e.location,e.replace);function r(t,e=!0){e||n.pauseListeners(),history.go(t)}const i=f({location:"",base:t,go:r,createHref:k.bind(null,t)},e,n);return Object.defineProperty(i,"location",{get:()=>e.location.value}),Object.defineProperty(i,"state",{get:()=>e.state.value}),i}function z(t){return"string"===typeof t||t&&"object"===typeof t}function W(t){return"string"===typeof t||"symbol"===typeof t}const K={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},H=o("nf");var Y;(function(t){t[t["aborted"]=4]="aborted",t[t["cancelled"]=8]="cancelled",t[t["duplicated"]=16]="duplicated"})(Y||(Y={}));function X(t,e){return f(new Error,{type:t,[H]:!0},e)}function $(t,e){return t instanceof Error&&H in t&&(null==e||!!(t.type&e))}const Q="[^/]+?",J={sensitive:!1,strict:!1,start:!0,end:!0},Z=/[.+*?^${}()[\]/\\]/g;function tt(t,e){const n=f({},J,e);let r=[],i=n.start?"^":"";const o=[];for(const l of t){const t=l.length?[]:[90];n.strict&&!l.length&&(i+="/");for(let e=0;e<l.length;e++){const r=l[e];let s=40+(n.sensitive?.25:0);if(0===r.type)e||(i+="/"),i+=r.value.replace(Z,"\\$&"),s+=40;else if(1===r.type){const{value:t,repeatable:n,optional:a,regexp:u}=r;o.push({name:t,repeatable:n,optional:a});const l=u||Q;if(l!==Q){s+=10;try{new RegExp(`(${l})`)}catch(c){throw new Error(`Invalid custom RegExp for param "${t}" (${l}): `+c.message)}}let h=n?`((?:${l})(?:/(?:${l}))*)`:`(${l})`;e||(h=a?`(?:/${h})`:"/"+h),a&&(h+="?"),i+=h,s+=20,a&&(s+=-8),n&&(s+=-20),".*"===l&&(s+=-50)}t.push(s)}r.push(t)}if(n.strict&&n.end){const t=r.length-1;r[t][r[t].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const s=new RegExp(i,n.sensitive?"":"i");function a(t){const e=t.match(s),n={};if(!e)return null;for(let r=1;r<e.length;r++){const t=e[r]||"",i=o[r-1];n[i.name]=t&&i.repeatable?t.split("/"):t}return n}function u(e){let n="",r=!1;for(const i of t){r&&n.endsWith("/")||(n+="/"),r=!1;for(const t of i)if(0===t.type)n+=t.value;else if(1===t.type){const{value:i,repeatable:o,optional:s}=t,a=i in e?e[i]:"";if(Array.isArray(a)&&!o)throw new Error(`Provided param "${i}" is an array but it is not repeatable (* or + modifiers)`);const u=Array.isArray(a)?a.join("/"):a;if(!u){if(!s)throw new Error(`Missing required param "${i}"`);n.endsWith("/")?n=n.slice(0,-1):r=!0}n+=u}}return n}return{re:s,score:r,keys:o,parse:a,stringify:u}}function et(t,e){let n=0;while(n<t.length&&n<e.length){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?1===t.length&&80===t[0]?-1:1:t.length>e.length?1===e.length&&80===e[0]?1:-1:0}function nt(t,e){let n=0;const r=t.score,i=e.score;while(n<r.length&&n<i.length){const t=et(r[n],i[n]);if(t)return t;n++}return i.length-r.length}const rt={type:0,value:""},it=/[a-zA-Z0-9_]/;function ot(t){if(!t)return[[]];if("/"===t)return[[rt]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(t){throw new Error(`ERR (${n})/"${c}": ${t}`)}let n=0,r=n;const i=[];let o;function s(){o&&i.push(o),o=[]}let a,u=0,c="",l="";function h(){c&&(0===n?o.push({type:0,value:c}):1===n||2===n||3===n?(o.length>1&&("*"===a||"+"===a)&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:l,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):e("Invalid state to consume buffer"),c="")}function f(){c+=a}while(u<t.length)if(a=t[u++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(c&&h(),s()):":"===a?(h(),n=1):f();break;case 4:f(),n=r;break;case 1:"("===a?(n=2,l=""):it.test(a)?f():(h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&u--);break;case 2:")"===a?"\\"==l[l.length-1]?l=l.slice(0,-1)+a:n=3:l+=a;break;case 3:h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&u--;break;default:e("Unknown state");break}else r=n,n=4;return 2===n&&e(`Unfinished custom RegExp for param "${c}"`),h(),s(),i}function st(t,e,n){const r=tt(ot(t.path),n);const i=f(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf===!e.record.aliasOf&&e.children.push(i),i}function at(t,e){const n=[],r=new Map;function i(t){return r.get(t)}function o(t,n,r){let i=!r,a=ct(t);a.aliasOf=r&&r.record;const c=pt(e,t),l=[a];if("alias"in t){const e="string"===typeof t.alias?[t.alias]:t.alias;for(const t of e)l.push(f({},a,{components:r?r.record.components:a.components,path:t,aliasOf:r?r.record:a}))}let h,p;for(const e of l){let{path:l}=e;if(n&&"/"!==l[0]){let t=n.record.path,r="/"===t[t.length-1]?"":"/";e.path=n.record.path+(l&&r+l)}if(h=st(e,n,c),r?r.alias.push(h):(p=p||h,p!==h&&p.alias.push(h),i&&t.name&&!ht(h)&&s(t.name)),"children"in a){let t=a.children;for(let e=0;e<t.length;e++)o(t[e],h,r&&r.children[e])}r=r||h,u(h)}return p?()=>{s(p)}:d}function s(t){if(W(t)){const e=r.get(t);e&&(r.delete(t),n.splice(n.indexOf(e),1),e.children.forEach(s),e.alias.forEach(s))}else{let e=n.indexOf(t);e>-1&&(n.splice(e,1),t.record.name&&r.delete(t.record.name),t.children.forEach(s),t.alias.forEach(s))}}function a(){return n}function u(t){let e=0;while(e<n.length&&nt(t,n[e])>=0)e++;n.splice(e,0,t),t.record.name&&!ht(t)&&r.set(t.record.name,t)}function c(t,e){let i,o,s,a={};if("name"in t&&t.name){if(i=r.get(t.name),!i)throw X(1,{location:t});s=i.record.name,a=f(ut(e.params,i.keys.filter(t=>!t.optional).map(t=>t.name)),t.params),o=i.stringify(a)}else if("path"in t)o=t.path,i=n.find(t=>t.re.test(o)),i&&(a=i.parse(o),s=i.record.name);else{if(i=e.name?r.get(e.name):n.find(t=>t.re.test(e.path)),!i)throw X(1,{location:t,currentLocation:e});s=i.record.name,a=f({},e.params,t.params),o=i.stringify(a)}const u=[];let c=i;while(c)u.unshift(c.record),c=c.parent;return{name:s,path:o,params:a,matched:u,meta:ft(u)}}return e=pt({strict:!1,end:!0,sensitive:!1},e),t.forEach(t=>o(t)),{addRoute:o,resolve:c,removeRoute:s,getRoutes:a,getRecordMatcher:i}}function ut(t,e){let n={};for(let r of e)r in t&&(n[r]=t[r]);return n}function ct(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:lt(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||{}:{default:t.component}}}function lt(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(let r in t.components)e[r]="boolean"===typeof n?n:n[r];return e}function ht(t){while(t){if(t.record.aliasOf)return!0;t=t.parent}return!1}function ft(t){return t.reduce((t,e)=>f(t,e.meta),{})}function pt(t,e){let n={};for(let r in t)n[r]=r in e?e[r]:t[r];return n}const dt=/#/g,gt=/&/g,vt=/\//g,yt=/=/g,mt=/\?/g,_t=/\+/g,bt=/%5B/g,wt=/%5D/g,Et=/%5E/g,xt=/%60/g,It=/%7B/g,Ot=/%7C/g,St=/%7D/g,Ct=/%20/g;function Tt(t){return encodeURI(""+t).replace(Ot,"|").replace(bt,"[").replace(wt,"]")}function Nt(t){return Tt(t).replace(It,"{").replace(St,"}").replace(Et,"^")}function kt(t){return Tt(t).replace(_t,"%2B").replace(Ct,"+").replace(dt,"%23").replace(gt,"%26").replace(xt,"`").replace(It,"{").replace(St,"}").replace(Et,"^")}function At(t){return kt(t).replace(yt,"%3D")}function Pt(t){return Tt(t).replace(dt,"%23").replace(mt,"%3F")}function Rt(t){return Pt(t).replace(vt,"%2F")}function Lt(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}function jt(t){const e={};if(""===t||"?"===t)return e;const n="?"===t[0],r=(n?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const t=r[i].replace(_t," ");let n=t.indexOf("="),o=Lt(n<0?t:t.slice(0,n)),s=n<0?null:Lt(t.slice(n+1));if(o in e){let t=e[o];Array.isArray(t)||(t=e[o]=[t]),t.push(s)}else e[o]=s}return e}function Mt(t){let e="";for(let n in t){e.length&&(e+="&");const r=t[n];if(n=At(n),null==r){void 0!==r&&(e+=n);continue}let i=Array.isArray(r)?r.map(t=>t&&kt(t)):[r&&kt(r)];for(let t=0;t<i.length;t++)e+=(t?"&":"")+n,null!=i[t]&&(e+="="+i[t])}return e}function Dt(t){const e={};for(let n in t){let r=t[n];void 0!==r&&(e[n]=Array.isArray(r)?r.map(t=>null==t?null:""+t):null==r?r:""+r)}return e}function Ft(){let t=[];function e(e){return t.push(e),()=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function qt(t,e,n,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((s,a)=>{const u=t=>{!1===t?a(X(4,{from:n,to:e})):t instanceof Error?a(t):z(t)?a(X(2,{from:e,to:t})):(o&&r.enterCallbacks[i]===o&&"function"===typeof t&&o.push(t),s())},c=t.call(r&&r.instances[i],e,n,u);let l=Promise.resolve(c);t.length<3&&(l=l.then(u)),l.catch(t=>a(t))})}function Ut(t,e,n,r){const i=[];for(const o of t)for(const t in o.components){let s=o.components[t];if("beforeRouteEnter"===e||o.instances[t])if(Bt(s)){let a=s.__vccOpts||s;const u=a[e];u&&i.push(qt(u,n,r,o,t))}else{let a=s();a=a.catch(console.error),i.push(()=>a.then(i=>{if(!i)return Promise.reject(new Error(`Couldn't resolve component "${t}" at "${o.path}"`));const s=h(i)?i.default:i;o.components[t]=s;const a=s[e];return a&&qt(a,n,r,o,t)()}))}}return i}function Bt(t){return"object"===typeof t||"displayName"in t||"props"in t||"__vccOpts"in t}function Vt(t){const e=Object(r["n"])(u),n=Object(r["n"])(c),i=Object(r["e"])(()=>e.resolve(Object(r["H"])(t.to))),o=Object(r["e"])(()=>{let{matched:t}=i.value,{length:e}=t;const r=t[e-1];let o=n.matched;if(!r||!o.length)return-1;let s=o.findIndex(w.bind(null,r));if(s>-1)return s;let a=Ht(t[e-2]);return e>1&&Ht(r)===a&&o[o.length-1].path!==a?o.findIndex(w.bind(null,t[e-2])):s}),s=Object(r["e"])(()=>o.value>-1&&Kt(n.params,i.value.params)),a=Object(r["e"])(()=>o.value>-1&&o.value===n.matched.length-1&&E(n.params,i.value.params));function l(n={}){return Wt(n)?e[Object(r["H"])(t.replace)?"replace":"push"](Object(r["H"])(t.to)):Promise.resolve()}return{route:i,href:Object(r["e"])(()=>i.value.href),isActive:s,isExactActive:a,navigate:l}}const Gt=Object(r["k"])({name:"RouterLink",props:{to:{type:[String,Object],required:!0},activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},setup(t,{slots:e,attrs:n}){const i=Object(r["y"])(Vt(t)),{options:o}=Object(r["n"])(u),s=Object(r["e"])(()=>({[Yt(t.activeClass,o.linkActiveClass,"router-link-active")]:i.isActive,[Yt(t.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const o=e.default&&e.default(i);return t.custom?o:Object(r["m"])("a",f({"aria-current":i.isExactActive?t.ariaCurrentValue:null,onClick:i.navigate,href:i.href},n,{class:s.value}),o)}}}),zt=Gt;function Wt(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&(void 0===t.button||0===t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Kt(t,e){for(let n in e){let r=e[n],i=t[n];if("string"===typeof r){if(r!==i)return!1}else if(!Array.isArray(i)||i.length!==r.length||r.some((t,e)=>t!==i[e]))return!1}return!0}function Ht(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Yt=(t,e,n)=>null!=t?t:null!=e?e:n,Xt=Object(r["k"])({name:"RouterView",props:{name:{type:String,default:"default"},route:Object},setup(t,{attrs:e,slots:n}){const i=Object(r["n"])(c),o=Object(r["n"])(a,0),u=Object(r["e"])(()=>(t.route||i).matched[o]);Object(r["w"])(a,o+1),Object(r["w"])(s,u);const l=Object(r["z"])();return Object(r["J"])(()=>[l.value,u.value,t.name],([t,e,n],[r,i,o])=>{e&&(e.instances[n]=t,i&&i!==e&&t&&t===r&&(e.leaveGuards=i.leaveGuards,e.updateGuards=i.updateGuards)),!t||!e||i&&w(e,i)&&r||(e.enterCallbacks[n]||[]).forEach(e=>e(t))},{flush:"post"}),()=>{const o=t.route||i,s=u.value,a=s&&s.components[t.name],c=t.name;if(!a)return n.default?n.default({Component:a,route:o}):null;const h=s.props[t.name],p=h?!0===h?o.params:"function"===typeof h?h(o):h:null,d=t=>{t.component.isUnmounted&&(s.instances[c]=null)},g=Object(r["m"])(a,f({},p,e,{onVnodeUnmounted:d,ref:l}));return n.default?n.default({Component:g,route:o}):g}}}),$t=Xt;var Qt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{};function Jt(t,e,n){return n={path:e,exports:{},require:function(t,e){return Zt(t,void 0===e||null===e?n.path:e)}},t(n,n.exports),n.exports}function Zt(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var te=Jt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.hook=e.target=e.isBrowser=void 0,e.isBrowser="undefined"!==typeof navigator,e.target=e.isBrowser?window:"undefined"!==typeof Qt?Qt:{},e.hook=e.target.__VUE_DEVTOOLS_GLOBAL_HOOK__})),ee=Jt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.ApiHookEvents=void 0,function(t){t["SETUP_DEVTOOLS_PLUGIN"]="devtools-plugin:setup"}(e.ApiHookEvents||(e.ApiHookEvents={}))})),ne=Jt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0})})),re=Jt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0})})),ie=Jt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0})})),oe=Jt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0})})),se=Jt((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Hooks=void 0,function(t){t["TRANSFORM_CALL"]="transformCall",t["GET_APP_RECORD_NAME"]="getAppRecordName",t["GET_APP_ROOT_INSTANCE"]="getAppRootInstance",t["REGISTER_APPLICATION"]="registerApplication",t["WALK_COMPONENT_TREE"]="walkComponentTree",t["WALK_COMPONENT_PARENTS"]="walkComponentParents",t["INSPECT_COMPONENT"]="inspectComponent",t["GET_COMPONENT_BOUNDS"]="getComponentBounds",t["GET_COMPONENT_NAME"]="getComponentName",t["GET_ELEMENT_COMPONENT"]="getElementComponent",t["GET_INSPECTOR_TREE"]="getInspectorTree",t["GET_INSPECTOR_STATE"]="getInspectorState"}(e.Hooks||(e.Hooks={}))})),ae=Jt((function(t,e){var n=Qt&&Qt.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),r=Qt&&Qt.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),r(ne,e),r(re,e),r(ie,e),r(oe,e),r(se,e)}));Jt((function(t,e){var n=Qt&&Qt.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),r=Qt&&Qt.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||n(e,t,r)};function i(t,e){if(te.hook)te.hook.emit(ee.ApiHookEvents.SETUP_DEVTOOLS_PLUGIN,t,e);else{const n=te.target.__VUE_DEVTOOLS_PLUGINS__=te.target.__VUE_DEVTOOLS_PLUGINS__||[];n.push({pluginDescriptor:t,setupFn:e})}}Object.defineProperty(e,"__esModule",{value:!0}),e.setupDevtoolsPlugin=void 0,r(ae,e),e.setupDevtoolsPlugin=i}));function ue(t){const e=at(t.routes,t);let n=t.parseQuery||jt,i=t.stringifyQuery||Mt,o=t.history;const s=Ft(),a=Ft(),h=Ft(),g=Object(r["E"])(K);let v=K;l&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const _=p.bind(null,t=>""+t),w=p.bind(null,Rt),E=p.bind(null,Lt);function x(t,n){let r,i;return W(t)?(r=e.getRecordMatcher(t),i=n):i=t,e.addRoute(i,r)}function I(t){let n=e.getRecordMatcher(t);n&&e.removeRoute(n)}function O(){return e.getRoutes().map(t=>t.record)}function S(t){return!!e.getRecordMatcher(t)}function C(t,r){if(r=f({},r||g.value),"string"===typeof t){let i=y(n,t,r.path),s=e.resolve({path:i.path},r),a=o.createHref(i.fullPath);return f(i,s,{params:E(s.params),hash:Lt(i.hash),redirectedFrom:void 0,href:a})}let s;"path"in t?s=f({},t,{path:y(n,t.path,r.path).path}):(s=f({},t,{params:w(t.params)}),r.params=w(r.params));let a=e.resolve(s,r);const u=t.hash||"";a.params=_(E(a.params));const c=m(i,f({},t,{hash:Nt(u),path:a.path}));let l=o.createHref(c);return f({fullPath:c,hash:u,query:i===Mt?Dt(t.query):t.query},a,{redirectedFrom:void 0,href:l})}function T(t){return"string"===typeof t?{path:t}:f({},t)}function N(t,e){if(v!==t)return X(8,{from:e,to:t})}function k(t){return F(t)}function A(t){return k(f(T(t),{replace:!0}))}function j(t){const e=t.matched[t.matched.length-1];if(e&&e.redirect){const{redirect:n}=e;let r=T("function"===typeof n?n(t):n);return f({query:t.query,hash:t.hash,params:t.params},r)}}function F(t,e){const n=v=C(t),r=g.value,o=t.state,s=t.force,a=!0===t.replace,u=j(n);if(u)return F(f(u,{state:o,force:s,replace:a}),e||n);const c=n;let l;return c.redirectedFrom=e,!s&&b(i,r,n)&&(l=X(16,{to:c,from:r}),et(r,r,!0,!1)),(l?Promise.resolve(l):U(c,r)).catch(t=>$(t)?t:J(t)).then(t=>{if(t){if($(t,2))return F(f(T(t.to),{state:o,force:s,replace:a}),e||c)}else t=V(c,r,!0,a,o);return B(c,r,t),t})}function q(t,e){const n=N(t,e);return n?Promise.reject(n):Promise.resolve()}function U(t,e){let n;const[r,i,o]=le(t,e);n=Ut(r.reverse(),"beforeRouteLeave",t,e);for(const s of r)s.leaveGuards.forEach(r=>{n.push(qt(r,t,e))});const u=q.bind(null,t,e);return n.push(u),ce(n).then(()=>{n=[];for(const r of s.list())n.push(qt(r,t,e));return n.push(u),ce(n)}).then(()=>{n=Ut(i,"beforeRouteUpdate",t,e);for(const r of i)r.updateGuards.forEach(r=>{n.push(qt(r,t,e))});return n.push(u),ce(n)}).then(()=>{n=[];for(const r of t.matched)if(r.beforeEnter&&e.matched.indexOf(r)<0)if(Array.isArray(r.beforeEnter))for(const i of r.beforeEnter)n.push(qt(i,t,e));else n.push(qt(r.beforeEnter,t,e));return n.push(u),ce(n)}).then(()=>(t.matched.forEach(t=>t.enterCallbacks={}),n=Ut(o,"beforeRouteEnter",t,e),n.push(u),ce(n))).then(()=>{n=[];for(const r of a.list())n.push(qt(r,t,e));return n.push(u),ce(n)}).catch(t=>$(t,8)?t:Promise.reject(t))}function B(t,e,n){for(const r of h.list())r(t,e,n)}function V(t,e,n,r,i){const s=N(t,e);if(s)return s;const a=e===K,u=l?history.state:{};n&&(r||a?o.replace(t.fullPath,f({scroll:a&&u&&u.scroll},i)):o.push(t.fullPath,i)),g.value=t,et(t,e,n,a),tt()}let G;function z(){G=o.listen((t,e,n)=>{let r=C(t);const i=j(r);if(i)return void F(f(i,{replace:!0}),r).catch(d);v=r;const s=g.value;l&&M(L(s.fullPath,n.delta),P()),U(r,s).catch(t=>$(t,12)?t:$(t,2)?(n.delta&&o.go(-n.delta,!1),F(t.to,r).catch(d),Promise.reject()):(n.delta&&o.go(-n.delta,!1),J(t))).then(t=>{t=t||V(r,s,!1),t&&n.delta&&o.go(-n.delta,!1),B(r,s,t)}).catch(d)})}let H,Y=Ft(),Q=Ft();function J(t){return tt(t),Q.list().forEach(e=>e(t)),Promise.reject(t)}function Z(){return H&&g.value!==K?Promise.resolve():new Promise((t,e)=>{Y.add([t,e])})}function tt(t){H||(H=!0,z(),Y.list().forEach(([e,n])=>t?n(t):e()),Y.reset())}function et(e,n,i,o){const{scrollBehavior:s}=t;if(!l||!s)return Promise.resolve();let a=!i&&D(L(e.fullPath,0))||(o||!i)&&history.state&&history.state.scroll||null;return Object(r["p"])().then(()=>s(e,n,a)).then(t=>t&&R(t)).catch(J)}const nt=t=>o.go(t);let rt;const it=new Set,ot={currentRoute:g,addRoute:x,removeRoute:I,hasRoute:S,getRoutes:O,resolve:C,options:t,push:k,replace:A,go:nt,back:()=>nt(-1),forward:()=>nt(1),beforeEach:s.add,beforeResolve:a.add,afterEach:h.add,onError:Q.add,isReady:Z,install(t){const e=this;t.component("RouterLink",zt),t.component("RouterView",$t),t.config.globalProperties.$router=e,Object.defineProperty(t.config.globalProperties,"$route",{get:()=>Object(r["H"])(g)}),l&&!rt&&g.value===K&&(rt=!0,k(o.location).catch(t=>{0}));const n={};for(let o in K)n[o]=Object(r["e"])(()=>g.value[o]);t.provide(u,e),t.provide(c,Object(r["y"])(n));let i=t.unmount;it.add(t),t.unmount=function(){it.delete(t),it.size<1&&(G(),g.value=K,rt=!1,H=!1),i.call(this,arguments)}}};return ot}function ce(t){return t.reduce((t,e)=>t.then(()=>e()),Promise.resolve())}function le(t,e){const n=[],r=[],i=[],o=Math.max(e.matched.length,t.matched.length);for(let s=0;s<o;s++){const o=e.matched[s];o&&(t.matched.indexOf(o)<0?n.push(o):r.push(o));const a=t.matched[s];a&&e.matched.indexOf(a)<0&&i.push(a)}return[n,r,i]}function he(){return Object(r["n"])(u)}function fe(){return Object(r["n"])(c)}}).call(this,n("c8ba"))},"6eeb":function(t,e,n){var r=n("da84"),i=n("9112"),o=n("5135"),s=n("ce4e"),a=n("8925"),u=n("69f3"),c=u.get,l=u.enforce,h=String(String).split("String");(t.exports=function(t,e,n,a){var u,c=!!a&&!!a.unsafe,f=!!a&&!!a.enumerable,p=!!a&&!!a.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||i(n,"name",e),u=l(n),u.source||(u.source=h.join("string"==typeof e?e:""))),t!==r?(c?!p&&t[e]&&(f=!0):delete t[e],f?t[e]=n:i(t,e,n)):f?t[e]=n:s(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||a(this)}))},"6f53":function(t,e,n){var r=n("83ab"),i=n("df75"),o=n("fc6a"),s=n("d1e7").f,a=function(t){return function(e){var n,a=o(e),u=i(a),c=u.length,l=0,h=[];while(c>l)n=u[l++],r&&!s.call(a,n)||h.push(t?[n,a[n]]:a[n]);return h}};t.exports={entries:a(!0),values:a(!1)}},7156:function(t,e,n){var r=n("861d"),i=n("d2bb");t.exports=function(t,e,n){var o,s;return i&&"function"==typeof(o=e.constructor)&&o!==n&&r(s=o.prototype)&&s!==n.prototype&&i(t,s),t}},7418:function(t,e){e.f=Object.getOwnPropertySymbols},"746f":function(t,e,n){var r=n("428f"),i=n("5135"),o=n("e538"),s=n("9bf2").f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||s(e,t,{value:o.f(t)})}},7839:function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7a23":function(t,e,n){"use strict";n.d(e,"y",(function(){return lt})),n.d(e,"z",(function(){return bt})),n.d(e,"E",(function(){return wt})),n.d(e,"G",(function(){return Tt})),n.d(e,"H",(function(){return It})),n.d(e,"F",(function(){return r["J"]})),n.d(e,"a",(function(){return ar})),n.d(e,"b",(function(){return Zn})),n.d(e,"e",(function(){return ci})),n.d(e,"g",(function(){return vr})),n.d(e,"h",(function(){return Sr})),n.d(e,"i",(function(){return Or})),n.d(e,"j",(function(){return Er})),n.d(e,"k",(function(){return Mn})),n.d(e,"l",(function(){return Jr})),n.d(e,"m",(function(){return li})),n.d(e,"n",(function(){return Pr})),n.d(e,"o",(function(){return kr})),n.d(e,"p",(function(){return Yt})),n.d(e,"q",(function(){return yn})),n.d(e,"r",(function(){return mn})),n.d(e,"s",(function(){return Ge})),n.d(e,"t",(function(){return He})),n.d(e,"u",(function(){return pr})),n.d(e,"v",(function(){return Ne})),n.d(e,"w",(function(){return Ar})),n.d(e,"x",(function(){return Te})),n.d(e,"A",(function(){return hi})),n.d(e,"B",(function(){return xe})),n.d(e,"C",(function(){return nr})),n.d(e,"D",(function(){return ir})),n.d(e,"J",(function(){return Ze})),n.d(e,"K",(function(){return Qe})),n.d(e,"L",(function(){return Oe})),n.d(e,"M",(function(){return kn})),n.d(e,"P",(function(){return ke})),n.d(e,"c",(function(){return Ki})),n.d(e,"d",(function(){return co})),n.d(e,"f",(function(){return No})),n.d(e,"I",(function(){return bo})),n.d(e,"N",(function(){return Oo})),n.d(e,"O",(function(){return xo}));var r=n("9ff4");const i=new WeakMap,o=[];let s;const a=Symbol(""),u=Symbol("");function c(t){return t&&!0===t._isEffect}function l(t,e=r["b"]){c(t)&&(t=t.raw);const n=p(t,e);return e.lazy||n(),n}function h(t){t.active&&(d(t),t.options.onStop&&t.options.onStop(),t.active=!1)}let f=0;function p(t,e){const n=function(){if(!n.active)return e.scheduler?void 0:t();if(!o.includes(n)){d(n);try{return m(),o.push(n),s=n,t()}finally{o.pop(),_(),s=o[o.length-1]}}};return n.id=f++,n.allowRecurse=!!e.allowRecurse,n._isEffect=!0,n.active=!0,n.raw=t,n.deps=[],n.options=e,n}function d(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let g=!0;const v=[];function y(){v.push(g),g=!1}function m(){v.push(g),g=!0}function _(){const t=v.pop();g=void 0===t||t}function b(t,e,n){if(!g||void 0===s)return;let r=i.get(t);r||i.set(t,r=new Map);let o=r.get(n);o||r.set(n,o=new Set),o.has(s)||(o.add(s),s.deps.push(o))}function w(t,e,n,o,c,l){const h=i.get(t);if(!h)return;const f=new Set,p=t=>{t&&t.forEach(t=>{(t!==s||t.allowRecurse)&&f.add(t)})};if("clear"===e)h.forEach(p);else if("length"===n&&Object(r["n"])(t))h.forEach((t,e)=>{("length"===e||e>=o)&&p(t)});else switch(void 0!==n&&p(h.get(n)),e){case"add":Object(r["n"])(t)?Object(r["r"])(n)&&p(h.get("length")):(p(h.get(a)),Object(r["s"])(t)&&p(h.get(u)));break;case"delete":Object(r["n"])(t)||(p(h.get(a)),Object(r["s"])(t)&&p(h.get(u)));break;case"set":Object(r["s"])(t)&&p(h.get(a));break}const d=t=>{t.options.scheduler?t.options.scheduler(t):t()};f.forEach(d)}const E=new Set(Object.getOwnPropertyNames(Symbol).map(t=>Symbol[t]).filter(r["C"])),x=T(),I=T(!1,!0),O=T(!0),S=T(!0,!0),C={};function T(t=!1,e=!1){return function(n,i,o){if("__v_isReactive"===i)return!t;if("__v_isReadonly"===i)return t;if("__v_raw"===i&&o===(t?at:st).get(n))return n;const s=Object(r["n"])(n);if(!t&&s&&Object(r["k"])(C,i))return Reflect.get(C,i,o);const a=Reflect.get(n,i,o);if(Object(r["C"])(i)?E.has(i):"__proto__"===i||"__v_isRef"===i)return a;if(t||b(n,"get",i),e)return a;if(_t(a)){const t=!s||!Object(r["r"])(i);return t?a.value:a}return Object(r["u"])(a)?t?ft(a):lt(a):a}}["includes","indexOf","lastIndexOf"].forEach(t=>{const e=Array.prototype[t];C[t]=function(...t){const n=yt(this);for(let e=0,i=this.length;e<i;e++)b(n,"get",e+"");const r=e.apply(n,t);return-1===r||!1===r?e.apply(n,t.map(yt)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{const e=Array.prototype[t];C[t]=function(...t){y();const n=e.apply(this,t);return _(),n}});const N=A(),k=A(!0);function A(t=!1){return function(e,n,i,o){const s=e[n];if(!t&&(i=yt(i),!Object(r["n"])(e)&&_t(s)&&!_t(i)))return s.value=i,!0;const a=Object(r["n"])(e)&&Object(r["r"])(n)?Number(n)<e.length:Object(r["k"])(e,n),u=Reflect.set(e,n,i,o);return e===yt(o)&&(a?Object(r["j"])(i,s)&&w(e,"set",n,i,s):w(e,"add",n,i)),u}}function P(t,e){const n=Object(r["k"])(t,e),i=t[e],o=Reflect.deleteProperty(t,e);return o&&n&&w(t,"delete",e,void 0,i),o}function R(t,e){const n=Reflect.has(t,e);return Object(r["C"])(e)&&E.has(e)||b(t,"has",e),n}function L(t){return b(t,"iterate",Object(r["n"])(t)?"length":a),Reflect.ownKeys(t)}const j={get:x,set:N,deleteProperty:P,has:R,ownKeys:L},M={get:O,set(t,e){return!0},deleteProperty(t,e){return!0}},D=Object(r["h"])({},j,{get:I,set:k}),F=(Object(r["h"])({},M,{get:S}),t=>Object(r["u"])(t)?lt(t):t),q=t=>Object(r["u"])(t)?ft(t):t,U=t=>t,B=t=>Reflect.getPrototypeOf(t);function V(t,e,n=!1,r=!1){t=t["__v_raw"];const i=yt(t),o=yt(e);e!==o&&!n&&b(i,"get",e),!n&&b(i,"get",o);const{has:s}=B(i),a=n?q:r?U:F;return s.call(i,e)?a(t.get(e)):s.call(i,o)?a(t.get(o)):void 0}function G(t,e=!1){const n=this["__v_raw"],r=yt(n),i=yt(t);return t!==i&&!e&&b(r,"has",t),!e&&b(r,"has",i),t===i?n.has(t):n.has(t)||n.has(i)}function z(t,e=!1){return t=t["__v_raw"],!e&&b(yt(t),"iterate",a),Reflect.get(t,"size",t)}function W(t){t=yt(t);const e=yt(this),n=B(e),r=n.has.call(e,t);return e.add(t),r||w(e,"add",t,t),this}function K(t,e){e=yt(e);const n=yt(this),{has:i,get:o}=B(n);let s=i.call(n,t);s||(t=yt(t),s=i.call(n,t));const a=o.call(n,t);return n.set(t,e),s?Object(r["j"])(e,a)&&w(n,"set",t,e,a):w(n,"add",t,e),this}function H(t){const e=yt(this),{has:n,get:r}=B(e);let i=n.call(e,t);i||(t=yt(t),i=n.call(e,t));const o=r?r.call(e,t):void 0,s=e.delete(t);return i&&w(e,"delete",t,void 0,o),s}function Y(){const t=yt(this),e=0!==t.size,n=void 0,r=t.clear();return e&&w(t,"clear",void 0,void 0,n),r}function X(t,e){return function(n,r){const i=this,o=i["__v_raw"],s=yt(o),u=t?q:e?U:F;return!t&&b(s,"iterate",a),o.forEach((t,e)=>n.call(r,u(t),u(e),i))}}function $(t,e,n){return function(...i){const o=this["__v_raw"],s=yt(o),c=Object(r["s"])(s),l="entries"===t||t===Symbol.iterator&&c,h="keys"===t&&c,f=o[t](...i),p=e?q:n?U:F;return!e&&b(s,"iterate",h?u:a),{next(){const{value:t,done:e}=f.next();return e?{value:t,done:e}:{value:l?[p(t[0]),p(t[1])]:p(t),done:e}},[Symbol.iterator](){return this}}}}function Q(t){return function(...e){return"delete"!==t&&this}}const J={get(t){return V(this,t)},get size(){return z(this)},has:G,add:W,set:K,delete:H,clear:Y,forEach:X(!1,!1)},Z={get(t){return V(this,t,!1,!0)},get size(){return z(this)},has:G,add:W,set:K,delete:H,clear:Y,forEach:X(!1,!0)},tt={get(t){return V(this,t,!0)},get size(){return z(this,!0)},has(t){return G.call(this,t,!0)},add:Q("add"),set:Q("set"),delete:Q("delete"),clear:Q("clear"),forEach:X(!0,!1)},et=["keys","values","entries",Symbol.iterator];function nt(t,e){const n=e?Z:t?tt:J;return(e,i,o)=>"__v_isReactive"===i?!t:"__v_isReadonly"===i?t:"__v_raw"===i?e:Reflect.get(Object(r["k"])(n,i)&&i in e?n:e,i,o)}et.forEach(t=>{J[t]=$(t,!1,!1),tt[t]=$(t,!0,!1),Z[t]=$(t,!1,!0)});const rt={get:nt(!1,!1)},it={get:nt(!1,!0)},ot={get:nt(!0,!1)};const st=new WeakMap,at=new WeakMap;function ut(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ct(t){return t["__v_skip"]||!Object.isExtensible(t)?0:ut(Object(r["M"])(t))}function lt(t){return t&&t["__v_isReadonly"]?t:pt(t,!1,j,rt)}function ht(t){return pt(t,!1,D,it)}function ft(t){return pt(t,!0,M,ot)}function pt(t,e,n,i){if(!Object(r["u"])(t))return t;if(t["__v_raw"]&&(!e||!t["__v_isReactive"]))return t;const o=e?at:st,s=o.get(t);if(s)return s;const a=ct(t);if(0===a)return t;const u=new Proxy(t,2===a?i:n);return o.set(t,u),u}function dt(t){return gt(t)?dt(t["__v_raw"]):!(!t||!t["__v_isReactive"])}function gt(t){return!(!t||!t["__v_isReadonly"])}function vt(t){return dt(t)||gt(t)}function yt(t){return t&&yt(t["__v_raw"])||t}const mt=t=>Object(r["u"])(t)?lt(t):t;function _t(t){return Boolean(t&&!0===t.__v_isRef)}function bt(t){return xt(t)}function wt(t){return xt(t,!0)}class Et{constructor(t,e=!1){this._rawValue=t,this._shallow=e,this.__v_isRef=!0,this._value=e?t:mt(t)}get value(){return b(yt(this),"get","value"),this._value}set value(t){Object(r["j"])(yt(t),this._rawValue)&&(this._rawValue=t,this._value=this._shallow?t:mt(t),w(yt(this),"set","value",t))}}function xt(t,e=!1){return _t(t)?t:new Et(t,e)}function It(t){return _t(t)?t.value:t}const Ot={get:(t,e,n)=>It(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return _t(i)&&!_t(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function St(t){return dt(t)?t:new Proxy(t,Ot)}class Ct{constructor(t,e){this._object=t,this._key=e,this.__v_isRef=!0}get value(){return this._object[this._key]}set value(t){this._object[this._key]=t}}function Tt(t,e){return _t(t[e])?t[e]:new Ct(t,e)}class Nt{constructor(t,e,n){this._setter=e,this._dirty=!0,this.__v_isRef=!0,this.effect=l(t,{lazy:!0,scheduler:()=>{this._dirty||(this._dirty=!0,w(yt(this),"set","value"))}}),this["__v_isReadonly"]=n}get value(){return this._dirty&&(this._value=this.effect(),this._dirty=!1),b(yt(this),"get","value"),this._value}set value(t){this._setter(t)}}function kt(t){let e,n;return Object(r["o"])(t)?(e=t,n=r["d"]):(e=t.get,n=t.set),new Nt(e,n,Object(r["o"])(t)||!t.set)}function At(t,e,n,r){let i;try{i=r?t(...r):t()}catch(o){Rt(o,e,n)}return i}function Pt(t,e,n,i){if(Object(r["o"])(t)){const o=At(t,e,n,i);return o&&Object(r["w"])(o)&&o.catch(t=>{Rt(t,e,n)}),o}const o=[];for(let r=0;r<t.length;r++)o.push(Pt(t[r],e,n,i));return o}function Rt(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let r=e.parent;const i=e.proxy,o=n;while(r){const e=r.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,i,o))return;r=r.parent}const s=e.appContext.config.errorHandler;if(s)return void At(s,null,10,[t,i,o])}Lt(t,n,i,r)}function Lt(t,e,n,r=!0){console.error(t)}let jt=!1,Mt=!1;const Dt=[];let Ft=0;const qt=[];let Ut=null,Bt=0;const Vt=[];let Gt=null,zt=0;const Wt=Promise.resolve();let Kt=null,Ht=null;function Yt(t){const e=Kt||Wt;return t?e.then(this?t.bind(this):t):e}function Xt(t){Dt.length&&Dt.includes(t,jt&&t.allowRecurse?Ft+1:Ft)||t===Ht||(Dt.push(t),$t())}function $t(){jt||Mt||(Mt=!0,Kt=Wt.then(ie))}function Qt(t){const e=Dt.indexOf(t);e>-1&&Dt.splice(e,1)}function Jt(t,e,n,i){Object(r["n"])(t)?n.push(...t):e&&e.includes(t,t.allowRecurse?i+1:i)||n.push(t),$t()}function Zt(t){Jt(t,Ut,qt,Bt)}function te(t){Jt(t,Gt,Vt,zt)}function ee(t,e=null){if(qt.length){for(Ht=e,Ut=[...new Set(qt)],qt.length=0,Bt=0;Bt<Ut.length;Bt++)Ut[Bt]();Ut=null,Bt=0,Ht=null,ee(t,e)}}function ne(t){if(Vt.length){const t=[...new Set(Vt)];if(Vt.length=0,Gt)return void Gt.push(...t);for(Gt=t,Gt.sort((t,e)=>re(t)-re(e)),zt=0;zt<Gt.length;zt++)Gt[zt]();Gt=null,zt=0}}const re=t=>null==t.id?1/0:t.id;function ie(t){Mt=!1,jt=!0,ee(t),Dt.sort((t,e)=>re(t)-re(e));try{for(Ft=0;Ft<Dt.length;Ft++){const t=Dt[Ft];t&&At(t,null,14)}}finally{Ft=0,Dt.length=0,ne(t),jt=!1,Kt=null,(Dt.length||Vt.length)&&ie(t)}}new Set;new Map;function oe(t,e,...n){const i=t.vnode.props||r["b"];let o=n;const s=e.startsWith("update:"),a=s&&e.slice(7);if(a&&a in i){const t=("modelValue"===a?"model":a)+"Modifiers",{number:e,trim:s}=i[t]||r["b"];s?o=n.map(t=>t.trim()):e&&(o=n.map(r["L"]))}let u=Object(r["K"])(Object(r["e"])(e)),c=i[u];!c&&s&&(u=Object(r["K"])(Object(r["l"])(e)),c=i[u]),c&&Pt(c,t,6,o);const l=i[u+"Once"];if(l){if(t.emitted){if(t.emitted[u])return}else(t.emitted={})[u]=!0;Pt(l,t,6,o)}}function se(t,e,n=!1){if(!e.deopt&&void 0!==t.__emits)return t.__emits;const i=t.emits;let o={},s=!1;if(!Object(r["o"])(t)){const i=t=>{s=!0,Object(r["h"])(o,se(t,e,!0))};!n&&e.mixins.length&&e.mixins.forEach(i),t.extends&&i(t.extends),t.mixins&&t.mixins.forEach(i)}return i||s?(Object(r["n"])(i)?i.forEach(t=>o[t]=null):Object(r["h"])(o,i),t.__emits=o):t.__emits=null}function ae(t,e){return!(!t||!Object(r["v"])(e))&&(e=e.slice(2).replace(/Once$/,""),Object(r["k"])(t,e[0].toLowerCase()+e.slice(1))||Object(r["k"])(t,Object(r["l"])(e))||Object(r["k"])(t,e))}let ue=null;function ce(t){ue=t}function le(t){const{type:e,vnode:n,proxy:i,withProxy:o,props:s,propsOptions:[a],slots:u,attrs:c,emit:l,render:h,renderCache:f,data:p,setupState:d,ctx:g}=t;let v;ue=t;try{let t;if(4&n.shapeFlag){const e=o||i;v=Cr(h.call(e,e,f,s,d,p,g)),t=c}else{const n=e;0,v=Cr(n.length>1?n(s,{attrs:c,slots:u,emit:l}):n(s,null)),t=e.props?c:fe(c)}let y=v;if(!1!==e.inheritAttrs&&t){const e=Object.keys(t),{shapeFlag:n}=y;e.length&&(1&n||6&n)&&(a&&e.some(r["t"])&&(t=pe(t,a)),y=Ir(y,t))}n.dirs&&(y.dirs=y.dirs?y.dirs.concat(n.dirs):n.dirs),n.transition&&(y.transition=n.transition),v=y}catch(y){Rt(y,t,1),v=Er(cr)}return ue=null,v}function he(t){let e;for(let n=0;n<t.length;n++){const r=t[n];if(!yr(r))return;if(r.type!==cr||"v-if"===r.children){if(e)return;e=r}}return e}const fe=t=>{let e;for(const n in t)("class"===n||"style"===n||Object(r["v"])(n))&&((e||(e={}))[n]=t[n]);return e},pe=(t,e)=>{const n={};for(const i in t)Object(r["t"])(i)&&i.slice(9)in e||(n[i]=t[i]);return n};function de(t,e,n){const{props:r,children:i,component:o}=t,{props:s,children:a,patchFlag:u}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&u>=0))return!(!i&&!a||a&&a.$stable)||r!==s&&(r?!s||ge(r,s,c):!!s);if(1024&u)return!0;if(16&u)return r?ge(r,s,c):!!s;if(8&u){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(s[n]!==r[n]&&!ae(c,n))return!0}}return!1}function ge(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!ae(n,o))return!0}return!1}function ve({vnode:t,parent:e},n){while(e&&e.subTree===t)(t=e.vnode).el=n,e=e.parent}const ye=t=>t.__isSuspense;function me(t){const{shapeFlag:e,children:n}=t;let r,i;return 32&e?(r=_e(n.default),i=_e(n.fallback)):(r=_e(n),i=Cr(null)),{content:r,fallback:i}}function _e(t){if(Object(r["o"])(t)&&(t=t()),Object(r["n"])(t)){const e=he(t);0,t=e}return Cr(t)}function be(t,e){e&&e.pendingBranch?Object(r["n"])(t)?e.effects.push(...t):e.effects.push(t):te(t)}let we=0;const Ee=t=>we+=t;function xe(t,e,n={},r){let i=t[e];we++,pr();const o=i&&Ie(i(n)),s=vr(ar,{key:n.key||"_"+e},o||(r?r():[]),o&&1===t._?64:-2);return we--,s}function Ie(t){return t.some(t=>!yr(t)||t.type!==cr&&!(t.type===ar&&!Ie(t.children)))?t:null}function Oe(t,e=ue){if(!e)return t;const n=(...n)=>{we||pr(!0);const r=ue;ce(e);const i=t(...n);return ce(r),we||dr(),i};return n._c=!0,n}let Se=null;const Ce=[];function Te(t){Ce.push(Se=t)}function Ne(){Ce.pop(),Se=Ce[Ce.length-1]||null}function ke(t){return e=>Oe((function(){Te(t);const n=e.apply(this,arguments);return Ne(),n}))}function Ae(t,e,n,i=!1){const o={},s={};Object(r["g"])(s,_r,1),Re(t,e,o,s),n?t.props=i?o:ht(o):t.type.props?t.props=o:t.props=s,t.attrs=s}function Pe(t,e,n,i){const{props:o,attrs:s,vnode:{patchFlag:a}}=t,u=yt(o),[c]=t.propsOptions;if(!(i||a>0)||16&a){let i;Re(t,e,o,s);for(const s in u)e&&(Object(r["k"])(e,s)||(i=Object(r["l"])(s))!==s&&Object(r["k"])(e,i))||(c?!n||void 0===n[s]&&void 0===n[i]||(o[s]=Le(c,e||r["b"],s,void 0,t)):delete o[s]);if(s!==u)for(const t in s)e&&Object(r["k"])(e,t)||delete s[t]}else if(8&a){const n=t.vnode.dynamicProps;for(let i=0;i<n.length;i++){const a=n[i],l=e[a];if(c)if(Object(r["k"])(s,a))s[a]=l;else{const e=Object(r["e"])(a);o[e]=Le(c,u,e,l,t)}else s[a]=l}}w(t,"set","$attrs")}function Re(t,e,n,i){const[o,s]=t.propsOptions;if(e)for(const a in e){const s=e[a];if(Object(r["x"])(a))continue;let u;o&&Object(r["k"])(o,u=Object(r["e"])(a))?n[u]=s:ae(t.emitsOptions,a)||(i[a]=s)}if(s){const e=yt(n);for(let r=0;r<s.length;r++){const i=s[r];n[i]=Le(o,e,i,e[i],t)}}}function Le(t,e,n,i,o){const s=t[n];if(null!=s){const t=Object(r["k"])(s,"default");if(t&&void 0===i){const t=s.default;s.type!==Function&&Object(r["o"])(t)?(Zr(o),i=t(e),Zr(null)):i=t}s[0]&&(Object(r["k"])(e,n)||t?!s[1]||""!==i&&i!==Object(r["l"])(n)||(i=!0):i=!1)}return i}function je(t,e,n=!1){if(!e.deopt&&t.__props)return t.__props;const i=t.props,o={},s=[];let a=!1;if(!Object(r["o"])(t)){const i=t=>{a=!0;const[n,i]=je(t,e,!0);Object(r["h"])(o,n),i&&s.push(...i)};!n&&e.mixins.length&&e.mixins.forEach(i),t.extends&&i(t.extends),t.mixins&&t.mixins.forEach(i)}if(!i&&!a)return t.__props=r["a"];if(Object(r["n"])(i))for(let u=0;u<i.length;u++){0;const t=Object(r["e"])(i[u]);Me(t)&&(o[t]=r["b"])}else if(i){0;for(const t in i){const e=Object(r["e"])(t);if(Me(e)){const n=i[t],a=o[e]=Object(r["n"])(n)||Object(r["o"])(n)?{type:n}:n;if(a){const t=qe(Boolean,a.type),n=qe(String,a.type);a[0]=t>-1,a[1]=n<0||t<n,(t>-1||Object(r["k"])(a,"default"))&&s.push(e)}}}}return t.__props=[o,s]}function Me(t){return"$"!==t[0]}function De(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Fe(t,e){return De(t)===De(e)}function qe(t,e){if(Object(r["n"])(e)){for(let n=0,r=e.length;n<r;n++)if(Fe(e[n],t))return n}else if(Object(r["o"])(e))return Fe(e,t)?0:-1;return-1}function Ue(t,e,n=Qr,r=!1){if(n){const i=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...r)=>{if(n.isUnmounted)return;y(),Zr(n);const i=Pt(e,n,t,r);return Zr(null),_(),i});return r?i.unshift(o):i.push(o),o}}const Be=t=>(e,n=Qr)=>!ei&&Ue(t,e,n),Ve=Be("bm"),Ge=Be("m"),ze=Be("bu"),We=Be("u"),Ke=Be("bum"),He=Be("um"),Ye=Be("rtg"),Xe=Be("rtc"),$e=(t,e=Qr)=>{Ue("ec",t,e)};function Qe(t,e){return tn(t,null,e)}const Je={};function Ze(t,e,n){return tn(t,e,n)}function tn(t,e,{immediate:n,deep:i,flush:o,onTrack:s,onTrigger:a}=r["b"],u=Qr){let c,f,p=!1;if(_t(t)?(c=()=>t.value,p=!!t._shallow):dt(t)?(c=()=>t,i=!0):c=Object(r["n"])(t)?()=>t.map(t=>_t(t)?t.value:dt(t)?nn(t):Object(r["o"])(t)?At(t,u,2):void 0):Object(r["o"])(t)?e?()=>At(t,u,2):()=>{if(!u||!u.isUnmounted)return f&&f(),At(t,u,3,[d])}:r["d"],e&&i){const t=c;c=()=>nn(t())}const d=t=>{f=m.options.onStop=()=>{At(t,u,4)}};let g=Object(r["n"])(t)?[]:Je;const v=()=>{if(m.active)if(e){const t=m();(i||p||Object(r["j"])(t,g))&&(f&&f(),Pt(e,u,3,[t,g===Je?void 0:g,d]),g=t)}else m()};let y;v.allowRecurse=!!e,y="sync"===o?v:"post"===o?()=>qn(v,u&&u.suspense):()=>{!u||u.isMounted?Zt(v):v()};const m=l(c,{lazy:!0,onTrack:s,onTrigger:a,scheduler:y});return ai(m,u),e?n?v():g=m():"post"===o?qn(m,u&&u.suspense):m(),()=>{h(m),u&&Object(r["I"])(u.effects,m)}}function en(t,e,n){const i=this.proxy,o=Object(r["B"])(t)?()=>i[t]:t.bind(i);return tn(o,e.bind(i),n,this)}function nn(t,e=new Set){if(!Object(r["u"])(t)||e.has(t))return t;if(e.add(t),_t(t))nn(t.value,e);else if(Object(r["n"])(t))for(let n=0;n<t.length;n++)nn(t[n],e);else if(Object(r["z"])(t)||Object(r["s"])(t))t.forEach(t=>{nn(t,e)});else for(const n in t)nn(t[n],e);return t}function rn(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ge(()=>{t.isMounted=!0}),Ke(()=>{t.isUnmounting=!0}),t}const on=[Function,Array],sn={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:on,onEnter:on,onAfterEnter:on,onEnterCancelled:on,onBeforeLeave:on,onLeave:on,onAfterLeave:on,onLeaveCancelled:on,onBeforeAppear:on,onAppear:on,onAfterAppear:on,onAppearCancelled:on},setup(t,{slots:e}){const n=Jr(),r=rn();let i;return()=>{const o=e.default&&pn(e.default(),!0);if(!o||!o.length)return;const s=yt(t),{mode:a}=s;const u=o[0];if(r.isLeaving)return ln(u);const c=hn(u);if(!c)return ln(u);const l=cn(c,s,r,n);fn(c,l);const h=n.subTree,f=h&&hn(h);let p=!1;const{getTransitionKey:d}=c.type;if(d){const t=d();void 0===i?i=t:t!==i&&(i=t,p=!0)}if(f&&f.type!==cr&&(!mr(c,f)||p)){const t=cn(f,s,r,n);if(fn(f,t),"out-in"===a)return r.isLeaving=!0,t.afterLeave=()=>{r.isLeaving=!1,n.update()},ln(u);"in-out"===a&&(t.delayLeave=(t,e,n)=>{const i=un(r,f);i[String(f.key)]=f,t._leaveCb=()=>{e(),t._leaveCb=void 0,delete l.delayedLeave},l.delayedLeave=n})}return u}}},an=sn;function un(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function cn(t,e,n,r){const{appear:i,mode:o,persisted:s=!1,onBeforeEnter:a,onEnter:u,onAfterEnter:c,onEnterCancelled:l,onBeforeLeave:h,onLeave:f,onAfterLeave:p,onLeaveCancelled:d,onBeforeAppear:g,onAppear:v,onAfterAppear:y,onAppearCancelled:m}=e,_=String(t.key),b=un(n,t),w=(t,e)=>{t&&Pt(t,r,9,e)},E={mode:o,persisted:s,beforeEnter(e){let r=a;if(!n.isMounted){if(!i)return;r=g||a}e._leaveCb&&e._leaveCb(!0);const o=b[_];o&&mr(t,o)&&o.el._leaveCb&&o.el._leaveCb(),w(r,[e])},enter(t){let e=u,r=c,o=l;if(!n.isMounted){if(!i)return;e=v||u,r=y||c,o=m||l}let s=!1;const a=t._enterCb=e=>{s||(s=!0,w(e?o:r,[t]),E.delayedLeave&&E.delayedLeave(),t._enterCb=void 0)};e?(e(t,a),e.length<=1&&a()):a()},leave(e,r){const i=String(t.key);if(e._enterCb&&e._enterCb(!0),n.isUnmounting)return r();w(h,[e]);let o=!1;const s=e._leaveCb=n=>{o||(o=!0,r(),w(n?d:p,[e]),e._leaveCb=void 0,b[i]===t&&delete b[i])};b[i]=t,f?(f(e,s),f.length<=1&&s()):s()},clone(t){return cn(t,e,n,r)}};return E}function ln(t){if(dn(t))return t=Ir(t),t.children=null,t}function hn(t){return dn(t)?t.children?t.children[0]:void 0:t}function fn(t,e){6&t.shapeFlag&&t.component?fn(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function pn(t,e=!1){let n=[],r=0;for(let i=0;i<t.length;i++){const o=t[i];o.type===ar?(128&o.patchFlag&&r++,n=n.concat(pn(o.children,e))):(e||o.type!==cr)&&n.push(o)}if(r>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}const dn=t=>t.type.__isKeepAlive;RegExp,RegExp;function gn(t){return t.displayName||t.name}function vn(t,e){return Object(r["n"])(t)?t.some(t=>vn(t,e)):Object(r["B"])(t)?t.split(",").indexOf(e)>-1:!!t.test&&t.test(e)}function yn(t,e){_n(t,"a",e)}function mn(t,e){_n(t,"da",e)}function _n(t,e,n=Qr){const r=t.__wdc||(t.__wdc=()=>{let e=n;while(e){if(e.isDeactivated)return;e=e.parent}t()});if(Ue(e,r,n),n){let t=n.parent;while(t&&t.parent)dn(t.parent.vnode)&&bn(r,e,n,t),t=t.parent}}function bn(t,e,n,i){const o=Ue(e,t,i,!0);He(()=>{Object(r["I"])(i[e],o)},n)}function wn(t){let e=t.shapeFlag;256&e&&(e-=256),512&e&&(e-=512),t.shapeFlag=e}function En(t){return 128&t.shapeFlag?t.ssContent:t}const xn=t=>"_"===t[0]||"$stable"===t,In=t=>Object(r["n"])(t)?t.map(Cr):[Cr(t)],On=(t,e,n)=>Oe(t=>In(e(t)),n),Sn=(t,e)=>{const n=t._ctx;for(const i in t){if(xn(i))continue;const o=t[i];if(Object(r["o"])(o))e[i]=On(i,o,n);else if(null!=o){0;const t=In(o);e[i]=()=>t}}},Cn=(t,e)=>{const n=In(e);t.slots.default=()=>n},Tn=(t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=e,Object(r["g"])(e,"_",n)):Sn(e,t.slots={})}else t.slots={},e&&Cn(t,e);Object(r["g"])(t.slots,_r,1)},Nn=(t,e)=>{const{vnode:n,slots:i}=t;let o=!0,s=r["b"];if(32&n.shapeFlag){const t=e._;t?1===t?o=!1:Object(r["h"])(i,e):(o=!e.$stable,Sn(e,i)),s=e}else e&&(Cn(t,e),s={default:1});if(o)for(const r in i)xn(r)||r in s||delete i[r]};function kn(t,e){const n=ue;if(null===n)return t;const i=n.proxy,o=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[t,n,a,u=r["b"]]=e[s];Object(r["o"])(t)&&(t={mounted:t,updated:t}),o.push({dir:t,instance:i,value:n,oldValue:void 0,arg:a,modifiers:u})}return t}function An(t,e,n,r){const i=t.dirs,o=e&&e.dirs;for(let s=0;s<i.length;s++){const a=i[s];o&&(a.oldValue=o[s].value);const u=a.dir[r];u&&Pt(u,n,8,[t.el,a,t,e])}}function Pn(){return{app:null,config:{isNativeTag:r["c"],performance:!1,globalProperties:{},optionMergeStrategies:{},isCustomElement:r["c"],errorHandler:void 0,warnHandler:void 0},mixins:[],components:{},directives:{},provides:Object.create(null)}}let Rn=0;function Ln(t,e){return function(n,i=null){null==i||Object(r["u"])(i)||(i=null);const o=Pn(),s=new Set;let a=!1;const u=o.app={_uid:Rn++,_component:n,_props:i,_container:null,_context:o,version:fi,get config(){return o.config},set config(t){0},use(t,...e){return s.has(t)||(t&&Object(r["o"])(t.install)?(s.add(t),t.install(u,...e)):Object(r["o"])(t)&&(s.add(t),t(u,...e))),u},mixin(t){return o.mixins.includes(t)||(o.mixins.push(t),(t.props||t.emits)&&(o.deopt=!0)),u},component(t,e){return e?(o.components[t]=e,u):o.components[t]},directive(t,e){return e?(o.directives[t]=e,u):o.directives[t]},mount(r,s){if(!a){const c=Er(n,i);return c.appContext=o,s&&e?e(c,r):t(c,r),a=!0,u._container=r,r.__vue_app__=u,c.component.proxy}},unmount(){a&&t(null,u._container)},provide(t,e){return o.provides[t]=e,u}};return u}}function jn(){}function Mn(t){return Object(r["o"])(t)?{setup:t,name:t.name}:t}const Dn=t=>!!t.type.__asyncLoader;const Fn={scheduler:Xt,allowRecurse:!0};const qn=be,Un=(t,e,n,i)=>{if(Object(r["n"])(t))return void t.forEach((t,o)=>Un(t,e&&(Object(r["n"])(e)?e[o]:e),n,i));let o;o=!i||Dn(i)?null:4&i.shapeFlag?i.component.exposed||i.component.proxy:i.el;const{i:s,r:a}=t;const u=e&&e.r,c=s.refs===r["b"]?s.refs={}:s.refs,l=s.setupState;if(null!=u&&u!==a&&(Object(r["B"])(u)?(c[u]=null,Object(r["k"])(l,u)&&(l[u]=null)):_t(u)&&(u.value=null)),Object(r["B"])(a)){const t=()=>{c[a]=o,Object(r["k"])(l,a)&&(l[a]=o)};o?(t.id=-1,qn(t,n)):t()}else if(_t(a)){const t=()=>{a.value=o};o?(t.id=-1,qn(t,n)):t()}else Object(r["o"])(a)&&At(a,s,12,[o,c])};function Bn(t){return Vn(t)}function Vn(t,e){jn();const{insert:n,remove:i,patchProp:o,forcePatchProp:s,createElement:a,createText:u,createComment:c,setText:f,setElementText:p,parentNode:d,nextSibling:g,setScopeId:v=r["d"],cloneNode:y,insertStaticContent:m}=t,_=(t,e,n,r=null,i=null,o=null,s=!1,a=!1)=>{t&&!mr(t,e)&&(r=H(t),V(t,i,o,!0),t=null),-2===e.patchFlag&&(a=!1,e.dynamicChildren=null);const{type:u,ref:c,shapeFlag:l}=e;switch(u){case ur:b(t,e,n,r);break;case cr:w(t,e,n,r);break;case lr:null==t&&E(e,n,r,s);break;case ar:P(t,e,n,r,i,o,s,a);break;default:1&l?O(t,e,n,r,i,o,s,a):6&l?R(t,e,n,r,i,o,s,a):(64&l||128&l)&&u.process(t,e,n,r,i,o,s,a,X)}null!=c&&i&&Un(c,t&&t.ref,o,e)},b=(t,e,r,i)=>{if(null==t)n(e.el=u(e.children),r,i);else{const n=e.el=t.el;e.children!==t.children&&f(n,e.children)}},w=(t,e,r,i)=>{null==t?n(e.el=c(e.children||""),r,i):e.el=t.el},E=(t,e,n,r)=>{[t.el,t.anchor]=m(t.children,e,n,r)},x=({el:t,anchor:e},r,i)=>{let o;while(t&&t!==e)o=g(t),n(t,r,i),t=o;n(e,r,i)},I=({el:t,anchor:e})=>{let n;while(t&&t!==e)n=g(t),i(t),t=n;i(e)},O=(t,e,n,r,i,o,s,a)=>{s=s||"svg"===e.type,null==t?S(e,n,r,i,o,s,a):N(t,e,i,o,s,a)},S=(t,e,i,s,u,c,l)=>{let h,f;const{type:d,props:g,shapeFlag:v,transition:m,scopeId:_,patchFlag:b,dirs:w}=t;if(t.el&&void 0!==y&&-1===b)h=t.el=y(t.el);else{if(h=t.el=a(t.type,c,g&&g.is),8&v?p(h,t.children):16&v&&T(t.children,h,null,s,u,c&&"foreignObject"!==d,l||!!t.dynamicChildren),w&&An(t,null,s,"created"),g){for(const e in g)Object(r["x"])(e)||o(h,e,null,g[e],c,t.children,s,u,K);(f=g.onVnodeBeforeMount)&&Gn(f,s,t)}C(h,_,t,s)}w&&An(t,null,s,"beforeMount");const E=(!u||u&&!u.pendingBranch)&&m&&!m.persisted;E&&m.beforeEnter(h),n(h,e,i),((f=g&&g.onVnodeMounted)||E||w)&&qn(()=>{f&&Gn(f,s,t),E&&m.enter(h),w&&An(t,null,s,"mounted")},u)},C=(t,e,n,r)=>{if(e&&v(t,e),r){const i=r.type.__scopeId;i&&i!==e&&v(t,i+"-s");let o=r.subTree;0,n===o&&C(t,r.vnode.scopeId,r.vnode,r.parent)}},T=(t,e,n,r,i,o,s,a=0)=>{for(let u=a;u<t.length;u++){const a=t[u]=s?Tr(t[u]):Cr(t[u]);_(null,a,e,n,r,i,o,s)}},N=(t,e,n,i,a,u)=>{const c=e.el=t.el;let{patchFlag:l,dynamicChildren:h,dirs:f}=e;l|=16&t.patchFlag;const d=t.props||r["b"],g=e.props||r["b"];let v;if((v=g.onVnodeBeforeUpdate)&&Gn(v,n,e,t),f&&An(e,t,n,"beforeUpdate"),l>0){if(16&l)A(c,e,d,g,n,i,a);else if(2&l&&d.class!==g.class&&o(c,"class",null,g.class,a),4&l&&o(c,"style",d.style,g.style,a),8&l){const r=e.dynamicProps;for(let e=0;e<r.length;e++){const u=r[e],l=d[u],h=g[u];(h!==l||s&&s(c,u))&&o(c,u,l,h,a,t.children,n,i,K)}}1&l&&t.children!==e.children&&p(c,e.children)}else u||null!=h||A(c,e,d,g,n,i,a);const y=a&&"foreignObject"!==e.type;h?k(t.dynamicChildren,h,c,n,i,y):u||F(t,e,c,null,n,i,y),((v=g.onVnodeUpdated)||f)&&qn(()=>{v&&Gn(v,n,e,t),f&&An(e,t,n,"updated")},i)},k=(t,e,n,r,i,o)=>{for(let s=0;s<e.length;s++){const a=t[s],u=e[s],c=a.type===ar||!mr(a,u)||6&a.shapeFlag||64&a.shapeFlag?d(a.el):n;_(a,u,c,null,r,i,o,!0)}},A=(t,e,n,i,a,u,c)=>{if(n!==i){for(const l in i){if(Object(r["x"])(l))continue;const h=i[l],f=n[l];(h!==f||s&&s(t,l))&&o(t,l,f,h,c,e.children,a,u,K)}if(n!==r["b"])for(const s in n)Object(r["x"])(s)||s in i||o(t,s,n[s],null,c,e.children,a,u,K)}},P=(t,e,r,i,o,s,a,c)=>{const l=e.el=t?t.el:u(""),h=e.anchor=t?t.anchor:u("");let{patchFlag:f,dynamicChildren:p}=e;f>0&&(c=!0),null==t?(n(l,r,i),n(h,r,i),T(e.children,r,h,o,s,a,c)):f>0&&64&f&&p?(k(t.dynamicChildren,p,r,o,s,a),(null!=e.key||o&&e===o.subTree)&&zn(t,e,!0)):F(t,e,r,h,o,s,a,c)},R=(t,e,n,r,i,o,s,a)=>{null==t?512&e.shapeFlag?i.ctx.activate(e,n,r,s,a):L(e,n,r,i,o,s,a):j(t,e,a)},L=(t,e,n,r,i,o,s)=>{const a=t.component=$r(t,r,i);if(dn(t)&&(a.ctx.renderer=X),ni(a),a.asyncDep){if(i&&i.registerDep(a,M),!t.el){const t=a.subTree=Er(cr);w(null,t,e,n)}}else M(a,t,e,n,i,o,s)},j=(t,e,n)=>{const r=e.component=t.component;if(de(t,e,n)){if(r.asyncDep&&!r.asyncResolved)return void D(r,e,n);r.next=e,Qt(r.update),r.update()}else e.component=t.component,e.el=t.el,r.vnode=e},M=(t,e,n,i,o,s,a)=>{t.update=l((function(){if(t.isMounted){let e,{next:n,bu:i,u:u,parent:c,vnode:l}=t,h=n;0,n?(n.el=l.el,D(t,n,a)):n=l,i&&Object(r["m"])(i),(e=n.props&&n.props.onVnodeBeforeUpdate)&&Gn(e,c,n,l);const f=le(t);0;const p=t.subTree;t.subTree=f,_(p,f,d(p.el),H(p),t,o,s),n.el=f.el,null===h&&ve(t,f.el),u&&qn(u,o),(e=n.props&&n.props.onVnodeUpdated)&&qn(()=>{Gn(e,c,n,l)},o)}else{let a;const{el:u,props:c}=e,{bm:l,m:h,parent:f}=t;l&&Object(r["m"])(l),(a=c&&c.onVnodeBeforeMount)&&Gn(a,f,e);const p=t.subTree=le(t);0,u&&Q?Q(e.el,p,t,o):(_(null,p,n,i,t,o,s),e.el=p.el),h&&qn(h,o),(a=c&&c.onVnodeMounted)&&qn(()=>{Gn(a,f,e)},o);const{a:d}=t;d&&256&e.shapeFlag&&qn(d,o),t.isMounted=!0}}),Fn)},D=(t,e,n)=>{e.component=t;const r=t.vnode.props;t.vnode=e,t.next=null,Pe(t,e.props,r,n),Nn(t,e.children),ee(void 0,t.update)},F=(t,e,n,r,i,o,s,a=!1)=>{const u=t&&t.children,c=t?t.shapeFlag:0,l=e.children,{patchFlag:h,shapeFlag:f}=e;if(h>0){if(128&h)return void U(u,l,n,r,i,o,s,a);if(256&h)return void q(u,l,n,r,i,o,s,a)}8&f?(16&c&&K(u,i,o),l!==u&&p(n,l)):16&c?16&f?U(u,l,n,r,i,o,s,a):K(u,i,o,!0):(8&c&&p(n,""),16&f&&T(l,n,r,i,o,s,a))},q=(t,e,n,i,o,s,a,u)=>{t=t||r["a"],e=e||r["a"];const c=t.length,l=e.length,h=Math.min(c,l);let f;for(f=0;f<h;f++){const r=e[f]=u?Tr(e[f]):Cr(e[f]);_(t[f],r,n,null,o,s,a,u)}c>l?K(t,o,s,!0,!1,h):T(e,n,i,o,s,a,u,h)},U=(t,e,n,i,o,s,a,u)=>{let c=0;const l=e.length;let h=t.length-1,f=l-1;while(c<=h&&c<=f){const r=t[c],i=e[c]=u?Tr(e[c]):Cr(e[c]);if(!mr(r,i))break;_(r,i,n,null,o,s,a,u),c++}while(c<=h&&c<=f){const r=t[h],i=e[f]=u?Tr(e[f]):Cr(e[f]);if(!mr(r,i))break;_(r,i,n,null,o,s,a,u),h--,f--}if(c>h){if(c<=f){const t=f+1,r=t<l?e[t].el:i;while(c<=f)_(null,e[c]=u?Tr(e[c]):Cr(e[c]),n,r,o,s,a),c++}}else if(c>f)while(c<=h)V(t[c],o,s,!0),c++;else{const p=c,d=c,g=new Map;for(c=d;c<=f;c++){const t=e[c]=u?Tr(e[c]):Cr(e[c]);null!=t.key&&g.set(t.key,c)}let v,y=0;const m=f-d+1;let b=!1,w=0;const E=new Array(m);for(c=0;c<m;c++)E[c]=0;for(c=p;c<=h;c++){const r=t[c];if(y>=m){V(r,o,s,!0);continue}let i;if(null!=r.key)i=g.get(r.key);else for(v=d;v<=f;v++)if(0===E[v-d]&&mr(r,e[v])){i=v;break}void 0===i?V(r,o,s,!0):(E[i-d]=c+1,i>=w?w=i:b=!0,_(r,e[i],n,null,o,s,a,u),y++)}const x=b?Wn(E):r["a"];for(v=x.length-1,c=m-1;c>=0;c--){const t=d+c,r=e[t],u=t+1<l?e[t+1].el:i;0===E[c]?_(null,r,n,u,o,s,a):b&&(v<0||c!==x[v]?B(r,n,u,2):v--)}}},B=(t,e,r,i,o=null)=>{const{el:s,type:a,transition:u,children:c,shapeFlag:l}=t;if(6&l)return void B(t.component.subTree,e,r,i);if(128&l)return void t.suspense.move(e,r,i);if(64&l)return void a.move(t,e,r,X);if(a===ar){n(s,e,r);for(let t=0;t<c.length;t++)B(c[t],e,r,i);return void n(t.anchor,e,r)}if(a===lr)return void x(t,e,r);const h=2!==i&&1&l&&u;if(h)if(0===i)u.beforeEnter(s),n(s,e,r),qn(()=>u.enter(s),o);else{const{leave:t,delayLeave:i,afterLeave:o}=u,a=()=>n(s,e,r),c=()=>{t(s,()=>{a(),o&&o()})};i?i(s,a,c):c()}else n(s,e,r)},V=(t,e,n,r=!1,i=!1)=>{const{type:o,props:s,ref:a,children:u,dynamicChildren:c,shapeFlag:l,patchFlag:h,dirs:f}=t;if(null!=a&&Un(a,null,n,null),256&l)return void e.ctx.deactivate(t);const p=1&l&&f;let d;if((d=s&&s.onVnodeBeforeUnmount)&&Gn(d,e,t),6&l)W(t.component,n,r);else{if(128&l)return void t.suspense.unmount(n,r);p&&An(t,null,e,"beforeUnmount"),c&&(o!==ar||h>0&&64&h)?K(c,e,n,!1,!0):(o===ar&&(128&h||256&h)||!i&&16&l)&&K(u,e,n),64&l&&(r||!Hn(t.props))&&t.type.remove(t,X),r&&G(t)}((d=s&&s.onVnodeUnmounted)||p)&&qn(()=>{d&&Gn(d,e,t),p&&An(t,null,e,"unmounted")},n)},G=t=>{const{type:e,el:n,anchor:r,transition:o}=t;if(e===ar)return void z(n,r);if(e===lr)return void I(t);const s=()=>{i(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&t.shapeFlag&&o&&!o.persisted){const{leave:e,delayLeave:r}=o,i=()=>e(n,s);r?r(t.el,s,i):i()}else s()},z=(t,e)=>{let n;while(t!==e)n=g(t),i(t),t=n;i(e)},W=(t,e,n)=>{const{bum:i,effects:o,update:s,subTree:a,um:u}=t;if(i&&Object(r["m"])(i),o)for(let r=0;r<o.length;r++)h(o[r]);s&&(h(s),V(a,t,e,n)),u&&qn(u,e),qn(()=>{t.isUnmounted=!0},e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},K=(t,e,n,r=!1,i=!1,o=0)=>{for(let s=o;s<t.length;s++)V(t[s],e,n,r,i)},H=t=>6&t.shapeFlag?H(t.component.subTree):128&t.shapeFlag?t.suspense.next():g(t.anchor||t.el),Y=(t,e)=>{null==t?e._vnode&&V(e._vnode,null,null,!0):_(e._vnode||null,t,e),ne(),e._vnode=t},X={p:_,um:V,m:B,r:G,mt:L,mc:T,pc:F,pbc:k,n:H,o:t};let $,Q;return e&&([$,Q]=e(X)),{render:Y,hydrate:$,createApp:Ln(Y,$)}}function Gn(t,e,n,r=null){Pt(t,e,7,[n,r])}function zn(t,e,n=!1){const i=t.children,o=e.children;if(Object(r["n"])(i)&&Object(r["n"])(o))for(let r=0;r<i.length;r++){const t=i[r];let e=o[r];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=o[r]=Tr(o[r]),e.el=t.el),n||zn(t,e))}}function Wn(t){const e=t.slice(),n=[0];let r,i,o,s,a;const u=t.length;for(r=0;r<u;r++){const u=t[r];if(0!==u){if(i=n[n.length-1],t[i]<u){e[r]=i,n.push(r);continue}o=0,s=n.length-1;while(o<s)a=(o+s)/2|0,t[n[a]]<u?o=a+1:s=a;u<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}o=n.length,s=n[o-1];while(o-- >0)n[o]=s,s=e[s];return n}const Kn=t=>t.__isTeleport,Hn=t=>t&&(t.disabled||""===t.disabled),Yn=t=>"undefined"!==typeof SVGElement&&t instanceof SVGElement,Xn=(t,e)=>{const n=t&&t.to;if(Object(r["B"])(n)){if(e){const t=e(n);return t}return null}return n},$n={__isTeleport:!0,process(t,e,n,r,i,o,s,a,u){const{mc:c,pc:l,pbc:h,o:{insert:f,querySelector:p,createText:d,createComment:g}}=u,v=Hn(e.props),{shapeFlag:y,children:m}=e;if(null==t){const t=e.el=d(""),u=e.anchor=d("");f(t,n,r),f(u,n,r);const l=e.target=Xn(e.props,p),h=e.targetAnchor=d("");l&&(f(h,l),s=s||Yn(l));const g=(t,e)=>{16&y&&c(m,t,e,i,o,s,a)};v?g(n,u):l&&g(l,h)}else{e.el=t.el;const r=e.anchor=t.anchor,c=e.target=t.target,f=e.targetAnchor=t.targetAnchor,d=Hn(t.props),g=d?n:c,y=d?r:f;if(s=s||Yn(c),e.dynamicChildren?(h(t.dynamicChildren,e.dynamicChildren,g,i,o,s),zn(t,e,!0)):a||l(t,e,g,y,i,o,s),v)d||Qn(e,n,r,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const t=e.target=Xn(e.props,p);t&&Qn(e,t,null,u,0)}else d&&Qn(e,c,f,u,1)}},remove(t,{r:e,o:{remove:n}}){const{shapeFlag:r,children:i,anchor:o}=t;if(n(o),16&r)for(let s=0;s<i.length;s++)e(i[s])},move:Qn,hydrate:Jn};function Qn(t,e,n,{o:{insert:r},m:i},o=2){0===o&&r(t.targetAnchor,e,n);const{el:s,anchor:a,shapeFlag:u,children:c,props:l}=t,h=2===o;if(h&&r(s,e,n),(!h||Hn(l))&&16&u)for(let f=0;f<c.length;f++)i(c[f],e,n,2);h&&r(a,e,n)}function Jn(t,e,n,r,i,{o:{nextSibling:o,parentNode:s,querySelector:a}},u){const c=e.target=Xn(e.props,a);if(c){const a=c._lpa||c.firstChild;16&e.shapeFlag&&(Hn(e.props)?(e.anchor=u(o(t),e,s(t),n,r,i),e.targetAnchor=a):(e.anchor=o(t),e.targetAnchor=u(a,e,c,n,r,i)),c._lpa=e.targetAnchor&&o(e.targetAnchor))}return e.anchor&&o(e.anchor)}const Zn=$n,tr="components",er="directives";function nr(t){return or(tr,t)||t}const rr=Symbol();function ir(t){return or(er,t)}function or(t,e,n=!0){const i=ue||Qr;if(i){const n=i.type;if(t===tr){if("_self"===e)return n;const t=n.displayName||n.name;if(t&&(t===e||t===Object(r["e"])(e)||t===Object(r["f"])(Object(r["e"])(e))))return n}const o=sr(i[t]||n[t],e)||sr(i.appContext[t],e);return o}}function sr(t,e){return t&&(t[e]||t[Object(r["e"])(e)]||t[Object(r["f"])(Object(r["e"])(e))])}const ar=Symbol(void 0),ur=Symbol(void 0),cr=Symbol(void 0),lr=Symbol(void 0),hr=[];let fr=null;function pr(t=!1){hr.push(fr=t?null:[])}function dr(){hr.pop(),fr=hr[hr.length-1]||null}let gr=1;function vr(t,e,n,i,o){const s=Er(t,e,n,i,o,!0);return s.dynamicChildren=fr||r["a"],dr(),gr>0&&fr&&fr.push(s),s}function yr(t){return!!t&&!0===t.__v_isVNode}function mr(t,e){return t.type===e.type&&t.key===e.key}const _r="__vInternal",br=({key:t})=>null!=t?t:null,wr=({ref:t})=>null!=t?Object(r["B"])(t)||_t(t)||Object(r["o"])(t)?{i:ue,r:t}:t:null,Er=xr;function xr(t,e=null,n=null,i=0,o=null,s=!1){if(t&&t!==rr||(t=cr),yr(t)){const r=Ir(t,e,!0);return n&&Nr(r,n),r}if(ui(t)&&(t=t.__vccOpts),e){(vt(e)||_r in e)&&(e=Object(r["h"])({},e));let{class:t,style:n}=e;t&&!Object(r["B"])(t)&&(e.class=Object(r["G"])(t)),Object(r["u"])(n)&&(vt(n)&&!Object(r["n"])(n)&&(n=Object(r["h"])({},n)),e.style=Object(r["H"])(n))}const a=Object(r["B"])(t)?1:ye(t)?128:Kn(t)?64:Object(r["u"])(t)?4:Object(r["o"])(t)?2:0;const u={__v_isVNode:!0,["__v_skip"]:!0,type:t,props:e,key:e&&br(e),ref:e&&wr(e),scopeId:Se,children:null,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null};if(Nr(u,n),128&a){const{content:t,fallback:e}=me(u);u.ssContent=t,u.ssFallback=e}return gr>0&&!s&&fr&&(i>0||6&a)&&32!==i&&fr.push(u),u}function Ir(t,e,n=!1){const{props:i,ref:o,patchFlag:s}=t,a=e?kr(i||{},e):i;return{__v_isVNode:!0,["__v_skip"]:!0,type:t.type,props:a,key:a&&br(a),ref:e&&e.ref?n&&o?Object(r["n"])(o)?o.concat(wr(e)):[o,wr(e)]:wr(e):o,scopeId:t.scopeId,children:t.children,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ar?-1===s?16:16|s:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ir(t.ssContent),ssFallback:t.ssFallback&&Ir(t.ssFallback),el:t.el,anchor:t.anchor}}function Or(t=" ",e=0){return Er(ur,null,t,e)}function Sr(t="",e=!1){return e?(pr(),vr(cr,null,t)):Er(cr,null,t)}function Cr(t){return null==t||"boolean"===typeof t?Er(cr):Object(r["n"])(t)?Er(ar,null,t):"object"===typeof t?null===t.el?t:Ir(t):Er(ur,null,String(t))}function Tr(t){return null===t.el?t:Ir(t)}function Nr(t,e){let n=0;const{shapeFlag:i}=t;if(null==e)e=null;else if(Object(r["n"])(e))n=16;else if("object"===typeof e){if(1&i||64&i){const n=e.default;return void(n&&(n._c&&Ee(1),Nr(t,n()),n._c&&Ee(-1)))}{n=32;const r=e._;r||_r in e?3===r&&ue&&(1024&ue.vnode.patchFlag?(e._=2,t.patchFlag|=1024):e._=1):e._ctx=ue}}else Object(r["o"])(e)?(e={default:e,_ctx:ue},n=32):(e=String(e),64&i?(n=16,e=[Or(e)]):n=8);t.children=e,t.shapeFlag|=n}function kr(...t){const e=Object(r["h"])({},t[0]);for(let n=1;n<t.length;n++){const i=t[n];for(const t in i)if("class"===t)e.class!==i.class&&(e.class=Object(r["G"])([e.class,i.class]));else if("style"===t)e.style=Object(r["H"])([e.style,i.style]);else if(Object(r["v"])(t)){const n=e[t],r=i[t];n!==r&&(e[t]=n?[].concat(n,i[t]):r)}else""!==t&&(e[t]=i[t])}return e}function Ar(t,e){if(Qr){let n=Qr.provides;const r=Qr.parent&&Qr.parent.provides;r===n&&(n=Qr.provides=Object.create(r)),n[t]=e}else 0}function Pr(t,e,n=!1){const i=Qr||ue;if(i){const o=null==i.parent?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(o&&t in o)return o[t];if(arguments.length>1)return n&&Object(r["o"])(e)?e():e}else 0}let Rr=!1;function Lr(t,e,n=[],i=[],o=[],s=!1){const{mixins:a,extends:u,data:c,computed:l,methods:h,watch:f,provide:p,inject:d,components:g,directives:v,beforeMount:y,mounted:m,beforeUpdate:_,updated:b,activated:w,deactivated:E,beforeDestroy:x,beforeUnmount:I,destroyed:O,unmounted:S,render:C,renderTracked:T,renderTriggered:N,errorCaptured:k,expose:A}=e,P=t.proxy,R=t.ctx,L=t.appContext.mixins;s&&C&&t.render===r["d"]&&(t.render=C),s||(Rr=!0,jr("beforeCreate","bc",e,t,L),Rr=!1,Fr(t,L,n,i,o)),u&&Lr(t,u,n,i,o,!0),a&&Fr(t,a,n,i,o);if(d)if(Object(r["n"])(d))for(let r=0;r<d.length;r++){const t=d[r];R[t]=Pr(t)}else for(const j in d){const t=d[j];Object(r["u"])(t)?R[j]=Pr(t.from||j,t.default,!0):R[j]=Pr(t)}if(h)for(const j in h){const t=h[j];Object(r["o"])(t)&&(R[j]=t.bind(P))}if(s?c&&n.push(c):(n.length&&n.forEach(e=>qr(t,e,P)),c&&qr(t,c,P)),l)for(const j in l){const t=l[j],e=Object(r["o"])(t)?t.bind(P,P):Object(r["o"])(t.get)?t.get.bind(P,P):r["d"];0;const n=!Object(r["o"])(t)&&Object(r["o"])(t.set)?t.set.bind(P):r["d"],i=ci({get:e,set:n});Object.defineProperty(R,j,{enumerable:!0,configurable:!0,get:()=>i.value,set:t=>i.value=t})}if(f&&i.push(f),!s&&i.length&&i.forEach(t=>{for(const e in t)Ur(t[e],R,P,e)}),p&&o.push(p),!s&&o.length&&o.forEach(t=>{const e=Object(r["o"])(t)?t.call(P):t;Reflect.ownKeys(e).forEach(t=>{Ar(t,e[t])})}),s&&(g&&Object(r["h"])(t.components||(t.components=Object(r["h"])({},t.type.components)),g),v&&Object(r["h"])(t.directives||(t.directives=Object(r["h"])({},t.type.directives)),v)),s||jr("created","c",e,t,L),y&&Ve(y.bind(P)),m&&Ge(m.bind(P)),_&&ze(_.bind(P)),b&&We(b.bind(P)),w&&yn(w.bind(P)),E&&mn(E.bind(P)),k&&$e(k.bind(P)),T&&Xe(T.bind(P)),N&&Ye(N.bind(P)),I&&Ke(I.bind(P)),S&&He(S.bind(P)),Object(r["n"])(A))if(s)0;else if(A.length){const e=t.exposed||(t.exposed=St({}));A.forEach(t=>{e[t]=Tt(P,t)})}else t.exposed||(t.exposed=r["b"])}function jr(t,e,n,r,i){Dr(t,e,i,r);const{extends:o,mixins:s}=n;o&&Mr(t,e,o,r),s&&Dr(t,e,s,r);const a=n[t];a&&Pt(a.bind(r.proxy),r,e)}function Mr(t,e,n,r){n.extends&&Mr(t,e,n.extends,r);const i=n[t];i&&Pt(i.bind(r.proxy),r,e)}function Dr(t,e,n,r){for(let i=0;i<n.length;i++){const o=n[i].mixins;o&&Dr(t,e,o,r);const s=n[i][t];s&&Pt(s.bind(r.proxy),r,e)}}function Fr(t,e,n,r,i){for(let o=0;o<e.length;o++)Lr(t,e[o],n,r,i,!0)}function qr(t,e,n){const i=e.call(n,n);Object(r["u"])(i)&&(t.data===r["b"]?t.data=lt(i):Object(r["h"])(t.data,i))}function Ur(t,e,n,i){const o=i.includes(".")?Br(n,i):()=>n[i];if(Object(r["B"])(t)){const n=e[t];Object(r["o"])(n)&&Ze(o,n)}else if(Object(r["o"])(t))Ze(o,t.bind(n));else if(Object(r["u"])(t))if(Object(r["n"])(t))t.forEach(t=>Ur(t,e,n,i));else{const i=Object(r["o"])(t.handler)?t.handler.bind(n):e[t.handler];Object(r["o"])(i)&&Ze(o,i,t)}else 0}function Br(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function Vr(t){const e=t.type,{__merged:n,mixins:r,extends:i}=e;if(n)return n;const o=t.appContext.mixins;if(!o.length&&!r&&!i)return e;const s={};return o.forEach(e=>Gr(s,e,t)),Gr(s,e,t),e.__merged=s}function Gr(t,e,n){const i=n.appContext.config.optionMergeStrategies,{mixins:o,extends:s}=e;s&&Gr(t,s,n),o&&o.forEach(e=>Gr(t,e,n));for(const a in e)i&&Object(r["k"])(i,a)?t[a]=i[a](t[a],e[a],n.proxy,a):t[a]=e[a]}const zr=t=>t&&(t.proxy?t.proxy:zr(t.parent)),Wr=Object(r["h"])(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>zr(t.parent),$root:t=>t.root&&t.root.proxy,$emit:t=>t.emit,$options:t=>Vr(t),$forceUpdate:t=>()=>Xt(t.update),$nextTick:t=>Yt.bind(t.proxy),$watch:t=>en.bind(t)}),Kr={get({_:t},e){const{ctx:n,setupState:i,data:o,props:s,accessCache:a,type:u,appContext:c}=t;if("__v_skip"===e)return!0;let l;if("$"!==e[0]){const u=a[e];if(void 0!==u)switch(u){case 0:return i[e];case 1:return o[e];case 3:return n[e];case 2:return s[e]}else{if(i!==r["b"]&&Object(r["k"])(i,e))return a[e]=0,i[e];if(o!==r["b"]&&Object(r["k"])(o,e))return a[e]=1,o[e];if((l=t.propsOptions[0])&&Object(r["k"])(l,e))return a[e]=2,s[e];if(n!==r["b"]&&Object(r["k"])(n,e))return a[e]=3,n[e];Rr||(a[e]=4)}}const h=Wr[e];let f,p;return h?("$attrs"===e&&b(t,"get",e),h(t)):(f=u.__cssModules)&&(f=f[e])?f:n!==r["b"]&&Object(r["k"])(n,e)?(a[e]=3,n[e]):(p=c.config.globalProperties,Object(r["k"])(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:i,setupState:o,ctx:s}=t;if(o!==r["b"]&&Object(r["k"])(o,e))o[e]=n;else if(i!==r["b"]&&Object(r["k"])(i,e))i[e]=n;else if(e in t.props)return!1;return("$"!==e[0]||!(e.slice(1)in t))&&(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:o,propsOptions:s}},a){let u;return void 0!==n[a]||t!==r["b"]&&Object(r["k"])(t,a)||e!==r["b"]&&Object(r["k"])(e,a)||(u=s[0])&&Object(r["k"])(u,a)||Object(r["k"])(i,a)||Object(r["k"])(Wr,a)||Object(r["k"])(o.config.globalProperties,a)}};const Hr=Object(r["h"])({},Kr,{get(t,e){if(e!==Symbol.unscopables)return Kr.get(t,e,t)},has(t,e){const n="_"!==e[0]&&!Object(r["p"])(e);return n}});const Yr=Pn();let Xr=0;function $r(t,e,n){const i=t.type,o=(e?e.appContext:t.appContext)||Yr,s={uid:Xr++,vnode:t,type:i,parent:e,appContext:o,root:null,next:null,subTree:null,update:null,render:null,proxy:null,exposed:null,withProxy:null,effects:null,provides:e?e.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:je(i,o),emitsOptions:se(i,o),emit:null,emitted:null,ctx:r["b"],data:r["b"],props:r["b"],attrs:r["b"],slots:r["b"],refs:r["b"],setupState:r["b"],setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=oe.bind(null,s),s}let Qr=null;const Jr=()=>Qr||ue,Zr=t=>{Qr=t};let ti,ei=!1;function ni(t,e=!1){ei=e;const{props:n,children:r,shapeFlag:i}=t.vnode,o=4&i;Ae(t,n,o,e),Tn(t,r);const s=o?ri(t,e):void 0;return ei=!1,s}function ri(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Kr);const{setup:i}=n;if(i){const n=t.setupContext=i.length>1?si(t):null;Qr=t,y();const o=At(i,t,0,[t.props,n]);if(_(),Qr=null,Object(r["w"])(o)){if(e)return o.then(e=>{ii(t,e)});t.asyncDep=o}else ii(t,o)}else oi(t)}function ii(t,e,n){Object(r["o"])(e)?t.render=e:Object(r["u"])(e)&&(t.setupState=St(e)),oi(t)}function oi(t,e){const n=t.type;t.render||(ti&&n.template&&!n.render&&(n.render=ti(n.template,{isCustomElement:t.appContext.config.isCustomElement,delimiters:n.delimiters})),t.render=n.render||r["d"],t.render._rc&&(t.withProxy=new Proxy(t.ctx,Hr))),Qr=t,y(),Lr(t,n),_(),Qr=null}function si(t){const e=e=>{t.exposed=St(e)};return{attrs:t.attrs,slots:t.slots,emit:t.emit,expose:e}}function ai(t,e=Qr){e&&(e.effects||(e.effects=[])).push(t)}function ui(t){return Object(r["o"])(t)&&"__vccOpts"in t}function ci(t){const e=kt(t);return ai(e.effect),e}function li(t,e,n){const i=arguments.length;return 2===i?Object(r["u"])(e)&&!Object(r["n"])(e)?yr(e)?Er(t,null,[e]):Er(t,e):Er(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):3===i&&yr(n)&&(n=[n]),Er(t,e,n))}Symbol("");function hi(t,e){let n;if(Object(r["n"])(t)||Object(r["B"])(t)){n=new Array(t.length);for(let r=0,i=t.length;r<i;r++)n[r]=e(t[r],r)}else if("number"===typeof t){0,n=new Array(t);for(let r=0;r<t;r++)n[r]=e(r+1,r)}else if(Object(r["u"])(t))if(t[Symbol.iterator])n=Array.from(t,e);else{const r=Object.keys(t);n=new Array(r.length);for(let i=0,o=r.length;i<o;i++){const o=r[i];n[i]=e(t[o],o,i)}}else n=[];return n}const fi="3.0.4",pi="http://www.w3.org/2000/svg",di="undefined"!==typeof document?document:null;let gi,vi;const yi={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n)=>e?di.createElementNS(pi,t):di.createElement(t,n?{is:n}:void 0),createText:t=>di.createTextNode(t),createComment:t=>di.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>di.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){return t.cloneNode(!0)},insertStaticContent(t,e,n,r){const i=r?vi||(vi=di.createElementNS(pi,"svg")):gi||(gi=di.createElement("div"));i.innerHTML=t;const o=i.firstChild;let s=o,a=s;while(s)a=s,yi.insert(s,e,n),s=i.firstChild;return[o,a]}};function mi(t,e,n){if(null==e&&(e=""),n)t.setAttribute("class",e);else{const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),t.className=e}}function _i(t,e,n){const i=t.style;if(n)if(Object(r["B"])(n))e!==n&&(i.cssText=n);else{for(const t in n)wi(i,t,n[t]);if(e&&!Object(r["B"])(e))for(const t in e)null==n[t]&&wi(i,t,"")}else t.removeAttribute("style")}const bi=/\s*!important$/;function wi(t,e,n){if(Object(r["n"])(n))n.forEach(n=>wi(t,e,n));else if(e.startsWith("--"))t.setProperty(e,n);else{const i=Ii(t,e);bi.test(n)?t.setProperty(Object(r["l"])(i),n.replace(bi,""),"important"):t[i]=n}}const Ei=["Webkit","Moz","ms"],xi={};function Ii(t,e){const n=xi[e];if(n)return n;let i=Object(r["e"])(e);if("filter"!==i&&i in t)return xi[e]=i;i=Object(r["f"])(i);for(let r=0;r<Ei.length;r++){const n=Ei[r]+i;if(n in t)return xi[e]=n}return e}const Oi="http://www.w3.org/1999/xlink";function Si(t,e,n,i){if(i&&e.startsWith("xlink:"))null==n?t.removeAttributeNS(Oi,e.slice(6,e.length)):t.setAttributeNS(Oi,e,n);else{const i=Object(r["A"])(e);null==n||i&&!1===n?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function Ci(t,e,n,r,i,o,s){if("innerHTML"===e||"textContent"===e)return r&&s(r,i,o),void(t[e]=null==n?"":n);if("value"!==e||"PROGRESS"===t.tagName){if(""===n||null==n){const r=typeof t[e];if(""===n&&"boolean"===r)return void(t[e]=!0);if(null==n&&"string"===r)return t[e]="",void t.removeAttribute(e);if("number"===r)return t[e]=0,void t.removeAttribute(e)}try{t[e]=n}catch(a){0}}else{t._value=n;const e=null==n?"":n;t.value!==e&&(t.value=e)}}let Ti=Date.now;"undefined"!==typeof document&&Ti()>document.createEvent("Event").timeStamp&&(Ti=()=>performance.now());let Ni=0;const ki=Promise.resolve(),Ai=()=>{Ni=0},Pi=()=>Ni||(ki.then(Ai),Ni=Ti());function Ri(t,e,n,r){t.addEventListener(e,n,r)}function Li(t,e,n,r){t.removeEventListener(e,n,r)}function ji(t,e,n,r,i=null){const o=t._vei||(t._vei={}),s=o[e];if(r&&s)s.value=r;else{const[n,a]=Di(e);if(r){const s=o[e]=Fi(r,i);Ri(t,n,s,a)}else s&&(Li(t,n,s,a),o[e]=void 0)}}const Mi=/(?:Once|Passive|Capture)$/;function Di(t){let e;if(Mi.test(t)){let n;e={};while(n=t.match(Mi))t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t.slice(2).toLowerCase(),e]}function Fi(t,e){const n=t=>{const r=t.timeStamp||Ti();r>=n.attached-1&&Pt(qi(t,n.value),e,5,[t])};return n.value=t,n.attached=Pi(),n}function qi(t,e){if(Object(r["n"])(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(t=>e=>!e._stopped&&t(e))}return e}const Ui=/^on[a-z]/,Bi=(t,e)=>"value"===e,Vi=(t,e,n,i,o=!1,s,a,u,c)=>{switch(e){case"class":mi(t,i,o);break;case"style":_i(t,n,i);break;default:Object(r["v"])(e)?Object(r["t"])(e)||ji(t,e,n,i,a):Gi(t,e,i,o)?Ci(t,e,i,s,a,u,c):("true-value"===e?t._trueValue=i:"false-value"===e&&(t._falseValue=i),Si(t,e,i,o));break}};function Gi(t,e,n,i){return i?"innerHTML"===e||!!(e in t&&Ui.test(e)&&Object(r["o"])(n)):"spellcheck"!==e&&"draggable"!==e&&(("form"!==e||"string"!==typeof n)&&(("list"!==e||"INPUT"!==t.tagName)&&((!Ui.test(e)||!Object(r["B"])(n))&&e in t)))}const zi="transition",Wi="animation",Ki=(t,{slots:e})=>li(an,Xi(t),e);Ki.displayName="Transition";const Hi={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Yi=Ki.props=Object(r["h"])({},an.props,Hi);function Xi(t){let{name:e="v",type:n,css:i=!0,duration:o,enterFromClass:s=e+"-enter-from",enterActiveClass:a=e+"-enter-active",enterToClass:u=e+"-enter-to",appearFromClass:c=s,appearActiveClass:l=a,appearToClass:h=u,leaveFromClass:f=e+"-leave-from",leaveActiveClass:p=e+"-leave-active",leaveToClass:d=e+"-leave-to"}=t;const g={};for(const r in t)r in Hi||(g[r]=t[r]);if(!i)return g;const v=$i(o),y=v&&v[0],m=v&&v[1],{onBeforeEnter:_,onEnter:b,onEnterCancelled:w,onLeave:E,onLeaveCancelled:x,onBeforeAppear:I=_,onAppear:O=b,onAppearCancelled:S=w}=g,C=(t,e,n)=>{Zi(t,e?h:u),Zi(t,e?l:a),n&&n()},T=(t,e)=>{Zi(t,d),Zi(t,p),e&&e()},N=t=>(e,r)=>{const i=t?O:b,o=()=>C(e,t,r);i&&i(e,o),to(()=>{Zi(e,t?c:s),Ji(e,t?h:u),i&&i.length>1||no(e,n,y,o)})};return Object(r["h"])(g,{onBeforeEnter(t){_&&_(t),Ji(t,a),Ji(t,s)},onBeforeAppear(t){I&&I(t),Ji(t,l),Ji(t,c)},onEnter:N(!1),onAppear:N(!0),onLeave(t,e){const r=()=>T(t,e);Ji(t,p),Ji(t,f);const i=t.style.transitionProperty;t.style.transitionProperty="none",to(()=>{t.style.transitionProperty=i,Zi(t,f),Ji(t,d),E&&E.length>1||no(t,n,m,r)}),E&&E(t,r)},onEnterCancelled(t){C(t,!1),w&&w(t)},onAppearCancelled(t){C(t,!0),S&&S(t)},onLeaveCancelled(t){T(t),x&&x(t)}})}function $i(t){if(null==t)return null;if(Object(r["u"])(t))return[Qi(t.enter),Qi(t.leave)];{const e=Qi(t);return[e,e]}}function Qi(t){const e=Object(r["L"])(t);return e}function Ji(t,e){e.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(t._vtc||(t._vtc=new Set)).add(e)}function Zi(t,e){e.split(/\s+/).forEach(e=>e&&t.classList.remove(e));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function to(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let eo=0;function no(t,e,n,r){const i=t._endId=++eo,o=()=>{i===t._endId&&r()};if(n)return setTimeout(o,n);const{type:s,timeout:a,propCount:u}=ro(t,e);if(!s)return r();const c=s+"end";let l=0;const h=()=>{t.removeEventListener(c,f),o()},f=e=>{e.target===t&&++l>=u&&h()};setTimeout(()=>{l<u&&h()},a+1),t.addEventListener(c,f)}function ro(t,e){const n=window.getComputedStyle(t),r=t=>(n[t]||"").split(", "),i=r(zi+"Delay"),o=r(zi+"Duration"),s=io(i,o),a=r(Wi+"Delay"),u=r(Wi+"Duration"),c=io(a,u);let l=null,h=0,f=0;e===zi?s>0&&(l=zi,h=s,f=o.length):e===Wi?c>0&&(l=Wi,h=c,f=u.length):(h=Math.max(s,c),l=h>0?s>c?zi:Wi:null,f=l?l===zi?o.length:u.length:0);const p=l===zi&&/\b(transform|all)(,|$)/.test(n[zi+"Property"]);return{type:l,timeout:h,propCount:f,hasTransform:p}}function io(t,e){while(t.length<e.length)t=t.concat(t);return Math.max(...e.map((e,n)=>oo(e)+oo(t[n])))}function oo(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}const so=new WeakMap,ao=new WeakMap,uo={name:"TransitionGroup",props:Object(r["h"])({},Yi,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Jr(),r=rn();let i,o;return We(()=>{if(!i.length)return;const e=t.moveClass||(t.name||"v")+"-move";if(!go(i[0].el,n.vnode.el,e))return;i.forEach(lo),i.forEach(ho);const r=i.filter(fo);po(),r.forEach(t=>{const n=t.el,r=n.style;Ji(n,e),r.transform=r.webkitTransform=r.transitionDuration="";const i=n._moveCb=t=>{t&&t.target!==n||t&&!/transform$/.test(t.propertyName)||(n.removeEventListener("transitionend",i),n._moveCb=null,Zi(n,e))};n.addEventListener("transitionend",i)})}),()=>{const s=yt(t),a=Xi(s),u=s.tag||ar;i=o,o=e.default?pn(e.default()):[];for(let t=0;t<o.length;t++){const e=o[t];null!=e.key&&fn(e,cn(e,a,r,n))}if(i)for(let t=0;t<i.length;t++){const e=i[t];fn(e,cn(e,a,r,n)),so.set(e,e.el.getBoundingClientRect())}return Er(u,null,o)}}},co=uo;function lo(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function ho(t){ao.set(t,t.el.getBoundingClientRect())}function fo(t){const e=so.get(t),n=ao.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const e=t.el.style;return e.transform=e.webkitTransform=`translate(${r}px,${i}px)`,e.transitionDuration="0s",t}}function po(){return document.body.offsetHeight}function go(t,e,n){const r=t.cloneNode();t._vtc&&t._vtc.forEach(t=>{t.split(/\s+/).forEach(t=>t&&r.classList.remove(t))}),n.split(/\s+/).forEach(t=>t&&r.classList.add(t)),r.style.display="none";const i=1===e.nodeType?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=ro(r);return i.removeChild(r),o}const vo=t=>{const e=t.props["onUpdate:modelValue"];return Object(r["n"])(e)?t=>Object(r["m"])(e,t):e};function yo(t){t.target.composing=!0}function mo(t){const e=t.target;e.composing&&(e.composing=!1,_o(e,"input"))}function _o(t,e){const n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}const bo={created(t,{modifiers:{lazy:e,trim:n,number:i}},o){t._assign=vo(o);const s=i||"number"===t.type;Ri(t,e?"change":"input",e=>{if(e.target.composing)return;let i=t.value;n?i=i.trim():s&&(i=Object(r["L"])(i)),t._assign(i)}),n&&Ri(t,"change",()=>{t.value=t.value.trim()}),e||(Ri(t,"compositionstart",yo),Ri(t,"compositionend",mo),Ri(t,"change",mo))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,modifiers:{trim:n,number:i}},o){if(t._assign=vo(o),t.composing)return;if(document.activeElement===t){if(n&&t.value.trim()===e)return;if((i||"number"===t.type)&&Object(r["L"])(t.value)===e)return}const s=null==e?"":e;t.value!==s&&(t.value=s)}};const wo=["ctrl","shift","alt","meta"],Eo={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&0!==t.button,middle:t=>"button"in t&&1!==t.button,right:t=>"button"in t&&2!==t.button,exact:(t,e)=>wo.some(n=>t[n+"Key"]&&!e.includes(n))},xo=(t,e)=>(n,...r)=>{for(let t=0;t<e.length;t++){const r=Eo[e[t]];if(r&&r(n,e))return}return t(n,...r)},Io={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Oo=(t,e)=>n=>{if(!("key"in n))return;const i=Object(r["l"])(n.key);return e.some(t=>t===i||Io[t]===i)?t(n):void 0};const So=Object(r["h"])({patchProp:Vi,forcePatchProp:Bi},yi);let Co;function To(){return Co||(Co=Bn(So))}const No=(...t)=>{const e=To().createApp(...t);const{mount:n}=e;return e.mount=t=>{const i=ko(t);if(!i)return;const o=e._component;Object(r["o"])(o)||o.render||o.template||(o.template=i.innerHTML),i.innerHTML="";const s=n(i);return i.removeAttribute("v-cloak"),i.setAttribute("data-v-app",""),s},e};function ko(t){if(Object(r["B"])(t)){const e=document.querySelector(t);return e}return t}},"7a77":function(t,e,n){"use strict";function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},"7aac":function(t,e,n){"use strict";var r=n("c532");t.exports=r.isStandardBrowserEnv()?function(){return{write:function(t,e,n,i,o,s){var a=[];a.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},"7b0b":function(t,e,n){var r=n("1d80");t.exports=function(t){return Object(r(t))}},"7c73":function(t,e,n){var r,i=n("825a"),o=n("37e8"),s=n("7839"),a=n("d012"),u=n("1be4"),c=n("cc12"),l=n("f772"),h=">",f="<",p="prototype",d="script",g=l("IE_PROTO"),v=function(){},y=function(t){return f+d+h+t+f+"/"+d+h},m=function(t){t.write(y("")),t.close();var e=t.parentWindow.Object;return t=null,e},_=function(){var t,e=c("iframe"),n="java"+d+":";return e.style.display="none",u.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(y("document.F=Object")),t.close(),t.F},b=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}b=r?m(r):_();var t=s.length;while(t--)delete b[p][s[t]];return b()};a[g]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(v[p]=i(t),n=new v,v[p]=null,n[g]=t):n=b(),void 0===e?n:o(n,e)}},"7dd0":function(t,e,n){"use strict";var r=n("23e7"),i=n("9ed3"),o=n("e163"),s=n("d2bb"),a=n("d44e"),u=n("9112"),c=n("6eeb"),l=n("b622"),h=n("c430"),f=n("3f8c"),p=n("ae93"),d=p.IteratorPrototype,g=p.BUGGY_SAFARI_ITERATORS,v=l("iterator"),y="keys",m="values",_="entries",b=function(){return this};t.exports=function(t,e,n,l,p,w,E){i(n,e,l);var x,I,O,S=function(t){if(t===p&&A)return A;if(!g&&t in N)return N[t];switch(t){case y:return function(){return new n(this,t)};case m:return function(){return new n(this,t)};case _:return function(){return new n(this,t)}}return function(){return new n(this)}},C=e+" Iterator",T=!1,N=t.prototype,k=N[v]||N["@@iterator"]||p&&N[p],A=!g&&k||S(p),P="Array"==e&&N.entries||k;if(P&&(x=o(P.call(new t)),d!==Object.prototype&&x.next&&(h||o(x)===d||(s?s(x,d):"function"!=typeof x[v]&&u(x,v,b)),a(x,C,!0,!0),h&&(f[C]=b))),p==m&&k&&k.name!==m&&(T=!0,A=function(){return k.call(this)}),h&&!E||N[v]===A||u(N,v,A),f[e]=A,p)if(I={values:S(m),keys:w?A:S(y),entries:S(_)},E)for(O in I)(g||T||!(O in N))&&c(N,O,I[O]);else r({target:e,proto:!0,forced:g||T},I);return I}},"7f9a":function(t,e,n){var r=n("da84"),i=n("8925"),o=r.WeakMap;t.exports="function"===typeof o&&/native code/.test(i(o))},"825a":function(t,e,n){var r=n("861d");t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},8398:function(t,e,n){"use strict";var r=n("7a23"),i={name:"InputText",emits:["update:modelValue"],props:{modelValue:null},methods:{onInput(t){this.$emit("update:modelValue",t.target.value)}},computed:{filled(){return null!=this.modelValue&&this.modelValue.toString().length>0}}};function o(t,e,n,i,o,s){return Object(r["u"])(),Object(r["g"])("input",{class:["p-inputtext p-component",{"p-filled":s.filled}],value:n.modelValue,onInput:e[1]||(e[1]=(...t)=>s.onInput&&s.onInput(...t))},null,42,["value"])}i.render=o,e["a"]=i},"83ab":function(t,e,n){var r=n("d039");t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},"83b9":function(t,e,n){"use strict";var r=n("d925"),i=n("e683");t.exports=function(t,e){return t&&!r(e)?i(t,e):e}},8418:function(t,e,n){"use strict";var r=n("c04e"),i=n("9bf2"),o=n("5c6c");t.exports=function(t,e,n){var s=r(e);s in t?i.f(t,s,o(0,n)):t[s]=n}},"861d":function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},8925:function(t,e,n){var r=n("c6cd"),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return i.call(t)}),t.exports=r.inspectSource},"8aa5":function(t,e,n){"use strict";var r=n("6547").charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},"8df4":function(t,e,n){"use strict";var r=n("7a77");function i(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;t((function(t){n.reason||(n.reason=new r(t),e(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t,e=new i((function(e){t=e}));return{token:e,cancel:t}},t.exports=i},"90e3":function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},9112:function(t,e,n){var r=n("83ab"),i=n("9bf2"),o=n("5c6c");t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},9263:function(t,e,n){"use strict";var r=n("ad6d"),i=n("9f7f"),o=RegExp.prototype.exec,s=String.prototype.replace,a=o,u=function(){var t=/a/,e=/b*/g;return o.call(t,"a"),o.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),c=i.UNSUPPORTED_Y||i.BROKEN_CARET,l=void 0!==/()??/.exec("")[1],h=u||l||c;h&&(a=function(t){var e,n,i,a,h=this,f=c&&h.sticky,p=r.call(h),d=h.source,g=0,v=t;return f&&(p=p.replace("y",""),-1===p.indexOf("g")&&(p+="g"),v=String(t).slice(h.lastIndex),h.lastIndex>0&&(!h.multiline||h.multiline&&"\n"!==t[h.lastIndex-1])&&(d="(?: "+d+")",v=" "+v,g++),n=new RegExp("^(?:"+d+")",p)),l&&(n=new RegExp("^"+d+"$(?!\\s)",p)),u&&(e=h.lastIndex),i=o.call(f?n:h,v),f?i?(i.input=i.input.slice(g),i[0]=i[0].slice(g),i.index=h.lastIndex,h.lastIndex+=i[0].length):h.lastIndex=0:u&&i&&(h.lastIndex=h.global?i.index+i[0].length:e),l&&i&&i.length>1&&s.call(i[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(i[a]=void 0)})),i}),t.exports=a},9319:function(t,e,n){"use strict";var r=n("7a23"),i=n("0393");const o={ripple:!1,inputStyle:"outlined",locale:{startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",weekHeader:"Wk",firstDayOfWeek:0,dateFormat:"mm/dd/yy",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyFilterMessage:"No results found",emptyMessage:"No available options"},filterMatchModeOptions:{text:[i["a"].STARTS_WITH,i["a"].CONTAINS,i["a"].NOT_CONTAINS,i["a"].ENDS_WITH,i["a"].EQUALS,i["a"].NOT_EQUALS],numeric:[i["a"].EQUALS,i["a"].NOT_EQUALS,i["a"].LESS_THAN,i["a"].LESS_THAN_OR_EQUAL_TO,i["a"].GREATER_THAN,i["a"].GREATER_THAN_OR_EQUAL_TO],date:[i["a"].DATE_IS,i["a"].DATE_IS_NOT,i["a"].DATE_BEFORE,i["a"].DATE_AFTER]},zIndex:{modal:1100,overlay:1e3,menu:1e3,tooltip:1100}},s=Symbol();var a={install:(t,e)=>{let n=e?{...o,...e}:{...o};const i={config:Object(r["y"])(n)};t.config.globalProperties.$primevue=i,t.provide(s,i)}};e["a"]=a},9383:function(t,e,n){"use strict";var r=n("bdce"),i=n("5bd2"),o=n("bb57"),s=n("7a23"),a={name:"ConfirmDialog",props:{group:String,breakpoints:{type:Object,default:null}},confirmListener:null,closeListener:null,data(){return{visible:!1,confirmation:null}},mounted(){this.confirmListener=t=>{t&&t.group===this.group&&(this.confirmation=t,this.visible=!0)},this.closeListener=()=>{this.visible=!1,this.confirmation=null},r["a"].on("confirm",this.confirmListener),r["a"].on("close",this.closeListener)},beforeUnmount(){r["a"].off("confirm",this.confirmListener),r["a"].off("close",this.closeListener)},methods:{accept(){this.confirmation.accept&&this.confirmation.accept(),this.visible=!1},reject(){this.confirmation.reject&&this.confirmation.reject(),this.visible=!1}},computed:{header(){return this.confirmation?this.confirmation.header:null},message(){return this.confirmation?this.confirmation.message:null},blockScroll(){return!this.confirmation||this.confirmation.blockScroll},position(){return this.confirmation?this.confirmation.position:null},iconClass(){return["p-confirm-dialog-icon",this.confirmation?this.confirmation.icon:null]},acceptLabel(){return this.confirmation?this.confirmation.acceptLabel||this.$primevue.config.locale.accept:null},rejectLabel(){return this.confirmation?this.confirmation.rejectLabel||this.$primevue.config.locale.reject:null},acceptIcon(){return this.confirmation?this.confirmation.acceptIcon:null},rejectIcon(){return this.confirmation?this.confirmation.rejectIcon:null},acceptClass(){return["p-confirm-dialog-accept",this.confirmation?this.confirmation.acceptClass:null]},rejectClass(){return["p-confirm-dialog-reject",this.confirmation?this.confirmation.rejectClass||"p-button-text":null]}},components:{CDialog:i["a"],CDButton:o["a"]}};const u={class:"p-confirm-dialog-message"};function c(t,e,n,r,i,o){const a=Object(s["C"])("CDButton"),c=Object(s["C"])("CDialog");return Object(s["u"])(),Object(s["g"])(c,{visible:i.visible,"onUpdate:visible":e[3]||(e[3]=t=>i.visible=t),modal:!0,header:o.header,blockScroll:o.blockScroll,position:o.position,class:"p-confirm-dialog",breakpoints:n.breakpoints},{footer:Object(s["L"])(()=>[Object(s["j"])(a,{label:o.rejectLabel,icon:o.rejectIcon,class:o.rejectClass,onClick:e[1]||(e[1]=t=>o.reject())},null,8,["label","icon","class"]),Object(s["j"])(a,{label:o.acceptLabel,icon:o.acceptIcon,class:o.acceptClass,onClick:e[2]||(e[2]=t=>o.accept()),autofocus:""},null,8,["label","icon","class"])]),default:Object(s["L"])(()=>[Object(s["j"])("i",{class:o.iconClass},null,2),Object(s["j"])("span",u,Object(s["F"])(o.message),1)]),_:1},8,["visible","header","blockScroll","position","breakpoints"])}a.render=c,e["a"]=a},"94ca":function(t,e,n){var r=n("d039"),i=/#|\.prototype\./,o=function(t,e){var n=a[s(t)];return n==c||n!=u&&("function"==typeof e?r(e):!!e)},s=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},a=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},"96cf":function(t,e){!function(e){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag",c="object"===typeof t,l=e.regeneratorRuntime;if(l)c&&(t.exports=l);else{l=e.regeneratorRuntime=c?t.exports:{},l.wrap=b;var h="suspendedStart",f="suspendedYield",p="executing",d="completed",g={},v={};v[s]=function(){return this};var y=Object.getPrototypeOf,m=y&&y(y(P([])));m&&m!==r&&i.call(m,s)&&(v=m);var _=I.prototype=E.prototype=Object.create(v);x.prototype=_.constructor=I,I.constructor=x,I[u]=x.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,I):(t.__proto__=I,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(_),t},l.awrap=function(t){return{__await:t}},O(S.prototype),S.prototype[a]=function(){return this},l.AsyncIterator=S,l.async=function(t,e,n,r){var i=new S(b(t,e,n,r));return l.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},O(_),_[u]="Generator",_[s]=function(){return this},_.toString=function(){return"[object Generator]"},l.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=P,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return a.type="throw",a.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var u=i.call(s,"catchLoc"),c=i.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:P(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),g}}}function b(t,e,n,r){var i=e&&e.prototype instanceof E?e:E,o=Object.create(i.prototype),s=new A(r||[]);return o._invoke=C(t,n,s),o}function w(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}function E(){}function x(){}function I(){}function O(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function S(t){function e(n,r,o,s){var a=w(t[n],t,r);if("throw"!==a.type){var u=a.arg,c=u.value;return c&&"object"===typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then((function(t){e("next",t,o,s)}),(function(t){e("throw",t,o,s)})):Promise.resolve(c).then((function(t){u.value=t,o(u)}),s)}s(a.arg)}var n;function r(t,r){function i(){return new Promise((function(n,i){e(t,r,n,i)}))}return n=n?n.then(i,i):i()}this._invoke=r}function C(t,e,n){var r=h;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw o;return R()}n.method=i,n.arg=o;while(1){var s=n.delegate;if(s){var a=T(s,n);if(a){if(a===g)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=w(t,e,n);if("normal"===u.type){if(r=n.done?d:f,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}function T(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,T(t,e),"throw"===e.method))return g;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=w(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,g;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,g):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function N(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(N,this),this.reset(!0)}function P(t){if(t){var e=t[s];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){while(++r<t.length)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return o.next=o}}return{next:R}}function R(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},"99af":function(t,e,n){"use strict";var r=n("23e7"),i=n("d039"),o=n("e8b5"),s=n("861d"),a=n("7b0b"),u=n("50c4"),c=n("8418"),l=n("65f0"),h=n("1dde"),f=n("b622"),p=n("2d00"),d=f("isConcatSpreadable"),g=9007199254740991,v="Maximum allowed index exceeded",y=p>=51||!i((function(){var t=[];return t[d]=!1,t.concat()[0]!==t})),m=h("concat"),_=function(t){if(!s(t))return!1;var e=t[d];return void 0!==e?!!e:o(t)},b=!y||!m;r({target:"Array",proto:!0,forced:b},{concat:function(t){var e,n,r,i,o,s=a(this),h=l(s,0),f=0;for(e=-1,r=arguments.length;e<r;e++)if(o=-1===e?s:arguments[e],_(o)){if(i=u(o.length),f+i>g)throw TypeError(v);for(n=0;n<i;n++,f++)n in o&&c(h,f,o[n])}else{if(f>=g)throw TypeError(v);c(h,f++,o)}return h.length=f,h}})},"9ab4":function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return i})),n.d(e,"__assign",(function(){return o})),n.d(e,"__rest",(function(){return s})),n.d(e,"__decorate",(function(){return a})),n.d(e,"__param",(function(){return u})),n.d(e,"__metadata",(function(){return c})),n.d(e,"__awaiter",(function(){return l})),n.d(e,"__generator",(function(){return h})),n.d(e,"__createBinding",(function(){return f})),n.d(e,"__exportStar",(function(){return p})),n.d(e,"__values",(function(){return d})),n.d(e,"__read",(function(){return g})),n.d(e,"__spread",(function(){return v})),n.d(e,"__spreadArrays",(function(){return y})),n.d(e,"__spreadArray",(function(){return m})),n.d(e,"__await",(function(){return _})),n.d(e,"__asyncGenerator",(function(){return b})),n.d(e,"__asyncDelegator",(function(){return w})),n.d(e,"__asyncValues",(function(){return E})),n.d(e,"__makeTemplateObject",(function(){return x})),n.d(e,"__importStar",(function(){return O})),n.d(e,"__importDefault",(function(){return S})),n.d(e,"__classPrivateFieldGet",(function(){return C})),n.d(e,"__classPrivateFieldSet",(function(){return T}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function h(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}var f=Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]};function p(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||f(e,t,n)}function d(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return s}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(g(arguments[e]));return t}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function m(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}function _(t){return this instanceof _?(this.v=t,this):new _(t)}function b(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||a(t,e)}))})}function a(t,e){try{u(i[t](e))}catch(n){h(o[0][3],n)}}function u(t){t.value instanceof _?Promise.resolve(t.value.v).then(c,l):h(o[0][2],t)}function c(t){a("next",t)}function l(t){a("throw",t)}function h(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function w(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:_(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function E(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"===typeof d?d(t):t[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,o){e=t[n](e),i(r,o,e.done,e.value)}))}}function i(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}}function x(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var I=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e};function O(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&f(e,t,n);return I(e,t),e}function S(t){return t&&t.__esModule?t:{default:t}}function C(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function T(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}},"9bdd":function(t,e,n){var r=n("825a"),i=n("2a62");t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(s){throw i(t),s}}},"9bf2":function(t,e,n){var r=n("83ab"),i=n("0cfb"),o=n("825a"),s=n("c04e"),a=Object.defineProperty;e.f=r?a:function(t,e,n){if(o(t),e=s(e,!0),o(n),i)try{return a(t,e,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},"9dbb":function(t,e,n){(function(t,n){n(e)})(0,(function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var i,o=new Promise((function(o,s){i=t[e].apply(t,r),n(i).then(o,s)}));return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then((function(t){if(t)return new l(t,i.request)}))}function o(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function s(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function a(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function u(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function p(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function d(t){this._db=t}function g(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new p(o.result,t.oldVersion,o.transaction))}),i.then((function(t){return new d(t)}))}function v(t){return r(indexedDB,"deleteDatabase",[t])}o(c,"_index",["name","keyPath","multiEntry","unique"]),s(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),s(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then((function(t){if(t)return new l(t,e._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),s(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),a(f,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),a(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[h,c].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,h].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})})),t.openDb=g,t.deleteDb=v,Object.defineProperty(t,"__esModule",{value:!0})}))},"9ed3":function(t,e,n){"use strict";var r=n("ae93").IteratorPrototype,i=n("7c73"),o=n("5c6c"),s=n("d44e"),a=n("3f8c"),u=function(){return this};t.exports=function(t,e,n){var c=e+" Iterator";return t.prototype=i(r,{next:o(1,n)}),s(t,c,!1,!0),a[c]=u,t}},"9f7f":function(t,e,n){"use strict";var r=n("d039");function i(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=r((function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=r((function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},"9fe2":function(t,e,n){"use strict";e["a"]=function(t){var e,n=-1,r=t.length,i=t[r-1],o=0;while(++n<r)e=i,i=t[n],o+=e[1]*i[0]-e[0]*i[1];return o/2}},"9ff4":function(t,e,n){"use strict";(function(t){function r(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}n.d(e,"a",(function(){return x})),n.d(e,"b",(function(){return E})),n.d(e,"c",(function(){return O})),n.d(e,"d",(function(){return I})),n.d(e,"e",(function(){return $})),n.d(e,"f",(function(){return Z})),n.d(e,"g",(function(){return rt})),n.d(e,"h",(function(){return N})),n.d(e,"i",(function(){return st})),n.d(e,"j",(function(){return et})),n.d(e,"k",(function(){return P})),n.d(e,"l",(function(){return J})),n.d(e,"m",(function(){return nt})),n.d(e,"n",(function(){return R})),n.d(e,"o",(function(){return D})),n.d(e,"p",(function(){return o})),n.d(e,"q",(function(){return g})),n.d(e,"r",(function(){return K})),n.d(e,"s",(function(){return L})),n.d(e,"t",(function(){return T})),n.d(e,"u",(function(){return U})),n.d(e,"v",(function(){return C})),n.d(e,"w",(function(){return B})),n.d(e,"x",(function(){return H})),n.d(e,"y",(function(){return v})),n.d(e,"z",(function(){return j})),n.d(e,"A",(function(){return a})),n.d(e,"B",(function(){return F})),n.d(e,"C",(function(){return q})),n.d(e,"D",(function(){return m})),n.d(e,"E",(function(){return _})),n.d(e,"F",(function(){return r})),n.d(e,"G",(function(){return f})),n.d(e,"H",(function(){return u})),n.d(e,"I",(function(){return k})),n.d(e,"J",(function(){return b})),n.d(e,"K",(function(){return tt})),n.d(e,"L",(function(){return it})),n.d(e,"M",(function(){return z}));const i="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl",o=r(i);const s="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",a=r(s);function u(t){if(R(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=u(F(r)?h(r):r);if(i)for(const t in i)e[t]=i[t]}return e}if(U(t))return t}const c=/;(?![^(]*\))/g,l=/:(.+)/;function h(t){const e={};return t.split(c).forEach(t=>{if(t){const n=t.split(l);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function f(t){let e="";if(F(t))e=t;else if(R(t))for(let n=0;n<t.length;n++)e+=f(t[n])+" ";else if(U(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const p="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",d="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",g=r(p),v=r(d);function y(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=m(t[r],e[r]);return n}function m(t,e){if(t===e)return!0;let n=M(t),r=M(e);if(n||r)return!(!n||!r)&&t.getTime()===e.getTime();if(n=R(t),r=R(e),n||r)return!(!n||!r)&&y(t,e);if(n=U(t),r=U(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,o=Object.keys(e).length;if(i!==o)return!1;for(const n in t){const r=t.hasOwnProperty(n),i=e.hasOwnProperty(n);if(r&&!i||!r&&i||!m(t[n],e[n]))return!1}}return String(t)===String(e)}function _(t,e){return t.findIndex(t=>m(t,e))}const b=t=>null==t?"":U(t)?JSON.stringify(t,w,2):String(t),w=(t,e)=>L(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[e,n])=>(t[e+" =>"]=n,t),{})}:j(e)?{[`Set(${e.size})`]:[...e.values()]}:!U(e)||R(e)||W(e)?e:String(e),E={},x=[],I=()=>{},O=()=>!1,S=/^on[^a-z]/,C=t=>S.test(t),T=t=>t.startsWith("onUpdate:"),N=Object.assign,k=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},A=Object.prototype.hasOwnProperty,P=(t,e)=>A.call(t,e),R=Array.isArray,L=t=>"[object Map]"===G(t),j=t=>"[object Set]"===G(t),M=t=>t instanceof Date,D=t=>"function"===typeof t,F=t=>"string"===typeof t,q=t=>"symbol"===typeof t,U=t=>null!==t&&"object"===typeof t,B=t=>U(t)&&D(t.then)&&D(t.catch),V=Object.prototype.toString,G=t=>V.call(t),z=t=>G(t).slice(8,-1),W=t=>"[object Object]"===G(t),K=t=>F(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,H=r(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Y=t=>{const e=Object.create(null);return n=>{const r=e[n];return r||(e[n]=t(n))}},X=/-(\w)/g,$=Y(t=>t.replace(X,(t,e)=>e?e.toUpperCase():"")),Q=/\B([A-Z])/g,J=Y(t=>t.replace(Q,"-$1").toLowerCase()),Z=Y(t=>t.charAt(0).toUpperCase()+t.slice(1)),tt=Y(t=>t?"on"+Z(t):""),et=(t,e)=>t!==e&&(t===t||e===e),nt=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},rt=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},it=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let ot;const st=()=>ot||(ot="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof t?t:{})}).call(this,n("c8ba"))},a15b:function(t,e,n){"use strict";var r=n("23e7"),i=n("44ad"),o=n("fc6a"),s=n("a640"),a=[].join,u=i!=Object,c=s("join",",");r({target:"Array",proto:!0,forced:u||!c},{join:function(t){return a.call(o(this),void 0===t?",":t)}})},a434:function(t,e,n){"use strict";var r=n("23e7"),i=n("23cb"),o=n("a691"),s=n("50c4"),a=n("7b0b"),u=n("65f0"),c=n("8418"),l=n("1dde"),h=n("ae40"),f=l("splice"),p=h("splice",{ACCESSORS:!0,0:0,1:2}),d=Math.max,g=Math.min,v=9007199254740991,y="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f||!p},{splice:function(t,e){var n,r,l,h,f,p,m=a(this),_=s(m.length),b=i(t,_),w=arguments.length;if(0===w?n=r=0:1===w?(n=0,r=_-b):(n=w-2,r=g(d(o(e),0),_-b)),_+n-r>v)throw TypeError(y);for(l=u(m,r),h=0;h<r;h++)f=b+h,f in m&&c(l,h,m[f]);if(l.length=r,n<r){for(h=b;h<_-r;h++)f=h+r,p=h+n,f in m?m[p]=m[f]:delete m[p];for(h=_;h>_-r+n;h--)delete m[h-1]}else if(n>r)for(h=_-r;h>b;h--)f=h+r-1,p=h+n-1,f in m?m[p]=m[f]:delete m[p];for(h=0;h<n;h++)m[h+b]=arguments[h+2];return m.length=_-r+n,l}})},a4d3:function(t,e,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("d066"),s=n("c430"),a=n("83ab"),u=n("4930"),c=n("fdbf"),l=n("d039"),h=n("5135"),f=n("e8b5"),p=n("861d"),d=n("825a"),g=n("7b0b"),v=n("fc6a"),y=n("c04e"),m=n("5c6c"),_=n("7c73"),b=n("df75"),w=n("241c"),E=n("057f"),x=n("7418"),I=n("06cf"),O=n("9bf2"),S=n("d1e7"),C=n("9112"),T=n("6eeb"),N=n("5692"),k=n("f772"),A=n("d012"),P=n("90e3"),R=n("b622"),L=n("e538"),j=n("746f"),M=n("d44e"),D=n("69f3"),F=n("b727").forEach,q=k("hidden"),U="Symbol",B="prototype",V=R("toPrimitive"),G=D.set,z=D.getterFor(U),W=Object[B],K=i.Symbol,H=o("JSON","stringify"),Y=I.f,X=O.f,$=E.f,Q=S.f,J=N("symbols"),Z=N("op-symbols"),tt=N("string-to-symbol-registry"),et=N("symbol-to-string-registry"),nt=N("wks"),rt=i.QObject,it=!rt||!rt[B]||!rt[B].findChild,ot=a&&l((function(){return 7!=_(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=Y(W,e);r&&delete W[e],X(t,e,n),r&&t!==W&&X(W,e,r)}:X,st=function(t,e){var n=J[t]=_(K[B]);return G(n,{type:U,tag:t,description:e}),a||(n.description=e),n},at=c?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof K},ut=function(t,e,n){t===W&&ut(Z,e,n),d(t);var r=y(e,!0);return d(n),h(J,r)?(n.enumerable?(h(t,q)&&t[q][r]&&(t[q][r]=!1),n=_(n,{enumerable:m(0,!1)})):(h(t,q)||X(t,q,m(1,{})),t[q][r]=!0),ot(t,r,n)):X(t,r,n)},ct=function(t,e){d(t);var n=v(e),r=b(n).concat(dt(n));return F(r,(function(e){a&&!ht.call(n,e)||ut(t,e,n[e])})),t},lt=function(t,e){return void 0===e?_(t):ct(_(t),e)},ht=function(t){var e=y(t,!0),n=Q.call(this,e);return!(this===W&&h(J,e)&&!h(Z,e))&&(!(n||!h(this,e)||!h(J,e)||h(this,q)&&this[q][e])||n)},ft=function(t,e){var n=v(t),r=y(e,!0);if(n!==W||!h(J,r)||h(Z,r)){var i=Y(n,r);return!i||!h(J,r)||h(n,q)&&n[q][r]||(i.enumerable=!0),i}},pt=function(t){var e=$(v(t)),n=[];return F(e,(function(t){h(J,t)||h(A,t)||n.push(t)})),n},dt=function(t){var e=t===W,n=$(e?Z:v(t)),r=[];return F(n,(function(t){!h(J,t)||e&&!h(W,t)||r.push(J[t])})),r};if(u||(K=function(){if(this instanceof K)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=P(t),n=function(t){this===W&&n.call(Z,t),h(this,q)&&h(this[q],e)&&(this[q][e]=!1),ot(this,e,m(1,t))};return a&&it&&ot(W,e,{configurable:!0,set:n}),st(e,t)},T(K[B],"toString",(function(){return z(this).tag})),T(K,"withoutSetter",(function(t){return st(P(t),t)})),S.f=ht,O.f=ut,I.f=ft,w.f=E.f=pt,x.f=dt,L.f=function(t){return st(R(t),t)},a&&(X(K[B],"description",{configurable:!0,get:function(){return z(this).description}}),s||T(W,"propertyIsEnumerable",ht,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:K}),F(b(nt),(function(t){j(t)})),r({target:U,stat:!0,forced:!u},{for:function(t){var e=String(t);if(h(tt,e))return tt[e];var n=K(e);return tt[e]=n,et[n]=e,n},keyFor:function(t){if(!at(t))throw TypeError(t+" is not a symbol");if(h(et,t))return et[t]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!a},{create:lt,defineProperty:ut,defineProperties:ct,getOwnPropertyDescriptor:ft}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:pt,getOwnPropertySymbols:dt}),r({target:"Object",stat:!0,forced:l((function(){x.f(1)}))},{getOwnPropertySymbols:function(t){return x.f(g(t))}}),H){var gt=!u||l((function(){var t=K();return"[null]"!=H([t])||"{}"!=H({a:t})||"{}"!=H(Object(t))}));r({target:"JSON",stat:!0,forced:gt},{stringify:function(t,e,n){var r,i=[t],o=1;while(arguments.length>o)i.push(arguments[o++]);if(r=e,(p(e)||void 0!==t)&&!at(t))return f(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!at(e))return e}),i[1]=e,H.apply(null,i)}})}K[B][V]||C(K[B],V,K[B].valueOf),M(K,U),A[q]=!0},a5af:function(t,e,n){"use strict";var r=n("dd76"),i=n("216d"),o=n("7a23"),s={name:"SelectButton",emits:["update:modelValue","focus","blur"],props:{modelValue:null,options:Array,optionLabel:null,optionValue:null,optionDisabled:null,multiple:Boolean,disabled:Boolean,dataKey:null,ariaLabelledBy:null},methods:{getOptionLabel(t){return this.optionLabel?r["d"].resolveFieldData(t,this.optionLabel):t},getOptionValue(t){return this.optionValue?r["d"].resolveFieldData(t,this.optionValue):t},getOptionRenderKey(t){return this.dataKey?r["d"].resolveFieldData(t,this.dataKey):this.getOptionLabel(t)},isOptionDisabled(t){return!!this.optionDisabled&&r["d"].resolveFieldData(t,this.optionDisabled)},onOptionSelect(t,e){if(this.disabled||this.isOptionDisabled(e))return;let n,i=this.isSelected(e),o=this.getOptionValue(e);n=this.multiple?i?this.modelValue.filter(t=>!r["d"].equals(t,o,this.equalityKey)):this.modelValue?[...this.modelValue,o]:[o]:o,this.$emit("update:modelValue",n)},isSelected(t){let e=!1,n=this.getOptionValue(t);if(this.multiple){if(this.modelValue)for(let i of this.modelValue)if(r["d"].equals(i,n,this.equalityKey)){e=!0;break}}else e=r["d"].equals(this.modelValue,n,this.equalityKey);return e},onFocus(t){this.$emit("focus",t)},onBlur(t){this.$emit("blur",t)},getButtonClass(t){return["p-button p-component",{"p-highlight":this.isSelected(t),"p-disabled":this.isOptionDisabled(t)}]}},computed:{equalityKey(){return this.optionValue?null:this.dataKey}},directives:{ripple:i["a"]}};const a={class:"p-selectbutton p-buttonset p-component",role:"group"},u={class:"p-button-label"};function c(t,e,n,r,i,s){const c=Object(o["D"])("ripple");return Object(o["u"])(),Object(o["g"])("div",a,[(Object(o["u"])(!0),Object(o["g"])(o["a"],null,Object(o["A"])(n.options,(r,i)=>Object(o["M"])((Object(o["u"])(),Object(o["g"])("div",{key:s.getOptionRenderKey(r),"aria-label":s.getOptionLabel(r),role:"button","aria-pressed":s.isSelected(r),onClick:t=>s.onOptionSelect(t,r,i),onKeydown:[Object(o["N"])(Object(o["O"])(t=>s.onOptionSelect(t,r,i),["prevent"]),["enter"]),Object(o["N"])(Object(o["O"])(t=>s.onOptionSelect(t,r),["prevent"]),["space"])],tabindex:s.isOptionDisabled(r)?null:"0",onFocus:e[1]||(e[1]=t=>s.onFocus(t)),onBlur:e[2]||(e[2]=t=>s.onBlur(t)),"aria-labelledby":n.ariaLabelledBy,class:s.getButtonClass(r)},[Object(o["B"])(t.$slots,"option",{option:r,index:i},()=>[Object(o["j"])("span",u,Object(o["F"])(s.getOptionLabel(r)),1)])],42,["aria-label","aria-pressed","onClick","onKeydown","tabindex","aria-labelledby"])),[[c]])),128))])}s.render=c,e["a"]=s},a630:function(t,e,n){var r=n("23e7"),i=n("4df4"),o=n("1c7e"),s=!o((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:s},{from:i})},a640:function(t,e,n){"use strict";var r=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},a691:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},a79d:function(t,e,n){"use strict";var r=n("23e7"),i=n("c430"),o=n("fea9"),s=n("d039"),a=n("d066"),u=n("4840"),c=n("cdf9"),l=n("6eeb"),h=!!o&&s((function(){o.prototype["finally"].call({then:function(){}},(function(){}))}));r({target:"Promise",proto:!0,real:!0,forced:h},{finally:function(t){var e=u(this,a("Promise")),n="function"==typeof t;return this.then(n?function(n){return c(e,t()).then((function(){return n}))}:t,n?function(n){return c(e,t()).then((function(){throw n}))}:t)}}),i||"function"!=typeof o||o.prototype["finally"]||l(o.prototype,"finally",a("Promise").prototype["finally"])},a8e9:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"CONSTANTS",(function(){return i})),n.d(e,"Deferred",(function(){return g})),n.d(e,"ErrorFactory",(function(){return L})),n.d(e,"FirebaseError",(function(){return R})),n.d(e,"MAX_VALUE_MILLIS",(function(){return ft})),n.d(e,"RANDOM_FACTOR",(function(){return pt})),n.d(e,"Sha1",(function(){return Q})),n.d(e,"areCookiesEnabled",(function(){return k})),n.d(e,"assert",(function(){return o})),n.d(e,"assertionError",(function(){return s})),n.d(e,"async",(function(){return tt})),n.d(e,"base64",(function(){return c})),n.d(e,"base64Decode",(function(){return h})),n.d(e,"base64Encode",(function(){return l})),n.d(e,"calculateBackoffMillis",(function(){return dt})),n.d(e,"contains",(function(){return z})),n.d(e,"createMockUserToken",(function(){return v})),n.d(e,"createSubscribe",(function(){return J})),n.d(e,"decode",(function(){return q})),n.d(e,"deepCopy",(function(){return f})),n.d(e,"deepExtend",(function(){return p})),n.d(e,"errorPrefix",(function(){return it})),n.d(e,"extractQuerystring",(function(){return $})),n.d(e,"getGlobal",(function(){return A})),n.d(e,"getModularInstance",(function(){return yt})),n.d(e,"getUA",(function(){return y})),n.d(e,"isAdmin",(function(){return G})),n.d(e,"isBrowser",(function(){return b})),n.d(e,"isBrowserExtension",(function(){return w})),n.d(e,"isElectron",(function(){return x})),n.d(e,"isEmpty",(function(){return K})),n.d(e,"isIE",(function(){return I})),n.d(e,"isIndexedDBAvailable",(function(){return T})),n.d(e,"isMobileCordova",(function(){return m})),n.d(e,"isNode",(function(){return _})),n.d(e,"isNodeSdk",(function(){return S})),n.d(e,"isReactNative",(function(){return E})),n.d(e,"isSafari",(function(){return C})),n.d(e,"isUWP",(function(){return O})),n.d(e,"isValidFormat",(function(){return V})),n.d(e,"isValidTimestamp",(function(){return U})),n.d(e,"issuedAtTime",(function(){return B})),n.d(e,"jsonEval",(function(){return D})),n.d(e,"map",(function(){return H})),n.d(e,"ordinal",(function(){return gt})),n.d(e,"querystring",(function(){return Y})),n.d(e,"querystringDecode",(function(){return X})),n.d(e,"safeGet",(function(){return W})),n.d(e,"stringLength",(function(){return ct})),n.d(e,"stringToByteArray",(function(){return ut})),n.d(e,"stringify",(function(){return F})),n.d(e,"validateArgCount",(function(){return rt})),n.d(e,"validateCallback",(function(){return st})),n.d(e,"validateContextObject",(function(){return at})),n.d(e,"validateIndexedDBOpenable",(function(){return N})),n.d(e,"validateNamespace",(function(){return ot}));var r=n("9ab4"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u=function(t){var e=[],n=0,r=0;while(n<t.length){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){o=t[n++];var s=t[n++],a=t[n++],u=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&a)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{o=t[n++],s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):u(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length,a=s?n[t.charAt(i)]:0;++i;var u=i<t.length,c=u?n[t.charAt(i)]:64;++i;var l=i<t.length,h=l?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==c||null==h)throw Error();var f=o<<2|a>>4;if(r.push(f),64!==c){var p=a<<4&240|c>>2;if(r.push(p),64!==h){var d=c<<6&192|h;r.push(d)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},l=function(t){var e=a(t);return c.encodeByteArray(e,!0)},h=function(t){try{return c.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function f(t){return p(void 0,t)}function p(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:var n=e;return new Date(n.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var r in e)e.hasOwnProperty(r)&&d(r)&&(t[r]=p(t[r],e[r]));return t}function d(t){return"__proto__"!==t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var g=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n={alg:"none",type:"JWT"},i=e||"demo-project",o=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object(r["__assign"])({iss:"https://securetoken.google.com/"+i,aud:i,iat:o,exp:o+3600,auth_time:o,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),u="";return[c.encodeString(JSON.stringify(n),!1),c.encodeString(JSON.stringify(a),!1),u].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y(){return"undefined"!==typeof navigator&&"string"===typeof navigator["userAgent"]?navigator["userAgent"]:""}function m(){return"undefined"!==typeof window&&!!(window["cordova"]||window["phonegap"]||window["PhoneGap"])&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(y())}function _(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(e){return!1}}function b(){return"object"===typeof self&&self.self===self}function w(){var t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}function E(){return"object"===typeof navigator&&"ReactNative"===navigator["product"]}function x(){return y().indexOf("Electron/")>=0}function I(){var t=y();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function O(){return y().indexOf("MSAppHost/")>=0}function S(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN}function C(){return!_()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function T(){return"indexedDB"in self&&null!=indexedDB}function N(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}}))}function k(){return!(!navigator||!navigator.cookieEnabled)}function A(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof t)return t;throw new Error("Unable to locate global object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var P="FirebaseError",R=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name=P,Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,L.prototype.create),o}return Object(r["__extends"])(e,t),e}(Error),L=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?j(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new R(i,a,r);return u},t}();function j(t,e){return t.replace(M,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var M=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D(t){return JSON.parse(t)}function F(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var q=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=D(h(o[0])||""),n=D(h(o[1])||""),i=o[2],r=n["d"]||{},delete n["d"]}catch(s){}return{header:e,claims:n,data:r,signature:i}},U=function(t){var e=q(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"===typeof e&&(e.hasOwnProperty("nbf")?r=e["nbf"]:e.hasOwnProperty("iat")&&(r=e["iat"]),i=e.hasOwnProperty("exp")?e["exp"]:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},B=function(t){var e=q(t).claims;return"object"===typeof e&&e.hasOwnProperty("iat")?e["iat"]:null},V=function(t){var e=q(t),n=e.claims;return!!n&&"object"===typeof n&&n.hasOwnProperty("iat")},G=function(t){var e=q(t).claims;return"object"===typeof e&&!0===e["admin"]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function z(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function W(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function K(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function H(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r],s=o[0],a=o[1];n(s,a)}return e.length?"&"+e.join("&"):""}function X(t){var e={},n=t.replace(/^\?/,"").split("&");return n.forEach((function(t){if(t){var n=t.split("="),r=n[0],i=n[1];e[decodeURIComponent(r)]=decodeURIComponent(i)}})),e}function $(t){var e=t.indexOf("?");if(!e)return"";var n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Q=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"===typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),s=1518500249):(o=u^c^l,s=1859775393):r<60?(o=u&c|l&(u|c),s=2400959708):(o=u^c^l,s=3395469782);i=(a<<5|a>>>27)+o+h+s+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;while(r<e){if(0===o)while(r<=n)this.compress_(t,r),r+=this.blockSize;if("string"===typeof t){while(r<e)if(i[o]=t.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else while(r<e)if(i[o]=t[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function J(t,e){var n=new Z(t,e);return n.subscribe.bind(n)}var Z=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=et(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=nt),void 0===r.error&&(r.error=nt),void 0===r.complete&&(r.complete=nt);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function tt(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}}function et(t,e){if("object"!==typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"===typeof t[i])return!0}return!1}function nt(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i){var o=t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".";throw new Error(o)}};function it(t,e){return t+" failed: "+e+" argument "}function ot(t,e,n){if((!n||e)&&"string"!==typeof e)throw new Error(it(t,"namespace")+"must be a valid firebase namespace.")}function st(t,e,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(it(t,e)+"must be a valid function.")}function at(t,e,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(it(t,e)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate.");var a=t.charCodeAt(r)-56320;i=65536+(s<<10)+a}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},ct=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},lt=1e3,ht=2,ft=144e5,pt=.5;function dt(t,e,n){void 0===e&&(e=lt),void 0===n&&(n=ht);var r=e*Math.pow(n,t),i=Math.round(pt*r*(Math.random()-.5)*2);return Math.min(ft,r+i)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(t){return Number.isFinite(t)?t+vt(t):""+t}function vt(t){t=Math.abs(t);var e=t%100;if(e>=10&&e<=20)return"th";var n=t%10;return 1===n?"st":2===n?"nd":3===n?"rd":"th"}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t){return t&&t._delegate?t._delegate:t}}.call(this,n("c8ba"))},a9e3:function(t,e,n){"use strict";var r=n("83ab"),i=n("da84"),o=n("94ca"),s=n("6eeb"),a=n("5135"),u=n("c6b6"),c=n("7156"),l=n("c04e"),h=n("d039"),f=n("7c73"),p=n("241c").f,d=n("06cf").f,g=n("9bf2").f,v=n("58a8").trim,y="Number",m=i[y],_=m.prototype,b=u(f(_))==y,w=function(t){var e,n,r,i,o,s,a,u,c=l(t,!1);if("string"==typeof c&&c.length>2)if(c=v(c),e=c.charCodeAt(0),43===e||45===e){if(n=c.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+c}for(o=c.slice(2),s=o.length,a=0;a<s;a++)if(u=o.charCodeAt(a),u<48||u>i)return NaN;return parseInt(o,r)}return+c};if(o(y,!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var E,x=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof x&&(b?h((function(){_.valueOf.call(n)})):u(n)!=y)?c(new m(w(e)),n,x):w(e)},I=r?p(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),O=0;I.length>O;O++)a(m,E=I[O])&&!a(x,E)&&g(x,E,d(m,E));x.prototype=_,_.constructor=x,s(i,y,x)}},ab13:function(t,e,n){var r=n("b622"),i=r("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[i]=!1,"/./"[t](e)}catch(r){}}return!1}},abfd:function(t,e,n){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var i;n.r(e),n.d(e,"LogLevel",(function(){return o})),n.d(e,"Logger",(function(){return h})),n.d(e,"setLogLevel",(function(){return f})),n.d(e,"setUserLogHandler",(function(){return p}));var o,s=[];(function(t){t[t["DEBUG"]=0]="DEBUG",t[t["VERBOSE"]=1]="VERBOSE",t[t["INFO"]=2]="INFO",t[t["WARN"]=3]="WARN",t[t["ERROR"]=4]="ERROR",t[t["SILENT"]=5]="SILENT"})(o||(o={}));var a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=(i={},i[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"===typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){s.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map((function(t){if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=s;r<i.length;r++){var u=i[r];n(u)}}},ac1f:function(t,e,n){"use strict";var r=n("23e7"),i=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ad6d:function(t,e,n){"use strict";var r=n("825a");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},ade3:function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}))},ae40:function(t,e,n){var r=n("83ab"),i=n("d039"),o=n("5135"),s=Object.defineProperty,a={},u=function(t){throw t};t.exports=function(t,e){if(o(a,t))return a[t];e||(e={});var n=[][t],c=!!o(e,"ACCESSORS")&&e.ACCESSORS,l=o(e,0)?e[0]:u,h=o(e,1)?e[1]:void 0;return a[t]=!!n&&!i((function(){if(c&&!r)return!0;var t={length:-1};c?s(t,1,{enumerable:!0,get:u}):t[1]=1,n.call(t,l,h)}))}},ae93:function(t,e,n){"use strict";var r,i,o,s=n("e163"),a=n("9112"),u=n("5135"),c=n("b622"),l=n("c430"),h=c("iterator"),f=!1,p=function(){return this};[].keys&&(o=[].keys(),"next"in o?(i=s(s(o)),i!==Object.prototype&&(r=i)):f=!0),void 0==r&&(r={}),l||u(r,h)||a(r,h,p),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:f}},b041:function(t,e,n){"use strict";var r=n("00ee"),i=n("f5df");t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},b0c0:function(t,e,n){var r=n("83ab"),i=n("9bf2").f,o=Function.prototype,s=o.toString,a=/^\s*function ([^ (]*)/,u="name";r&&!(u in o)&&i(o,u,{configurable:!0,get:function(){try{return s.call(this).match(a)[1]}catch(t){return""}}})},b24b:function(t,e,n){"use strict";var r=n("bdce"),i=n("d725"),o={install:t=>{const e={require:t=>{r["a"].emit("confirm",t)},close:()=>{r["a"].emit("close")}};t.config.globalProperties.$confirm=e,t.provide(i["a"],e)}};e["a"]=o},b3b6:function(t,e,n){"use strict";var r=n("c058"),i=n("216d"),o=n("7a23"),s=n("dd76"),a={name:"ToastMessage",emits:["close"],props:{message:null},closeTimeout:null,mounted(){this.message.life&&(this.closeTimeout=setTimeout(()=>{this.close()},this.message.life))},methods:{close(){this.$emit("close",this.message)},onCloseClick(){this.closeTimeout&&clearTimeout(this.closeTimeout),this.close()}},computed:{containerClass(){return["p-toast-message",{"p-toast-message-info":"info"===this.message.severity,"p-toast-message-warn":"warn"===this.message.severity,"p-toast-message-error":"error"===this.message.severity,"p-toast-message-success":"success"===this.message.severity}]},iconClass(){return["p-toast-message-icon pi",{"pi-info-circle":"info"===this.message.severity,"pi-exclamation-triangle":"warn"===this.message.severity,"pi-times":"error"===this.message.severity,"pi-check":"success"===this.message.severity}]}},directives:{ripple:i["a"]}};const u={class:"p-toast-message-content"},c={class:"p-toast-message-text"},l={class:"p-toast-summary"},h={class:"p-toast-detail"},f=Object(o["j"])("span",{class:"p-toast-icon-close-icon pi pi-times"},null,-1);function p(t,e,n,r,i,s){const a=Object(o["D"])("ripple");return Object(o["u"])(),Object(o["g"])("div",{class:s.containerClass,role:"alert","aria-live":"assertive","aria-atomic":"true"},[Object(o["j"])("div",u,[Object(o["j"])("span",{class:s.iconClass},null,2),Object(o["j"])("div",c,[Object(o["j"])("span",l,Object(o["F"])(n.message.summary),1),Object(o["j"])("div",h,Object(o["F"])(n.message.detail),1)]),!1!==n.message.closable?Object(o["M"])((Object(o["u"])(),Object(o["g"])("button",{key:0,class:"p-toast-icon-close p-link",onClick:e[1]||(e[1]=(...t)=>s.onCloseClick&&s.onCloseClick(...t)),type:"button"},[f],512)),[[a]]):Object(o["h"])("",!0)])],2)}a.render=p;var d=0,g={name:"Toast",inheritAttrs:!1,props:{group:{type:String,default:null},position:{type:String,default:"top-right"},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0}},data(){return{messages:[]}},mounted(){r["a"].on("add",this.onAdd),r["a"].on("remove-group",this.onRemoveGroup),r["a"].on("remove-all-groups",this.onRemoveAllGroups),this.autoZIndex&&s["f"].set("modal",this.$refs.container,this.baseZIndex||this.$primevue.config.zIndex.modal)},beforeUnmount(){this.$refs.container&&this.autoZIndex&&s["f"].clear(this.$refs.container),r["a"].off("add",this.onAdd),r["a"].off("remove-group",this.onRemoveGroup),r["a"].off("remove-all-groups",this.onRemoveAllGroups)},methods:{add(t){null==t.id&&(t.id=d++),this.messages=[...this.messages,t]},remove(t){let e=-1;for(let n=0;n<this.messages.length;n++)if(this.messages[n]===t){e=n;break}this.messages.splice(e,1)},onAdd(t){this.group==t.group&&this.add(t)},onRemoveGroup(t){this.group===t&&(this.messages=[])},onRemoveAllGroups(){this.messages=[]}},components:{ToastMessage:a},computed:{containerClass(){return["p-toast p-component p-toast-"+this.position,{"p-input-filled":"filled"===this.$primevue.config.inputStyle,"p-ripple-disabled":!1===this.$primevue.config.ripple}]}}};function v(t,e,n,r,i,s){const a=Object(o["C"])("ToastMessage");return Object(o["u"])(),Object(o["g"])(o["b"],{to:"body"},[Object(o["j"])("div",Object(o["o"])({ref:"container",class:s.containerClass},t.$attrs),[Object(o["j"])(o["d"],{name:"p-toast-message",tag:"div"},{default:Object(o["L"])(()=>[(Object(o["u"])(!0),Object(o["g"])(o["a"],null,Object(o["A"])(i.messages,t=>(Object(o["u"])(),Object(o["g"])(a,{key:t.id,message:t,onClose:e[1]||(e[1]=t=>s.remove(t))},null,8,["message"]))),128))]),_:1})],16)])}function y(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var m="\n.p-toast {\n    position: fixed;\n    width: 25rem;\n}\n.p-toast-message-content {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: start;\n        -ms-flex-align: start;\n            align-items: flex-start;\n}\n.p-toast-message-text {\n    -webkit-box-flex: 1;\n        -ms-flex: 1 1 auto;\n            flex: 1 1 auto;\n}\n.p-toast-top-right {\n\ttop: 20px;\n\tright: 20px;\n}\n.p-toast-top-left {\n\ttop: 20px;\n\tleft: 20px;\n}\n.p-toast-bottom-left {\n\tbottom: 20px;\n\tleft: 20px;\n}\n.p-toast-bottom-right {\n\tbottom: 20px;\n\tright: 20px;\n}\n.p-toast-top-center {\n\ttop: 20px;\n    left: 50%;\n    -webkit-transform: translateX(-50%);\n            transform: translateX(-50%);\n}\n.p-toast-bottom-center {\n\tbottom: 20px;\n    left: 50%;\n    -webkit-transform: translateX(-50%);\n            transform: translateX(-50%);\n}\n.p-toast-center {\n\tleft: 50%;\n\ttop: 50%;\n    min-width: 20vw;\n    -webkit-transform: translate(-50%, -50%);\n            transform: translate(-50%, -50%);\n}\n.p-toast-icon-close {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    overflow: hidden;\n    position: relative;\n}\n.p-toast-icon-close.p-link {\n\tcursor: pointer;\n}\n\n/* Animations */\n.p-toast-message-enter-from {\n    opacity: 0;\n    -webkit-transform: translateY(50%);\n    transform: translateY(50%);\n}\n.p-toast-message-leave-from {\n    max-height: 1000px;\n}\n.p-toast .p-toast-message.p-toast-message-leave-to {\n    max-height: 0;\n    opacity: 0;\n    margin-bottom: 0;\n    overflow: hidden;\n}\n.p-toast-message-enter-active {\n    -webkit-transition: transform .3s, opacity .3s;\n    -webkit-transition: opacity .3s, -webkit-transform .3s;\n    transition: opacity .3s, -webkit-transform .3s;\n    transition: transform .3s, opacity .3s;\n    transition: transform .3s, opacity .3s, -webkit-transform .3s;\n}\n.p-toast-message-leave-active {\n    -webkit-transition: max-height .45s cubic-bezier(0, 1, 0, 1), opacity .3s, margin-bottom .3s;\n    transition: max-height .45s cubic-bezier(0, 1, 0, 1), opacity .3s, margin-bottom .3s;\n}\n";y(m),g.render=v,e["a"]=g},b50d:function(t,e,n){"use strict";var r=n("c532"),i=n("467f"),o=n("7aac"),s=n("30b5"),a=n("83b9"),u=n("c345"),c=n("3934"),l=n("2d83");t.exports=function(t){return new Promise((function(e,n){var h=t.data,f=t.headers;r.isFormData(h)&&delete f["Content-Type"];var p=new XMLHttpRequest;if(t.auth){var d=t.auth.username||"",g=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";f.Authorization="Basic "+btoa(d+":"+g)}var v=a(t.baseURL,t.url);if(p.open(t.method.toUpperCase(),s(v,t.params,t.paramsSerializer),!0),p.timeout=t.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in p?u(p.getAllResponseHeaders()):null,o=t.responseType&&"text"!==t.responseType?p.response:p.responseText,s={data:o,status:p.status,statusText:p.statusText,headers:r,config:t,request:p};i(e,n,s),p=null}},p.onabort=function(){p&&(n(l("Request aborted",t,"ECONNABORTED",p)),p=null)},p.onerror=function(){n(l("Network Error",t,null,p)),p=null},p.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(l(e,t,"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var y=(t.withCredentials||c(v))&&t.xsrfCookieName?o.read(t.xsrfCookieName):void 0;y&&(f[t.xsrfHeaderName]=y)}if("setRequestHeader"in p&&r.forEach(f,(function(t,e){"undefined"===typeof h&&"content-type"===e.toLowerCase()?delete f[e]:p.setRequestHeader(e,t)})),r.isUndefined(t.withCredentials)||(p.withCredentials=!!t.withCredentials),t.responseType)try{p.responseType=t.responseType}catch(m){if("json"!==t.responseType)throw m}"function"===typeof t.onDownloadProgress&&p.addEventListener("progress",t.onDownloadProgress),"function"===typeof t.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){p&&(p.abort(),n(t),p=null)})),h||(h=null),p.send(h)}))}},b575:function(t,e,n){var r,i,o,s,a,u,c,l,h=n("da84"),f=n("06cf").f,p=n("2cf4").set,d=n("1cdc"),g=n("605d"),v=h.MutationObserver||h.WebKitMutationObserver,y=h.document,m=h.process,_=h.Promise,b=f(h,"queueMicrotask"),w=b&&b.value;w||(r=function(){var t,e;g&&(t=m.domain)&&t.exit();while(i){e=i.fn,i=i.next;try{e()}catch(n){throw i?s():o=void 0,n}}o=void 0,t&&t.enter()},!d&&!g&&v&&y?(a=!0,u=y.createTextNode(""),new v(r).observe(u,{characterData:!0}),s=function(){u.data=a=!a}):_&&_.resolve?(c=_.resolve(void 0),l=c.then,s=function(){l.call(c,r)}):s=g?function(){m.nextTick(r)}:function(){p.call(h,r)}),t.exports=w||function(t){var e={fn:t,next:void 0};o&&(o.next=e),i||(i=e,s()),o=e}},b622:function(t,e,n){var r=n("da84"),i=n("5692"),o=n("5135"),s=n("90e3"),a=n("4930"),u=n("fdbf"),c=i("wks"),l=r.Symbol,h=u?l:l&&l.withoutSetter||s;t.exports=function(t){return o(c,t)||(a&&o(l,t)?c[t]=l[t]:c[t]=h("Symbol."+t)),c[t]}},b64b:function(t,e,n){var r=n("23e7"),i=n("7b0b"),o=n("df75"),s=n("d039"),a=s((function(){o(1)}));r({target:"Object",stat:!0,forced:a},{keys:function(t){return o(i(t))}})},b727:function(t,e,n){var r=n("0366"),i=n("44ad"),o=n("7b0b"),s=n("50c4"),a=n("65f0"),u=[].push,c=function(t){var e=1==t,n=2==t,c=3==t,l=4==t,h=6==t,f=7==t,p=5==t||h;return function(d,g,v,y){for(var m,_,b=o(d),w=i(b),E=r(g,v,3),x=s(w.length),I=0,O=y||a,S=e?O(d,x):n||f?O(d,0):void 0;x>I;I++)if((p||I in w)&&(m=w[I],_=E(m,I,b),t))if(e)S[I]=_;else if(_)switch(t){case 3:return!0;case 5:return m;case 6:return I;case 2:u.call(S,m)}else switch(t){case 4:return!1;case 7:u.call(S,m)}return h?-1:c||l?l:S}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterOut:c(7)}},b7aa:function(t,e,n){"use strict";(function(t){var e=n("cc84");(function(){var n,r="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};function i(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t,e];for(var n=0;n<e.length;++n){var r=e[n];if(r&&r.Math==Math)return r}return globalThis}var o=i(this);function s(t,e){if(e){var n=o;t=t.split(".");for(var i=0;i<t.length-1;i++){var s=t[i];s in n||(n[s]={}),n=n[s]}t=t[t.length-1],i=n[t],e=e(i),e!=i&&null!=e&&r(n,t,{configurable:!0,writable:!0,value:e})}}function a(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function u(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:a(t)}}s("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var i=o.setTimeout;n.prototype.c=function(t){i(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Ra(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=u(t),o=i.next();!o.done;o=i.next())r(o.value).Ra(e,n)}))},e.all=function(t){var n=u(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){s[e]=n,a--,0==a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,r(i.value).Ra(o(s.length-1),e),i=n.next()}while(!i.done)}))},e}));var c=c||{},l=this||self,h=/^[\w+/_-]+[=]{0,2}$/,f=null;function p(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&h.test(t)?t:""}function d(){}function g(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function v(t){var e=g(t);return"array"==e||"object"==e&&"number"==typeof t.length}function y(t){return"function"==g(t)}function m(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function _(t){return Object.prototype.hasOwnProperty.call(t,b)&&t[b]||(t[b]=++w)}var b="closure_uid_"+(1e9*Math.random()>>>0),w=0;function E(t,e,n){return t.call.apply(t.bind,arguments)}function x(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function I(t,e,n){return I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?E:x,I.apply(null,arguments)}function O(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var S=Date.now;function C(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function T(t){return t}function N(t,e,n){this.code=P+t,this.message=e||R[t]||"",this.a=n||null}function k(t){var e=t&&t.code;return e?new N(e.substring(P.length),t.message,t.serverResponse):null}C(N,Error),N.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},N.prototype.toJSON=function(){return this.w()};var A,P="auth/",R={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},L={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function j(t){for(var e in L)if(L[e].id===t)return t=L[e],{firebaseEndpoint:t.Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function M(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function D(t){if(Error.captureStackTrace)Error.captureStackTrace(this,D);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function F(t,e){t=t.split("%s");for(var n="",r=t.length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");D.call(this,n+t[r])}function q(t,e){throw new F("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function U(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function B(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function V(){this.b=this.a=null}A=j("__EID__")?"__EID__":void 0,C(D,Error),D.prototype.name="CustomError",C(F,D),F.prototype.name="AssertionError",U.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var G=new U((function(){return new W}),(function(t){t.reset()}));function z(){var t=Ae,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function W(){this.next=this.b=this.a=null}V.prototype.add=function(t,e){var n=G.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},W.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},W.prototype.reset=function(){this.next=this.b=this.a=null};var K=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},H=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Y(t,e){for(var n="string"===typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}var X=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"===typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},$=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"===typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},Q=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function J(t){t:{for(var e=oa,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}function Z(t,e){return 0<=K(t,e)}function tt(t,e){var n;return e=K(t,e),(n=0<=e)&&Array.prototype.splice.call(t,e,1),n}function et(t,e){Y(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function nt(t){return Array.prototype.concat.apply([],arguments)}function rt(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var it,ot=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},st=/&/g,at=/</g,ut=/>/g,ct=/"/g,lt=/'/g,ht=/\x00/g,ft=/[\x00&<>"']/;function pt(t,e){return-1!=t.indexOf(e)}function dt(t,e){return t<e?-1:t>e?1:0}t:{var gt=l.navigator;if(gt){var vt=gt.userAgent;if(vt){it=vt;break t}}it=""}function yt(t){return pt(it,t)}function mt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function _t(t){for(var e in t)return!1;return!0}function bt(t){var e,n={};for(e in t)n[e]=t[e];return n}var wt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Et(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(var o=0;o<wt.length;o++)n=wt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function xt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if(r=r||l,r.Element&&r.Location){var i=r;break t}}catch(s){}i=null}if(i&&"undefined"!=typeof i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(m(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(s){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;q("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function It(t,e){this.a=t===Tt&&e||"",this.b=Ct}function Ot(t){return t instanceof It&&t.constructor===It&&t.b===Ct?t.a:(q("expected object of type Const, got '"+t+"'"),"type_error:Const")}It.prototype.ta=!0,It.prototype.sa=function(){return this.a},It.prototype.toString=function(){return"Const{"+this.a+"}"};var St,Ct={},Tt={};function Nt(){if(void 0===St){var t=null,e=l.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:T,createScript:T,createScriptURL:T})}catch(n){l.console&&l.console.error(n.message)}St=t}else St=t}return St}function kt(t,e){this.a=e===jt?t:""}function At(t){return t instanceof kt&&t.constructor===kt?t.a:(q("expected object of type TrustedResourceUrl, got '"+t+"' of type "+g(t)),"type_error:TrustedResourceUrl")}function Pt(t,e){var n=Ot(t);if(!Lt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return t=n.replace(Rt,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return t=e[r],t instanceof It?Ot(t):encodeURIComponent(String(t))})),Mt(t)}kt.prototype.ta=!0,kt.prototype.sa=function(){return this.a.toString()},kt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Rt=/%{(\w+)}/g,Lt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,jt={};function Mt(t){var e=Nt();return t=e?e.createScriptURL(t):t,new kt(t,jt)}function Dt(t,e){this.a=e===zt?t:""}function Ft(t){return t instanceof Dt&&t.constructor===Dt?t.a:(q("expected object of type SafeUrl, got '"+t+"' of type "+g(t)),"type_error:SafeUrl")}Dt.prototype.ta=!0,Dt.prototype.sa=function(){return this.a.toString()},Dt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var qt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Ut=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Bt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Vt(t){if(t instanceof Dt)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),Bt.test(t))t=new Dt(t,zt);else{t=String(t),t=t.replace(/(%0A|%0D)/g,"");var e=t.match(Ut);t=e&&qt.test(e[1])?new Dt(t,zt):null}return t}function Gt(t){return t instanceof Dt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),Bt.test(t)||(t="about:invalid#zClosurez"),new Dt(t,zt))}var zt={},Wt=new Dt("about:invalid#zClosurez",zt);function Kt(t,e,n){this.a=n===Yt?t:""}function Ht(t){return t instanceof Kt&&t.constructor===Kt?t.a:(q("expected object of type SafeHtml, got '"+t+"' of type "+g(t)),"type_error:SafeHtml")}Kt.prototype.ta=!0,Kt.prototype.sa=function(){return this.a.toString()},Kt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Yt={};function Xt(t,e){xt(t,"HTMLScriptElement"),t.src=At(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=l?e=p(e.document):(null===f&&(f=p(l.document)),e=f),e&&t.setAttribute("nonce",e)}function $t(t,e,n,r){return t=t instanceof Dt?t:Gt(t),e=e||l,n=n instanceof It?Ot(n):n||"",e.open(Ft(t),n,r,void 0)}function Qt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Jt(t){return ft.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(st,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(at,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(ut,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(ct,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(lt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(ht,"&#0;"))),t}function Zt(t){return Zt[" "](t),t}function te(t,e){var n=pe;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}Zt[" "]=d;var ee,ne=yt("Opera"),re=yt("Trident")||yt("MSIE"),ie=yt("Edge"),oe=ie||re,se=yt("Gecko")&&!(pt(it.toLowerCase(),"webkit")&&!yt("Edge"))&&!(yt("Trident")||yt("MSIE"))&&!yt("Edge"),ae=pt(it.toLowerCase(),"webkit")&&!yt("Edge");function ue(){var t=l.document;return t?t.documentMode:void 0}t:{var ce="",le=function(){var t=it;return se?/rv:([^\);]+)(\)|;)/.exec(t):ie?/Edge\/([\d\.]+)/.exec(t):re?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):ae?/WebKit\/(\S+)/.exec(t):ne?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(le&&(ce=le?le[1]:""),re){var he=ue();if(null!=he&&he>parseFloat(ce)){ee=String(he);break t}}ee=ce}var fe,pe={};function de(t){return te(t,(function(){for(var e=0,n=ot(String(ee)).split("."),r=ot(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=dt(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||dt(0==s[2].length,0==a[2].length)||dt(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(l.document&&re){var ge=ue();fe=ge||(parseInt(ee,10)||void 0)}else fe=void 0;var ve=fe;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(td){}var ye=!re||9<=Number(ve);function me(t){var e=document;return"string"===typeof t?e.getElementById(t):t}function _e(t,e){mt(e,(function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Ee.hasOwnProperty(n)?t.setAttribute(Ee[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var be,we,Ee={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function xe(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!ye&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Jt(s.name),'"'),s.type){o.push(' type="',Jt(s.type),'"');var a={};Et(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=Oe(i,o),s&&("string"===typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):_e(o,s)),2<r.length&&Ie(i,o,r),o}function Ie(t,e,n){function r(n){n&&e.appendChild("string"===typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!v(o)||m(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(m(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(y(o)){s="function"==typeof o.item;break t}}s=!1}H(s?rt(o):o,r)}}}function Oe(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function Se(t){l.setTimeout((function(){throw t}),0)}function Ce(){var t=l.MessageChannel;if("undefined"===typeof t&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!yt("Presto")&&(t=function(){var t=Oe(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;t=e.document,t.open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=I((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),"undefined"!==typeof t&&!yt("Trident")&&!yt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){n=n.next;var t=n.Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){l.setTimeout(t,0)}}function Te(t,e){we||Ne(),ke||(we(),ke=!0),Ae.add(t,e)}function Ne(){if(l.Promise&&l.Promise.resolve){var t=l.Promise.resolve(void 0);we=function(){t.then(Pe)}}else we=function(){var t=Pe;!y(l.setImmediate)||l.Window&&l.Window.prototype&&!yt("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(be||(be=Ce()),be(t)):l.setImmediate(t)}}var ke=!1,Ae=new V;function Pe(){for(var t;t=z();){try{t.a.call(t.b)}catch(e){Se(e)}B(G,t)}ke=!1}function Re(t,e){if(this.a=Le,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=d)try{var n=this;t.call(e,(function(t){Ye(n,je,t)}),(function(t){if(!(t instanceof rn))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}Ye(n,Me,t)}))}catch(r){Ye(this,Me,r)}}var Le=0,je=2,Me=3;function De(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}De.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Fe=new U((function(){return new De}),(function(t){t.reset()}));function qe(t,e,n){var r=Fe.get();return r.g=t,r.b=e,r.f=n,r}function Ue(t){if(t instanceof Re)return t;var e=new Re(d);return Ye(e,je,t),e}function Be(t){return new Re((function(e,n){n(t)}))}function Ve(t,e,n){Xe(t,e,n,null)||Te(O(e,t))}function Ge(t){return new Re((function(e,n){var r=t.length,i=[];if(r)for(var o,s=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},u=0;u<t.length;u++)o=t[u],Ve(o,O(s,u),a);else e(i)}))}function ze(t){return new Re((function(e){var n=t.length,r=[];if(n)for(var i,o=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},s=0;s<t.length;s++)i=t[s],Ve(i,O(o,s,!0),O(o,s,!1));else e(r)}))}function We(t,e){if(t.a==Le)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==Le&&1==r?We(n,e):(o?(r=o,r.next==n.f&&(n.f=r),r.next=r.next.next):Je(n),Ze(n,i,Me,e)))}t.c=null}else Ye(t,Me,e)}function Ke(t,e){t.b||t.a!=je&&t.a!=Me||Qe(t),t.f?t.f.next=e:t.b=e,t.f=e}function He(t,e,n,r){var i=qe(null,null,null);return i.a=new Re((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(s){o(s)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof rn?o(e):t(i)}catch(s){o(s)}}:o})),i.a.c=t,Ke(t,i),i.a}function Ye(t,e,n){t.a==Le&&(t===n&&(e=Me,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Xe(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Qe(t),e!=Me||n instanceof rn||en(t,n)))}function Xe(t,e,n,r){if(t instanceof Re)return Ke(t,qe(e||d,n||null,r)),!0;if(M(t))return t.then(e,n,r),!0;if(m(t))try{var i=t.then;if(y(i))return $e(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function $e(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}function s(t){a||(a=!0,n.call(i,t))}var a=!1;try{e.call(t,s,o)}catch(u){o(u)}}function Qe(t){t.h||(t.h=!0,Te(t.gc,t))}function Je(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ze(t,e,n,r){if(n==Me&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,tn(e,n,r);else try{e.c?e.g.call(e.f):tn(e,n,r)}catch(i){nn.call(null,i)}B(Fe,e)}function tn(t,e,n){e==je?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}function en(t,e){t.g=!0,Te((function(){t.g&&nn.call(null,e)}))}Re.prototype.then=function(t,e,n){return He(this,y(t)?t:null,y(e)?e:null,n)},Re.prototype.$goog_Thenable=!0,n=Re.prototype,n.oa=function(t,e){return t=qe(t,t,e),t.c=!0,Ke(this,t),this},n.o=function(t,e){return He(this,null,t,e)},n.cancel=function(t){if(this.a==Le){var e=new rn(t);Te((function(){We(this,e)}),this)}},n.$c=function(t){this.a=Le,Ye(this,je,t)},n.ad=function(t){this.a=Le,Ye(this,Me,t)},n.gc=function(){for(var t;t=Je(this);)Ze(this,t,this.a,this.i);this.h=!1};var nn=Se;function rn(t){D.call(this,t)}function on(){0!=sn&&(an[_(this)]=this),this.ya=this.ya,this.pa=this.pa}C(rn,D),rn.prototype.name="cancel";var sn=0,an={};function un(t){if(!t.ya&&(t.ya=!0,t.Da(),0!=sn)){var e=_(t);if(0!=sn&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete an[e]}}on.prototype.ya=!1,on.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var cn=Object.freeze||function(t){return t},ln=!re||9<=Number(ve),hn=re&&!de("9"),fn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",d,e),l.removeEventListener("test",d,e)}catch(n){}return t}();function pn(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function dn(t,e){if(pn.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(se){t:{try{Zt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:gn[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}pn.prototype.preventDefault=function(){this.defaultPrevented=!0},C(dn,pn);var gn=cn({2:"touch",3:"pen",4:"mouse"});dn.prototype.preventDefault=function(){dn.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,hn)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},dn.prototype.g=function(){return this.a};var vn="closure_listenable_"+(1e6*Math.random()|0),yn=0;function mn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++yn,this.wa=this.Qa=!1}function _n(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function bn(t){this.src=t,this.a={},this.b=0}function wn(t,e){var n=e.type;n in t.a&&tt(t.a[n],e)&&(_n(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function En(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}bn.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.a[o],t||(t=this.a[o]=[],this.b++);var s=En(t,e,r,i);return-1<s?(e=t[s],n||(e.Qa=!1)):(e=new mn(e,this.src,o,!!r,i),e.Qa=n,t.push(e)),e};var xn="closure_lm_"+(1e6*Math.random()|0),In={};function On(t,e,n,r,i){if(r&&r.once)Tn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)On(t,e[o],n,r,i);else n=Dn(n),t&&t[vn]?qn(t,e,n,m(r)?!!r.capture:!!r,i):Sn(t,e,n,!1,r,i)}function Sn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=m(i)?!!i.capture:!!i,a=jn(t);if(a||(t[xn]=a=new bn(t)),n=a.add(e,n,r,s,o),!n.proxy){if(r=Cn(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)fn||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(An(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function Cn(){var t=Ln,e=ln?function(n){return t.call(e.src,e.listener,n)}:function(n){if(n=t.call(e.src,e.listener,n),!n)return n};return e}function Tn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Tn(t,e[o],n,r,i);else n=Dn(n),t&&t[vn]?Un(t,e,n,m(r)?!!r.capture:!!r,i):Sn(t,e,n,!0,r,i)}function Nn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Nn(t,e[o],n,r,i);else r=m(r)?!!r.capture:!!r,n=Dn(n),t&&t[vn]?(t=t.v,e=String(e).toString(),e in t.a&&(o=t.a[e],n=En(o,n,r,i),-1<n&&(_n(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=jn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=En(e,n,r,i)),(n=-1<t?e[t]:null)&&kn(n))}function kn(t){if("number"!==typeof t&&t&&!t.wa){var e=t.src;if(e&&e[vn])wn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(An(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=jn(e))?(wn(n,t),0==n.b&&(n.src=null,e[xn]=null)):_n(t)}}}function An(t){return t in In?In[t]:In[t]="on"+t}function Pn(t,e,n,r){var i=!0;if((t=jn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=Rn(o,r),i=i&&!1!==o)}return i}function Rn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&kn(t),n.call(r,e)}function Ln(t,e){if(t.wa)return!0;if(!ln){if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(n=n[e[r]],null==n){e=null;break t}e=n}if(r=e,e=new dn(r,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(s){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=Pn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=Pn(r[i],t,!1,e),n=n&&o}return n}return Rn(t,new dn(e,this))}function jn(t){return t=t[xn],t instanceof bn?t:null}var Mn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dn(t){return y(t)?t:(t[Mn]||(t[Mn]=function(e){return t.handleEvent(e)}),t[Mn])}function Fn(){on.call(this),this.v=new bn(this),this.bc=this,this.hb=null}function qn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Un(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Bn(t,e,n,r){if(e=t.v.a[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.wa&&s.capture==n){var a=s.listener,u=s.Wa||s.src;s.Qa&&wn(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function Vn(t,e,n){if(y(t))n&&(t=I(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=I(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function Gn(t){var e=null;return new Re((function(n,r){e=Vn((function(){n(void 0)}),t),-1==e&&r(Error("Failed to schedule timer."))})).o((function(t){throw l.clearTimeout(e),t}))}function zn(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"===typeof t)return t.split("");if(v(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Wn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(v(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Kn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(v(t)||"string"===typeof t)H(t,e,void 0);else for(var n=Wn(t),r=zn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}function Hn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Hn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Yn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Xn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)r=t.a[e],Xn(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Xn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}C(Fn,on),Fn.prototype[vn]=!0,Fn.prototype.addEventListener=function(t,e,n,r){On(this,t,e,n,r)},Fn.prototype.removeEventListener=function(t,e,n,r){Nn(this,t,e,n,r)},Fn.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"===typeof t)t=new pn(t,n);else if(t instanceof pn)t.target=t.target||n;else{var i=t;t=new pn(r,n),Et(t,i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=Bn(s,r,!0,t)&&i}if(s=t.b=n,i=Bn(s,r,!0,t)&&i,i=Bn(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)s=t.b=e[o],i=Bn(s,r,!1,t)&&i;return i},Fn.prototype.Da=function(){if(Fn.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)_n(n[r]);delete e.a[t],e.b--}}this.hb=null},n=Hn.prototype,n.X=function(){Yn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},n.Y=function(){return Yn(this),this.a.concat()},n.clear=function(){this.b={},this.c=this.a.length=0},n.get=function(t,e){return Xn(this.b,t)?this.b[t]:e},n.set=function(t,e){Xn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},n.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var $n=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Qn(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Jn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Jn?(this.i=void 0!==e?e:t.i,Zn(this,t.c),this.l=t.l,this.a=t.a,tr(this,t.g),this.f=t.f,er(this,br(t.b)),this.h=t.h):t&&(n=String(t).match($n))?(this.i=!!e,Zn(this,n[1]||"",!0),this.l=sr(n[2]||""),this.a=sr(n[3]||"",!0),tr(this,n[4]),this.f=sr(n[5]||"",!0),er(this,n[6]||"",!0),this.h=sr(n[7]||"")):(this.i=!!e,this.b=new dr(null,this.i))}function Zn(t,e,n){t.c=n?sr(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function tr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function er(t,e,n){e instanceof dr?(t.b=e,Er(t.b,t.i)):(n||(e=ar(e,fr)),t.b=new dr(e,t.i))}function nr(t,e,n){t.b.set(e,n)}function rr(t,e){return t.b.get(e)}function ir(t){return t instanceof Jn?new Jn(t):new Jn(t,void 0)}function or(t,e,n,r){var i=new Jn(null,void 0);return t&&Zn(i,t),e&&(i.a=e),n&&tr(i,n),r&&(i.f=r),i}function sr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ar(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,ur),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ur(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}Jn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(ar(e,cr,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(ar(e,cr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.g,null!=n&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(ar(n,"/"==n.charAt(0)?hr:lr,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",ar(n,pr)),t.join("")},Jn.prototype.resolve=function(t){var e=new Jn(this),n=!!t.c;n?Zn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)tr(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(i=r,".."==i||"."==i)r="";else if(pt(i,"./")||pt(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?er(e,br(t.b)):n=!!t.h,n&&(e.h=t.h),e};var cr=/[#\/\?@]/g,lr=/[#\?:]/g,hr=/[#\?]/g,fr=/[#\?@]/g,pr=/#/g;function dr(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function gr(t){t.a||(t.a=new Hn,t.b=0,t.c&&Qn(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function vr(t){var e=Wn(t);if("undefined"==typeof e)throw Error("Keys are undefined");var n=new dr(null,void 0);t=zn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?_r(n,i,o):n.add(i,o)}return n}function yr(t,e){gr(t),e=wr(t,e),Xn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,t=t.a,Xn(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Yn(t)))}function mr(t,e){return gr(t),e=wr(t,e),Xn(t.a.b,e)}function _r(t,e,n){yr(t,e),0<n.length&&(t.c=null,t.a.set(wr(t,e),rt(n)),t.b+=n.length)}function br(t){var e=new dr;return e.c=t.c,t.a&&(e.a=new Hn(t.a),e.b=t.b),e}function wr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Er(t,e){e&&!t.f&&(gr(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(yr(this,e),_r(this,n,t))}),t)),t.f=e}function xr(t){var e=[];return Or(new Ir,t,e),e.join("")}function Ir(){}function Or(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),Or(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&(o=e[r],"function"!=typeof o&&(n.push(i),Tr(r,n),n.push(":"),Or(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":Tr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}n=dr.prototype,n.add=function(t,e){gr(this),this.c=null,t=wr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},n.clear=function(){this.a=this.c=null,this.b=0},n.forEach=function(t,e){gr(this),this.a.forEach((function(n,r){H(n,(function(n){t.call(e,n,r,this)}),this)}),this)},n.Y=function(){gr(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},n.X=function(t){gr(this);var e=[];if("string"===typeof t)mr(this,t)&&(e=nt(e,this.a.get(wr(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=nt(e,t[n])}return e},n.set=function(t,e){return gr(this),this.c=null,t=wr(this,t),mr(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},n.get=function(t,e){return t?(t=this.X(t),0<t.length?String(t[0]):e):e},n.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Sr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Cr=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Tr(t,e){e.push('"',t.replace(Cr,(function(t){var e=Sr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Sr[t]=e),e})),'"')}function Nr(){var t=Zr();return re&&!!ve&&11==ve||/Edge\/\d+/.test(t)}function kr(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function Ar(t,e){e=e||l.window;var n="about:blank";t&&(n=Ft(Vt(t)||Wt)),e.location.href=n}function Pr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<Pr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function Rr(){var t=Zr();return t=$r(t)!=Xr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null,!(t&&30>t)&&(!re||!ve||9<ve)}function Lr(t){return t=(t||Zr()).toLowerCase(),!!(t.match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function jr(t){t=t||l.window;try{t.close()}catch(e){}}function Mr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Zr().toLowerCase(),r&&(e.target=r,pt(n,"crios/")&&(e.target="_blank")),$r(Zr())==Yr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Dt?n:Vt("undefined"!=typeof n.href?n.href:String(n))||Wt,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((yt("iPhone")&&!yt("iPod")&&!yt("iPad")||yt("iPad")||yt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(s=Oe(document,"A"),xt(s,"HTMLAnchorElement"),e=e instanceof Dt?e:Gt(e),s.href=Ft(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),t=document.createEvent("MouseEvent"),t.initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=$t("",r,n,s),t=Ft(e),s&&(oe&&pt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Jt(t)+'">',t=(r=Nt())?r.createHTML(t):t,t=new Kt(t,null,Yt),r=s.document)&&(r.write(Ht(t)),r.close())):(s=$t(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}function Dr(t){return new Re((function(e){function n(){Gn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}return n()}))}var Fr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qr=/^[^@]+@[^@]+$/;function Ur(){var t=null;return new Re((function(e){"complete"==l.document.readyState?e():(t=function(){e()},Tn(window,"load",t))})).o((function(e){throw Nn(window,"load",t),e}))}function Br(){return Vr(void 0)?Ur().then((function(){return new Re((function(t,e){var n=l.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Be(Error("Cordova must run in an Android or iOS file scheme."))}function Vr(t){return t=t||Zr(),!("file:"!==ii()&&"ionic:"!==ii()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Gr(){var t=l.window;try{return!(!t||t==t.top)}catch(e){return!1}}function zr(){return"undefined"!==typeof l.WorkerGlobalScope&&"function"===typeof l.importScripts}function Wr(){return e["default"].INTERNAL.hasOwnProperty("reactNative")?"ReactNative":e["default"].INTERNAL.hasOwnProperty("node")?"Node":zr()?"Worker":"Browser"}function Kr(){var t=Wr();return"ReactNative"===t||"Node"===t}function Hr(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}var Yr="Firefox",Xr="Chrome";function $r(t){var e=t.toLowerCase();return pt(e,"opera/")||pt(e,"opr/")||pt(e,"opios/")?"Opera":pt(e,"iemobile")?"IEMobile":pt(e,"msie")||pt(e,"trident/")?"IE":pt(e,"edge/")?"Edge":pt(e,"firefox/")?Yr:pt(e,"silk/")?"Silk":pt(e,"blackberry")?"Blackberry":pt(e,"webos")?"Webos":!pt(e,"safari/")||pt(e,"chrome/")||pt(e,"crios/")||pt(e,"android")?!pt(e,"chrome/")&&!pt(e,"crios/")||pt(e,"edge/")?pt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Xr:"Safari"}var Qr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Jr(t,e){e=e||[];var n,r=[],i={};for(n in Qr)i[Qr[n]]=!0;for(n=0;n<e.length;n++)"undefined"!==typeof i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),e=r,e.length||(e=["FirebaseCore-web"]),r=Wr(),"Browser"===r?(i=Zr(),r=$r(i)):"Worker"===r&&(i=Zr(),r=$r(i)+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Zr(){return l.navigator&&l.navigator.userAgent||""}function ti(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function ei(){try{var t=l.localStorage,e=ci();if(t)return t.setItem(e,"1"),t.removeItem(e),!Nr()||!!l.indexedDB}catch(n){return zr()&&!!l.indexedDB}return!1}function ni(){return(ri()||"chrome-extension:"===ii()||Vr())&&!Kr()&&ei()&&!zr()}function ri(){return"http:"===ii()||"https:"===ii()}function ii(){return l.location&&l.location.protocol||null}function oi(t){return t=t||Zr(),!Lr(t)&&$r(t)!=Yr}function si(t){return"undefined"===typeof t?null:xr(t)}function ai(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function ui(t){if(null!==t)return JSON.parse(t)}function ci(t){return t||Math.floor(1e9*Math.random()).toString()}function li(t){return t=t||Zr(),"Safari"!=$r(t)&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function hi(){var t=l.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function fi(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Zr(),e=Wr(),this.b=Lr(t)||"ReactNative"===e}function pi(){var t=l.document;return!t||"undefined"===typeof t.visibilityState||"visible"==t.visibilityState}function di(){var t=l.document,e=null;return pi()||!t?Ue():new Re((function(n){e=function(){pi()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}function gi(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function vi(){return!(!ti("fireauth.oauthhelper",l)&&!ti("fireauth.iframe",l))}function yi(){var t=l.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}function mi(){var t=l.navigator;return t&&t.serviceWorker?Ue().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Ue(null)}fi.prototype.get=function(){var t=l.navigator;return!t||"boolean"!==typeof t.onLine||!ri()&&"chrome-extension:"!==ii()&&"undefined"===typeof t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var _i,bi={};function wi(t){bi[t]||(bi[t]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(t))}try{var Ei={};Object.defineProperty(Ei,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Ei,"abcd",{configurable:!0,enumerable:!0,value:2}),_i=2==Ei.abcd}catch(td){_i=!1}function xi(t,e,n){_i?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Ii(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&xi(t,n,e[n])}function Oi(t){var e={};return Ii(e,t),e}function Si(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function Ci(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}function Ti(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)xi(e,n,Ti(t[n]));return e}function Ni(t){var e=t&&(t[Li]?"phone":null);if(!(e&&t&&t[Ri]))throw new N("internal-error","Internal assert: invalid MultiFactorInfo object");xi(this,"uid",t[Ri]),xi(this,"displayName",t[Ai]||null);var n=null;t[Pi]&&(n=new Date(t[Pi]).toUTCString()),xi(this,"enrollmentTime",n),xi(this,"factorId",e)}function ki(t){try{var e=new ji(t)}catch(n){e=null}return e}Ni.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Ai="displayName",Pi="enrolledAt",Ri="mfaEnrollmentId",Li="phoneInfo";function ji(t){Ni.call(this,t),xi(this,"phoneNumber",t[Li])}function Mi(t){var e={},n=t[Ui],r=t[Vi],i=t[Gi];if(t=ki(t[Bi]),!i||i!=Fi&&i!=qi&&!n||i==qi&&!r||i==Di&&!t)throw Error("Invalid checkActionCode response!");i==qi?(e[Wi]=n||null,e[Hi]=n||null,e[zi]=r):(e[Wi]=r||null,e[Hi]=r||null,e[zi]=n||null),e[Ki]=t||null,xi(this,Xi,i),xi(this,Yi,Ti(e))}C(ji,Ni),ji.prototype.w=function(){var t=ji.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var Di="REVERT_SECOND_FACTOR_ADDITION",Fi="EMAIL_SIGNIN",qi="VERIFY_AND_CHANGE_EMAIL",Ui="email",Bi="mfaInfo",Vi="newEmail",Gi="requestType",zi="email",Wi="fromEmail",Ki="multiFactorInfo",Hi="previousEmail",Yi="data",Xi="operation";function $i(t){t=ir(t);var e=rr(t,Qi)||null,n=rr(t,Ji)||null,r=rr(t,eo)||null;if(r=r&&ro[r]||null,!e||!n||!r)throw new N("argument-error",Qi+", "+Ji+"and "+eo+" are required in a valid action code URL.");Ii(this,{apiKey:e,operation:r,code:n,continueUrl:rr(t,Zi)||null,languageCode:rr(t,to)||null,tenantId:rr(t,no)||null})}var Qi="apiKey",Ji="oobCode",Zi="continueUrl",to="languageCode",eo="mode",no="tenantId",ro={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Di,signIn:Fi,verifyAndChangeEmail:qi,verifyEmail:"VERIFY_EMAIL"};function io(t){try{return new $i(t)}catch(e){return null}}function oo(t){var e=t[lo];if("undefined"===typeof e)throw new N("missing-continue-uri");if("string"!==typeof e||"string"===typeof e&&!e.length)throw new N("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[so];if(n&&"object"===typeof n){e=n[po];var r=n[ho];if(n=n[fo],"string"===typeof e&&e.length){if(this.a=e,"undefined"!==typeof r&&"boolean"!==typeof r)throw new N("argument-error",ho+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new N("argument-error",fo+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof e)throw new N("argument-error",po+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new N("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new N("argument-error",so+" property must be a non null object when specified.");if(this.f=null,(e=t[co])&&"object"===typeof e){if(e=e[go],"string"===typeof e&&e.length)this.f=e;else if("undefined"!==typeof e)throw new N("argument-error",go+" property must be a non empty string when specified.")}else if("undefined"!==typeof e)throw new N("argument-error",co+" property must be a non null object when specified.");if(e=t[uo],"undefined"!==typeof e&&"boolean"!==typeof e)throw new N("argument-error",uo+" property must be a boolean when specified.");if(this.c=!!e,t=t[ao],"undefined"!==typeof t&&("string"!==typeof t||"string"===typeof t&&!t.length))throw new N("argument-error",ao+" property must be a non empty string when specified.");this.i=t||null}var so="android",ao="dynamicLinkDomain",uo="handleCodeInApp",co="iOS",lo="url",ho="installApp",fo="minimumVersion",po="packageName",go="bundleId";function vo(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}function yo(t){return $(t,(function(t){return t=t.toString(16),1<t.length?t:"0"+t})).join("")}var mo=null;function _o(t){var e=[];return bo(t,(function(t){e.push(t)})),e}function bo(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=mo[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}wo();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}function wo(){if(!mo){mo={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===mo[o]&&(mo[o]=i)}}}function Eo(t){var e=Io(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function xo(t){try{return new Eo(t)}catch(e){return null}}function Io(t){if(!t)return null;if(t=t.split("."),3!=t.length)return null;t=t[1];for(var e=(4-t.length%4)%4,n=0;n<e;n++)t+=".";try{var r=_o(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=r[e++],u=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&a)-65536;t[n++]=String.fromCharCode(55296+(u>>10)),t[n++]=String.fromCharCode(56320+(1023&u))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(c){}return null}Eo.prototype.T=function(){return this.f},Eo.prototype.l=function(){return this.c},Eo.prototype.toString=function(){return this.h};var Oo="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),So=["client_id","response_type","scope","redirect_uri","state"],Co={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:So},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:So},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:So},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Oo},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function To(t){for(var e in Co)if(Co[e].fa==t)return Co[e];return null}function No(t){var e={};e["facebook.com"]=Lo,e["google.com"]=Mo,e["github.com"]=jo,e["twitter.com"]=Do;var n=t&&t[Ao];try{if(n)return e[n]?new e[n](t):new Ro(t);if("undefined"!==typeof t[ko])return new Po(t)}catch(r){}return null}var ko="idToken",Ao="providerId";function Po(t){var e=t[Ao];if(!e&&t[ko]){var n=xo(t[ko]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,"undefined"!==typeof t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),xi(this,"providerId",e),xi(this,"isNewUser",n)}function Ro(t){Po.call(this,t),t=ui(t.rawUserInfo||"{}"),xi(this,"profile",Ti(t||{}))}function Lo(t){if(Ro.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function jo(t){if(Ro.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");xi(this,"username",this.profile&&this.profile.login||null)}function Mo(t){if(Ro.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Do(t){if(Ro.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");xi(this,"username",t.screenName||null)}function Fo(t){var e=ir(t),n=rr(e,"link"),r=rr(ir(n),"link");return e=rr(e,"deep_link_id"),rr(ir(e),"link")||e||r||n||t}function qo(t,e){if(!t&&!e)throw new N("internal-error","Internal assert: no raw session string available");if(t&&e)throw new N("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Uo:Bo}C(Ro,Po),C(Lo,Ro),C(jo,Ro),C(Mo,Ro),C(Do,Ro);var Uo="enroll",Bo="signin";function Vo(){}function Go(t,e){return t.then((function(t){if(t[Ma]){var n=xo(t[Ma]);if(!n||e!=n.i)throw new N("user-mismatch");return t}throw new N("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==P+"user-not-found"?new N("user-mismatch"):t}))}function zo(t,e){if(!e)throw new N("internal-error","failed to construct a credential");this.a=e,xi(this,"providerId",t),xi(this,"signInMethod",t)}function Wo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Ko(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new zo(t.providerId,t.pendingToken)}catch(e){}return null}function Ho(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&xi(this,"idToken",e.idToken),e.accessToken&&xi(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&xi(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new N("internal-error","failed to construct a credential");xi(this,"accessToken",e.oauthToken),xi(this,"secret",e.oauthTokenSecret)}xi(this,"providerId",t),xi(this,"signInMethod",n)}function Yo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:vr(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function Xo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new Ho(t.providerId,e,t.signInMethod)}catch(n){}}return null}function $o(t,e){this.Qc=e||[],Ii(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=(To(t)||{}).Ja||null,this.pb=null}function Qo(t){if("string"!==typeof t||0!=t.indexOf("saml."))throw new N("argument-error",'SAML provider IDs must be prefixed with "saml."');$o.call(this,t,[])}function Jo(t){$o.call(this,t,So),this.a=[]}function Zo(){Jo.call(this,"facebook.com")}function ts(t){if(!t)throw new N("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return m(t)&&(e=t.accessToken),(new Zo).credential({accessToken:e})}function es(){Jo.call(this,"github.com")}function ns(t){if(!t)throw new N("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return m(t)&&(e=t.accessToken),(new es).credential({accessToken:e})}function rs(){Jo.call(this,"google.com"),this.Ca("profile")}function is(t,e){var n=t;return m(t)&&(n=t.idToken,e=t.accessToken),(new rs).credential({idToken:n,accessToken:e})}function os(){$o.call(this,"twitter.com",Oo)}function ss(t,e){var n=t;if(m(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new N("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Ho("twitter.com",n,"twitter.com")}function as(t,e,n){this.a=t,this.f=e,xi(this,"providerId","password"),xi(this,"signInMethod",n===cs.EMAIL_LINK_SIGN_IN_METHOD?cs.EMAIL_LINK_SIGN_IN_METHOD:cs.EMAIL_PASSWORD_SIGN_IN_METHOD)}function us(t){return t&&t.email&&t.password?new as(t.email,t.password,t.signInMethod):null}function cs(){Ii(this,{providerId:"password",isOAuthProvider:!1})}function ls(t,e){if(e=hs(e),!e)throw new N("argument-error","Invalid email link!");return new as(t,e.code,cs.EMAIL_LINK_SIGN_IN_METHOD)}function hs(t){return t=Fo(t),(t=io(t))&&t.operation===Fi?t:null}function fs(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new N("internal-error");this.a=t,xi(this,"providerId","phone"),this.fa="phone",xi(this,"signInMethod","phone")}function ps(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return H(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new fs(e)}return null}function ds(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function gs(t){try{this.a=t||e["default"].auth()}catch(n){throw new N("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Ii(this,{providerId:"phone",isOAuthProvider:!1})}function vs(t,e){if(!t)throw new N("missing-verification-id");if(!e)throw new N("missing-verification-code");return new fs({fb:t,eb:e})}function ys(t){if(t.temporaryProof&&t.phoneNumber)return new fs({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return is(o,n);case"facebook.com":return ts(n);case"github.com":return ns(n);case"twitter.com":return ss(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new zo(e,s):new Ho(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new Jo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function ms(t){if(!t.isOAuthProvider)throw new N("invalid-oauth-provider")}function _s(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new N("invalid-auth-event");if(this.g&&this.a)throw new N("invalid-auth-event");if(this.g&&!this.f)throw new N("invalid-auth-event")}function bs(t){return t=t||{},t.type?new _s(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&k(t.error),t.postBody,t.tenantId):null}function ws(){this.b=null,this.a=[]}qo.prototype.Ha=function(){return this.a?Ue(this.a):Ue(this.b)},qo.prototype.w=function(){return this.type==Uo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Vo.prototype.ka=function(){},Vo.prototype.b=function(){},Vo.prototype.c=function(){},Vo.prototype.w=function(){},zo.prototype.ka=function(t){return fu(t,Wo(this))},zo.prototype.b=function(t,e){var n=Wo(this);return n.idToken=e,pu(t,n)},zo.prototype.c=function(t,e){return Go(du(t,Wo(this)),e)},zo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Ho.prototype.ka=function(t){return fu(t,Yo(this))},Ho.prototype.b=function(t,e){var n=Yo(this);return n.idToken=e,pu(t,n)},Ho.prototype.c=function(t,e){var n=Yo(this);return Go(du(t,n),e)},Ho.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},$o.prototype.Ka=function(t){return this.Jb=bt(t),this},C(Qo,$o),C(Jo,$o),Jo.prototype.Ca=function(t){return Z(this.a,t)||this.a.push(t),this},Jo.prototype.Rb=function(){return rt(this.a)},Jo.prototype.credential=function(t,e){var n;if(n=m(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null},!n.idToken&&!n.accessToken)throw new N("argument-error","credential failed: must provide the ID token and/or the access token.");return new Ho(this.providerId,n,this.providerId)},C(Zo,Jo),xi(Zo,"PROVIDER_ID","facebook.com"),xi(Zo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),C(es,Jo),xi(es,"PROVIDER_ID","github.com"),xi(es,"GITHUB_SIGN_IN_METHOD","github.com"),C(rs,Jo),xi(rs,"PROVIDER_ID","google.com"),xi(rs,"GOOGLE_SIGN_IN_METHOD","google.com"),C(os,$o),xi(os,"PROVIDER_ID","twitter.com"),xi(os,"TWITTER_SIGN_IN_METHOD","twitter.com"),as.prototype.ka=function(t){return this.signInMethod==cs.EMAIL_LINK_SIGN_IN_METHOD?Xu(t,Eu,{email:this.a,oobCode:this.f}):Xu(t,zu,{email:this.a,password:this.f})},as.prototype.b=function(t,e){return this.signInMethod==cs.EMAIL_LINK_SIGN_IN_METHOD?Xu(t,xu,{idToken:e,email:this.a,oobCode:this.f}):Xu(t,Mu,{idToken:e,email:this.a,password:this.f})},as.prototype.c=function(t,e){return Go(this.ka(t),e)},as.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Ii(cs,{PROVIDER_ID:"password"}),Ii(cs,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Ii(cs,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),fs.prototype.ka=function(t){return t.gb(ds(this))},fs.prototype.b=function(t,e){var n=ds(this);return n.idToken=e,Xu(t,Ku,n)},fs.prototype.c=function(t,e){var n=ds(this);return n.operation="REAUTH",t=Xu(t,Hu,n),Go(t,e)},fs.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},gs.prototype.gb=function(t,e){var n=this.a.a;return Ue(e.verify()).then((function(r){if("string"!==typeof r)throw new N("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i,o=m(t)?t.session:null,s=m(t)?t.phoneNumber:t;return i=o&&o.type==Uo?o.Ha().then((function(t){return ou(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r}})})):o&&o.type==Bo?o.Ha().then((function(e){return au(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):iu(n,{phoneNumber:s,recaptchaToken:r}),i.then((function(t){return"function"===typeof e.reset&&e.reset(),t}),(function(t){throw"function"===typeof e.reset&&e.reset(),t}));default:throw new N("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Ii(gs,{PROVIDER_ID:"phone"}),Ii(gs,{PHONE_SIGN_IN_METHOD:"phone"}),_s.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},_s.prototype.T=function(){return this.h},_s.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Es,xs=null;function Is(t){var e=xs;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},t=ti("universalLinks.subscribe",l),"function"===typeof t&&t(null,e.b))}function Os(t){var e="unauthorized-domain",n=void 0,r=ir(t);t=r.a,r=r.c,"chrome-extension"==r?n=Qt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Qt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",N.call(this,e,n)}function Ss(t,e,n){N.call(this,t,n),t=e||{},t.Kb&&xi(this,"email",t.Kb),t.ea&&xi(this,"phoneNumber",t.ea),t.credential&&xi(this,"credential",t.credential),t.$b&&xi(this,"tenantId",t.$b)}function Cs(t){if(t.code){var e=t.code||"";0==e.indexOf(P)&&(e=e.substring(P.length));var n={credential:ys(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new N(e,t.message||void 0);return new Ss(e,n,t.message)}return null}function Ts(){}function Ns(t){return t.c||(t.c=t.b())}function ks(){}function As(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Ps(){}function Rs(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=I(this.qc,this),this.a.onerror=I(this.Tb,this),this.a.onprogress=I(this.rc,this),this.a.ontimeout=I(this.vc,this)}function Ls(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function js(t,e,n){this.reset(t,e,n,void 0,void 0)}C(Os,N),C(Ss,N),Ss.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&Et(t,e),t},Ss.prototype.toJSON=function(){return this.w()},Ts.prototype.c=null,C(ks,Ts),ks.prototype.a=function(){var t=As(this);return t?new ActiveXObject(t):new XMLHttpRequest},ks.prototype.b=function(){var t={};return As(this)&&(t[0]=!0,t[1]=!0),t},Es=new ks,C(Ps,Ts),Ps.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Rs;throw Error("Unsupported browser")},Ps.prototype.b=function(){return{}},n=Rs.prototype,n.open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},n.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},n.abort=function(){this.a.abort()},n.setRequestHeader=function(){},n.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},n.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Ls(this,4)},n.Tb=function(){this.status=500,this.response=this.responseText="",Ls(this,4)},n.vc=function(){this.Tb()},n.rc=function(){this.status=200,Ls(this,1)},n.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},js.prototype.a=null;function Ms(t){this.f=t,this.b=this.c=this.a=null}function Ds(t,e){this.name=t,this.value=e}js.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||S(),delete this.a},Ds.prototype.toString=function(){return this.name};var Fs=new Ds("SEVERE",1e3),qs=new Ds("WARNING",900),Us=new Ds("CONFIG",700),Bs=new Ds("FINE",500);function Vs(t){return t.c?t.c:t.a?Vs(t.a):(q("Root logger has no level set."),null)}Ms.prototype.log=function(t,e,n){if(t.value>=Vs(this).value)for(y(e)&&(e=e()),t=new js(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Gs={},zs=null;function Ws(t){var e;if(zs||(zs=new Ms(""),Gs[""]=zs,zs.c=Us),!(e=Gs[t])){e=new Ms(t);var n=t.lastIndexOf("."),r=t.substr(n+1);n=Ws(t.substr(0,n)),n.b||(n.b={}),n.b[r]=e,e.a=n,Gs[t]=e}return e}function Ks(t,e){t&&t.log(Bs,e,void 0)}function Hs(t){this.f=t}function Ys(t){Fn.call(this),this.u=t,this.h=void 0,this.readyState=Xs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=Ws("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}C(Hs,Ts),Hs.prototype.a=function(){return new Ys(this.f)},Hs.prototype.b=function(t){return function(){return t}}({}),C(Ys,Fn);var Xs=0;function $s(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function Qs(t){t.readyState=4,t.g=null,t.c=null,t.m=null,Js(t)}function Js(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Zs(t){Fn.call(this),this.headers=new Hn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=ta,this.u=this.S=!1}n=Ys.prototype,n.open=function(t,e){if(this.readyState!=Xs)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,Js(this)},n.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},n.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Qs(this)),this.readyState=Xs},n.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,Js(this)),this.a&&(this.readyState=3,Js(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):"undefined"!==typeof l.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,$s(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},n.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?Qs(this):Js(this),3==this.readyState&&$s(this)}},n.tc=function(t){this.a&&(this.response=this.responseText=t,Qs(this))},n.sc=function(t){this.a&&(this.response=t,Qs(this))},n.Va=function(t){var e=this.i;e&&e.log(qs,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&Qs(this)},n.setRequestHeader=function(t,e){this.l.append(t,e)},n.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(qs,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},n.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(qs,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Ys.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),C(Zs,Fn);var ta="";Zs.prototype.b=Ws("goog.net.XhrIo");var ea=/^https?$/i,na=["POST","PUT"];function ra(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Es.a(),t.C=t.D?Ns(t.D):Ns(Es),t.a.onreadystatechange=I(t.Wb,t);try{Ks(t.b,da(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(s){return Ks(t.b,da(t,"Error opening Xhr: "+s.message)),void sa(t,s)}e=r||"";var o=new Hn(t.headers);i&&Kn(i,(function(t,e){o.set(e,t)})),i=J(o.Y()),r=l.FormData&&e instanceof l.FormData,!Z(na,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{la(t),0<t.g&&(t.u=ia(t.a),Ks(t.b,da(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=I(t.Ma,t)):t.s=Vn(t.Ma,t.g,t)),Ks(t.b,da(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(s){Ks(t.b,da(t,"Send error: "+s.message)),sa(t,s)}}function ia(t){return re&&de(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}function oa(t){return"content-type"==t.toLowerCase()}function sa(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,aa(t),ca(t)}function aa(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ua(t){if(t.c&&"undefined"!=typeof c)if(t.C[1]&&4==ha(t)&&2==fa(t))Ks(t.b,da(t,"Local request error detected and ignored"));else if(t.i&&4==ha(t))Vn(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==ha(t)){Ks(t.b,da(t,"Request complete")),t.c=!1;try{var e,n=fa(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match($n)[1]||null;if(!o&&l.self&&l.self.location){var s=l.self.location.protocol;o=s.substr(0,s.length-1)}i=!ea.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var a=2<ha(t)?t.a.statusText:""}catch(u){Ks(t.b,"Can not get status: "+u.message),a=""}t.h=a+" ["+fa(t)+"]",aa(t)}}finally{ca(t)}}}function ca(t,e){if(t.a){la(t);var n=t.a,r=t.C[0]?d:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(Fs,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function la(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(l.clearTimeout(t.s),t.s=null)}function ha(t){return t.a?t.a.readyState:0}function fa(t){try{return 2<ha(t)?t.a.status:-1}catch(e){return-1}}function pa(t){try{return t.a?t.a.responseText:""}catch(e){return Ks(t.b,"Can not get responseText: "+e.message),""}}function da(t,e){return e+" ["+t.P+" "+t.l+" "+fa(t)+"]"}function ga(t){var e=Ta;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function va(t,e,n){t.a=!0,t.c=n,t.f=!e,wa(t)}function ya(t){if(t.a){if(!t.v)throw new Ea(t);t.v=!1}}function ma(t,e){_a(t,null,e,void 0)}function _a(t,e,n,r){t.g.push([e,n,r]),t.a&&wa(t)}function ba(t){return Q(t.g,(function(t){return y(t[1])}))}function wa(t){if(t.h&&t.a&&ba(t)){var e=t.h,n=Oa[e];n&&(l.clearTimeout(n.a),delete Oa[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var a=o.call(i||t.s,e);void 0!==a&&(t.f=t.f&&(a==e||a instanceof Error),t.c=e=a),(M(e)||"function"===typeof l.Promise&&e instanceof l.Promise)&&(r=!0,t.i=!0)}catch(u){e=u,t.f=!0,ba(t)||(n=!0)}}t.c=e,r&&(a=I(t.m,t,!0),r=I(t.m,t,!1),e instanceof ga?(_a(e,a,r),e.C=!0):e.then(a,r)),n&&(e=new Ia(e),Oa[e.a]=e,t.h=e.a)}function Ea(){D.call(this)}function xa(){D.call(this)}function Ia(t){this.a=l.setTimeout(I(this.c,this),0),this.b=t}n=Zs.prototype,n.Ma=function(){"undefined"!=typeof c&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Ks(this.b,da(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},n.abort=function(){this.a&&this.c&&(Ks(this.b,da(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ca(this))},n.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ca(this,!0)),Zs.bb.Da.call(this)},n.Wb=function(){this.ya||(this.N||this.i||this.f?ua(this):this.Jc())},n.Jc=function(){ua(this)},n.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ta:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Fs,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return Ks(this.b,"Can not get response: "+e.message),null}},ga.prototype.cancel=function(t){if(this.a)this.c instanceof ga&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new xa(this),ya(this),va(this,!1,t))}},ga.prototype.m=function(t,e){this.i=!1,va(this,t,e)},ga.prototype.then=function(t,e,n){var r,i,o=new Re((function(t,e){r=t,i=e}));return _a(this,r,(function(t){t instanceof xa?o.cancel():i(t)})),o.then(t,e,n)},ga.prototype.$goog_Thenable=!0,C(Ea,D),Ea.prototype.message="Deferred has already fired",Ea.prototype.name="AlreadyCalledError",C(xa,D),xa.prototype.message="Deferred was canceled",xa.prototype.name="CanceledError",Ia.prototype.c=function(){throw delete Oa[this.a],this.b};var Oa={};function Sa(t){var e={},n=e.document||document,r=At(t).toString(),i=Oe(document,"SCRIPT"),o={Xb:i,Ma:void 0},s=new ga(o),a=null,u=null!=e.timeout?e.timeout:5e3;return 0<u&&(a=window.setTimeout((function(){Na(i,!0);var t=new Pa(Aa,"Timeout reached for loading script "+r);ya(s),va(s,!1,t)}),u),o.Ma=a),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Na(i,e.xd||!1,a),ya(s),va(s,!0,null))},i.onerror=function(){Na(i,!0,a);var t=new Pa(ka,"Error while loading script "+r);ya(s),va(s,!1,t)},o=e.attributes||{},Et(o,{type:"text/javascript",charset:"UTF-8"}),_e(i,o),Xt(i,t),Ca(n).appendChild(i),s}function Ca(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}function Ta(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&Na(t,!0,this.Ma)}}function Na(t,e,n){null!=n&&l.clearTimeout(n),t.onload=d,t.onerror=d,t.onreadystatechange=d,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var ka=0,Aa=1;function Pa(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),D.call(this,n),this.code=t}function Ra(t){this.f=t}function La(t,n,r){if(this.c=t,t=n||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Da,this.g=bt(t.secureTokenHeaders||Fa),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||qa,this.a=bt(t.firebaseHeaders||Ua),r&&(this.a["X-Client-Version"]=r,this.g["X-Client-Version"]=r),r="Node"==Wr(),r=l.XMLHttpRequest||r&&e["default"].INTERNAL.node&&e["default"].INTERNAL.node.XMLHttpRequest,!r&&!zr())throw new N("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,zr()?this.f=new Hs(self):Kr()?this.f=new Ra(r):this.f=new Ps,this.b=null}C(Pa,D),C(Ra,Ts),Ra.prototype.a=function(){return new this.f},Ra.prototype.b=function(){return{}};var ja,Ma="idToken",Da=new fi(3e4,6e4),Fa={"Content-Type":"application/x-www-form-urlencoded"},qa=new fi(3e4,6e4),Ua={"Content-Type":"application/json"};function Ba(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Va(t,e){e&&(t.l=Ga("https://securetoken.googleapis.com/v1/token",e),t.h=Ga("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=Ga("https://identitytoolkit.googleapis.com/v2/",e))}function Ga(t,e){return t=ir(t),e=ir(e.url),t.f=t.a+t.f,Zn(t,e.c),t.a=e.a,tr(t,e.g),t.toString()}function za(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Wa(t,e,n,r,i,o,s){Rr()||zr()?t=I(t.u,t):(ja||(ja=new Re((function(t,e){Ya(t,e)}))),t=I(t.s,t)),t(e,n,r,i,o,s)}La.prototype.T=function(){return this.b},La.prototype.u=function(t,e,n,r,i,o){if(zr()&&("undefined"===typeof l.fetch||"undefined"===typeof l.Headers||"undefined"===typeof l.Request))throw new N("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new Zs(this.f);if(o){s.g=Math.max(0,o);var a=setTimeout((function(){s.dispatchEvent("timeout")}),o)}qn(s,"complete",(function(){a&&clearTimeout(a);var t=null;try{t=JSON.parse(pa(this))||null}catch(n){t=null}e&&e(t)})),Un(s,"ready",(function(){a&&clearTimeout(a),un(this)})),Un(s,"timeout",(function(){a&&clearTimeout(a),un(this),e&&e(null)})),ra(s,t,n,r,i)};var Ka=new It(Tt,"https://apis.google.com/js/client.js?onload=%{onload}"),Ha="__fcb"+Math.floor(1e6*Math.random()).toString();function Ya(t,e){if(((window.gapi||{}).client||{}).request)t();else{l[Ha]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};var n=Pt(Ka,{onload:Ha});ma(Sa(n),(function(){e(Error("CORS_UNSUPPORTED"))}))}}function Xa(t,e){return new Re((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?Wa(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(Qu(t)):t.access_token&&t.refresh_token?n(t):r(new N("internal-error")):r(new N("network-request-failed"))}),"POST",vr(e).toString(),t.g,t.m.get()):r(new N("internal-error"))}))}function $a(t,e,n,r,i,o,s){var a=ir(e+n);nr(a,"key",t.c),s&&nr(a,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&nr(a,c,i[c]);return new Re((function(e,n){Wa(t,a.toString(),(function(t){t?t.error?n(Qu(t,o||{})):e(t):n(new N("network-request-failed"))}),r,u?void 0:xr(ai(i)),t.a,t.v.get())}))}function Qa(t){if(t=t.email,"string"!==typeof t||!qr.test(t))throw new N("invalid-email")}function Ja(t){"email"in t&&Qa(t)}function Za(t,e){return Xu(t,_u,{identifier:e,continueUri:ri()?kr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}function tu(t){return Xu(t,Au,{}).then((function(t){return t.authorizedDomains||[]}))}function eu(t){if(!t[Ma]){if(t.mfaPendingCredential)throw new N("multi-factor-auth-required",null,bt(t));throw new N("internal-error")}}function nu(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new N("internal-error")}else{if(!t.sessionInfo)throw new N("missing-verification-id");if(!t.code)throw new N("missing-verification-code")}}La.prototype.s=function(t,e,n,r,i){var o=this;ja.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},La.prototype.Ab=function(){return Xu(this,Du,{})},La.prototype.Cb=function(t,e){return Xu(this,ju,{idToken:t,email:e})},La.prototype.Db=function(t,e){return Xu(this,Mu,{idToken:t,password:e})};var ru={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function iu(t,e){return Xu(t,Lu,e)}function ou(t,e){return Xu(t,Fu,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}function su(t){if(!t.phoneVerificationInfo)throw new N("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new N("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new N("missing-verification-code")}function au(t,e){return Xu(t,qu,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}function uu(t,e,n){return Xu(t,wu,{idToken:e,deleteProvider:n})}function cu(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new N("internal-error")}function lu(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(t=new dr(t.postBody),mr(t,"nonce")&&(e.nonce=t.get("nonce")))),e}function hu(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Cs(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Cs(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Cs(t)):t.errorMessage&&(e=$u(t.errorMessage)),e)throw e;eu(t)}function fu(t,e){return e.returnIdpCredential=!0,Xu(t,Uu,e)}function pu(t,e){return e.returnIdpCredential=!0,Xu(t,Vu,e)}function du(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Xu(t,Bu,e)}function gu(t){if(!t.oobCode)throw new N("invalid-action-code")}n=La.prototype,n.Eb=function(t,e){var n={idToken:t},r=[];return mt(ru,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),Xu(this,ju,n)},n.wb=function(t,e){return t={requestType:"PASSWORD_RESET",email:t},Et(t,e),Xu(this,ku,t)},n.xb=function(t,e){return t={requestType:"EMAIL_SIGNIN",email:t},Et(t,e),Xu(this,Cu,t)},n.vb=function(t,e){return t={requestType:"VERIFY_EMAIL",idToken:t},Et(t,e),Xu(this,Tu,t)},n.Fb=function(t,e,n){return t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},Et(t,n),Xu(this,Nu,t)},n.gb=function(t){return Xu(this,Wu,t)},n.ob=function(t,e){return Xu(this,Ru,{oobCode:t,newPassword:e})},n.Sa=function(t){return Xu(this,yu,{oobCode:t})},n.kb=function(t){return Xu(this,vu,{oobCode:t})};var vu={endpoint:"setAccountInfo",A:gu,Z:"email",B:!0},yu={endpoint:"resetPassword",A:gu,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new N("internal-error")},B:!0},mu={endpoint:"signupNewUser",A:function(t){if(Qa(t),!t.password)throw new N("weak-password")},G:eu,V:!0,B:!0},_u={endpoint:"createAuthUri",B:!0},bu={endpoint:"deleteAccount",O:["idToken"]},wu={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new N("internal-error")}},Eu={endpoint:"emailLinkSignin",O:["email","oobCode"],A:Qa,G:eu,V:!0,B:!0},xu={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:Qa,G:eu,V:!0},Iu={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:su,G:eu,B:!0,Na:!0},Ou={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:su,G:eu,B:!0,Na:!0},Su={endpoint:"getAccountInfo"},Cu={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new N("internal-error");Qa(t)},Z:"email",B:!0},Tu={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new N("internal-error")},Z:"email",B:!0},Nu={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new N("internal-error")},Z:"email",B:!0},ku={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new N("internal-error");Qa(t)},Z:"email",B:!0},Au={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},Pu={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new N("internal-error")}},Ru={endpoint:"resetPassword",A:gu,Z:"email",B:!0},Lu={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},ju={endpoint:"setAccountInfo",O:["idToken"],A:Ja,V:!0},Mu={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(Ja(t),!t.password)throw new N("weak-password")},G:eu,V:!0},Du={endpoint:"signupNewUser",G:eu,V:!0,B:!0},Fu={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new N("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new N("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new N("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new N("internal-error")},B:!0,Na:!0},qu={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new N("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new N("internal-error")},B:!0,Na:!0},Uu={endpoint:"verifyAssertion",A:cu,Za:lu,G:hu,V:!0,B:!0},Bu={endpoint:"verifyAssertion",A:cu,Za:lu,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new N("user-not-found");if(t.errorMessage)throw $u(t.errorMessage);eu(t)},V:!0,B:!0},Vu={endpoint:"verifyAssertion",A:function(t){if(cu(t),!t.idToken)throw new N("internal-error")},Za:lu,G:hu,V:!0},Gu={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new N("invalid-custom-token")},G:eu,V:!0,B:!0},zu={endpoint:"verifyPassword",A:function(t){if(Qa(t),!t.password)throw new N("wrong-password")},G:eu,V:!0,B:!0},Wu={endpoint:"verifyPhoneNumber",A:nu,G:eu,B:!0},Ku={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new N("internal-error");nu(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Cs(t);eu(t)}},Hu={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:nu,G:eu,B:!0},Yu={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ma]^!!t.refreshToken)throw new N("internal-error")},B:!0,Na:!0};function Xu(t,e,n){if(!Ci(n,e.O))return Be(new N("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return Ue(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&"undefined"===typeof n.tenantId&&(n.tenantId=t.b),$a(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)})).then((function(t){return r=t,e.Za?e.Za(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new N("internal-error");return r[e.Z]}))}function $u(t){return Qu({error:{errors:[{message:t}],code:400,message:t}})}function Qu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new N(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},Et(r,e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new N(r[i],e);return!e&&t&&(e=si(t)),new N("internal-error",e)}function Ju(t){this.b=t,this.a=null,this.sb=Zu(this)}function Zu(t){return sc().then((function(){return new Re((function(e,n){ti("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:ti("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),ic.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}function tc(t,e){return t.sb.then((function(){return new Re((function(n){t.a.send(e.type,e,n,ti("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}function ec(t,e){t.sb.then((function(){t.a.register("authEvent",e,ti("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}var nc=new It(Tt,"https://apis.google.com/js/api.js?onload=%{onload}"),rc=new fi(3e4,6e4),ic=new fi(5e3,15e3),oc=null;function sc(){return oc||(oc=new Re((function(t,e){function n(){hi(),ti("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){hi(),e(Error("Network Error"))},timeout:rc.get()})}if(ti("gapi.iframes.Iframe"))t();else if(ti("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();l[r]=function(){ti("gapi.load")?n():e(Error("Network Error"))},r=Pt(nc,{onload:r}),Ue(Sa(r)).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw oc=null,t})))}function ac(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?(t=ir(this.g.url),t=or(t.c,t.a,t.g,"/emulator/auth/iframe")):t=or("https",this.l,null,"/__/auth/iframe"),this.a=t,nr(this.a,"apiKey",this.h),nr(this.a,"appName",this.i),this.b=null,this.c=[]}function uc(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function cc(t){try{return e["default"].app(t).auth().Ga()}catch(n){return[]}}function lc(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function hc(t){var e=kr();return tu(t).then((function(t){t:{var n=ir(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=ir(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:Fr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Os(kr())}))}function fc(t){return t.m||(t.m=Ur().then((function(){if(!t.u){var e=t.c,n=t.i,r=cc(t.b),i=new ac(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=rt(r||[]),t.u=i.toString()}t.v=new Ju(t.u),gc(t)}))),t.m}function pc(t){return t.l||(t.C=t.c?Jr(t.c,cc(t.b)):null,t.l=new La(t.g,j(t.i),t.C),t.f&&Va(t.l,t.f)),t.l}function dc(t,e,n,r,i,o,s,a,u,c,l,h){return t=new uc(t,e,n,r,i,h),t.l=o,t.g=s,t.i=a,t.b=bt(u||null),t.f=c,t.zb(l).toString()}function gc(t){if(!t.v)throw Error("IfcHandler must be initialized!");ec(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=bs(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return n={},n.status=r?"ACK":"ERROR",Ue(n)}return n.status="ERROR",Ue(n)}))}function vc(t){var e={type:"webStorageSupport"};return fc(t).then((function(){return tc(t.v,e)})).then((function(t){if(t&&t.length&&"undefined"!==typeof t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))}function yc(t){if(this.a=t||e["default"].INTERNAL.reactNative&&e["default"].INTERNAL.reactNative.AsyncStorage,!this.a)throw new N("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function mc(t){this.b=t,this.a={},this.f=I(this.c,this)}ac.prototype.toString=function(){return this.f?nr(this.a,"v",this.f):yr(this.a.b,"v"),this.b?nr(this.a,"eid",this.b):yr(this.a.b,"eid"),this.c.length?nr(this.a,"fw",this.c.join(",")):yr(this.a.b,"fw"),this.a.toString()},uc.prototype.zb=function(t){return this.h=t,this},uc.prototype.toString=function(){if(this.v){var t=ir(this.v.url);t=or(t.c,t.a,t.g,"/emulator/auth/handler")}else t=or("https",this.u,null,"/__/auth/handler");if(nr(t,"apiKey",this.s),nr(t,"appName",this.c),nr(t,"authType",this.m),this.a.isOAuthProvider){var n=this.a;try{var r=e["default"].app(this.c).auth().la()}catch(u){r=null}for(var i in n.pb=r,nr(t,"providerId",this.a.providerId),r=this.a,n=ai(r.Jb),n)n[i]=n[i].toString();i=r.Qc,n=bt(n);for(var o=0;o<i.length;o++){var s=i[o];s in n&&delete n[s]}r.qb&&r.pb&&!n[r.qb]&&(n[r.qb]=r.pb),_t(n)||nr(t,"customParameters",si(n))}if("function"===typeof this.a.Rb&&(r=this.a.Rb(),r.length&&nr(t,"scopes",r.join(","))),this.l?nr(t,"redirectUrl",this.l):yr(t.b,"redirectUrl"),this.g?nr(t,"eventId",this.g):yr(t.b,"eventId"),this.i?nr(t,"v",this.i):yr(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!rr(t,a)&&nr(t,a,this.b[a]);return this.h?nr(t,"tid",this.h):yr(t.b,"tid"),this.f?nr(t,"eid",this.f):yr(t.b,"eid"),a=cc(this.c),a.length&&nr(t,"fw",a.join(",")),t.toString()},n=lc.prototype,n.Pb=function(t,e,n){var r=new N("popup-closed-by-user"),i=new N("web-storage-unsupported"),o=this,s=!1;return this.ma().then((function(){vc(o).then((function(n){n||(t&&jr(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return Dr(t)})).then((function(){if(!s)return Gn(n).then((function(){e(r)}))}))},n.Yb=function(){var t=Zr();return!oi(t)&&!li(t)},n.Ub=function(){return!1},n.Nb=function(t,e,n,r,i,o,s,a){if(!t)return Be(new N("popup-blocked"));if(s&&!oi())return this.ma().o((function(e){jr(t),i(e)})),r(),Ue();this.a||(this.a=hc(pc(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw jr(t),i(e),e}));return r(),e})).then((function(){if(ms(n),!s){var r=dc(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f);Ar(r,t)}})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},n.Ob=function(t,e,n,r){this.a||(this.a=hc(pc(this)));var i=this;return this.a.then((function(){ms(e);var o=dc(i.s,i.g,i.b,t,e,kr(),n,i.c,void 0,i.i,r,i.f);Ar(o)})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},n.ma=function(){var t=this;return fc(this).then((function(){return t.v.sb})).o((function(){throw t.a=null,new N("network-request-failed")}))},n.ac=function(){return!0},n.Ea=function(t){this.h.push(t)},n.Ta=function(t){et(this.h,(function(e){return e==t}))},n=yc.prototype,n.get=function(t){return Ue(this.a.getItem(t)).then((function(t){return t&&ui(t)}))},n.set=function(t,e){return Ue(this.a.setItem(t,si(e)))},n.U=function(t){return Ue(this.a.removeItem(t))},n.ca=function(){},n.ia=function(){};var _c,bc=[];function wc(){var t=zr()?self:null;if(H(bc,(function(n){n.b==t&&(e=n)})),!e){var e=new mc(t);bc.push(e)}return e}function Ec(t,e,n){_t(t.a)&&t.b.addEventListener("message",t.f),"undefined"===typeof t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function xc(t){this.a=t}function Ic(t){this.c=t,this.b=!1,this.a=[]}function Oc(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Be(Error("connection_unavailable"));var l=r?800:50,h="undefined"!==typeof MessageChannel?new MessageChannel:null;return new Re((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),l),o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),"undefined"!==typeof t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))},c={messageChannel:h,onMessage:o},t.a.push(c),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return Sc(t,c),e})).o((function(e){throw Sc(t,c),e}))}function Sc(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),et(t.a,(function(t){return t==e}))}}function Cc(){if(!Pc())throw new N("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=l.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;zr()&&self?(this.v=wc(),Ec(this.v,"keyChanged",(function(e,n){return Dc(t).then((function(e){return 0<e.length&&H(t.a,(function(t){t(e)})),{keyProcessed:Z(e,n.key)}}))})),Ec(this.v,"ping",(function(){return Ue(["keyChanged"])}))):mi().then((function(e){(t.h=e)&&(t.g=new Ic(new xc(e)),Oc(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&Z(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Tc(t){return new Re((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}function Nc(t){return new Re((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){r=r.target.result,r.objectStoreNames.contains("firebaseLocalStorage")?e(r):Tc(t).then((function(){return Nc(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function kc(t){return t.i||(t.i=Nc(t)),t.i}function Ac(t,e){function n(i,o){kc(t).then(e).then(i).o((function(e){if(!(3<++r))return kc(t).then((function(e){return e.close(),t.i=void 0,n(i,o)})).o((function(t){o(t)}));o(e)}))}var r=0;return new Re(n)}function Pc(){try{return!!l.indexedDB}catch(td){return!1}}function Rc(t){return t.objectStore("firebaseLocalStorage")}function Lc(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function jc(t){return new Re((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Mc(t,e){return t.g&&t.h&&yi()===t.h?Oc(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Ue()}function Dc(t){return kc(t).then((function(t){var e=Rc(Lc(t,!1));return e.getAll?jc(e.getAll()):new Re((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e["continue"]()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=Pr(t.c,n),t.c=n}return r}))}function Fc(t){function e(){t.f=setTimeout((function(){t.l=Dc(t).then((function(e){0<e.length&&H(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}qc(t),e()}function qc(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Uc(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ue().then((function(){if(Pc()){var t=ci(),r="__sak"+t;return _c||(_c=new Cc),n=_c,n.set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){H(e.a,(function(e){e(t)}))})),t}))}function Bc(){this.a={},this.type="inMemory"}function Vc(){if(!zc()){if("Node"==Wr())throw new N("internal-error","The LocalStorage compatibility library was not found.");throw new N("web-storage-unsupported")}this.a=Gc()||e["default"].INTERNAL.node.localStorage,this.type="localStorage"}function Gc(){try{var t=l.localStorage,e=ci();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function zc(){var t="Node"==Wr();if(t=Gc()||t&&e["default"].INTERNAL.node&&e["default"].INTERNAL.node.localStorage,!t)return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(n){return!1}}function Wc(){this.type="nullStorage"}function Kc(){if(!Yc()){if("Node"==Wr())throw new N("internal-error","The SessionStorage compatibility library was not found.");throw new N("web-storage-unsupported")}this.a=Hc()||e["default"].INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Hc(){try{var t=l.sessionStorage,e=ci();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Yc(){var t="Node"==Wr();if(t=Hc()||t&&e["default"].INTERNAL.node&&e["default"].INTERNAL.node.sessionStorage,!t)return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(n){return!1}}function Xc(){var t={};t.Browser=Jc,t.Node=Zc,t.ReactNative=tl,t.Worker=el,this.a=t[Wr()]}mc.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];H(r,(function(e){i.push(Ue().then((function(){return e(t.origin,t.data.data)})))})),ze(i).then((function(r){var i=[];H(r,(function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),H(i,(function(t){for(var e in t)"undefined"===typeof t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},xc.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Ic.prototype.close=function(){for(;0<this.a.length;)Sc(this,this.a[0]);this.b=!0},n=Cc.prototype,n.set=function(t,e){var n=this,r=!1;return Ac(this,(function(e){return e=Rc(Lc(e,!0)),jc(e.get(t))})).then((function(i){return Ac(n,(function(o){if(o=Rc(Lc(o,!0)),i)return i.value=e,jc(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,jc(o.add(s))}))})).then((function(){return n.c[t]=e,Mc(n,t)})).oa((function(){r&&n.b--}))},n.get=function(t){return Ac(this,(function(e){return jc(Rc(Lc(e,!1)).get(t))})).then((function(t){return t&&t.value}))},n.U=function(t){var e=this,n=!1;return Ac(this,(function(r){return n=!0,e.b++,jc(Rc(Lc(r,!0))["delete"](t))})).then((function(){return delete e.c[t],Mc(e,t)})).oa((function(){n&&e.b--}))},n.ca=function(t){0==this.a.length&&Fc(this),this.a.push(t)},n.ia=function(t){et(this.a,(function(e){return e==t})),0==this.a.length&&qc(this)},n=Uc.prototype,n.get=function(t){return this.b.then((function(e){return e.get(t)}))},n.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},n.U=function(t){return this.b.then((function(e){return e.U(t)}))},n.ca=function(t){this.a.push(t)},n.ia=function(t){et(this.a,(function(e){return e==t}))},n=Bc.prototype,n.get=function(t){return Ue(this.a[t])},n.set=function(t,e){return this.a[t]=e,Ue()},n.U=function(t){return delete this.a[t],Ue()},n.ca=function(){},n.ia=function(){},n=Vc.prototype,n.get=function(t){var e=this;return Ue().then((function(){var n=e.a.getItem(t);return ui(n)}))},n.set=function(t,e){var n=this;return Ue().then((function(){var r=si(e);null===r?n.U(t):n.a.setItem(t,r)}))},n.U=function(t){var e=this;return Ue().then((function(){e.a.removeItem(t)}))},n.ca=function(t){l.window&&On(l.window,"storage",t)},n.ia=function(t){l.window&&Nn(l.window,"storage",t)},n=Wc.prototype,n.get=function(){return Ue(null)},n.set=function(){return Ue()},n.U=function(){return Ue()},n.ca=function(){},n.ia=function(){},n=Kc.prototype,n.get=function(t){var e=this;return Ue().then((function(){var n=e.a.getItem(t);return ui(n)}))},n.set=function(t,e){var n=this;return Ue().then((function(){var r=si(e);null===r?n.U(t):n.a.setItem(t,r)}))},n.U=function(t){var e=this;return Ue().then((function(){e.a.removeItem(t)}))},n.ca=function(){},n.ia=function(){};var $c,Qc,Jc={F:Vc,cb:Kc},Zc={F:Vc,cb:Kc},tl={F:yc,cb:Wc},el={F:Vc,cb:Wc},nl={rd:"local",NONE:"none",td:"session"};function rl(t){var e=new N("invalid-persistence-type"),n=new N("unsupported-persistence-type");t:{for(r in nl)if(nl[r]==t){var r=!0;break t}r=!1}if(!r||"string"!==typeof t)throw e;switch(Wr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Pc()&&"none"!==t)throw n;break;default:if(!ei()&&"none"!==t)throw n}}function il(){var t=!(li(Zr())||!Gr()),e=oi(),n=ei();this.m=t,this.h=e,this.l=n,this.a={},$c||($c=new Xc),t=$c;try{this.g=!Nr()&&vi()||!l.indexedDB?new t.a.F:new Uc(zr()?new Bc:new t.a.F)}catch(r){this.g=new Bc,this.h=!0}try{this.i=new t.a.cb}catch(r){this.i=new Bc}this.v=new Bc,this.f=I(this.Zb,this),this.b={}}function ol(){return Qc||(Qc=new il),Qc}function sl(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function al(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ul(t,e,n){var r=al(e,n),i=sl(t,e.F);return t.get(e,n).then((function(o){var s=null;try{s=ui(l.localStorage.getItem(r))}catch(a){}if(s&&!o)return l.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&l.localStorage.removeItem(r)}))}function cl(t,e,n){return n=al(e,n),"local"==e.F&&(t.b[n]=null),sl(t,e.F).U(n)}function ll(t){hl(t),t.c=setInterval((function(){for(var e in t.a){var n=l.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new dn({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}}),1e3)}function hl(t){t.c&&(clearInterval(t.c),t.c=null)}function fl(t){this.a=t,this.b=ol()}n=il.prototype,n.get=function(t,e){return sl(this,t.F).get(al(t,e))},n.set=function(t,e,n){var r=al(t,n),i=this,o=sl(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},n.addListener=function(t,e,n){t=al(t,e),this.l&&(this.b[t]=l.localStorage.getItem(t)),_t(this.a)&&(sl(this,"local").ca(this.f),this.h||(Nr()||!vi())&&l.indexedDB||!this.l||ll(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},n.removeListener=function(t,e,n){t=al(t,e),this.a[t]&&(et(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),_t(this.a)&&(sl(this,"local").ia(this.f),hl(this))},n.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if("undefined"!==typeof t.a.a?sl(this,"local").ia(this.f):hl(this),this.m)if(n=l.localStorage.getItem(e),r=t.a.newValue,r!==n)null!==r?l.localStorage.setItem(e,r):l.localStorage.removeItem(e);else if(this.b[e]===r&&"undefined"===typeof t.a.a)return;var o=this;n=function(){"undefined"===typeof t.a.a&&o.b[e]===l.localStorage.getItem(e)||(o.b[e]=l.localStorage.getItem(e),o.nb(e))},re&&ve&&10==ve&&l.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else H(t,I(this.nb,this))},n.nb=function(t){this.a[t]&&H(this.a[t],(function(t){t()}))};var pl,dl={name:"authEvent",F:"local"};function gl(t){return t.b.get(dl,t.a).then((function(t){return bs(t)}))}function vl(){this.a=ol()}function yl(){this.b=-1}function ml(t,e){this.b=_l,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===pl&&(pl=l.Int32Array?new Int32Array(Sl):Sl),this.reset()}C(ml,yl);for(var _l=64,bl=_l-1,wl=[],El=0;El<bl;El++)wl[El]=0;var xl=nt(128,wl);function Il(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=c&l^~c&h,o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0,s=s+(0|pl[e])|0,s=o+(s+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function Ol(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"===typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(Il(t),i=0);else{if(!v(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(Il(t),i=0)}}t.c=i,t.g+=n}ml.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):rt(this.h)};var Sl=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Cl(){ml.call(this,8,Tl)}C(Cl,ml);var Tl=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Nl(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new vl,this.g=new fl(this.h),this.f=null,this.b=[],this.a=this.c=null}function kl(t){return new N("invalid-cordova-configuration",t)}function Al(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}function Pl(t){var e=new Cl;Ol(e,t),t=[];var n=8*e.g;56>e.c?Ol(e,xl,56-e.c):Ol(e,xl,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Il(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return yo(t)}function Rl(t,e,n,r,i){var o=Al(),s=new _s(e,r,null,o,new N("no-auth-event"),null,i),a=ti("BuildInfo.packageName",l);if("string"!==typeof a)throw new N("invalid-cordova-configuration");var u=ti("BuildInfo.displayName",l),c={};if(Zr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=a;else{if(!Zr().toLowerCase().match(/android/))return Be(new N("operation-not-supported-in-this-environment"));c.apn=a}u&&(c.appDisplayName=u),o=Pl(o),c.sessionId=o;var h=dc(t.v,t.i,t.l,e,n,null,r,t.m,c,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(dl,s.w(),e)})).then((function(){var e=ti("cordova.plugins.browsertab.isAvailable",l);if("function"!==typeof e)throw new N("invalid-cordova-configuration");var n=null;e((function(e){if(e){if(n=ti("cordova.plugins.browsertab.openUrl",l),"function"!==typeof n)throw new N("invalid-cordova-configuration");n(h)}else{if(n=ti("cordova.InAppBrowser.open",l),"function"!==typeof n)throw new N("invalid-cordova-configuration");e=Zr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}function Ll(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function jl(t){return t.f||(t.f=t.ma().then((function(){return new Re((function(e){function n(r){return e(r),t.Ta(n),!1}t.Ea(n),Dl(t)}))}))),t.f}function Ml(t){var e=null;return gl(t.g).then((function(n){return e=n,n=t.g,cl(n.b,dl,n.a)})).then((function(){return e}))}function Dl(t){function e(e){r=!0,i&&i.cancel(),Ml(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;i=Fo(e.url),-1!=i.indexOf("/__/auth/callback")&&(o=ir(i),o=ui(rr(o,"firebaseError")||null),o=(o="object"===typeof o?k(o):null)?new _s(r.c,r.b,null,null,o,null,r.T()):new _s(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Ll(t,i)}))}var n=new _s("unknown",null,null,null,new N("no-auth-event")),r=!1,i=Gn(500).then((function(){return Ml(t).then((function(){r||Ll(t,n)}))})),o=l.handleOpenURL;l.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(ti("BuildInfo.packageName",l).toLowerCase()+"://")&&e({url:t}),"function"===typeof o)try{o(t)}catch(n){console.error(n)}},xs||(xs=new ws),Is(e)}function Fl(t){this.a=t,this.b=ol()}n=Nl.prototype,n.ma=function(){return this.Ia?this.Ia:this.Ia=Br().then((function(){if("function"!==typeof ti("universalLinks.subscribe",l))throw kl("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof ti("BuildInfo.packageName",l))throw kl("cordova-plugin-buildinfo is not installed");if("function"!==typeof ti("cordova.plugins.browsertab.openUrl",l))throw kl("cordova-plugin-browsertab is not installed");if("function"!==typeof ti("cordova.InAppBrowser.open",l))throw kl("cordova-plugin-inappbrowser is not installed")}),(function(){throw new N("cordova-not-ready")}))},n.Pb=function(t,e){return e(new N("operation-not-supported-in-this-environment")),Ue()},n.Nb=function(){return Be(new N("operation-not-supported-in-this-environment"))},n.ac=function(){return!1},n.Yb=function(){return!0},n.Ub=function(){return!0},n.Ob=function(t,e,n,r){if(this.c)return Be(new N("redirect-operation-pending"));var i=this,o=l.document,s=null,a=null,u=null,c=null;return this.c=Ue().then((function(){return ms(e),jl(i)})).then((function(){return Rl(i,t,e,n,r)})).then((function(){return new Re((function(t,e){a=function(){var e=ti("cordova.plugins.browsertab.close",l);return t(),"function"===typeof e&&e(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(a),u=function(){s||(s=Gn(2e3).then((function(){e(new N("redirect-cancelled-by-user"))})))},c=function(){pi()&&u()},o.addEventListener("resume",u,!1),Zr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)})).o((function(t){return Ml(i).then((function(){throw t}))}))})).oa((function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),a&&i.Ta(a),i.c=null}))},n.Ea=function(t){this.b.push(t),jl(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new _s("unknown",null,null,null,new N("no-auth-event")),t(e))}))},n.Ta=function(t){et(this.b,(function(e){return e==t}))};var ql={name:"pendingRedirect",F:"session"};function Ul(t){return t.b.set(ql,"pending",t.a)}function Bl(t){return cl(t.b,ql,t.a)}function Vl(t){return t.b.get(ql,t.a).then((function(t){return"pending"==t}))}function Gl(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=I(this.s,this),this.b=new ih,this.C=new fh,this.g=new Fl(nh(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=zl(this.D,this.v,this.m,A,this.J)}function zl(t,n,r,i,o){var s=e["default"].SDK_VERSION||null;return Vr()?new Nl(t,n,r,s,i,o):new lc(t,n,r,s,i,o)}function Wl(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Kl(t){t.a.Yb()&&Wl(t).o((function(e){var n=new _s("unknown",null,null,null,new N("operation-not-supported-in-this-environment"));Jl(e)&&t.s(n)})),t.a.Ub()||oh(t.b)}function Hl(t,e){Z(t.h,e)||t.h.push(e),t.f||Vl(t.g).then((function(e){e?Bl(t.g).then((function(){Wl(t).o((function(e){var n=new _s("unknown",null,null,null,new N("operation-not-supported-in-this-environment"));Jl(e)&&t.s(n)}))})):Kl(t)})).o((function(){Kl(t)}))}function Yl(t,e){et(t.h,(function(t){return t==e}))}Gl.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=zl(this.D,this.v,this.m,null,this.J),this.i={}},Gl.prototype.s=function(t){if(!t)throw new N("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return oh(this.b),e};var Xl=new fi(2e3,1e4),$l=new fi(3e4,6e4);function Ql(t,e,n,r,i,o,s){return t.a.Nb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function Jl(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Zl(t,e,n,r,i){var o;return Ul(t.g).then((function(){return t.a.Ob(e,n,r,i).o((function(e){if(Jl(e))throw new N("operation-not-supported-in-this-environment");return o=e,Bl(t.g).then((function(){throw o}))})).then((function(){return t.a.ac()?new Re((function(){})):Bl(t.g).then((function(){return t.ra()})).then((function(){})).o((function(){}))}))}))}function th(t,e,n,r,i){return t.a.Pb(r,(function(t){e.na(n,null,t,i)}),Xl.get())}Gl.prototype.ra=function(){return this.b.ra()};var eh={};function nh(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function rh(t,e,n,r){var i=nh(e,n,r);return eh[i]||(eh[i]=new Gl(t,e,n,r)),eh[i]}function ih(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function oh(t){t.g||(t.g=!0,lh(t,!1,null,null))}function sh(t){t.g&&!t.i&&lh(t,!1,null,null)}function ah(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){lh(t,a,e,null)})).o((function(e){lh(t,a,null,e)}))}function uh(t,e){if(t.b=function(){return Be(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}function ch(t,e){if(t.b=function(){return Ue(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function lh(t,e,n,r){e?r?uh(t,r):ch(t,n):ch(t,{user:null}),t.f=[],t.c=[]}function hh(t){var e=new N("timeout");t.a&&t.a.cancel(),t.a=Gn($l.get()).then((function(){t.b||(t.g=!0,lh(t,!0,null,e))}))}function fh(){}function ph(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}function dh(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function gh(t,e){this.a=e,xi(this,"verificationId",t)}function vh(t,e,n,r){return new gs(t).gb(e,n).then((function(t){return new gh(t,r)}))}function yh(t){var e=Io(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new N("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Ii(this,{token:t,expirationTime:gi(1e3*e.exp),authTime:gi(1e3*e.auth_time),issuedAtTime:gi(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function mh(t,e,n){var r=e&&e[bh];if(!r)throw new N("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=bt(e),this.g=n,this.c=new qo(null,r),this.b=[];var i=this;H(e[_h]||[],(function(t){(t=ki(t))&&i.b.push(t)})),xi(this,"auth",this.a),xi(this,"session",this.c),xi(this,"hints",this.b)}ih.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},ih.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(lh(this,!0,null,t.a),Ue()):e.Fa(n,r)?ah(this,t,e):Be(new N("invalid-auth-event")):(lh(this,!1,null,null),Ue())}else Be(new N("invalid-auth-event"))},ih.prototype.ra=function(){var t=this;return new Re((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),hh(t))}))},fh.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Ue()):e.Fa(n,r)?ph(t,e):Be(new N("invalid-auth-event"))}else Be(new N("invalid-auth-event"))},gh.prototype.confirm=function(t){return t=vs(this.verificationId,t),this.a(t)};var _h="mfaInfo",bh="mfaPendingCredential";function wh(t,e,n,r){N.call(this,"multi-factor-auth-required",r,e),this.b=new mh(t,e,n),xi(this,"resolver",this.b)}function Eh(t,e,n){if(t&&m(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new wh(e,t.serverResponse,n,t.message)}catch(r){}return null}function xh(){}function Ih(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},"undefined"!==typeof r&&(n.displayName=r),Et(n,{phoneVerificationInfo:ds(t.a)}),Xu(e,Iu,n)}))}function Oh(t,e,n){return n.Ha().then((function(n){return n={mfaPendingCredential:n},Et(n,{phoneVerificationInfo:ds(t.a)}),Xu(e,Ou,n)}))}function Sh(t){xi(this,"factorId",t.fa),this.a=t}function Ch(t){if(Sh.call(this,t),this.a.fa!=gs.PROVIDER_ID)throw new N("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Th(t,e){for(var n in pn.call(this,t),e)this[n]=e[n]}function Nh(t,e){this.a=t,this.b=[],this.c=I(this.yc,this),On(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&H(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[Ri]=t.uid),t.displayName&&(r[Ai]=t.displayName),t.enrollmentTime&&(r[Pi]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[Li]=t.phoneNumber);try{e=new ji(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),Ah(this,n)}function kh(t){var e=[];return H(t.mfaInfo||[],(function(t){(t=ki(t))&&e.push(t)})),e}function Ah(t,e){t.b=e,xi(t,"enrolledFactors",e)}function Ph(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Rh(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function Lh(t,e){t.stop(),t.b=Gn(Rh(t,e)).then((function(){return di()})).then((function(){return t.h()})).then((function(){Lh(t,!0)})).o((function(e){t.i(e)&&Lh(t,!1)}))}function jh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function Mh(t,e){"undefined"===typeof e&&(t.b?(e=t.b,e=e.a-e.g):e=0),t.c=Date.now()+1e3*e}function Dh(t,e){t.b=xo(e[Ma]||""),t.a=e.refreshToken,e=e.expiresIn,Mh(t,"undefined"!==typeof e?Number(e):void 0)}function Fh(t,e){t.b=e.b,t.a=e.a,t.c=e.c}function qh(t,e){return Xa(t.f,e).then((function(e){return t.b=xo(e.access_token),t.a=e.refresh_token,Mh(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function Uh(t,e){this.a=t||null,this.b=e||null,Ii(this,{lastSignInTime:gi(e||null),creationTime:gi(t||null)})}function Bh(t){return new Uh(t.a,t.b)}function Vh(t,e,n,r,i,o){Ii(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function Gh(t,n,r){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var i=e["default"].SDK_VERSION?Jr(e["default"].SDK_VERSION):null;this.a=new La(this.l,j(A),i),(this.u=t.emulatorConfig||null)&&Va(this.a,this.u),this.h=new jh(this.a),Zh(this,n[Ma]),Dh(this.h,n),xi(this,"refreshToken",this.h.a),rf(this,r||{}),Fn.call(this),this.P=!1,this.s&&ni()&&(this.b=rh(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=$h(this),this.ba=I(this.ib,this);var o=this;this.za=null,this.Pa=function(t){o.xa(t.h)},this.qa=null,this.Ba=function(t){zh(o,t.c)},this.$=null,this.aa=[],this.Oa=function(t){Hh(o,t.f)},this.ja=null,this.S=new Nh(this,r),xi(this,"multiFactor",this.S)}function zh(t,e){t.u=e,Va(t.a,e),t.b&&(e=t.b,t.b=rh(t.s,t.l,t.m,t.u),t.P&&(Yl(e,t),Hl(t.b,t)))}function Wh(t,e){t.qa&&Nn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&On(e,"languageCodeChanged",t.Pa)}function Kh(t,e){t.$&&Nn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&On(e,"emulatorConfigChanged",t.Ba)}function Hh(t,n){t.aa=n,za(t.a,e["default"].SDK_VERSION?Jr(e["default"].SDK_VERSION,t.aa):null)}function Yh(t,e){t.ja&&Nn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&On(e,"frameworkChanged",t.Oa)}function Xh(t){try{return e["default"].app(t.m).auth()}catch(n){throw new N("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function $h(t){return new Ph((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0}))}function Qh(t){t.J||t.D.b||(t.D.start(),Nn(t,"tokenChanged",t.ba),On(t,"tokenChanged",t.ba))}function Jh(t){Nn(t,"tokenChanged",t.ba),t.D.stop()}function Zh(t,e){t.Aa=e,xi(t,"_lat",e)}function tf(t,e){et(t.W,(function(t){return t==e}))}function ef(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return ze(e).then((function(){return t}))}function nf(t){t.b&&!t.P&&(t.P=!0,Hl(t.b,t))}function rf(t,e){Ii(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Uh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function of(){}function sf(t){return Ue().then((function(){if(t.J)throw new N("app-deleted")}))}function af(t){return $(t.providerData,(function(t){return t.providerId}))}function uf(t,e){e&&(cf(t,e.providerId),t.providerData.push(e))}function cf(t,e){et(t.providerData,(function(t){return t.providerId==e}))}function lf(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&xi(t,e,n)}function hf(t,e){t!=e&&(Ii(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?xi(t,"metadata",Bh(e.metadata)):xi(t,"metadata",new Uh),H(e.providerData,(function(e){uf(t,e)})),Fh(t.h,e.h),xi(t,"refreshToken",t.h.a),Ah(t.S,e.S.b))}function ff(t){return t.I().then((function(e){var n=t.isAnonymous;return df(t,e).then((function(){return n||lf(t,"isAnonymous",!1),e}))}))}function pf(t,e){e[Ma]&&t.Aa!=e[Ma]&&(Dh(t.h,e),t.dispatchEvent(new Th("tokenChanged")),Zh(t,e[Ma]),lf(t,"refreshToken",t.h.a))}function df(t,e){return Xu(t.a,Su,{idToken:e}).then(I(t.Kc,t))}function gf(t){return(t=t.providerUserInfo)&&t.length?$(t,(function(t){return new Vh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}function vf(t,e){return ff(t).then((function(){if(Z(af(t),e))return ef(t).then((function(){throw new N("provider-already-linked")}))}))}function yf(t,e,n){var r=ys(e);return e=No(e),Oi({user:t,credential:r,additionalUserInfo:e,operationType:n})}function mf(t,e){return pf(t,e),t.reload().then((function(){return t}))}function _f(t,n,r,i,o){if(!ni())return Be(new N("operation-not-supported-in-this-environment"));if(t.i&&!o)return Be(t.i);var s=To(r.providerId),a=ci(t.uid+":::"),u=null;(!oi()||Gr())&&t.s&&r.isOAuthProvider&&(u=dc(t.s,t.l,t.m,n,r,null,a,e["default"].SDK_VERSION||null,null,null,t.tenantId,t.u));var c=Mr(u,s&&s.va,s&&s.ua);return i=i().then((function(){if(wf(t),!o)return t.I().then((function(){}))})).then((function(){return Ql(t.b,c,n,r,a,!!u,t.tenantId)})).then((function(){return new Re((function(e,r){t.na(n,null,new N("cancelled-popup-request"),t.g||null),t.f=e,t.C=r,t.g=a,t.c=th(t.b,t,n,c,a)}))})).then((function(t){return c&&jr(c),t?Oi(t):null})).o((function(t){throw c&&jr(c),t})),Ef(t,i,o)}function bf(t,e,n,r,i){if(!ni())return Be(new N("operation-not-supported-in-this-environment"));if(t.i&&!i)return Be(t.i);var o=null,s=ci(t.uid+":::");return r=r().then((function(){if(wf(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,ef(t)})).then((function(e){return t.ha&&(e=t.ha,e=e.b.set(Tf,t.w(),e.a)),e})).then((function(){return Zl(t.b,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ha)return Nf(t.ha);throw o})).then((function(){if(o)throw o})),Ef(t,r,i)}function wf(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new N("internal-error");throw new N("auth-domain-config-required")}}function Ef(t,e,n){var r=xf(t,e,n);return t.N.push(r),r.oa((function(){tt(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Eh(e.w(),Xh(t),I(t.jc,t))),n||e}))}function xf(t,e,n){return t.i&&!n?(e.cancel(),Be(t.i)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new Th("userInvalidated")),t.i=e),e}))}function If(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ma]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new Gh(e,n,t);return t.providerData&&H(t.providerData,(function(t){t&&uf(i,Oi(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Of(t,e,n,r){var i=new Gh(t,e);return n&&(i.ha=n),r&&Hh(i,r),i.reload().then((function(){return i}))}function Sf(t,e,n,r){var i=t.h,o={};return o[Ma]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new Gh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Hh(e,r),hf(e,t),e}function Cf(t){this.a=t,this.b=ol()}mh.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then((function(t){var n=bt(e.f);return delete n[_h],delete n[bh],Et(n,t),e.g(n)}))},C(wh,N),xh.prototype.tb=function(t,e,n){return e.type==Uo?Ih(this,t,e,n):Oh(this,t,e)},C(Sh,xh),C(Ch,Sh),C(Th,pn),n=Nh.prototype,n.yc=function(t){Ah(this,kh(t.hd))},n.Sb=function(){return this.a.I().then((function(t){return new qo(t,null)}))},n.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then((function(n){return t.tb(r,n,e)})).then((function(t){return pf(n.a,t),n.a.reload()}))},n.bd=function(t){var e=this,n="string"===typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return Xu(r,Yu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=X(e.b,(function(t){return t.uid!=n}));return Ah(e,r),pf(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},n.w=function(){return{multiFactor:{enrolledFactors:$(this.b,(function(t){return t.w()}))}}},Ph.prototype.start=function(){this.a=this.c,Lh(this,!0)},Ph.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},jh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},jh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Be(new N("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?qh(this,{grant_type:"refresh_token",refresh_token:this.a}):Ue(null):Ue({accessToken:this.b.toString(),refreshToken:this.a})},Uh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},C(Gh,Fn),Gh.prototype.xa=function(t){this.za=t,Ba(this.a,t)},Gh.prototype.la=function(){return this.za},Gh.prototype.Ga=function(){return rt(this.aa)},Gh.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},xi(Gh.prototype,"providerId","firebase"),n=Gh.prototype,n.reload=function(){var t=this;return Ef(this,sf(this).then((function(){return ff(t).then((function(){return ef(t)})).then(of)})))},n.oc=function(t){return this.I(t).then((function(t){return new yh(t)}))},n.I=function(t){var e=this;return Ef(this,sf(this).then((function(){return e.h.getToken(t)})).then((function(t){if(!t)throw new N("internal-error");return t.accessToken!=e.Aa&&(Zh(e,t.accessToken),e.dispatchEvent(new Th("tokenChanged"))),lf(e,"refreshToken",t.refreshToken),t.accessToken})))},n.Kc=function(t){if(t=t.users,!t||!t.length)throw new N("internal-error");t=t[0],rf(this,{uid:t.localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=gf(t),n=0;n<e.length;n++)uf(this,e[n]);lf(this,"isAnonymous",!(this.email&&t.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new Th("userReloaded",{hd:t}))},n.Lc=function(t){return wi("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},n.ub=function(t){var e=this,n=null;return Ef(this,t.c(this.a,this.uid).then((function(t){return pf(e,t),n=yf(e,t,"reauthenticate"),e.i=null,e.reload()})).then((function(){return n})),!0)},n.Cc=function(t){return wi("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},n.rb=function(t){var e=this,n=null;return Ef(this,vf(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=yf(e,t,"link"),mf(e,t)})).then((function(){return n})))},n.Dc=function(t,e){var n=this;return Ef(this,vf(this,"phone").then((function(){return vh(Xh(n),t,e,I(n.rb,n))})))},n.Mc=function(t,e){var n=this;return Ef(this,Ue().then((function(){return vh(Xh(n),t,e,I(n.ub,n))})),!0)},n.Cb=function(t){var e=this;return Ef(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return pf(e,t),e.reload()})))},n.ed=function(t){var e=this;return Ef(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return pf(e,t),e.reload()})))},n.Db=function(t){var e=this;return Ef(this,this.I().then((function(n){return e.a.Db(n,t)})).then((function(t){return pf(e,t),e.reload()})))},n.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return sf(this);var e=this;return Ef(this,this.I().then((function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return pf(e,t),lf(e,"displayName",t.displayName||null),lf(e,"photoURL",t.photoUrl||null),H(e.providerData,(function(t){"password"===t.providerId&&(xi(t,"displayName",e.displayName),xi(t,"photoURL",e.photoURL))})),ef(e)})).then(of))},n.cd=function(t){var e=this;return Ef(this,ff(this).then((function(n){return Z(af(e),t)?uu(e.a,n,[t]).then((function(t){var n={};return H(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),H(af(e),(function(t){n[t]||cf(e,t)})),n[gs.PROVIDER_ID]||xi(e,"phoneNumber",null),ef(e)})):ef(e).then((function(){throw new N("no-such-provider")}))})))},n.delete=function(){var t=this;return Ef(this,this.I().then((function(e){return Xu(t.a,bu,{idToken:e})})).then((function(){t.dispatchEvent(new Th("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");Wh(t,null),Kh(t,null),Yh(t,null),t.N=[],t.J=!0,Jh(t),xi(t,"refreshToken",null),t.b&&Yl(t.b,t)}))},n.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},n.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},n.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?I(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?I(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?I(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?I(this.Mb,this):null},n.Ec=function(t){var e=this;return _f(this,"linkViaPopup",t,(function(){return vf(e,t.providerId).then((function(){return ef(e)}))}),!1)},n.Nc=function(t){return _f(this,"reauthViaPopup",t,(function(){return Ue()}),!0)},n.Fc=function(t){var e=this;return bf(this,"linkViaRedirect",t,(function(){return vf(e,t.providerId)}),!1)},n.Oc=function(t){return bf(this,"reauthViaRedirect",t,(function(){return Ue()}),!0)},n.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return n=this.I().then((function(n){return pu(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=yf(i,t,"link"),mf(i,t)})).then((function(){return o})),Ef(this,n)},n.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null,s=Ue().then((function(){return Go(du(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=yf(i,t,"reauthenticate"),pf(i,t),i.i=null,i.reload()})).then((function(){return o}));return Ef(this,s,!0)},n.vb=function(t){var e=this,n=null;return Ef(this,this.I().then((function(e){return n=e,"undefined"===typeof t||_t(t)?{}:vo(new oo(t))})).then((function(t){return e.a.vb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},n.Fb=function(t,e){var n=this,r=null;return Ef(this,this.I().then((function(t){return r=t,"undefined"===typeof e||_t(e)?{}:vo(new oo(e))})).then((function(e){return n.a.Fb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},n.jc=function(t){var e=null,n=this;return t=Go(Ue(t),n.uid).then((function(t){return e=yf(n,t,"reauthenticate"),pf(n,t),n.i=null,n.reload()})).then((function(){return e})),Ef(this,t,!0)},n.toJSON=function(){return this.w()},n.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&Et(t,this.metadata.w()),H(this.providerData,(function(e){t.providerData.push(Si(e))})),Et(t,this.S.w()),t};var Tf={name:"redirectUser",F:"session"};function Nf(t){return cl(t.b,Tf,t.a)}function kf(t,e){return t.b.get(Tf,t.a).then((function(t){return t&&e&&(t.authDomain=e),If(t||{})}))}function Af(t){this.a=t,this.b=ol(),this.c=null,this.f=Rf(this),this.b.addListener(jf("local"),this.a,I(this.g,this))}function Pf(t,e){var n,r=[];for(n in nl)nl[n]!==e&&r.push(cl(t.b,jf(nl[n]),t.a));return r.push(cl(t.b,Lf,t.a)),Ge(r)}function Rf(t){var e=jf("local"),n=jf("session"),r=jf("none");return ul(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Lf,t.a).then((function(t){return t?jf(t):e}))}))}))})).then((function(e){return t.c=e,Pf(t,e.F)})).o((function(){t.c||(t.c=e)}))}Af.prototype.g=function(){var t=this,e=jf("local");Uf(this,(function(){return Ue().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Pf(t,"local").then((function(){t.c=e}))}))}))};var Lf={name:"persistence",F:"session"};function jf(t){return{name:"authUser",F:t}}function Mf(t){return Uf(t,(function(){return t.b.set(Lf,t.c.F,t.a)}))}function Df(t,e){return Uf(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function Ff(t){return Uf(t,(function(){return cl(t.b,t.c,t.a)}))}function qf(t,e,n){return Uf(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),If(t||{})}))}))}function Uf(t,e){return t.f=t.f.then(e,e),t.f}function Bf(t){if(this.l=!1,xi(this,"settings",new dh),xi(this,"app",t),!np(this).options||!np(this).options.apiKey)throw new N("invalid-api-key");t=e["default"].SDK_VERSION?Jr(e["default"].SDK_VERSION):null,this.a=new La(np(this).options&&np(this).options.apiKey,j(A),t),this.P=[],this.s=[],this.N=[],this.Pa=e["default"].INTERNAL.createSubscribe(I(this.zc,this)),this.W=void 0,this.ib=e["default"].INTERNAL.createSubscribe(I(this.Ac,this)),Qf(this,null),this.i=new Af(np(this).options.apiKey+":"+np(this).name),this.D=new Cf(np(this).options.apiKey+":"+np(this).name),this.$=ap(this,Zf(this)),this.h=ap(this,tp(this)),this.ba=!1,this.ja=I(this.Zc,this),this.Ba=I(this.da,this),this.qa=I(this.mc,this),this.za=I(this.wc,this),this.Aa=I(this.xc,this),this.b=null,Yf(this),this.INTERNAL={},this.INTERNAL["delete"]=I(this.delete,this),this.INTERNAL.logFramework=I(this.Gc,this),this.u=0,Fn.call(this),Kf(this),this.J=[],this.R=null}function Vf(t){pn.call(this,"languageCodeChanged"),this.h=t}function Gf(t){pn.call(this,"emulatorConfigChanged"),this.c=t}function zf(t){pn.call(this,"frameworkChanged"),this.f=t}function Wf(t){"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&!t&&Ur().then((function(){var t=l.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),l.document.body.appendChild(t)}))}function Kf(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=ir(this.R.url);t=Oi({protocol:t.c,host:t.a,port:t.g,options:Oi({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}function Hf(t){return t.Oa||Be(new N("auth-domain-config-required"))}function Yf(t){var e=np(t).options.authDomain,n=np(t).options.apiKey;e&&ni()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=rh(e,n,np(t).name,t.R),Hl(t.b,t),rp(t)&&nf(rp(t)),t.m){nf(t.m);var r=t.m;r.xa(t.la()),Wh(r,t),r=t.m,Hh(r,t.J),Yh(r,t),r=t.m,zh(r,t.R),Kh(r,t),t.m=null}return t.b}})))}function Xf(t){if(!ni())return Be(new N("operation-not-supported-in-this-environment"));var e=Hf(t).then((function(){return t.b.ra()})).then((function(t){return t?Oi(t):null}));return ap(t,e)}function $f(t,e){var n={};return n.apiKey=np(t).options.apiKey,n.authDomain=np(t).options.authDomain,n.appName=np(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then((function(){return Of(n,e,t.D,t.Ga())})).then((function(e){return rp(t)&&e.uid==rp(t).uid?(hf(rp(t),e),t.da(e)):(Qf(t,e),nf(e),t.da(e))})).then((function(){op(t)}))}function Qf(t,e){rp(t)&&(tf(rp(t),t.Ba),Nn(rp(t),"tokenChanged",t.qa),Nn(rp(t),"userDeleted",t.za),Nn(rp(t),"userInvalidated",t.Aa),Jh(rp(t))),e&&(e.W.push(t.Ba),On(e,"tokenChanged",t.qa),On(e,"userDeleted",t.za),On(e,"userInvalidated",t.Aa),0<t.u&&Qh(e)),xi(t,"currentUser",e),e&&(e.xa(t.la()),Wh(e,t),Hh(e,t.J),Yh(e,t),zh(e,t.R),Kh(e,t))}function Jf(t){var e=kf(t.D,np(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Nf(t.D)}));return ap(t,e)}function Zf(t){var e=np(t).options.authDomain,n=Jf(t).then((function(){return qf(t.i,e,t.R)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return Df(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:Ff(t.i)}))):null})).then((function(e){Qf(t,e||null)}));return ap(t,n)}function tp(t){return t.$.then((function(){return Xf(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(jf("local"),e.a,t.ja)}}))}function ep(t,e){var n=null,r=null;return ap(t,e.then((function(e){return n=ys(e),r=No(e),$f(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Eh(e.w(),t,I(t.kc,t))),n||e})).then((function(){return Oi({user:rp(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function np(t){return t.app}function rp(t){return t.currentUser}function ip(t){return rp(t)&&rp(t)._lat||null}function op(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](ip(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](ip(t))}}function sp(t,e){t.N.push(e),ap(t,t.h.then((function(){!t.l&&Z(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(ip(t)))})))}function ap(t,e){return t.P.push(e),e.oa((function(){tt(t.P,e)})),e}function up(){}function cp(){this.a={},this.b=1e12}Af.prototype.yb=function(t){var e=null,n=this;return rl(t),Uf(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Pf(n,t)})).then((function(){if(n.c=jf(t),e)return n.b.set(n.c,e,n.a)})):Ue()}))},C(Bf,Fn),C(Vf,pn),C(Gf,pn),C(zf,pn),n=Bf.prototype,n.yb=function(t){return t=this.i.yb(t),ap(this,t)},n.xa=function(t){this.aa===t||this.l||(this.aa=t,Ba(this.a,this.aa),this.dispatchEvent(new Vf(this.la())))},n.la=function(){return this.aa},n.fd=function(){var t=l.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},n.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new N("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");e=!!e&&!!e.disableWarnings,Wf(e),this.R={url:t,ec:e},this.settings.jb=!0,Va(this.a,this.R),this.dispatchEvent(new Gf(this.R))}},n.Gc=function(t){this.J.push(t),za(this.a,e["default"].SDK_VERSION?Jr(e["default"].SDK_VERSION,this.J):null),this.dispatchEvent(new zf(this.J))},n.Ga=function(){return rt(this.J)},n.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},n.T=function(){return this.S},n.toJSON=function(){return{apiKey:np(this).options.apiKey,authDomain:np(this).options.authDomain,appName:np(this).name,currentUser:rp(this)&&rp(this).w()}},n.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},n.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},n.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?I(this.ic,this):null},n.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return ep(i,fu(i.a,o))}))},n.Xc=function(t){if(!ni())return Be(new N("operation-not-supported-in-this-environment"));var n=this,r=To(t.providerId),i=ci(),o=null;(!oi()||Gr())&&np(this).options.authDomain&&t.isOAuthProvider&&(o=dc(np(this).options.authDomain,np(this).options.apiKey,np(this).name,"signInViaPopup",t,null,i,e["default"].SDK_VERSION||null,null,null,this.T(),this.R));var s=Mr(o,r&&r.va,r&&r.ua);return r=Hf(this).then((function(e){return Ql(e,s,"signInViaPopup",t,i,!!o,n.T())})).then((function(){return new Re((function(t,e){n.na("signInViaPopup",null,new N("cancelled-popup-request"),n.g),n.f=t,n.C=e,n.g=i,n.c=th(n.b,n,"signInViaPopup",s,i)}))})).then((function(t){return s&&jr(s),t?Oi(t):null})).o((function(t){throw s&&jr(s),t})),ap(this,r)},n.Yc=function(t){if(!ni())return Be(new N("operation-not-supported-in-this-environment"));var e=this,n=Hf(this).then((function(){return Mf(e.i)})).then((function(){return Zl(e.b,"signInViaRedirect",t,void 0,e.T())}));return ap(this,n)},n.ra=function(){var t=this;return Xf(this).then((function(e){return t.b&&sh(t.b.b),e})).o((function(e){throw t.b&&sh(t.b.b),e}))},n.dd=function(t){if(!t)return Be(new N("null-user"));if(this.S!=t.tenantId)return Be(new N("tenant-id-mismatch"));var e=this,n={};n.apiKey=np(this).options.apiKey,n.authDomain=np(this).options.authDomain,n.appName=np(this).name;var r=Sf(t,n,e.D,e.Ga());return ap(this,this.h.then((function(){if(np(e).options.apiKey!=t.l)return r.reload()})).then((function(){return rp(e)&&t.uid==rp(e).uid?(hf(rp(e),t),e.da(t)):(Qf(e,r),nf(r),e.da(r))})).then((function(){op(e)})))},n.Bb=function(){var t=this,e=this.h.then((function(){return t.b&&sh(t.b.b),rp(t)?(Qf(t,null),Ff(t.i).then((function(){op(t)}))):Ue()}));return ap(this,e)},n.Zc=function(){var t=this;return qf(this.i,np(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=rp(t)&&e){n=rp(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return hf(rp(t),e),rp(t).I();(rp(t)||e)&&(Qf(t,e),e&&(nf(e),e.ha=t.D),t.b&&Hl(t.b,t),op(t))}}))},n.da=function(t){return Df(this.i,t)},n.mc=function(){op(this),this.da(rp(this))},n.wc=function(){this.Bb()},n.xc=function(){this.Bb()},n.kc=function(t){var e=this;return this.h.then((function(){return ep(e,Ue(t))}))},n.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(rp(e))}))},n.Ac=function(t){var e=this;sp(this,(function(){t.next(rp(e))}))},n.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"===typeof t?t(rp(r)):"function"===typeof t.next&&t.next(rp(r))})),this.Pa(t,e,n)},n.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"===typeof t?t(rp(r)):"function"===typeof t.next&&t.next(rp(r))})),this.ib(t,e,n)},n.nc=function(t){var e=this,n=this.h.then((function(){return rp(e)?rp(e).I(t).then((function(t){return{accessToken:t}})):null}));return ap(this,n)},n.Tc=function(t){var e=this;return this.h.then((function(){return ep(e,Xu(e.a,Gu,{token:t}))})).then((function(t){var n=t.user;return lf(n,"isAnonymous",!1),e.da(n),t}))},n.Uc=function(t,e){var n=this;return this.h.then((function(){return ep(n,Xu(n.a,zu,{email:t,password:e}))}))},n.dc=function(t,e){var n=this;return this.h.then((function(){return ep(n,Xu(n.a,mu,{email:t,password:e}))}))},n.ab=function(t){var e=this;return this.h.then((function(){return ep(e,t.ka(e.a))}))},n.Sc=function(t){return wi("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},n.Ab=function(){var t=this;return this.h.then((function(){var e=rp(t);if(e&&e.isAnonymous){var n=Oi({providerId:null,isNewUser:!1});return Oi({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return ep(t,t.a.Ab()).then((function(e){var n=e.user;return lf(n,"isAnonymous",!0),t.da(n),e}))}))},n.getUid=function(){return rp(this)&&rp(this).uid||null},n.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&rp(this)&&Qh(rp(this))},n.Pc=function(t){var e=this;H(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&rp(this)&&Jh(rp(this)),this.removeAuthTokenListener(t)},n.addAuthTokenListener=function(t){var e=this;this.s.push(t),ap(this,this.h.then((function(){e.l||Z(e.s,t)&&t(ip(e))})))},n.removeAuthTokenListener=function(t){et(this.s,(function(e){return e==t}))},n.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i,t.b.removeListener(jf("local"),t.a,this.ja)),this.b&&(Yl(this.b,this),sh(this.b.b)),Promise.resolve()},n.hc=function(t){return ap(this,Za(this.a,t))},n.Bc=function(t){return!!hs(t)},n.xb=function(t,e){var n=this;return ap(this,Ue().then((function(){var t=new oo(e);if(!t.c)throw new N("argument-error",uo+" must be true when sending sign in link to email");return vo(t)})).then((function(e){return n.a.xb(t,e)})).then((function(){})))},n.jd=function(t){return this.Sa(t).then((function(t){return t.data.email}))},n.ob=function(t,e){return ap(this,this.a.ob(t,e).then((function(){})))},n.Sa=function(t){return ap(this,this.a.Sa(t).then((function(t){return new Mi(t)})))},n.kb=function(t){return ap(this,this.a.kb(t).then((function(){})))},n.wb=function(t,e){var n=this;return ap(this,Ue().then((function(){return"undefined"===typeof e||_t(e)?{}:vo(new oo(e))})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},n.Wc=function(t,e){return ap(this,vh(this,t,e,I(this.ab,this)))},n.Vc=function(t,e){var n=this;return ap(this,Ue().then((function(){var r=e||kr(),i=ls(t,r);if(r=hs(r),!r)throw new N("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new N("tenant-id-mismatch");return n.ab(i)})))},up.prototype.render=function(){},up.prototype.reset=function(){},up.prototype.getResponse=function(){},up.prototype.execute=function(){};var lp=null;function hp(t,e){return(e=fp(e))&&t.a[e]||null}function fp(t){return(t="undefined"===typeof t?1e12:t)?t.toString():null}function pp(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=me(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():On(this.f,"click",this.i)}function dp(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function gp(){}function vp(){}cp.prototype.render=function(t,e){return this.a[this.b.toString()]=new pp(t,e),this.b++},cp.prototype.reset=function(t){var e=hp(this,t);t=fp(t),e&&t&&(e.delete(),delete this.a[t])},cp.prototype.getResponse=function(t){return(t=hp(this,t))?t.getResponse():null},cp.prototype.execute=function(t){(t=hp(this,t))&&t.execute()},pp.prototype.getResponse=function(){return dp(this),this.b},pp.prototype.execute=function(){dp(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=Hr();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},pp.prototype.delete=function(){dp(this),this.g=!0,clearTimeout(this.a),this.a=null,Nn(this.f,"click",this.i)},xi(gp,"FACTOR_ID","phone"),vp.prototype.g=function(){return lp||(lp=new cp),Ue(lp)},vp.prototype.c=function(){};var yp=null;function mp(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var _p=new It(Tt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),bp=new fi(3e4,6e4);mp.prototype.g=function(t){var e=this;return new Re((function(n,r){var i=setTimeout((function(){r(new N("network-request-failed"))}),bp.get());if(!l.grecaptcha||t!==e.f&&!e.b){l[e.a]=function(){if(l.grecaptcha){e.f=t;var o=l.grecaptcha.render;l.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(l.grecaptcha)}else clearTimeout(i),r(new N("internal-error"));delete l[e.a]};var o=Pt(_p,{onload:e.a,hl:t||""});Ue(Sa(o)).o((function(){clearTimeout(i),r(new N("internal-error","Unable to load external reCAPTCHA dependencies!"))}))}else clearTimeout(i),n(l.grecaptcha)}))},mp.prototype.c=function(){this.b--};var wp=null;function Ep(t,e,n,r,i,o,s){if(xi(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,s?(yp||(yp=new vp),s=yp):(wp||(wp=new mp),s=wp),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Op])throw new N("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Sp],!l.document)throw new N("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!me(e)||!this.i&&me(e).hasChildNodes())throw new N("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new La(t,o||null,i||null),this.u=r||function(){return null};var a=this;this.l=[];var u=this.a[xp];this.a[xp]=function(t){if(Cp(a,t),"function"===typeof u)u(t);else if("string"===typeof u){var e=ti(u,l);"function"===typeof e&&e(t)}};var c=this.a[Ip];this.a[Ip]=function(){if(Cp(a,null),"function"===typeof c)c();else if("string"===typeof c){var t=ti(c,l);"function"===typeof t&&t()}}}var xp="callback",Ip="expired-callback",Op="sitekey",Sp="size";function Cp(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Tp(t,e){et(t.l,(function(t){return t==e}))}function Np(t,e){return t.h.push(e),e.oa((function(){tt(t.h,e)})),e}function kp(t){if(t.J)throw new N("internal-error","RecaptchaVerifier instance has been destroyed.")}function Ap(t,n,r){var i=!1;try{this.b=r||e["default"].app()}catch(a){throw new N("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new N("invalid-api-key");r=this.b.options.apiKey;var o=this,s=null;try{s=this.b.auth().Ga()}catch(a){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}s=e["default"].SDK_VERSION?Jr(e["default"].SDK_VERSION,s):null,Ep.call(this,r,t,n,(function(){try{var t=o.b.auth().la()}catch(e){t=null}return t}),s,j(A),i)}function Pp(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new N("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Rp.length)throw new N("internal-error","Argument validator received an unsupported number of arguments.");n=Rp[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new N("argument-error",t+" failed: "+r)}n=Ep.prototype,n.Ia=function(){var t=this;return this.f?this.f:this.f=Np(this,Ue().then((function(){if(ri()&&!zr())return Ur();throw new N("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,Xu(t.s,Pu,{})})).then((function(e){t.a[Op]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},n.render=function(){kp(this);var t=this;return Np(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=me(e);e=xe("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},n.verify=function(){kp(this);var t=this;return Np(this,this.render().then((function(e){return new Re((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(Tp(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},n.reset=function(){kp(this),null!==this.c&&this.g.reset(this.c)},n.clear=function(){kp(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=me(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},C(Ap,Ep);var Rp="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Lp(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"===typeof t}}}function jp(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"===typeof t}}}function Mp(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:m}}function Dp(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"===typeof t}}}function Fp(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function qp(){return{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}}}function Up(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof Bf)}}}function Bp(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof e["default"].app.App)}}}function Vp(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Gp(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}}function zp(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function Wp(t,e){return m(t)&&"string"===typeof t.type&&t.type===e&&"function"===typeof t.Ha}function Kp(t){return m(t)&&"string"===typeof t.uid}function Hp(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}}function Yp(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Xp(t,e){for(var n in e){var r=e[n].name;t[r]=Jp(r,t[n],e[n].j)}}function $p(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:O((function(t){return this[t]}),n),set:O((function(t,e,n,r){Pp(t,[n],[r],!0),this[e]=r}),r,n,e[n].lb),enumerable:!0})}}function Qp(t,e,n,r){t[e]=Jp(e,n,r)}function Jp(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Pp(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=Zp(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}function Zp(t){return t=t.split("."),t[t.length-1]}Xp(Bf.prototype,{kb:{name:"applyActionCode",j:[Lp("code")]},Sa:{name:"checkActionCode",j:[Lp("code")]},ob:{name:"confirmPasswordReset",j:[Lp("code"),Lp("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Lp("email"),Lp("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Lp("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Lp("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Yp(Mp(),Dp(),"nextOrObserver"),Dp("opt_error",!0),Dp("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Yp(Mp(),Dp(),"nextOrObserver"),Dp("opt_error",!0),Dp("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Lp("email"),Yp(Mp("opt_actionCodeSettings",!0),Fp(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Lp("email"),Mp("actionCodeSettings")]},yb:{name:"setPersistence",j:[Lp("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Vp()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[Vp()]},Tc:{name:"signInWithCustomToken",j:[Lp("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Lp("email"),Lp("password")]},Vc:{name:"signInWithEmailLink",j:[Lp("email"),Lp("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Lp("phoneNumber"),Hp()]},Xc:{name:"signInWithPopup",j:[zp()]},Yc:{name:"signInWithRedirect",j:[zp()]},dd:{name:"updateCurrentUser",j:[Yp(function(t){return{name:"user",K:"an instance of Firebase User",optional:!!t,M:function(t){return!!(t&&t instanceof Gh)}}}(),Fp(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Lp(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Lp("url"),Mp("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Lp("code")]}}),$p(Bf.prototype,{lc:{name:"languageCode",lb:Yp(Lp(),Fp(),"languageCode")},ti:{name:"tenantId",lb:Yp(Lp(),Fp(),"tenantId")}}),Bf.Persistence=nl,Bf.Persistence.LOCAL="local",Bf.Persistence.SESSION="session",Bf.Persistence.NONE="none",Xp(Gh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[jp("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[jp("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Vp()]},rb:{name:"linkWithCredential",j:[Vp()]},Dc:{name:"linkWithPhoneNumber",j:[Lp("phoneNumber"),Hp()]},Ec:{name:"linkWithPopup",j:[zp()]},Fc:{name:"linkWithRedirect",j:[zp()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Vp()]},ub:{name:"reauthenticateWithCredential",j:[Vp()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Lp("phoneNumber"),Hp()]},Nc:{name:"reauthenticateWithPopup",j:[zp()]},Oc:{name:"reauthenticateWithRedirect",j:[zp()]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[Yp(Mp("opt_actionCodeSettings",!0),Fp(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Lp(null,!0)]},cd:{name:"unlink",j:[Lp("provider")]},Cb:{name:"updateEmail",j:[Lp("email")]},Db:{name:"updatePassword",j:[Lp("password")]},ed:{name:"updatePhoneNumber",j:[Vp("phone")]},Eb:{name:"updateProfile",j:[Mp("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Lp("email"),Yp(Mp("opt_actionCodeSettings",!0),Fp(null,!0),"opt_actionCodeSettings",!0)]}}),Xp(cp.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Xp(up.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Xp(Re.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),$p(dh.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:jp("appVerificationDisabledForTesting")}}),Xp(gh.prototype,{confirm:{name:"confirm",j:[Lp("verificationCode")]}}),Qp(Vo,"fromJSON",(function(t){t="string"===typeof t?JSON.parse(t):t;for(var e,n=[Xo,us,ps,Ko],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Yp(Lp(),Mp(),"json")]),Qp(cs,"credential",(function(t,e){return new as(t,e)}),[Lp("email"),Lp("password")]),Xp(as.prototype,{w:{name:"toJSON",j:[Lp(null,!0)]}}),Xp(Zo.prototype,{Ca:{name:"addScope",j:[Lp("scope")]},Ka:{name:"setCustomParameters",j:[Mp("customOAuthParameters")]}}),Qp(Zo,"credential",ts,[Yp(Lp(),Mp(),"token")]),Qp(cs,"credentialWithLink",ls,[Lp("email"),Lp("emailLink")]),Xp(es.prototype,{Ca:{name:"addScope",j:[Lp("scope")]},Ka:{name:"setCustomParameters",j:[Mp("customOAuthParameters")]}}),Qp(es,"credential",ns,[Yp(Lp(),Mp(),"token")]),Xp(rs.prototype,{Ca:{name:"addScope",j:[Lp("scope")]},Ka:{name:"setCustomParameters",j:[Mp("customOAuthParameters")]}}),Qp(rs,"credential",is,[Yp(Lp(),Yp(Mp(),Fp()),"idToken"),Yp(Lp(),Fp(),"accessToken",!0)]),Xp(os.prototype,{Ka:{name:"setCustomParameters",j:[Mp("customOAuthParameters")]}}),Qp(os,"credential",ss,[Yp(Lp(),Mp(),"token"),Lp("secret",!0)]),Xp(Jo.prototype,{Ca:{name:"addScope",j:[Lp("scope")]},credential:{name:"credential",j:[Yp(Lp(),Yp(Mp(),Fp()),"optionsOrIdToken"),Yp(Lp(),Fp(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Mp("customOAuthParameters")]}}),Xp(Ho.prototype,{w:{name:"toJSON",j:[Lp(null,!0)]}}),Xp(zo.prototype,{w:{name:"toJSON",j:[Lp(null,!0)]}}),Qp(gs,"credential",vs,[Lp("verificationId"),Lp("verificationCode")]),Xp(gs.prototype,{gb:{name:"verifyPhoneNumber",j:[Yp(Lp(),function(t,e){return{name:t||"phoneInfoOptions",K:"valid phone info options",optional:!!e,M:function(t){return!!t&&(t.session&&t.phoneNumber?Wp(t.session,Uo)&&"string"===typeof t.phoneNumber:t.session&&t.multiFactorHint?Wp(t.session,Bo)&&Kp(t.multiFactorHint):t.session&&t.multiFactorUid?Wp(t.session,Bo)&&"string"===typeof t.multiFactorUid:!!t.phoneNumber&&"string"===typeof t.phoneNumber)}}}(),"phoneInfoOptions"),Hp()]}}),Xp(fs.prototype,{w:{name:"toJSON",j:[Lp(null,!0)]}}),Xp(N.prototype,{toJSON:{name:"toJSON",j:[Lp(null,!0)]}}),Xp(Ss.prototype,{toJSON:{name:"toJSON",j:[Lp(null,!0)]}}),Xp(Os.prototype,{toJSON:{name:"toJSON",j:[Lp(null,!0)]}}),Xp(wh.prototype,{toJSON:{name:"toJSON",j:[Lp(null,!0)]}}),Xp(mh.prototype,{Rc:{name:"resolveSignIn",j:[Gp()]}}),Xp(Nh.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[Gp(),Lp("displayName",!0)]},bd:{name:"unenroll",j:[Yp({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Kp},Lp(),"multiFactorInfoIdentifier")]}}),Xp(Ap.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Qp($i,"parseLink",io,[Lp("link")]),Qp(gp,"assertion",(function(t){return new Ch(t)}),[Vp("phone")]),function(){if("undefined"===typeof e["default"]||!e["default"].INTERNAL||!e["default"].INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Fi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Di,VERIFY_AND_CHANGE_EMAIL:qi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Bf,AuthCredential:Vo,Error:N};Qp(t,"EmailAuthProvider",cs,[]),Qp(t,"FacebookAuthProvider",Zo,[]),Qp(t,"GithubAuthProvider",es,[]),Qp(t,"GoogleAuthProvider",rs,[]),Qp(t,"TwitterAuthProvider",os,[]),Qp(t,"OAuthProvider",Jo,[Lp("providerId")]),Qp(t,"SAMLAuthProvider",Qo,[Lp("providerId")]),Qp(t,"PhoneAuthProvider",gs,[Up()]),Qp(t,"RecaptchaVerifier",Ap,[Yp(Lp(),qp(),"recaptchaContainer"),Mp("recaptchaParameters",!0),Bp()]),Qp(t,"ActionCodeURL",$i,[]),Qp(t,"PhoneMultiFactorGenerator",gp,[]),e["default"].INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return t=t.getProvider("app").getImmediate(),new Bf(t)},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),e["default"].INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return t=t.getProvider("auth").getImmediate(),{getUid:I(t.getUid,t),getToken:I(t.nc,t),addAuthTokenListener:I(t.cc,t),removeAuthTokenListener:I(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),e["default"].registerVersion("@firebase/auth","0.16.8"),e["default"].INTERNAL.extendNamespace({User:Gh})}()}).apply("undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}).call(this,n("c8ba"))},b85c:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0");var r=n("06c5");function i(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=Object(r["a"])(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,s=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(u)throw s}}}}},bb57:function(t,e,n){"use strict";var r=n("216d"),i=n("7a23"),o={name:"Button",props:{label:{type:String},icon:{type:String},iconPos:{type:String,default:"left"},badge:{type:String},badgeClass:{type:String,default:null},loading:{type:Boolean,default:!1},loadingIcon:{type:String,default:"pi pi-spinner pi-spin"}},computed:{buttonClass(){return{"p-button p-component":!0,"p-button-icon-only":this.icon&&!this.label,"p-button-vertical":("top"===this.iconPos||"bottom"===this.iconPos)&&this.label,"p-disabled":this.$attrs.disabled||this.loading,"p-button-loading":this.loading,"p-button-loading-label-only":this.loading&&!this.icon&&this.label}},iconClass(){return[this.loading?"p-button-loading-icon "+this.loadingIcon:this.icon,"p-button-icon",{"p-button-icon-left":"left"===this.iconPos&&this.label,"p-button-icon-right":"right"===this.iconPos&&this.label,"p-button-icon-top":"top"===this.iconPos&&this.label,"p-button-icon-bottom":"bottom"===this.iconPos&&this.label}]},badgeStyleClass(){return["p-badge p-component",this.badgeClass,{"p-badge-no-gutter":this.badge&&1===String(this.badge).length}]},disabled(){return this.$attrs.disabled||this.loading}},directives:{ripple:r["a"]}};const s={class:"p-button-label"};function a(t,e,n,r,o,a){const u=Object(i["D"])("ripple");return Object(i["M"])((Object(i["u"])(),Object(i["g"])("button",{class:a.buttonClass,type:"button",disabled:a.disabled},[Object(i["B"])(t.$slots,"default",{},()=>[n.loading&&!n.icon?(Object(i["u"])(),Object(i["g"])("span",{key:0,class:a.iconClass},null,2)):Object(i["h"])("",!0),n.icon?(Object(i["u"])(),Object(i["g"])("span",{key:1,class:a.iconClass},null,2)):Object(i["h"])("",!0),Object(i["j"])("span",s,Object(i["F"])(n.label||""),1),n.badge?(Object(i["u"])(),Object(i["g"])("span",{key:2,class:a.badgeStyleClass},Object(i["F"])(n.badge),3)):Object(i["h"])("",!0)])],10,["disabled"])),[[u]])}o.render=a,e["a"]=o},bc3a:function(t,e,n){t.exports=n("cee4")},bdce:function(t,e,n){"use strict";var r=n("dd76"),i=Object(r["c"])();e["a"]=i},bddf:function(t,e,n){},c04e:function(t,e,n){var r=n("861d");t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},c058:function(t,e,n){"use strict";var r=n("dd76"),i=Object(r["c"])();e["a"]=i},c345:function(t,e,n){"use strict";var r=n("c532"),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,o,s={};return t?(r.forEach(t.split("\n"),(function(t){if(o=t.indexOf(":"),e=r.trim(t.substr(0,o)).toLowerCase(),n=r.trim(t.substr(o+1)),e){if(s[e]&&i.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([n]):s[e]?s[e]+", "+n:n}})),s):s}},c401:function(t,e,n){"use strict";var r=n("c532");t.exports=function(t,e,n){return r.forEach(n,(function(n){t=n(t,e)})),t}},c430:function(t,e){t.exports=!1},c532:function(t,e,n){"use strict";var r=n("1d2b"),i=Object.prototype.toString;function o(t){return"[object Array]"===i.call(t)}function s(t){return"undefined"===typeof t}function a(t){return null!==t&&!s(t)&&null!==t.constructor&&!s(t.constructor)&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function u(t){return"[object ArrayBuffer]"===i.call(t)}function c(t){return"undefined"!==typeof FormData&&t instanceof FormData}function l(t){var e;return e="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function h(t){return"string"===typeof t}function f(t){return"number"===typeof t}function p(t){return null!==t&&"object"===typeof t}function d(t){if("[object Object]"!==i.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function g(t){return"[object Date]"===i.call(t)}function v(t){return"[object File]"===i.call(t)}function y(t){return"[object Blob]"===i.call(t)}function m(t){return"[object Function]"===i.call(t)}function _(t){return p(t)&&m(t.pipe)}function b(t){return"undefined"!==typeof URLSearchParams&&t instanceof URLSearchParams}function w(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}function E(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function x(t,e){if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),o(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function I(){var t={};function e(e,n){d(t[n])&&d(e)?t[n]=I(t[n],e):d(e)?t[n]=I({},e):o(e)?t[n]=e.slice():t[n]=e}for(var n=0,r=arguments.length;n<r;n++)x(arguments[n],e);return t}function O(t,e,n){return x(e,(function(e,i){t[i]=n&&"function"===typeof e?r(e,n):e})),t}function S(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}t.exports={isArray:o,isArrayBuffer:u,isBuffer:a,isFormData:c,isArrayBufferView:l,isString:h,isNumber:f,isObject:p,isPlainObject:d,isUndefined:s,isDate:g,isFile:v,isBlob:y,isFunction:m,isStream:_,isURLSearchParams:b,isStandardBrowserEnv:E,forEach:x,merge:I,extend:O,trim:w,stripBOM:S}},c6b6:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},c6cd:function(t,e,n){var r=n("da84"),i=n("ce4e"),o="__core-js_shared__",s=r[o]||i(o,{});t.exports=s},c740:function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").findIndex,o=n("44d2"),s=n("ae40"),a="findIndex",u=!0,c=s(a);a in[]&&Array(1)[a]((function(){u=!1})),r({target:"Array",proto:!0,forced:u||!c},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o(a)},c7b2:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return kr})),n.d(e,"b",(function(){return Pr})),n.d(e,"c",(function(){return Ar})),n.d(e,"d",(function(){return Lr})),n.d(e,"e",(function(){return Rr})),n.d(e,"f",(function(){return jr})),n.d(e,"g",(function(){return Mr})),n.d(e,"h",(function(){return Tr})),n.d(e,"i",(function(){return Nr}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function o(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var s,a="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},u=u||{},c=a||self;function l(){}function h(t){var e=typeof t;return e="object"!=e?e:t?Array.isArray(t)?"array":e:"null","array"==e||"object"==e&&"number"==typeof t.length}function f(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function p(t){return Object.prototype.hasOwnProperty.call(t,d)&&t[d]||(t[d]=++g)}var d="closure_uid_"+(1e9*Math.random()>>>0),g=0;function v(t,e,n){return t.call.apply(t.bind,arguments)}function y(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function m(t,e,n){return m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:y,m.apply(null,arguments)}function _(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function b(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function w(){this.s=this.s,this.o=this.o}var E=0,x={};w.prototype.s=!1,w.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0!=E)){var t=p(this);delete x[t]}},w.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var I=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},O=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function S(t){t:{for(var e=zn,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}function C(t){return Array.prototype.concat.apply([],arguments)}function T(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function N(t){return/^[\s\xa0]*$/.test(t)}var k,A=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function P(t,e){return-1!=t.indexOf(e)}function R(t,e){return t<e?-1:t>e?1:0}t:{var L=c.navigator;if(L){var j=L.userAgent;if(j){k=j;break t}}k=""}function M(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function D(t){var e={};for(var n in t)e[n]=t[n];return e}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function q(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(var o=0;o<F.length;o++)n=F[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function U(t){return U[" "](t),t}function B(t){var e=tt;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}U[" "]=l;var V,G=P(k,"Opera"),z=P(k,"Trident")||P(k,"MSIE"),W=P(k,"Edge"),K=W||z,H=P(k,"Gecko")&&!(P(k.toLowerCase(),"webkit")&&!P(k,"Edge"))&&!(P(k,"Trident")||P(k,"MSIE"))&&!P(k,"Edge"),Y=P(k.toLowerCase(),"webkit")&&!P(k,"Edge");function X(){var t=c.document;return t?t.documentMode:void 0}t:{var $="",Q=function(){var t=k;return H?/rv:([^\);]+)(\)|;)/.exec(t):W?/Edge\/([\d\.]+)/.exec(t):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Y?/WebKit\/(\S+)/.exec(t):G?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Q&&($=Q?Q[1]:""),z){var J=X();if(null!=J&&J>parseFloat($)){V=String(J);break t}}V=$}var Z,tt={};function et(){return B((function(){for(var t=0,e=A(String(V)).split("."),n=A("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=R(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||R(0==o[2].length,0==s[2].length)||R(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}))}if(c.document&&z){var nt=X();Z=nt||(parseInt(V,10)||void 0)}else Z=void 0;var rt=Z,it=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{c.addEventListener("test",l,e),c.removeEventListener("test",l,e)}catch(n){}return t}();function ot(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function st(t,e){if(ot.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(H){t:{try{U(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:at[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&st.Z.h.call(this)}}ot.prototype.h=function(){this.defaultPrevented=!0},b(st,ot);var at={2:"touch",3:"pen",4:"mouse"};st.prototype.h=function(){st.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ut="closure_listenable_"+(1e6*Math.random()|0),ct=0;function lt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++ct,this.ca=this.fa=!1}function ht(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function ft(t){this.src=t,this.g={},this.h=0}function pt(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=I(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ht(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function dt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}ft.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=dt(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):(e=new lt(e,this.src,o,!!r,i),e.fa=n,t.push(e)),e};var gt="closure_lm_"+(1e6*Math.random()|0),vt={};function yt(t,e,n,r,i){if(r&&r.once)return bt(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)yt(t,e[o],n,r,i);return null}return n=Ct(n),t&&t[ut]?t.N(e,n,f(r)?!!r.capture:!!r,i):mt(t,e,n,!1,r,i)}function mt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=f(i)?!!i.capture:!!i,a=Ot(t);if(a||(t[gt]=a=new ft(t)),n=a.add(e,n,r,s,o),n.proxy)return n;if(r=_t(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)it||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(xt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function _t(){function t(n){return e.call(t.src,t.listener,n)}var e=It;return t}function bt(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)bt(t,e[o],n,r,i);return null}return n=Ct(n),t&&t[ut]?t.O(e,n,f(r)?!!r.capture:!!r,i):mt(t,e,n,!0,r,i)}function wt(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)wt(t,e[o],n,r,i);else r=f(r)?!!r.capture:!!r,n=Ct(n),t&&t[ut]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=dt(o,n,r,i),-1<n&&(ht(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=Ot(t))&&(e=t.g[e.toString()],t=-1,e&&(t=dt(e,n,r,i)),(n=-1<t?e[t]:null)&&Et(n))}function Et(t){if("number"!==typeof t&&t&&!t.ca){var e=t.src;if(e&&e[ut])pt(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(xt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ot(e))?(pt(n,t),0==n.h&&(n.src=null,e[gt]=null)):ht(t)}}}function xt(t){return t in vt?vt[t]:vt[t]="on"+t}function It(t,e){if(t.ca)t=!0;else{e=new st(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Et(t),t=n.call(r,e)}return t}function Ot(t){return t=t[gt],t instanceof ft?t:null}var St="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ct(t){return"function"===typeof t?t:(t[St]||(t[St]=function(e){return t.handleEvent(e)}),t[St])}function Tt(){w.call(this),this.i=new ft(this),this.P=this,this.I=null}function Nt(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"===typeof e)e=new ot(e,t);else if(e instanceof ot)e.target=e.target||t;else{var i=e;e=new ot(r,t),q(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=kt(s,r,!0,e)&&i}if(s=e.g=t,i=kt(s,r,!0,e)&&i,i=kt(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.g=n[o],i=kt(s,r,!1,e)&&i}function kt(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&pt(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}b(Tt,w),Tt.prototype[ut]=!0,Tt.prototype.removeEventListener=function(t,e,n,r){wt(this,t,e,n,r)},Tt.prototype.M=function(){if(Tt.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)ht(n[r]);delete e.g[t],e.h--}}this.I=null},Tt.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Tt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var At=c.JSON.stringify;function Pt(){var t=Bt,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Rt,Lt=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=jt.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),jt=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new Mt}),(function(t){return t.reset()})),Mt=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Dt(t){c.setTimeout((function(){throw t}),0)}function Ft(t,e){Rt||qt(),Ut||(Rt(),Ut=!0),Bt.add(t,e)}function qt(){var t=c.Promise.resolve(void 0);Rt=function(){t.then(Vt)}}var Ut=!1,Bt=new Lt;function Vt(){for(var t;t=Pt();){try{t.h.call(t.g)}catch(n){Dt(n)}var e=jt;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ut=!1}function Gt(t,e){Tt.call(this),this.h=t||1,this.g=e||c,this.j=m(this.kb,this),this.l=Date.now()}function zt(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Wt(t,e,n){if("function"===typeof t)n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:c.setTimeout(t,e||0)}function Kt(t){t.g=Wt((function(){t.g=null,t.i&&(t.i=!1,Kt(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}b(Gt,Tt),s=Gt.prototype,s.da=!1,s.S=null,s.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Nt(this,"tick"),this.da&&(zt(this),this.start()))}},s.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},s.M=function(){Gt.Z.M.call(this),zt(this),delete this.g};var Ht=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return i(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:Kt(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(w);function Yt(t){w.call(this),this.h=t,this.g={}}b(Yt,w);var Xt=[];function $t(t,e,n,r){Array.isArray(n)||(n&&(Xt[0]=n.toString()),n=Xt);for(var i=0;i<n.length;i++){var o=yt(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Qt(t){M(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Et(t)}),t),t.g={}}function Jt(){this.g=!0}function Zt(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}function te(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}function ee(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+re(t,n)+(r?" "+r:"")}))}function ne(t,e){t.info((function(){return"TIMEOUT: "+e}))}function re(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return At(n)}catch(a){return e}}Yt.prototype.M=function(){Yt.Z.M.call(this),Qt(this)},Yt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Jt.prototype.Aa=function(){this.g=!1},Jt.prototype.info=function(){};var ie={},oe=null;function se(){return oe=oe||new Tt}function ae(t){ot.call(this,ie.Ma,t)}function ue(t){var e=se();Nt(e,new ae(e,t))}function ce(t,e){ot.call(this,ie.STAT_EVENT,t),this.stat=e}function le(t){var e=se();Nt(e,new ce(e,t))}function he(t,e){ot.call(this,ie.Na,t),this.size=e}function fe(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return c.setTimeout((function(){t()}),e)}ie.Ma="serverreachability",b(ae,ot),ie.STAT_EVENT="statevent",b(ce,ot),ie.Na="timingevent",b(he,ot);var pe={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},de={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ge(){}function ve(t){return t.h||(t.h=t.i())}function ye(){}ge.prototype.h=null;var me,_e={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function be(){ot.call(this,"d")}function we(){ot.call(this,"c")}function Ee(){}function xe(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Yt(this),this.P=Oe,t=K?125:void 0,this.W=new Gt(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ie}function Ie(){this.i=null,this.g="",this.h=!1}b(be,ot),b(we,ot),b(Ee,ge),Ee.prototype.g=function(){return new XMLHttpRequest},Ee.prototype.i=function(){return{}},me=new Ee;var Oe=45e3,Se={},Ce={};function Te(t,e,n){t.K=1,t.v=Ze(He(e)),t.s=n,t.U=!0,Ne(t,null)}function Ne(t,e){t.F=Date.now(),Re(t),t.A=He(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),gn(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Ie,t.g=wr(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Ht(m(t.Ia,t,t.g),t.O)),$t(t.V,t.g,"readystatechange",t.gb),e=t.H?D(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),ue(1),Zt(t.j,t.u,t.A,t.m,t.X,t.s)}function ke(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function Ae(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if(r=Pe(t,n),r==Ce){4==e&&(t.o=4,le(14),i=!1),ee(t.j,t.m,null,"[Incomplete Response]");break}if(r==Se){t.o=4,le(15),ee(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}ee(t.j,t.m,r,null),Fe(t,r)}ke(t)&&r!=Ce&&r!=Se&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,le(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),pr(e),e.L=!0,le(11))):(ee(t.j,t.m,n,"[Invalid Chunked Response]"),De(t),Me(t))}function Pe(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Ce:(n=Number(e.substring(n,r)),isNaN(n)?Se:(r+=1,r+n>e.length?Ce:(e=e.substr(r,n),t.C=r+n,e)))}function Re(t){t.Y=Date.now()+t.P,Le(t,t.P)}function Le(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=fe(m(t.eb,t),e)}function je(t){t.B&&(c.clearTimeout(t.B),t.B=null)}function Me(t){0==t.l.G||t.I||vr(t.l,t)}function De(t){je(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,zt(t.W),Qt(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Fe(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||xn(n.i,t)))if(n.I=t.N,!t.J&&xn(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;gr(n),rr(n)}fr(n),le(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=fe(m(n.ab,n),6e3));if(1>=En(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else mr(n,11)}else if((t.J||n.g==t)&&gr(n),!N(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(P(l,"spdy")||P(l,"quic")||P(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(In(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Je(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var p=t;if(r.oa=br(r,r.H?r.la:null,r.W),p.J){On(r.i,p);var d=p,g=r.K;g&&d.setTimeout(g),d.B&&(je(d),Re(d)),r.g=p}else hr(r);0<n.l.length&&sr(n)}else"stop"!=o[0]&&"close"!=o[0]||mr(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?mr(n,7):nr(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}ue(4)}catch(o){}}function qe(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"===typeof t)return t.split("");if(h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Ue(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||"string"===typeof t)O(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(h(t)||"string"===typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=qe(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Be(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Be)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ve(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Ge(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)r=t.g[e],Ge(i,r)||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Ge(t,e){return Object.prototype.hasOwnProperty.call(t,e)}s=xe.prototype,s.setTimeout=function(t){this.P=t},s.gb=function(t){t=t.target;var e=this.L;e&&3==$n(t)?e.l():this.Ia(t)},s.Ia=function(t){try{if(t==this.g)t:{var e=$n(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||K||this.g&&(this.h.h||this.g.ga()||Qn(this.g)))){this.I||4!=e||7==n||ue(8==n||0>=r?3:2),je(this);var i=this.g.ba();this.N=i;e:if(ke(this)){var o=Qn(this.g);t="";var s=o.length,a=4==$n(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){De(this),Me(this);var u="";break e}this.h.i=new c.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,te(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var l,h=this.g;if((l=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(l)){var f=l;break e}}f=null}if(!(i=f)){this.i=!1,this.o=3,le(12),De(this),Me(this);break t}ee(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Fe(this,i)}this.U?(Ae(this,e,u),K&&this.i&&3==e&&($t(this.V,this.W,"tick",this.fb),this.W.start())):(ee(this.j,this.m,u,null),Fe(this,u)),4==e&&De(this),this.i&&!this.I&&(4==e?vr(this.l,this):(this.i=!1,Re(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,le(12)):(this.o=0,le(13)),De(this),Me(this)}}}catch(e){}},s.fb=function(){if(this.g){var t=$n(this.g),e=this.g.ga();this.C<e.length&&(je(this),Ae(this,t,e),this.i&&4!=t&&Re(this))}},s.cancel=function(){this.I=!0,De(this)},s.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(ne(this.j,this.A),2!=this.K&&(ue(3),le(17)),De(this),this.o=2,Me(this)):Le(this,this.Y-t)},s=Be.prototype,s.R=function(){Ve(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},s.T=function(){return Ve(this),this.g.concat()},s.get=function(t,e){return Ge(this.h,t)?this.h[t]:e},s.set=function(t,e){Ge(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},s.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var ze=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function We(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Ke(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Ke){this.g=void 0!==e?e:t.g,Ye(this,t.j),this.s=t.s,Xe(this,t.i),$e(this,t.m),this.l=t.l,e=t.h;var n=new hn;n.i=e.i,e.g&&(n.g=new Be(e.g),n.h=e.h),Qe(this,n),this.o=t.o}else t&&(n=String(t).match(ze))?(this.g=!!e,Ye(this,n[1]||"",!0),this.s=nn(n[2]||""),Xe(this,n[3]||"",!0),$e(this,n[4]),this.l=nn(n[5]||"",!0),Qe(this,n[6]||"",!0),this.o=nn(n[7]||"")):(this.g=!!e,this.h=new hn(null,this.g))}function He(t){return new Ke(t)}function Ye(t,e,n){t.j=n?nn(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Xe(t,e,n){t.i=n?nn(e,!0):e}function $e(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Qe(t,e,n){e instanceof hn?(t.h=e,yn(t.h,t.g)):(n||(e=rn(e,cn)),t.h=new hn(e,t.g))}function Je(t,e,n){t.h.set(e,n)}function Ze(t){return Je(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function tn(t){return t instanceof Ke?He(t):new Ke(t,void 0)}function en(t,e,n,r){var i=new Ke(null,void 0);return t&&Ye(i,t),e&&Xe(i,e),n&&$e(i,n),r&&(i.l=r),i}function nn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function rn(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,on),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function on(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}Ke.prototype.toString=function(){var t=[],e=this.j;e&&t.push(rn(e,sn,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(rn(e,sn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,null!=n&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(rn(n,"/"==n.charAt(0)?un:an,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",rn(n,ln)),t.join("")};var sn=/[#\/\?@]/g,an=/[#\?:]/g,un=/[#\?]/g,cn=/[#\?@]/g,ln=/#/g;function hn(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function fn(t){t.g||(t.g=new Be,t.h=0,t.i&&We(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function pn(t,e){fn(t),e=vn(t,e),Ge(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,Ge(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Ve(t)))}function dn(t,e){return fn(t),e=vn(t,e),Ge(t.g.h,e)}function gn(t,e,n){pn(t,e),0<n.length&&(t.i=null,t.g.set(vn(t,e),T(n)),t.h+=n.length)}function vn(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function yn(t,e){e&&!t.j&&(fn(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(pn(this,e),gn(this,n,t))}),t)),t.j=e}s=hn.prototype,s.add=function(t,e){fn(this),this.i=null,t=vn(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},s.forEach=function(t,e){fn(this),this.g.forEach((function(n,r){O(n,(function(n){t.call(e,n,r,this)}),this)}),this)},s.T=function(){fn(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},s.R=function(t){fn(this);var e=[];if("string"===typeof t)dn(this,t)&&(e=C(e,this.g.get(vn(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=C(e,t[n])}return e},s.set=function(t,e){return fn(this),this.i=null,t=vn(this,t),dn(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},s.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e},s.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var mn=function(){function t(t,e){this.h=t,this.g=e}return t}();function _n(t){this.l=t||bn,c.PerformanceNavigationTiming?(t=c.performance.getEntriesByType("navigation"),t=0<t.length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol)):t=!!(c.g&&c.g.Ea&&c.g.Ea()&&c.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var bn=10;function wn(t){return!!t.h||!!t.g&&t.g.size>=t.j}function En(t){return t.h?1:t.g?t.g.size:0}function xn(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function In(t,e){t.g?t.g.add(e):t.h=e}function On(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Sn(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=o(t.g.values()),s=i.next();!s.done;s=i.next()){var a=s.value;r=r.concat(a.D)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return T(t.i)}function Cn(){}function Tn(){this.g=new Cn}function Nn(t,e,n){var r=n||"";try{Ue(t,(function(t,n){var i=t;f(t)&&(i=At(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function kn(t,e){var n=new Jt;if(c.Image){var r=new Image;r.onload=_(An,n,r,"TestLoadImage: loaded",!0,e),r.onerror=_(An,n,r,"TestLoadImage: error",!1,e),r.onabort=_(An,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=_(An,n,r,"TestLoadImage: timeout",!1,e),c.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}function An(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function Pn(t){this.l=t.$b||null,this.j=t.ib||!1}function Rn(t,e){Tt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Ln,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}_n.prototype.cancel=function(){var t,e;if(this.i=Sn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=o(this.g.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},Cn.prototype.stringify=function(t){return c.JSON.stringify(t,void 0)},Cn.prototype.parse=function(t){return c.JSON.parse(t,void 0)},b(Pn,ge),Pn.prototype.g=function(){return new Rn(this.l,this.j)},Pn.prototype.i=function(t){return function(){return t}}({}),b(Rn,Tt);var Ln=0;function jn(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Mn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Dn(t)}function Dn(t){t.onreadystatechange&&t.onreadystatechange.call(t)}s=Rn.prototype,s.open=function(t,e){if(this.readyState!=Ln)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Dn(this)},s.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||c).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},s.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Mn(this)),this.readyState=Ln},s.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Dn(this)),this.g&&(this.readyState=3,Dn(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof c.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;jn(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},s.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Mn(this):Dn(this),3==this.readyState&&jn(this)}},s.Ua=function(t){this.g&&(this.response=this.responseText=t,Mn(this))},s.Ta=function(t){this.g&&(this.response=t,Mn(this))},s.ha=function(){this.g&&Mn(this)},s.setRequestHeader=function(t,e){this.v.append(t,e)},s.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Rn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Fn=c.JSON.parse;function qn(t){Tt.call(this),this.headers=new Be,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Un,this.K=this.L=!1}b(qn,Tt);var Un="",Bn=/^https?$/i,Vn=["POST","PUT"];function Gn(t){return z&&et()&&"number"===typeof t.timeout&&void 0!==t.ontimeout}function zn(t){return"content-type"==t.toLowerCase()}function Wn(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Kn(t),Yn(t)}function Kn(t){t.D||(t.D=!0,Nt(t,"complete"),Nt(t,"error"))}function Hn(t){if(t.h&&"undefined"!=typeof u&&(!t.C[1]||4!=$n(t)||2!=t.ba()))if(t.v&&4==$n(t))Wt(t.Fa,0,t);else if(Nt(t,"readystatechange"),4==$n(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(ze)[1]||null;if(!o&&c.self&&c.self.location){var s=c.self.location.protocol;o=s.substr(0,s.length-1)}i=!Bn.test(o?o.toLowerCase():"")}e=i}if(e)Nt(t,"complete"),Nt(t,"success");else{t.m=6;try{var a=2<$n(t)?t.g.statusText:""}catch(l){a=""}t.j=a+" ["+t.ba()+"]",Kn(t)}}finally{Yn(t)}}}function Yn(t,e){if(t.g){Xn(t);var n=t.g,r=t.C[0]?l:null;t.g=null,t.C=null,e||Nt(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function Xn(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(c.clearTimeout(t.A),t.A=null)}function $n(t){return t.g?t.g.readyState:0}function Qn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Un:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Jn(t){var e="";return M(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Zn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=Jn(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Je(t,e,n))}function tr(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function er(t){this.za=0,this.l=[],this.h=new Jt,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=tr("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=tr("baseRetryDelayMs",5e3,t),this.$a=tr("retryDelaySeedMs",1e4,t),this.Ya=tr("forwardChannelMaxRetries",2,t),this.ra=tr("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new _n(t&&t.concurrentRequestLimit),this.Ca=new Tn,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function nr(t){if(ir(t),3==t.G){var e=t.V++,n=He(t.F);Je(n,"SID",t.J),Je(n,"RID",e),Je(n,"TYPE","terminate"),cr(t,n),e=new xe(t,t.h,e,void 0),e.K=2,e.v=Ze(He(n)),n=!1,c.navigator&&c.navigator.sendBeacon&&(n=c.navigator.sendBeacon(e.v.toString(),"")),!n&&c.Image&&((new Image).src=e.v,n=!0),n||(e.g=wr(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Re(e)}_r(t)}function rr(t){t.g&&(pr(t),t.g.cancel(),t.g=null)}function ir(t){rr(t),t.u&&(c.clearTimeout(t.u),t.u=null),gr(t),t.i.cancel(),t.m&&("number"===typeof t.m&&c.clearTimeout(t.m),t.m=null)}function or(t,e){t.l.push(new mn(t.Za++,e)),3==t.G&&sr(t)}function sr(t){wn(t.i)||t.m||(t.m=!0,Ft(t.Ha,t),t.C=0)}function ar(t,e){return!(En(t.i)>=t.i.j-(t.m?1:0))&&(t.m?(t.l=e.D.concat(t.l),!0):!(1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya))&&(t.m=fe(m(t.Ha,t,e),yr(t,t.C)),t.C++,!0))}function ur(t,e){var n;n=e?e.m:t.V++;var r=He(t.F);Je(r,"SID",t.J),Je(r,"RID",n),Je(r,"AID",t.U),cr(t,r),t.o&&t.s&&Zn(r,t.o,t.s),n=new xe(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=lr(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),In(t.i,n),Te(n,r,e)}function cr(t,e){t.j&&Ue({},(function(t,n){Je(e,n,t)}))}function lr(t,e,n){n=Math.min(t.l.length,n);var r=t.j?m(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(c-=o,0>c)o=Math.max(0,i[u].h-100),a=!1;else try{Nn(l,s,"req"+c+"_")}catch(h){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function hr(t){t.g||t.u||(t.Y=1,Ft(t.Ga,t),t.A=0)}function fr(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=fe(m(t.Ga,t),yr(t,t.A)),t.A++,!0)}function pr(t){null!=t.B&&(c.clearTimeout(t.B),t.B=null)}function dr(t){t.g=new xe(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=He(t.oa);Je(e,"RID","rpc"),Je(e,"SID",t.J),Je(e,"CI",t.N?"0":"1"),Je(e,"AID",t.U),cr(t,e),Je(e,"TYPE","xmlhttp"),t.o&&t.s&&Zn(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Ze(He(e)),n.s=null,n.U=!0,Ne(n,t)}function gr(t){null!=t.v&&(c.clearTimeout(t.v),t.v=null)}function vr(t,e){var n=null;if(t.g==e){gr(t),pr(t),t.g=null;var r=2}else{if(!xn(t.i,e))return;n=e.D,On(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;r=se(),Nt(r,new he(r,n,e,i)),sr(t)}else hr(t);else if(i=e.o,3==i||0==i&&0<t.I||!(1==r&&ar(t,e)||2==r&&fr(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:mr(t,5);break;case 4:mr(t,10);break;case 3:mr(t,6);break;default:mr(t,2)}}function yr(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function mr(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=m(t.jb,t);n||(n=new Ke("//www.google.com/images/cleardot.gif"),c.location&&"http"==c.location.protocol||Ye(n,"https"),Ze(n)),kn(n.toString(),r)}else le(2);t.G=0,t.j&&t.j.va(e),_r(t),ir(t)}function _r(t){t.G=0,t.I=-1,t.j&&(0==Sn(t.i).length&&0==t.l.length||(t.i.i.length=0,T(t.l),t.l.length=0),t.j.ua())}function br(t,e,n){var r=tn(n);if(""!=r.i)e&&Xe(r,e+"."+r.i),$e(r,r.m);else{var i=c.location;r=en(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&M(t.aa,(function(t,e){Je(r,e,t)})),e=t.D,n=t.sa,e&&n&&Je(r,e,n),Je(r,"VER",t.ma),cr(t,r),r}function wr(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ba&&!t.qa?new qn(new Pn({ib:!0})):new qn(t.qa),e.L=t.H,e}function Er(){}function xr(){if(z&&!(10<=Number(rt)))throw Error("Environmental error: no available transport.")}function Ir(t,e){Tt.call(this),this.g=new er(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!N(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!N(e)&&(this.g.D=e,t=this.h,null!==t&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Cr(this)}function Or(t){be.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Sr(){we.call(this),this.status=1}function Cr(t){this.g=t}s=qn.prototype,s.ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():me.g(),this.C=this.u?ve(this.u):ve(me),this.g.onreadystatechange=m(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void Wn(this,o)}t=n||"";var i=new Be(this.headers);r&&Ue(r,(function(t,e){i.set(e,t)})),r=S(i.T()),n=c.FormData&&t instanceof c.FormData,!(0<=I(Vn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Xn(this),0<this.B&&((this.K=Gn(this.g))?(this.g.timeout=this.B,this.g.ontimeout=m(this.pa,this)):this.A=Wt(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Wn(this,o)}},s.pa=function(){"undefined"!=typeof u&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Nt(this,"timeout"),this.abort(8))},s.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Nt(this,"complete"),Nt(this,"abort"),Yn(this))},s.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yn(this,!0)),qn.Z.M.call(this)},s.Fa=function(){this.s||(this.F||this.v||this.l?Hn(this):this.cb())},s.cb=function(){Hn(this)},s.ba=function(){try{return 2<$n(this)?this.g.status:-1}catch(t){return-1}},s.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},s.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Fn(e)}},s.Da=function(){return this.m},s.La=function(){return"string"===typeof this.j?this.j:String(this.j)},s=er.prototype,s.ma=8,s.G=1,s.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},s.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new xe(this,this.h,t,void 0),n=this.s;if(this.P&&(n?(n=D(n),q(n,this.P)):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(o="__data__"in o.g&&(o=o.g.__data__,"string"===typeof o)?o.length:void 0,void 0===o)break;if(r+=o,4096<r){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=lr(this,e,r),i=He(this.F),Je(i,"RID",t),Je(i,"CVER",22),this.D&&Je(i,"X-HTTP-Session-Id",this.D),cr(this,i),this.o&&n&&Zn(i,this.o,n),In(this.i,e),this.Ra&&Je(i,"TYPE","init"),this.ja?(Je(i,"$req",r),Je(i,"SID","null"),e.$=!0,Te(e,i,null)):Te(e,i,r),this.G=2}}else 3==this.G&&(t?ur(this,t):0==this.l.length||wn(this.i)||ur(this))},s.Ga=function(){if(this.u=null,dr(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=fe(m(this.bb,this),t)}},s.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,le(10),rr(this),dr(this))},s.ab=function(){null!=this.v&&(this.v=null,rr(this),fr(this),le(19))},s.jb=function(t){t?(this.h.info("Successfully pinged google.com"),le(2)):(this.h.info("Failed to ping google.com"),le(1))},s=Er.prototype,s.xa=function(){},s.wa=function(){},s.va=function(){},s.ua=function(){},s.Oa=function(){},xr.prototype.g=function(t,e){return new Ir(t,e)},b(Ir,Tt),Ir.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Ft(m(t.hb,t,e))),le(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=br(t,null,t.W),sr(t)},Ir.prototype.close=function(){nr(this.g)},Ir.prototype.u=function(t){if("string"===typeof t){var e={};e.__data__=t,or(this.g,e)}else this.v?(e={},e.__data__=At(t),or(this.g,e)):or(this.g,t)},Ir.prototype.M=function(){this.g.j=null,delete this.j,nr(this.g),delete this.g,Ir.Z.M.call(this)},b(Or,be),b(Sr,we),b(Cr,Er),Cr.prototype.xa=function(){Nt(this.g,"a")},Cr.prototype.wa=function(t){Nt(this.g,new Or(t))},Cr.prototype.va=function(t){Nt(this.g,new Sr(t))},Cr.prototype.ua=function(){Nt(this.g,"b")},xr.prototype.createWebChannel=xr.prototype.g,Ir.prototype.send=Ir.prototype.u,Ir.prototype.open=Ir.prototype.m,Ir.prototype.close=Ir.prototype.close,pe.NO_ERROR=0,pe.TIMEOUT=8,pe.HTTP_ERROR=6,de.COMPLETE="complete",ye.EventType=_e,_e.OPEN="a",_e.CLOSE="b",_e.ERROR="c",_e.MESSAGE="d",Tt.prototype.listen=Tt.prototype.N,qn.prototype.listenOnce=qn.prototype.O,qn.prototype.getLastError=qn.prototype.La,qn.prototype.getLastErrorCode=qn.prototype.Da,qn.prototype.getStatus=qn.prototype.ba,qn.prototype.getResponseJson=qn.prototype.Qa,qn.prototype.getResponseText=qn.prototype.ga,qn.prototype.send=qn.prototype.ea;var Tr=function(){return new xr},Nr=function(){return se()},kr=pe,Ar=de,Pr=ie,Rr={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Lr=Pn,jr=ye,Mr=qn}).call(this,n("c8ba"))},c8af:function(t,e,n){"use strict";var r=n("c532");t.exports=function(t,e){r.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))}},c8ba:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},c975:function(t,e,n){"use strict";var r=n("23e7"),i=n("4d64").indexOf,o=n("a640"),s=n("ae40"),a=[].indexOf,u=!!a&&1/[1].indexOf(1,-0)<0,c=o("indexOf"),l=s("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:u||!c||!l},{indexOf:function(t){return u?a.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})},ca84:function(t,e,n){var r=n("5135"),i=n("fc6a"),o=n("4d64").indexOf,s=n("d012");t.exports=function(t,e){var n,a=i(t),u=0,c=[];for(n in a)!r(s,n)&&r(a,n)&&c.push(n);while(e.length>u)r(a,n=e[u++])&&(~o(c,n)||c.push(n));return c}},caad:function(t,e,n){"use strict";var r=n("23e7"),i=n("4d64").includes,o=n("44d2"),s=n("ae40"),a=s("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:!a},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},cc12:function(t,e,n){var r=n("da84"),i=n("861d"),o=r.document,s=i(o)&&i(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},cc84:function(t,e,n){"use strict";n.r(e),n.d(e,"firebase",(function(){return F}));var r,i,o=n("9ab4"),s=n("a8e9"),a=n("ffa6"),u=n("abfd"),c=(r={},r["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s["ErrorFactory"]("app","Firebase",c),h="@firebase/app",f="0.6.28",p="@firebase/analytics",d="@firebase/app-check",g="@firebase/auth",v="@firebase/database",y="@firebase/functions",m="@firebase/installations",_="@firebase/messaging",b="@firebase/performance",w="@firebase/remote-config",E="@firebase/storage",x="@firebase/firestore",I="firebase-wrapper",O="[DEFAULT]",S=(i={},i[h]="fire-core",i[p]="fire-analytics",i[d]="fire-app-check",i[g]="fire-auth",i[v]="fire-rtdb",i[y]="fire-fn",i[m]="fire-iid",i[_]="fire-fcm",i[b]="fire-perf",i[w]="fire-rc",i[E]="fire-gcs",i[x]="fire-fst",i["fire-js"]="fire-js",i[I]="fire-js-all",i),C=new u["Logger"]("@firebase/app"),T=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s["deepCopy"])(t),this.container=new a["ComponentContainer"](e.name),this._addComponent(new a["Component"]("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=O),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=O),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){C.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();T.prototype.name&&T.prototype.options||T.prototype.delete||console.log("dc");var N="8.7.0";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k(t){var e={},n=new Map,r={__esModule:!0,initializeApp:c,app:o,registerVersion:p,setLogLevel:u["setLogLevel"],onLog:d,apps:null,SDK_VERSION:N,INTERNAL:{registerComponent:f,removeApp:i,components:n,useAsService:g}};function i(t){delete e[t]}function o(t){if(t=t||O,!Object(s["contains"])(e,t))throw l.create("no-app",{appName:t});return e[t]}function c(n,i){if(void 0===i&&(i={}),"object"!==typeof i||null===i){var o=i;i={name:o}}var a=i;void 0===a.name&&(a.name=O);var u=a.name;if("string"!==typeof u||!u)throw l.create("bad-app-name",{appName:String(u)});if(Object(s["contains"])(e,u))throw l.create("duplicate-app",{appName:u});var c=new t(n,a,r);return e[u]=c,c}function h(){return Object.keys(e).map((function(t){return e[t]}))}function f(i){var a=i.name;if(n.has(a))return C.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===i.type?r[a]:null;if(n.set(a,i),"PUBLIC"===i.type){var u=function(t){if(void 0===t&&(t=o()),"function"!==typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==i.serviceProps&&Object(s["deepExtend"])(u,i.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,a);return n.apply(this,i.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++){var f=h[c];e[f]._addComponent(i)}return"PUBLIC"===i.type?r[a]:null}function p(t,e,n){var r,i=null!==(r=S[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void C.warn(u.join(" "))}f(new a["Component"](i+"-version",(function(){return{library:i,version:e}}),"VERSION"))}function d(t,e){if(null!==t&&"function"!==typeof t)throw l.create("invalid-log-argument");Object(u["setUserLogHandler"])(t,e)}function g(t,e){if("serverAuth"===e)return null;var n=e;return n}return r["default"]=r,Object.defineProperty(r,"apps",{get:h}),o["App"]=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A(){var t=k(T);function e(e){Object(s["deepExtend"])(t,e)}return t.INTERNAL=Object(o["__assign"])(Object(o["__assign"])({},t.INTERNAL),{createFirebaseNamespace:A,extendNamespace:e,createSubscribe:s["createSubscribe"],ErrorFactory:s["ErrorFactory"],deepExtend:s["deepExtend"]}),t}var P=A(),R=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){var t=this.container.getProviders();return t.map((function(t){if(L(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j(t,e){t.INTERNAL.registerComponent(new a["Component"]("platform-logger",(function(t){return new R(t)}),"PRIVATE")),t.registerVersion(h,f,e),t.registerVersion("fire-js","")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(Object(s["isBrowser"])()&&void 0!==self.firebase){C.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var M=self.firebase.SDK_VERSION;M&&M.indexOf("LITE")>=0&&C.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var D=P.initializeApp;P.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s["isNode"])()&&C.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),D.apply(void 0,t)};var F=P;j(F),e["default"]=F},cca6:function(t,e,n){var r=n("23e7"),i=n("60da");r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},cdf9:function(t,e,n){var r=n("825a"),i=n("861d"),o=n("f069");t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t),s=n.resolve;return s(e),n.promise}},ce4e:function(t,e,n){var r=n("da84"),i=n("9112");t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},cee4:function(t,e,n){"use strict";var r=n("c532"),i=n("1d2b"),o=n("0a06"),s=n("4a7b"),a=n("2444");function u(t){var e=new o(t),n=i(o.prototype.request,e);return r.extend(n,o.prototype,e),r.extend(n,e),n}var c=u(a);c.Axios=o,c.create=function(t){return u(s(c.defaults,t))},c.Cancel=n("7a77"),c.CancelToken=n("8df4"),c.isCancel=n("2e67"),c.all=function(t){return Promise.all(t)},c.spread=n("0df6"),t.exports=c,t.exports.default=c},d012:function(t,e){t.exports={}},d039:function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},d066:function(t,e,n){var r=n("428f"),i=n("da84"),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t])||o(i[t]):r[t]&&r[t][e]||i[t]&&i[t][e]}},d1e7:function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},d28b:function(t,e,n){var r=n("746f");r("iterator")},d2bb:function(t,e,n){var r=n("825a"),i=n("3bbe");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,t.call(n,[]),e=n instanceof Array}catch(o){}return function(n,o){return r(n),i(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},d3b7:function(t,e,n){var r=n("00ee"),i=n("6eeb"),o=n("b041");r||i(Object.prototype,"toString",o,{unsafe:!0})},d44e:function(t,e,n){var r=n("9bf2").f,i=n("5135"),o=n("b622"),s=o("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,s)&&r(t,s,{configurable:!0,value:e})}},d58f:function(t,e,n){var r=n("1c0b"),i=n("7b0b"),o=n("44ad"),s=n("50c4"),a=function(t){return function(e,n,a,u){r(n);var c=i(e),l=o(c),h=s(c.length),f=t?h-1:0,p=t?-1:1;if(a<2)while(1){if(f in l){u=l[f],f+=p;break}if(f+=p,t?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:h>f;f+=p)f in l&&(u=n(u,l[f],f,c));return u}};t.exports={left:a(!1),right:a(!0)}},d725:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n("7a23");const i=Symbol();function o(){const t=Object(r["n"])(i);if(!t)throw new Error("No PrimeVue Confirmation provided!");return t}},d784:function(t,e,n){"use strict";n("ac1f");var r=n("6eeb"),i=n("d039"),o=n("b622"),s=n("9263"),a=n("9112"),u=o("species"),c=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),l=function(){return"$0"==="a".replace(/./,"$0")}(),h=o("replace"),f=function(){return!!/./[h]&&""===/./[h]("a","$0")}(),p=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,h){var d=o(t),g=!i((function(){var e={};return e[d]=function(){return 7},7!=""[t](e)})),v=g&&!i((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[u]=function(){return n},n.flags="",n[d]=/./[d]),n.exec=function(){return e=!0,null},n[d](""),!e}));if(!g||!v||"replace"===t&&(!c||!l||f)||"split"===t&&!p){var y=/./[d],m=n(d,""[t],(function(t,e,n,r,i){return e.exec===s?g&&!i?{done:!0,value:y.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),_=m[0],b=m[1];r(String.prototype,t,_),r(RegExp.prototype,d,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}h&&a(RegExp.prototype[d],"sham",!0)}},d81d:function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").map,o=n("1dde"),s=n("ae40"),a=o("map"),u=s("map");r({target:"Array",proto:!0,forced:!a||!u},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},d925:function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},da84:function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,n("c8ba"))},dc4a:function(t,e,n){"use strict";var r=n("dd76"),i=n("0393"),o=n("216d"),s=n("7a23"),a={name:"Listbox",emits:["update:modelValue","change","filter"],props:{modelValue:null,options:Array,optionLabel:null,optionValue:null,optionDisabled:null,optionGroupLabel:null,optionGroupChildren:null,listStyle:null,disabled:Boolean,dataKey:null,multiple:Boolean,metaKeySelection:Boolean,filter:Boolean,filterPlaceholder:String,filterLocale:String,filterMatchMode:{type:String,default:"contains"},filterFields:{type:Array,default:null},emptyFilterMessage:{type:String,default:null},emptyMessage:{type:String,default:null}},optionTouched:!1,data(){return{filterValue:null}},methods:{getOptionLabel(t){return this.optionLabel?r["d"].resolveFieldData(t,this.optionLabel):t},getOptionValue(t){return this.optionValue?r["d"].resolveFieldData(t,this.optionValue):t},getOptionRenderKey(t){return this.dataKey?r["d"].resolveFieldData(t,this.dataKey):this.getOptionLabel(t)},isOptionDisabled(t){return!!this.optionDisabled&&r["d"].resolveFieldData(t,this.optionDisabled)},getOptionGroupRenderKey(t){return r["d"].resolveFieldData(t,this.optionGroupLabel)},getOptionGroupLabel(t){return r["d"].resolveFieldData(t,this.optionGroupLabel)},getOptionGroupChildren(t){return r["d"].resolveFieldData(t,this.optionGroupChildren)},onOptionSelect(t,e){this.disabled||this.isOptionDisabled(e)||(this.multiple?this.onOptionSelectMultiple(t,e):this.onOptionSelectSingle(t,e),this.optionTouched=!1)},onOptionTouchEnd(){this.disabled||(this.optionTouched=!0)},onOptionSelectSingle(t,e){let n=this.isSelected(e),r=!1,i=null,o=!this.optionTouched&&this.metaKeySelection;if(o){let o=t.metaKey||t.ctrlKey;n?o&&(i=null,r=!0):(i=this.getOptionValue(e),r=!0)}else i=n?null:this.getOptionValue(e),r=!0;r&&this.updateModel(t,i)},onOptionSelectMultiple(t,e){let n=this.isSelected(e),r=!1,i=null,o=!this.optionTouched&&this.metaKeySelection;if(o){let o=t.metaKey||t.ctrlKey;n?(i=o?this.removeOption(e):[this.getOptionValue(e)],r=!0):(i=o&&this.modelValue||[],i=[...i,this.getOptionValue(e)],r=!0)}else i=n?this.removeOption(e):[...this.modelValue||[],this.getOptionValue(e)],r=!0;r&&this.updateModel(t,i)},isSelected(t){let e=!1,n=this.getOptionValue(t);if(this.multiple){if(this.modelValue)for(let i of this.modelValue)if(r["d"].equals(i,n,this.equalityKey)){e=!0;break}}else e=r["d"].equals(this.modelValue,n,this.equalityKey);return e},removeOption(t){return this.modelValue.filter(e=>!r["d"].equals(e,this.getOptionValue(t),this.equalityKey))},updateModel(t,e){this.$emit("update:modelValue",e),this.$emit("change",{originalEvent:t,value:e})},onOptionKeyDown(t,e){let n=t.currentTarget;switch(t.which){case 40:var r=this.findNextItem(n);r&&r.focus(),t.preventDefault();break;case 38:var i=this.findPrevItem(n);i&&i.focus(),t.preventDefault();break;case 13:this.onOptionSelect(t,e),t.preventDefault();break}},findNextItem(t){let e=t.nextElementSibling;return e?r["b"].hasClass(e,"p-disabled")||r["b"].hasClass(e,"p-listbox-item-group")?this.findNextItem(e):e:null},findPrevItem(t){let e=t.previousElementSibling;return e?r["b"].hasClass(e,"p-disabled")||r["b"].hasClass(e,"p-listbox-item-group")?this.findPrevItem(e):e:null},onFilterChange(t){this.$emit("filter",{originalEvent:t,value:t.target.value})}},computed:{visibleOptions(){if(this.filterValue){if(this.optionGroupLabel){let t=[];for(let e of this.options){let n=i["b"].filter(this.getOptionGroupChildren(e),this.searchFields,this.filterValue,this.filterMatchMode,this.filterLocale);n&&n.length&&t.push({...e,items:n})}return t}return i["b"].filter(this.options,this.searchFields,this.filterValue,"contains",this.filterLocale)}return this.options},equalityKey(){return this.optionValue?null:this.dataKey},searchFields(){return this.filterFields||[this.optionLabel]},emptyFilterMessageText(){return this.emptyFilterMessage||this.$primevue.config.locale.emptyFilterMessage},emptyMessageText(){return this.emptyMessage||this.$primevue.config.locale.emptyMessage}},directives:{ripple:o["a"]}};const u={class:"p-listbox p-component"},c={key:0,class:"p-listbox-header"},l={class:"p-listbox-filter-container"},h=Object(s["j"])("span",{class:"p-listbox-filter-icon pi pi-search"},null,-1),f={class:"p-listbox-list",role:"listbox","aria-multiselectable":"multiple"},p={class:"p-listbox-item-group"},d={key:2,class:"p-listbox-empty-message"},g={key:3,class:"p-listbox-empty-message"};function v(t,e,n,r,i,o){const a=Object(s["D"])("ripple");return Object(s["u"])(),Object(s["g"])("div",u,[Object(s["B"])(t.$slots,"header",{value:n.modelValue,options:o.visibleOptions}),n.filter?(Object(s["u"])(),Object(s["g"])("div",c,[Object(s["j"])("div",l,[Object(s["M"])(Object(s["j"])("input",{type:"text",class:"p-listbox-filter p-inputtext p-component","onUpdate:modelValue":e[1]||(e[1]=t=>i.filterValue=t),placeholder:n.filterPlaceholder,onInput:e[2]||(e[2]=(...t)=>o.onFilterChange&&o.onFilterChange(...t))},null,40,["placeholder"]),[[s["I"],i.filterValue]]),h])])):Object(s["h"])("",!0),Object(s["j"])("div",{class:"p-listbox-list-wrapper",style:n.listStyle},[Object(s["j"])("ul",f,[n.optionGroupLabel?(Object(s["u"])(!0),Object(s["g"])(s["a"],{key:1},Object(s["A"])(o.visibleOptions,(n,r)=>(Object(s["u"])(),Object(s["g"])(s["a"],{key:o.getOptionGroupRenderKey(n)},[Object(s["j"])("li",p,[Object(s["B"])(t.$slots,"optiongroup",{option:n,index:r},()=>[Object(s["i"])(Object(s["F"])(o.getOptionGroupLabel(n)),1)])]),(Object(s["u"])(!0),Object(s["g"])(s["a"],null,Object(s["A"])(o.getOptionGroupChildren(n),(n,r)=>Object(s["M"])((Object(s["u"])(),Object(s["g"])("li",{tabindex:o.isOptionDisabled(n)?null:"0",class:["p-listbox-item",{"p-highlight":o.isSelected(n),"p-disabled":o.isOptionDisabled(n)}],key:o.getOptionRenderKey(n),onClick:t=>o.onOptionSelect(t,n),onTouchend:e[4]||(e[4]=t=>o.onOptionTouchEnd()),onKeydown:t=>o.onOptionKeyDown(t,n),role:"option","aria-label":o.getOptionLabel(n),"aria-selected":o.isSelected(n)},[Object(s["B"])(t.$slots,"option",{option:n,index:r},()=>[Object(s["i"])(Object(s["F"])(o.getOptionLabel(n)),1)])],42,["tabindex","onClick","onKeydown","aria-label","aria-selected"])),[[a]])),128))],64))),128)):(Object(s["u"])(!0),Object(s["g"])(s["a"],{key:0},Object(s["A"])(o.visibleOptions,(n,r)=>Object(s["M"])((Object(s["u"])(),Object(s["g"])("li",{tabindex:o.isOptionDisabled(n)?null:"0",class:["p-listbox-item",{"p-highlight":o.isSelected(n),"p-disabled":o.isOptionDisabled(n)}],key:o.getOptionRenderKey(n),onClick:t=>o.onOptionSelect(t,n),onTouchend:e[3]||(e[3]=t=>o.onOptionTouchEnd()),onKeydown:t=>o.onOptionKeyDown(t,n),role:"option","aria-label":o.getOptionLabel(n),"aria-selected":o.isSelected(n)},[Object(s["B"])(t.$slots,"option",{option:n,index:r},()=>[Object(s["i"])(Object(s["F"])(o.getOptionLabel(n)),1)])],42,["tabindex","onClick","onKeydown","aria-label","aria-selected"])),[[a]])),128)),i.filterValue&&(!o.visibleOptions||o.visibleOptions&&0===o.visibleOptions.length)?(Object(s["u"])(),Object(s["g"])("li",d,[Object(s["B"])(t.$slots,"emptyfilter",{},()=>[Object(s["i"])(Object(s["F"])(o.emptyFilterMessageText),1)])])):!n.options||n.options&&0===n.options.length?(Object(s["u"])(),Object(s["g"])("li",g,[Object(s["B"])(t.$slots,"empty",{},()=>[Object(s["i"])(Object(s["F"])(o.emptyMessageText),1)])])):Object(s["h"])("",!0)])],4),Object(s["B"])(t.$slots,"footer",{value:n.modelValue,options:o.visibleOptions})])}function y(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var m="\n.p-listbox-list-wrapper {\n    overflow: auto;\n}\n.p-listbox-list {\n    list-style-type: none;\n    margin: 0;\n    padding: 0;\n}\n.p-listbox-item {\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n}\n.p-listbox-item-group {\n    cursor: auto;\n}\n.p-listbox-filter-container {\n    position: relative;\n}\n.p-listbox-filter-icon {\n    position: absolute;\n    top: 50%;\n    margin-top: -.5rem;\n}\n.p-listbox-filter {\n    width: 100%;\n}\n";y(m),a.render=v,e["a"]=a},dcbe:function(t,e,n){(function(e){(function(e,n){t.exports=n()})(0,(function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}
/**
   * splaytree v3.1.0
   * Fast Splay tree for Node and browser
   *
   * @author Alexander Milevski <info@w8r.name>
   * @license MIT
   * @preserve
   */var i=function(){function t(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null}return t}();function o(t,e){return t>e?1:t<e?-1:0}function s(t,e,n){var r=new i(null,null),o=r,s=r;while(1){var a=n(t,e.key);if(a<0){if(null===e.left)break;if(n(t,e.left.key)<0){var u=e.left;if(e.left=u.right,u.right=e,e=u,null===e.left)break}s.left=e,s=e,e=e.left}else{if(!(a>0))break;if(null===e.right)break;if(n(t,e.right.key)>0){u=e.right;if(e.right=u.left,u.left=e,e=u,null===e.right)break}o.right=e,o=e,e=e.right}}return o.right=e.left,s.left=e.right,e.left=r.right,e.right=r.left,e}function a(t,e,n,r){var o=new i(t,e);if(null===n)return o.left=o.right=null,o;n=s(t,n,r);var a=r(t,n.key);return a<0?(o.left=n.left,o.right=n,n.left=null):a>=0&&(o.right=n.right,o.left=n,n.right=null),o}function u(t,e,n){var r=null,i=null;if(e){e=s(t,e,n);var o=n(e.key,t);0===o?(r=e.left,i=e.right):o<0?(i=e.right,e.right=null,r=e):(r=e.left,e.left=null,i=e)}return{left:r,right:i}}function c(t,e,n){return null===e?t:(null===t||(e=s(t.key,e,n),e.left=t),e)}function l(t,e,n,r,i){if(t){r(e+(n?" ":" ")+i(t)+"\n");var o=e+(n?"    ":"   ");t.left&&l(t.left,o,!1,r,i),t.right&&l(t.right,o,!0,r,i)}}var h=function(){function t(t){void 0===t&&(t=o),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=a(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new i(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var r=this._comparator,o=s(t,this._root,r),a=r(t,o.key);return 0===a?this._root=o:(a<0?(n.left=o.left,n.right=o,o.left=null):a>0&&(n.right=o.right,n.left=o,o.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var r;if(null===e)return null;e=s(t,e,n);var i=n(t,e.key);return 0===i?(null===e.left?r=e.right:(r=s(t,e.left,n),r.right=e.right),this._size--,r):e},t.prototype.pop=function(){var t=this._root;if(t){while(t.left)t=t.left;return this._root=s(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){var e=this._root,n=this._comparator;while(e){var r=n(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=s(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){var e=this._root,n=this._comparator;while(e){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){var n=this._root,r=[],i=!1;while(!i)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),t.call(e,n),n=n.right):i=!0;return this},t.prototype.range=function(t,e,n,r){var i,o=[],s=this._comparator,a=this._root;while(0!==o.length||a)if(a)o.push(a),a=a.left;else{if(a=o.pop(),i=s(a.key,e),i>0)break;if(s(a.key,t)>=0&&n.call(r,a))return this;a=a.right}return this},t.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},t.prototype.values=function(){var t=[];return this.forEach((function(e){var n=e.data;return t.push(n)})),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)while(t.left)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)while(t.right)t=t.right;return t},t.prototype.at=function(t){var e=this._root,n=!1,r=0,i=[];while(!n)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),r===t)return e;r++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){n=t.right;while(n.left)n=n.left;return n}var r=this._comparator;while(e){var i=r(t.key,e.key);if(0===i)break;i<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){n=t.left;while(n.right)n=n.right;return n}var r=this._comparator;while(e){var i=r(t.key,e.key);if(0===i)break;i<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return d(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=t.length,i=this._comparator;if(n&&y(t,e,0,r-1,i),null===this._root)this._root=f(t,e,0,r),this._size=r;else{var o=v(this.toList(),p(t,e),i);r=this._size+r,this._root=g({head:o},0,r)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return l(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},t.prototype.update=function(t,e,n){var r=this._comparator,i=u(t,this._root,r),o=i.left,s=i.right;r(t,e)<0?s=a(e,n,s,r):o=a(e,n,o,r),this._root=c(o,s,r)},t.prototype.split=function(t){return u(t,this._root,this._comparator)},t}();function f(t,e,n,r){var o=r-n;if(o>0){var s=n+Math.floor(o/2),a=t[s],u=e[s],c=new i(a,u);return c.left=f(t,e,n,s),c.right=f(t,e,s+1,r),c}return null}function p(t,e){for(var n=new i(null,null),r=n,o=0;o<t.length;o++)r=r.next=new i(t[o],e[o]);return r.next=null,n.next}function d(t){var e=t,n=[],r=!1,o=new i(null,null),s=o;while(!r)e?(n.push(e),e=e.left):n.length>0?(e=s=s.next=n.pop(),e=e.right):r=!0;return s.next=null,o.next}function g(t,e,n){var r=n-e;if(r>0){var i=e+Math.floor(r/2),o=g(t,e,i),s=t.head;return s.left=o,t.head=t.head.next,s.right=g(t,i+1,n),s}return null}function v(t,e,n){var r=new i(null,null),o=r,s=t,a=e;while(null!==s&&null!==a)n(s.key,a.key)<0?(o.next=s,s=s.next):(o.next=a,a=a.next),o=o.next;return null!==s?o.next=s:null!==a&&(o.next=a),r.next}function y(t,e,n,r,i){if(!(n>=r)){var o=t[n+r>>1],s=n-1,a=r+1;while(1){do{s++}while(i(t[s],o)<0);do{a--}while(i(t[a],o)>0);if(s>=a)break;var u=t[s];t[s]=t[a],t[a]=u,u=e[s],e[s]=e[a],e[a]=u}y(t,e,n,a,i),y(t,e,a+1,r,i)}}var m=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},_=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x,i=t.ll.y<e.ll.y?e.ll.y:t.ll.y,o=t.ur.y<e.ur.y?t.ur.y:e.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:o}}},b=Number.EPSILON;void 0===b&&(b=Math.pow(2,-52));var w=b*b,E=function(t,e){if(-b<t&&t<b&&-b<e&&e<b)return 0;var n=t-e;return n*n<w*t*e?0:t<e?-1:1},x=function(){function e(){t(this,e),this.reset()}return r(e,[{key:"reset",value:function(){this.xRounder=new I,this.yRounder=new I}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),e}(),I=function(){function e(){t(this,e),this.tree=new h,this.round(0)}return r(e,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===E(e.key,n.key))return this.tree.remove(t),n.key;var r=this.tree.next(e);return null!==r&&0===E(e.key,r.key)?(this.tree.remove(t),r.key):t}}]),e}(),O=new x,S=function(t,e){return t.x*e.y-t.y*e.x},C=function(t,e){return t.x*e.x+t.y*e.y},T=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y},o=S(r,i);return E(o,0)},N=function(t){return Math.sqrt(C(t,t))},k=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return S(i,r)/N(i)/N(r)},A=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return C(i,r)/N(i)/N(r)},P=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},R=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},L=function(t,e,n,r){if(0===e.x)return R(n,r,t.x);if(0===r.x)return R(t,e,n.x);if(0===e.y)return P(n,r,t.y);if(0===r.y)return P(t,e,n.y);var i=S(e,r);if(0==i)return null;var o={x:n.x-t.x,y:n.y-t.y},s=S(o,e)/i,a=S(o,r)/i,u=t.x+a*e.x,c=n.x+s*r.x,l=t.y+a*e.y,h=n.y+s*r.y,f=(u+c)/2,p=(l+h)/2;return{x:f,y:p}},j=function(){function e(n,r){t(this,e),void 0===n.events?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=r}return r(e,null,[{key:"compare",value:function(t,n){var r=e.comparePoints(t.point,n.point);return 0!==r?r:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:D.compare(t.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),r(e,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,r=e.length;n<r;n++){var i=e[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var r=e+1;r<t;r++){var i=this.point.events[r];void 0===i.consumedBy&&(n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment))}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,r=function(r){var i=r.otherSE;n.set(r,{sine:k(e.point,t.point,i.point),cosine:A(e.point,t.point,i.point)})};return function(t,e){n.has(t)||r(t),n.has(e)||r(e);var i=n.get(t),o=i.sine,s=i.cosine,a=n.get(e),u=a.sine,c=a.cosine;return o>=0&&u>=0?s<c?1:s>c?-1:0:o<0&&u<0?s<c?-1:s>c?1:0:u<o?-1:u>o?1:0}}}]),e}(),M=0,D=function(){function e(n,r,i,o){t(this,e),this.id=++M,this.leftSE=n,n.segment=this,n.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=n,this.rings=i,this.windings=o}return r(e,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,r=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;var s=t.leftSE.point.y,a=e.leftSE.point.y,u=t.rightSE.point.y,c=e.rightSE.point.y;if(n<r){if(a<s&&a<u)return 1;if(a>s&&a>u)return-1;var l=t.comparePoint(e.leftSE.point);if(l<0)return 1;if(l>0)return-1;var h=e.comparePoint(t.rightSE.point);return 0!==h?h:-1}if(n>r){if(s<a&&s<c)return-1;if(s>a&&s>c)return 1;var f=e.comparePoint(t.leftSE.point);if(0!==f)return f;var p=t.comparePoint(e.rightSE.point);return p<0?1:p>0?-1:1}if(s<a)return-1;if(s>a)return 1;if(i<o){var d=e.comparePoint(t.rightSE.point);if(0!==d)return d}if(i>o){var g=t.comparePoint(e.rightSE.point);if(g<0)return 1;if(g>0)return-1}if(i!==o){var v=u-s,y=i-n,m=c-a,_=o-r;if(v>y&&m<_)return 1;if(v<y&&m>_)return-1}return i>o?1:i<o||u<c?-1:u>c?1:t.id<e.id?-1:t.id>e.id?1:0}}]),r(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var i=(t.y-e.y)/r.y,o=e.x+i*r.x;if(t.x===o)return 0;var s=(t.x-e.x)/r.x,a=e.y+s*r.y;return t.y===a?0:t.y<a?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),r=_(e,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,u=m(e,s)&&0===this.comparePoint(s),c=m(n,i)&&0===t.comparePoint(i),l=m(e,a)&&0===this.comparePoint(a),h=m(n,o)&&0===t.comparePoint(o);if(c&&u)return h&&!l?o:!h&&l?a:null;if(c)return l&&i.x===a.x&&i.y===a.y?null:i;if(u)return h&&o.x===s.x&&o.y===s.y?null:s;if(h&&l)return null;if(h)return o;if(l)return a;var f=L(i,this.vector(),s,t.vector());return null===f?null:m(r,f)?O.round(f.x,f.y):null}},{key:"split",value:function(t){var n=[],r=void 0!==t.events,i=new j(t,!0),o=new j(t,!1),s=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var a=new e(i,s,this.rings.slice(),this.windings.slice());return j.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),j.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(t){var n=this,r=t;while(n.consumedBy)n=n.consumedBy;while(r.consumedBy)r=r.consumedBy;var i=e.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var s=n;n=r,r=s}for(var a=0,u=r.rings.length;a<u;a++){var c=r.rings[a],l=r.windings[a],h=n.rings.indexOf(c);-1===h?(n.rings.push(c),n.windings.push(l)):n.windings[h]+=l}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var s=this.rings[i],a=this.windings[i],u=e.indexOf(s);-1===u?(e.push(s),n.push(a)):n[u]+=a}for(var c=[],l=[],h=0,f=e.length;h<f;h++)if(0!==n[h]){var p=e[h],d=p.poly;if(-1===l.indexOf(d))if(p.isExterior)c.push(d);else{-1===l.indexOf(d)&&l.push(d);var g=c.indexOf(p.poly);-1!==g&&c.splice(g,1)}}for(var v=0,y=c.length;v<y;v++){var m=c[v].multiPoly;-1===r.indexOf(m)&&r.push(m)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(Y.type){case"union":var n=0===t.length,r=0===e.length;this._isInResult=n!==r;break;case"intersection":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===Y.numMultiPolys&&i<o;break;case"xor":var s=Math.abs(t.length-e.length);this._isInResult=s%2===1;break;case"difference":var a=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=a(t)!==a(e);break;default:throw new Error("Unrecognized operation type found ".concat(Y.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,r){var i,o,s,a=j.comparePoints(t,n);if(a<0)i=t,o=n,s=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));i=n,o=t,s=-1}var u=new j(i,!0),c=new j(o,!1);return new e(u,c,[r],[s])}}]),e}(),F=function(){function e(n,r,i){if(t(this,e),!Array.isArray(n)||0===n.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=i,this.segments=[],"number"!==typeof n[0][0]||"number"!==typeof n[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=O.round(n[0][0],n[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var s=o,a=1,u=n.length;a<u;a++){if("number"!==typeof n[a][0]||"number"!==typeof n[a][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var c=O.round(n[a][0],n[a][1]);c.x===s.x&&c.y===s.y||(this.segments.push(D.fromRing(s,c,this)),c.x<this.bbox.ll.x&&(this.bbox.ll.x=c.x),c.y<this.bbox.ll.y&&(this.bbox.ll.y=c.y),c.x>this.bbox.ur.x&&(this.bbox.ur.x=c.x),c.y>this.bbox.ur.y&&(this.bbox.ur.y=c.y),s=c)}o.x===s.x&&o.y===s.y||this.segments.push(D.fromRing(s,o,this))}return r(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}]),e}(),q=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new F(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,o=n.length;i<o;i++){var s=new F(n[i],this,!1);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.interiorRings.push(s)}this.multiPoly=r}return r(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var r=this.interiorRings[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),e}(),U=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"===typeof n[0][0][0]&&(n=[n])}catch(a){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,o=n.length;i<o;i++){var s=new q(n[i],this);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.polys.push(s)}this.isSubject=r}return r(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var r=this.polys[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),e}(),B=function(){function e(n){t(this,e),this.events=n;for(var r=0,i=n.length;r<i;r++)n[r].segment.ringOut=this;this.poly=null}return r(e,null,[{key:"factory",value:function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];if(o.isInResult()&&!o.ringOut){var s=null,a=o.leftSE,u=o.rightSE,c=[a],l=a.point,h=[];while(1){if(s=a,a=u,c.push(a),a.point===l)break;while(1){var f=a.getAvailableLinkedEvents();if(0===f.length){var p=c[0].point,d=c[c.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===f.length){u=f[0].otherSE;break}for(var g=null,v=0,y=h.length;v<y;v++)if(h[v].point===a.point){g=v;break}if(null===g){h.push({index:c.length,point:a.point});var m=a.getLeftmostComparator(s);u=f.sort(m)[0].otherSE;break}var _=h.splice(g)[0],b=c.splice(_.index);b.unshift(b[0].otherSE),n.push(new e(b.reverse()))}}n.push(new e(c))}}return n}}]),r(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==T(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var s=e[0],a=e[1];0===T(s,t,a)&&e.shift(),e.push(e[0]);for(var u=this.isExteriorRing()?1:-1,c=this.isExteriorRing()?0:e.length-1,l=this.isExteriorRing()?e.length:-1,h=[],f=c;f!=l;f+=u)h.push([e[f].x,e[f].y]);return h}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var r=this.events[e];j.compare(t,r)>0&&(t=r)}var i=t.segment.prevInResult(),o=i?i.prevInResult():null;while(1){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),e}(),V=function(){function e(n){t(this,e),this.exteriorRing=n,n.poly=this,this.interiorRings=[]}return r(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var r=this.interiorRings[e].getGeom();null!==r&&t.push(r)}return t}}]),e}(),G=function(){function e(n){t(this,e),this.rings=n,this.polys=this._composePolys(n)}return r(e,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(!i.poly)if(i.isExteriorRing())e.push(new V(i));else{var o=i.enclosingRing();o.poly||e.push(new V(o)),o.poly.addInterior(i)}}return e}}]),e}(),z=function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D.compare;t(this,e),this.queue=n,this.tree=new h(r),this.segments=[]}return r(e,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var r=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!r)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");var i=r,o=r,s=void 0,a=void 0;while(void 0===s)i=this.tree.prev(i),null===i?s=null:void 0===i.key.consumedBy&&(s=i.key);while(void 0===a)o=this.tree.next(o),null===o?a=null:void 0===o.key.consumedBy&&(a=o.key);if(t.isLeft){var u=null;if(s){var c=s.getIntersection(e);if(null!==c&&(e.isAnEndpoint(c)||(u=c),!s.isAnEndpoint(c)))for(var l=this._splitSafely(s,c),h=0,f=l.length;h<f;h++)n.push(l[h])}var p=null;if(a){var d=a.getIntersection(e);if(null!==d&&(e.isAnEndpoint(d)||(p=d),!a.isAnEndpoint(d)))for(var g=this._splitSafely(a,d),v=0,y=g.length;v<y;v++)n.push(g[v])}if(null!==u||null!==p){var m=null;if(null===u)m=p;else if(null===p)m=u;else{var _=j.comparePoints(u,p);m=_<=0?u:p}this.queue.remove(e.rightSE),n.push(e.rightSE);for(var b=e.split(m),w=0,E=b.length;w<E;w++)n.push(b[w])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=s)}else{if(s&&a){var x=s.getIntersection(a);if(null!==x){if(!s.isAnEndpoint(x))for(var I=this._splitSafely(s,x),O=0,S=I.length;O<S;O++)n.push(I[O]);if(!a.isAnEndpoint(x))for(var C=this._splitSafely(a,x),T=0,N=C.length;T<N;T++)n.push(C[T])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.insert(t),r}}]),e}(),W="undefined"!==typeof e&&Object({VUE_APP_IS_EMULATOR:"",NODE_ENV:"production",BASE_URL:"/"}).POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,K="undefined"!==typeof e&&Object({VUE_APP_IS_EMULATOR:"",NODE_ENV:"production",BASE_URL:"/"}).POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,H=function(){function e(){t(this,e)}return r(e,[{key:"run",value:function(t,e,n){Y.type=t,O.reset();for(var r=[new U(e,!0)],i=0,o=n.length;i<o;i++)r.push(new U(n[i],!1));if(Y.numMultiPolys=r.length,"difference"===Y.type){var s=r[0],a=1;while(a<r.length)null!==_(r[a].bbox,s.bbox)?a++:r.splice(a,1)}if("intersection"===Y.type)for(var u=0,c=r.length;u<c;u++)for(var l=r[u],f=u+1,p=r.length;f<p;f++)if(null===_(l.bbox,r[f].bbox))return[];for(var d=new h(j.compare),g=0,v=r.length;g<v;g++)for(var y=r[g].getSweepEvents(),m=0,b=y.length;m<b;m++)if(d.insert(y[m]),d.size>W)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");var w=new z(d),E=d.size,x=d.pop();while(x){var I=x.key;if(d.size===E){var S=I.segment;throw new Error("Unable to pop() ".concat(I.isLeft?"left":"right"," SweepEvent ")+"[".concat(I.point.x,", ").concat(I.point.y,"] from segment #").concat(S.id," ")+"[".concat(S.leftSE.point.x,", ").concat(S.leftSE.point.y,"] -> ")+"[".concat(S.rightSE.point.x,", ").concat(S.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(d.size>W)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(w.segments.length>K)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var C=w.process(I),T=0,N=C.length;T<N;T++){var k=C[T];void 0===k.consumedBy&&d.insert(k)}E=d.size,x=d.pop()}O.reset();var A=B.factory(w.segments),P=new G(A);return P.getGeom()}}]),e}(),Y=new H,X=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Y.run("union",t,n)},$=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Y.run("intersection",t,n)},Q=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Y.run("xor",t,n)},J=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Y.run("difference",t,n)},Z={union:X,intersection:$,xor:Q,difference:J};return Z}))}).call(this,n("4362"))},dd40:function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},dd76:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return o})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return a}));class r{static innerWidth(t){let e=t.offsetWidth,n=getComputedStyle(t);return e+=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight),e}static width(t){let e=t.offsetWidth,n=getComputedStyle(t);return e-=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight),e}static getWindowScrollTop(){let t=document.documentElement;return(window.pageYOffset||t.scrollTop)-(t.clientTop||0)}static getWindowScrollLeft(){let t=document.documentElement;return(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}static getOuterWidth(t,e){if(t){let n=t.offsetWidth;if(e){let e=getComputedStyle(t);n+=parseFloat(e.marginLeft)+parseFloat(e.marginRight)}return n}return 0}static getOuterHeight(t,e){if(t){let n=t.offsetHeight;if(e){let e=getComputedStyle(t);n+=parseFloat(e.marginTop)+parseFloat(e.marginBottom)}return n}return 0}static getClientHeight(t,e){if(t){let n=t.clientHeight;if(e){let e=getComputedStyle(t);n+=parseFloat(e.marginTop)+parseFloat(e.marginBottom)}return n}return 0}static getViewport(){let t=window,e=document,n=e.documentElement,r=e.getElementsByTagName("body")[0],i=t.innerWidth||n.clientWidth||r.clientWidth,o=t.innerHeight||n.clientHeight||r.clientHeight;return{width:i,height:o}}static getOffset(t){var e=t.getBoundingClientRect();return{top:e.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static index(t){let e=t.parentNode.childNodes,n=0;for(var r=0;r<e.length;r++){if(e[r]===t)return n;1===e[r].nodeType&&n++}return-1}static addMultipleClasses(t,e){if(t.classList){let n=e.split(" ");for(let e=0;e<n.length;e++)t.classList.add(n[e])}else{let n=e.split(" ");for(let e=0;e<n.length;e++)t.className+=" "+n[e]}}static addClass(t,e){t.classList?t.classList.add(e):t.className+=" "+e}static removeClass(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}static hasClass(t,e){return!!t&&(t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className))}static find(t,e){return t.querySelectorAll(e)}static findSingle(t,e){return t.querySelector(e)}static getHeight(t){let e=t.offsetHeight,n=getComputedStyle(t);return e-=parseFloat(n.paddingTop)+parseFloat(n.paddingBottom)+parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth),e}static getWidth(t){let e=t.offsetWidth,n=getComputedStyle(t);return e-=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight)+parseFloat(n.borderLeftWidth)+parseFloat(n.borderRightWidth),e}static absolutePosition(t,e){let n,r,i=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),o=i.height,s=i.width,a=e.offsetHeight,u=e.offsetWidth,c=e.getBoundingClientRect(),l=this.getWindowScrollTop(),h=this.getWindowScrollLeft(),f=this.getViewport();c.top+a+o>f.height?(n=c.top+l-o,t.style.transformOrigin="bottom",n<0&&(n=l)):(n=a+c.top+l,t.style.transformOrigin="top"),r=c.left+s>f.width?Math.max(0,c.left+h+u-s):c.left+h,t.style.top=n+"px",t.style.left=r+"px"}static relativePosition(t,e){let n=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t);const r=e.offsetHeight,i=e.getBoundingClientRect(),o=this.getViewport();let s,a;i.top+r+n.height>o.height?(s=-1*n.height,t.style.transformOrigin="bottom",i.top+s<0&&(s=-1*i.top)):(s=r,t.style.transformOrigin="top"),a=n.width>o.width?-1*i.left:i.left+n.width>o.width?-1*(i.left+n.width-o.width):0,t.style.top=s+"px",t.style.left=a+"px"}static getParents(t,e=[]){return null===t["parentNode"]?e:this.getParents(t.parentNode,e.concat([t.parentNode]))}static getScrollableParents(t){let e=[];if(t){let n=this.getParents(t);const r=/(auto|scroll)/,i=t=>{let e=window["getComputedStyle"](t,null);return r.test(e.getPropertyValue("overflow"))||r.test(e.getPropertyValue("overflowX"))||r.test(e.getPropertyValue("overflowY"))};for(let t of n){let n=1===t.nodeType&&t.dataset["scrollselectors"];if(n){let r=n.split(",");for(let n of r){let r=this.findSingle(t,n);r&&i(r)&&e.push(r)}}9!==t.nodeType&&i(t)&&e.push(t)}}return e}static getHiddenElementOuterHeight(t){t.style.visibility="hidden",t.style.display="block";let e=t.offsetHeight;return t.style.display="none",t.style.visibility="visible",e}static getHiddenElementOuterWidth(t){t.style.visibility="hidden",t.style.display="block";let e=t.offsetWidth;return t.style.display="none",t.style.visibility="visible",e}static getHiddenElementDimensions(t){var e={};return t.style.visibility="hidden",t.style.display="block",e.width=t.offsetWidth,e.height=t.offsetHeight,t.style.display="none",t.style.visibility="visible",e}static fadeIn(t,e){t.style.opacity=0;var n=+new Date,r=0,i=function(){r=+t.style.opacity+((new Date).getTime()-n)/e,t.style.opacity=r,n=+new Date,+r<1&&(window.requestAnimationFrame&&requestAnimationFrame(i)||setTimeout(i,16))};i()}static fadeOut(t,e){var n=1,r=50,i=e,o=r/i;let s=setInterval(()=>{n-=o,n<=0&&(n=0,clearInterval(s)),t.style.opacity=n},r)}static getUserAgent(){return navigator.userAgent}static appendChild(t,e){if(this.isElement(e))e.appendChild(t);else{if(!e.el||!e.elElement)throw new Error("Cannot append "+e+" to "+t);e.elElement.appendChild(t)}}static scrollInView(t,e){let n=getComputedStyle(t).getPropertyValue("borderTopWidth"),r=n?parseFloat(n):0,i=getComputedStyle(t).getPropertyValue("paddingTop"),o=i?parseFloat(i):0,s=t.getBoundingClientRect(),a=e.getBoundingClientRect(),u=a.top+document.body.scrollTop-(s.top+document.body.scrollTop)-r-o,c=t.scrollTop,l=t.clientHeight,h=this.getOuterHeight(e);u<0?t.scrollTop=c+u:u+h>l&&(t.scrollTop=c+u-l+h)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document["selection"]&&document["selection"].empty)try{document["selection"].empty()}catch(t){}}static calculateScrollbarWidth(){if(null!=this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let t=document.createElement("div");t.className="p-scrollbar-measure",document.body.appendChild(t);let e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),this.calculatedScrollbarWidth=e,e}static getBrowser(){if(!this.browser){let t=this.resolveUserAgent();this.browser={},t.browser&&(this.browser[t.browser]=!0,this.browser["version"]=t.version),this.browser["chrome"]?this.browser["webkit"]=!0:this.browser["webkit"]&&(this.browser["safari"]=!0)}return this.browser}static resolveUserAgent(){let t=navigator.userAgent.toLowerCase(),e=/(chrome)[ ]([\w.]+)/.exec(t)||/(webkit)[ ]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ ]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}}static isVisible(t){return null!=t.offsetParent}static invokeElementMethod(t,e,n){t[e].apply(t,n)}static getFocusableElements(t){let e=r.find(t,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])'),n=[];for(let r of e)"none"!=getComputedStyle(r).display&&"hidden"!=getComputedStyle(r).visibility&&n.push(r);return n}static isClickable(t){const e=t.nodeName,n=t.parentElement&&t.parentElement.nodeName;return"INPUT"==e||"BUTTON"==e||"A"==e||"INPUT"==n||"BUTTON"==n||"A"==n||this.hasClass(t,"p-button")||this.hasClass(t.parentElement,"p-button")||this.hasClass(t.parentElement,"p-checkbox")||this.hasClass(t.parentElement,"p-radiobutton")}static applyStyle(t,e){if("string"===typeof e)t.style.cssText=this.style;else for(let n in this.style)t.style[n]=e[n]}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window["MSStream"]}static isAndroid(){return/(android)/i.test(navigator.userAgent)}}class i{constructor(t,e=(()=>{})){this.element=t,this.listener=e}bindScrollListener(){this.scrollableParents=r.getScrollableParents(this.element);for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}class o{static equals(t,e,n){return n?this.resolveFieldData(t,n)===this.resolveFieldData(e,n):this.deepEquals(t,e)}static deepEquals(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var n,r,i,o=Array.isArray(t),s=Array.isArray(e);if(o&&s){if(r=t.length,r!=e.length)return!1;for(n=r;0!==n--;)if(!this.deepEquals(t[n],e[n]))return!1;return!0}if(o!=s)return!1;var a=t instanceof Date,u=e instanceof Date;if(a!=u)return!1;if(a&&u)return t.getTime()==e.getTime();var c=t instanceof RegExp,l=e instanceof RegExp;if(c!=l)return!1;if(c&&l)return t.toString()==e.toString();var h=Object.keys(t);if(r=h.length,r!==Object.keys(e).length)return!1;for(n=r;0!==n--;)if(!Object.prototype.hasOwnProperty.call(e,h[n]))return!1;for(n=r;0!==n--;)if(i=h[n],!this.deepEquals(t[i],e[i]))return!1;return!0}return t!==t&&e!==e}static resolveFieldData(t,e){if(t&&Object.keys(t).length&&e){if(this.isFunction(e))return e(t);if(-1===e.indexOf("."))return t[e];{let i=e.split("."),o=t;for(var n=0,r=i.length;n<r;++n){if(null==o)return null;o=o[i[n]]}return o}}return null}static isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)}static filter(t,e,n){var r=[];if(t)for(let i of t)for(let t of e)if(String(this.resolveFieldData(i,t)).toLowerCase().indexOf(n.toLowerCase())>-1){r.push(i);break}return r}static reorderArray(t,e,n){let r;if(t&&e!==n){if(n>=t.length){r=n-t.length;while(1+r--)t.push(void 0)}t.splice(n,0,t.splice(e,1)[0])}}static findIndexInList(t,e){let n=-1;if(e)for(let r=0;r<e.length;r++)if(e[r]===t){n=r;break}return n}static contains(t,e){if(null!=t&&e&&e.length)for(let n of e)if(this.equals(t,n))return!0;return!1}static insertIntoOrderedArray(t,e,n,r){if(n.length>0){let i=!1;for(let o=0;o<n.length;o++){let s=this.findIndexInList(n[o],r);if(s>e){n.splice(o,0,t),i=!0;break}}i||n.push(t)}else n.push(t)}static removeAccents(t){return t&&t.search(/[\xC0-\xFF]/g)>-1&&(t=t.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),t}}function s(){let t=[];const e=(e,n)=>{let r=t.length>0?t[t.length-1]:{key:e,value:n},i=r.value+(r.key===e?0:n)+1;return t.push({key:e,value:i}),i},n=e=>{t=t.filter(t=>t.value!==e)},r=()=>t.length>0?t[t.length-1].value:0,i=t=>t&&parseInt(t.style.zIndex,10)||0;return{get:i,set:(t,n,r)=>{n&&(n.style.zIndex=String(e(t,r)))},clear:t=>{t&&(n(i(t)),t.style.zIndex="")},getCurrent:()=>r()}}var a=s(),u=0;function c(t="pv_id_"){return u++,`${t}${u}`}function l(){const t=new Map;return{on(e,n){let r=t.get(e);r?r.push(n):r=[n],t.set(e,r)},off(e,n){let r=t.get(e);r&&r.splice(r.indexOf(n)>>>0,1)},emit(e,n){let r=t.get(e);r&&r.slice().map(t=>{t(n)})}}}},ddb0:function(t,e,n){var r=n("da84"),i=n("fdbc"),o=n("e260"),s=n("9112"),a=n("b622"),u=a("iterator"),c=a("toStringTag"),l=o.values;for(var h in i){var f=r[h],p=f&&f.prototype;if(p){if(p[u]!==l)try{s(p,u,l)}catch(g){p[u]=l}if(p[c]||s(p,c,h),i[h])for(var d in o)if(p[d]!==o[d])try{s(p,d,o[d])}catch(g){p[d]=o[d]}}}},df75:function(t,e,n){var r=n("ca84"),i=n("7839");t.exports=Object.keys||function(t){return r(t,i)}},df7c:function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t){"string"!==typeof t&&(t+="");var e,n=0,r=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){n=e+1;break}}else-1===r&&(i=!1,r=e+1);return-1===r?"":t.slice(n,r)}function i(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var s=o>=0?arguments[o]:t.cwd();if("string"!==typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,r="/"===s.charAt(0))}return e=n(i(e.split("/"),(function(t){return!!t})),!r).join("/"),(r?"/":"")+e||"."},e.normalize=function(t){var r=e.isAbsolute(t),s="/"===o(t,-1);return t=n(i(t.split("/"),(function(t){return!!t})),!r).join("/"),t||r||(t="."),t&&s&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(i(t,(function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length;e++)if(""!==t[e])break;for(var n=t.length-1;n>=0;n--)if(""!==t[n])break;return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),o=r(n.split("/")),s=Math.min(i.length,o.length),a=s,u=0;u<s;u++)if(i[u]!==o[u]){a=u;break}var c=[];for(u=a;u<i.length;u++)c.push("..");return c=c.concat(o.slice(a)),c.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!==typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,o=t.length-1;o>=1;--o)if(e=t.charCodeAt(o),47===e){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=r(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!==typeof t&&(t+="");for(var e=-1,n=0,r=-1,i=!0,o=0,s=t.length-1;s>=0;--s){var a=t.charCodeAt(s);if(47!==a)-1===r&&(i=!1,r=s+1),46===a?-1===e?e=s:1!==o&&(o=1):-1!==e&&(o=-1);else if(!i){n=s+1;break}}return-1===e||-1===r||0===o||1===o&&e===r-1&&e===n+1?"":t.slice(e,r)};var o="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n("4362"))},e01a:function(t,e,n){"use strict";var r=n("23e7"),i=n("83ab"),o=n("da84"),s=n("5135"),a=n("861d"),u=n("9bf2").f,c=n("e893"),l=o.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var h={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new l(t):void 0===t?l():l(t);return""===t&&(h[e]=!0),e};c(f,l);var p=f.prototype=l.prototype;p.constructor=f;var d=p.toString,g="Symbol(test)"==String(l("test")),v=/^Symbol\((.*)\)[^)]+$/;u(p,"description",{configurable:!0,get:function(){var t=a(this)?this.valueOf():this,e=d.call(t);if(s(h,t))return"";var n=g?e.slice(7,-1):e.replace(v,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:f})}},e163:function(t,e,n){var r=n("5135"),i=n("7b0b"),o=n("f772"),s=n("e177"),a=o("IE_PROTO"),u=Object.prototype;t.exports=s?Object.getPrototypeOf:function(t){return t=i(t),r(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},e177:function(t,e,n){var r=n("d039");t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},e1ae:function(t,e,n){},e260:function(t,e,n){"use strict";var r=n("fc6a"),i=n("44d2"),o=n("3f8c"),s=n("69f3"),a=n("7dd0"),u="Array Iterator",c=s.set,l=s.getterFor(u);t.exports=a(Array,"Array",(function(t,e){c(this,{type:u,target:r(t),index:0,kind:e})}),(function(){var t=l(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},e283:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return oc})),n.d(e,"b",(function(){return Qa})),n.d(e,"c",(function(){return Ga})),n.d(e,"d",(function(){return fc})),n.d(e,"e",(function(){return uc})),n.d(e,"f",(function(){return I})),n.d(e,"g",(function(){return cc})),n.d(e,"h",(function(){return yc})),n.d(e,"i",(function(){return vc})),n.d(e,"j",(function(){return mc})),n.d(e,"k",(function(){return ic})),n.d(e,"l",(function(){return Sc})),n.d(e,"m",(function(){return bc})),n.d(e,"n",(function(){return xc})),n.d(e,"o",(function(){return lc})),n.d(e,"p",(function(){return wc})),n.d(e,"q",(function(){return Oc})),n.d(e,"r",(function(){return Va})),n.d(e,"s",(function(){return sc})),n.d(e,"t",(function(){return Ic}));var r=n("9ab4"),i=n("a8e9"),o=n("abfd"),s=n("c7b2"),a=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();a.o=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var u={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},c=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(r["__extends"])(e,t),e}(Error),l=new o["Logger"]("@firebase/firestore");function h(){return l.logLevel}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=o["LogLevel"].DEBUG){var i=e.map(g);l.debug.apply(l,Object(r["__spreadArray"])(["Firestore (8.7.0): "+t],i))}}function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=o["LogLevel"].ERROR){var i=e.map(g);l.error.apply(l,Object(r["__spreadArray"])(["Firestore (8.7.0): "+t],i))}}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=o["LogLevel"].WARN){var i=e.map(g);l.warn.apply(l,Object(r["__spreadArray"])(["Firestore (8.7.0): "+t],i))}}function g(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.7.0) INTERNAL ASSERTION FAILED: "+t;throw p(e),new Error(e)}function y(t,e){t||v()}function m(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var b=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=_(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function w(t,e){return t<e?-1:t>e?1:0}function E(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function x(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var I=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new c(u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new c(u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new c(u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new c(u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?w(this.nanoseconds,t.nanoseconds):w(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),O=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new I(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function C(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function T(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var N=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&v(),void 0===n?n=t.length-e:n>t.length-e&&v(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r["__extends"])(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new c(u.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(N),A=/^[_a-zA-Z][_a-zA-Z0-9]*$/,P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r["__extends"])(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return A.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new c(u.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new c(u.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var l=t[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new c(u.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new c(u.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(N),R=function(){function t(t){this.fields=t,t.sort(P.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return E(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),L=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return w(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();L.EMPTY_BYTE_STRING=new L("");var j=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function M(t){if(y(!!t),"string"==typeof t){var e=0,n=j.exec(t);if(y(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:D(t.seconds),nanos:D(t.nanos)}}function D(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function F(t){return"string"==typeof t?L.fromBase64String(t):L.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function U(t){var e=t.mapValue.fields.__previous_value__;return q(e)?U(e):e}function B(t){var e=M(t.mapValue.fields.__local_write_time__.timestampValue);return new I(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V(t){return null==t}function G(t){return 0===t&&1/t==-1/0}function z(t){return"number"==typeof t&&Number.isInteger(t)&&!G(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var W=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(k.fromString(e))},t.fromName=function(e){return new t(k.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===k.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return k.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new k(e.slice()))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?q(t)?4:10:v()}function H(t,e){var n=K(t);if(n!==K(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return B(t).isEqual(B(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=M(t.timestampValue),r=M(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return F(t.bytesValue).isEqual(F(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return D(t.geoPointValue.latitude)===D(e.geoPointValue.latitude)&&D(t.geoPointValue.longitude)===D(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return D(t.integerValue)===D(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=D(t.doubleValue),r=D(e.doubleValue);return n===r?G(n)===G(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return E(t.arrayValue.values||[],e.arrayValue.values||[],H);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(S(n)!==S(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!H(n[i],r[i])))return!1;return!0}(t,e);default:return v()}}function Y(t,e){return void 0!==(t.values||[]).find((function(t){return H(t,e)}))}function X(t,e){var n=K(t),r=K(e);if(n!==r)return w(n,r);switch(n){case 0:return 0;case 1:return w(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=D(t.integerValue||t.doubleValue),r=D(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return $(t.timestampValue,e.timestampValue);case 4:return $(B(t),B(e));case 5:return w(t.stringValue,e.stringValue);case 6:return function(t,e){var n=F(t),r=F(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=w(n[i],r[i]);if(0!==o)return o}return w(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=w(D(t.latitude),D(e.latitude));return 0!==n?n:w(D(t.longitude),D(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=X(n[i],r[i]);if(o)return o}return w(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=w(r[s],o[s]);if(0!==a)return a;var u=X(n[r[s]],i[o[s]]);if(0!==u)return u}return w(r.length,o.length)}(t.mapValue,e.mapValue);default:throw v()}}function $(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return w(t,e);var n=M(t),r=M(e),i=w(n.seconds,r.seconds);return 0!==i?i:w(n.nanos,r.nanos)}function Q(t){return J(t)}function J(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=M(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?F(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,W.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=J(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+J(t.fields[o])}return e+"}"}(t.mapValue):v();var e,n}function Z(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function tt(t){return!!t&&"integerValue"in t}function et(t){return!!t&&"arrayValue"in t}function nt(t){return!!t&&"nullValue"in t}function rt(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function it(t){return!!t&&"mapValue"in t}function ot(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},M(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return C(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=ot(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ot(t.arrayValue.values[r]);return n}return Object.assign({},t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!it(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ot(e)},t.prototype.setAll=function(t){var e=this,n=P.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=ot(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());it(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return H(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];it(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){C(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(ot(this.value))},t}();function at(t){var e=[];return C(t.fields,(function(t,n){var r=new P([t]);if(it(n)){var i=at(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new R(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var ut=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,O.min(),st.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,st.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,st.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=st.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=st.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),ct=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new ct(t,e,n,r,i,o,s)}function ht(t){var e=m(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Q(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),V(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=It(e.startAt)),e.endAt&&(n+="|ub:",n+=It(e.endAt)),e.h=n}return e.h}function ft(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!St(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!H(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Tt(t.startAt,e.startAt)&&Tt(t.endAt,e.endAt)}function pt(t){return W.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var dt=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(r["__extends"])(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new gt(t,n,r):"array-contains"===n?new _t(t,r):"in"===n?new bt(t,r):"not-in"===n?new wt(t,r):"array-contains-any"===n?new Et(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new vt(t,n):new yt(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(X(e,this.value)):null!==e&&K(this.value)===K(e)&&this.m(X(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return v()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),gt=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=W.fromName(r.referenceValue),i}return Object(r["__extends"])(e,t),e.prototype.matches=function(t){var e=W.comparator(t.key,this.key);return this.m(e)},e}(dt),vt=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=mt("in",n),r}return Object(r["__extends"])(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(dt),yt=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=mt("not-in",n),r}return Object(r["__extends"])(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(dt);function mt(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return W.fromName(t.referenceValue)}))}var _t=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(r["__extends"])(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return et(e)&&Y(e.arrayValue,this.value)},e}(dt),bt=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(r["__extends"])(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Y(this.value.arrayValue,e)},e}(dt),wt=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(r["__extends"])(e,t),e.prototype.matches=function(t){if(Y(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Y(this.value.arrayValue,e)},e}(dt),Et=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(r["__extends"])(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!et(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Y(e.value.arrayValue,t)}))},e}(dt),xt=function(t,e){this.position=t,this.before=e};function It(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Q(t)})).join(",")}var Ot=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function St(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Ct(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?W.comparator(W.fromName(s.referenceValue),n.key):X(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Tt(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!H(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt};function kt(t,e,n,r,i,o,s,a){return new Nt(t,e,n,r,i,o,s,a)}function At(t){return new Nt(t)}function Pt(t){return!V(t.limit)&&"F"===t.limitType}function Rt(t){return!V(t.limit)&&"L"===t.limitType}function Lt(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function jt(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Mt(t){return null!==t.collectionGroup}function Dt(t){var e=m(t);if(null===e.p){e.p=[];var n=jt(e),r=Lt(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Ot(n)),e.p.push(new Ot(P.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Ot(P.keyField(),u))}}}return e.p}function Ft(t){var e=m(t);if(!e.T)if("F"===e.limitType)e.T=lt(e.path,e.collectionGroup,Dt(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Dt(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Ot(o.field,s))}var a=e.endAt?new xt(e.endAt.position,!e.endAt.before):null,u=e.startAt?new xt(e.startAt.position,!e.startAt.before):null;e.T=lt(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.T}function qt(t,e,n){return new Nt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ut(t,e){return ft(Ft(t),Ft(e))&&t.limitType===e.limitType}function Bt(t){return ht(Ft(t))+"|lt:"+t.limitType}function Vt(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Q(e.value);var e})).join(", ")+"]"),V(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+It(t.startAt)),t.endAt&&(e+=", endAt: "+It(t.endAt)),"Target("+e+")"}(Ft(t))+"; limitType="+t.limitType+")"}function Gt(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):W.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Ct(t.startAt,Dt(t),e))&&(!t.endAt||!Ct(t.endAt,Dt(t),e))}(t,e)}function zt(t){return function(e,n){for(var r=!1,i=0,o=Dt(t);i<o.length;i++){var s=o[i],a=Wt(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Wt(t,e,n){var r=t.field.isKeyField()?W.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?X(r,i):v()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return v()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:G(e)?"-0":e}}function Ht(t){return{integerValue:""+t}}function Yt(t,e){return z(e)?Ht(e):Kt(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt=function(){this._=void 0};function $t(t,e,n){return t instanceof Zt?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof te?ee(t,e):t instanceof ne?re(t,e):function(t,e){var n=Jt(t,e),r=oe(n)+oe(t.A);return tt(n)&&tt(t.A)?Ht(r):Kt(t.R,r)}(t,e)}function Qt(t,e,n){return t instanceof te?ee(t,e):t instanceof ne?re(t,e):n}function Jt(t,e){return t instanceof ie?tt(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Zt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r["__extends"])(e,t),e}(Xt),te=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(r["__extends"])(e,t),e}(Xt);function ee(t,e){for(var n=se(e),r=function(t){n.some((function(e){return H(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ne=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(r["__extends"])(e,t),e}(Xt);function re(t,e){for(var n=se(e),r=function(t){n=n.filter((function(e){return!H(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ie=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(r["__extends"])(e,t),e}(Xt);function oe(t){return D(t.integerValue||t.doubleValue)}function se(t){return et(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae=function(t,e){this.field=t,this.transform=e},ue=function(t,e){this.version=t,this.transformResults=e},ce=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function le(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var he=function(){};function fe(t,e,n){t instanceof ye?function(t,e,n){var r=t.value.clone(),i=be(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof me?function(t,e,n){if(le(t.precondition,e)){var r=be(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(_e(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function pe(t,e,n){t instanceof ye?function(t,e,n){if(le(t.precondition,e)){var r=t.value.clone(),i=we(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(ve(e),r).setHasLocalMutations()}}(t,e,n):t instanceof me?function(t,e,n){if(le(t.precondition,e)){var r=we(t.fieldTransforms,n,e),i=e.data;i.setAll(_e(t)),i.setAll(r),e.convertToFoundDocument(ve(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){le(t.precondition,e)&&e.convertToNoDocument(O.min())}(t,e)}function de(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Jt(o.transform,s||null);null!=a&&(null==n&&(n=st.empty()),n.set(o.field,a))}return n||null}function ge(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&E(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof te&&e instanceof te||t instanceof ne&&e instanceof ne?E(t.elements,e.elements,H):t instanceof ie&&e instanceof ie?H(t.A,e.A):t instanceof Zt&&e instanceof Zt}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function ve(t){return t.isFoundDocument()?t.version:O.min()}var ye=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(r["__extends"])(e,t),e}(he),me=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(r["__extends"])(e,t),e}(he);function _e(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function be(t,e,n){var r=new Map;y(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Qt(s,a,n[i]))}return r}function we(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,$t(a,u,e))}return r}var Ee,xe,Ie=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(r["__extends"])(e,t),e}(he),Oe=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(r["__extends"])(e,t),e}(he),Se=function(t){this.count=t};function Ce(t){switch(t){case u.OK:return v();case u.CANCELLED:case u.UNKNOWN:case u.DEADLINE_EXCEEDED:case u.RESOURCE_EXHAUSTED:case u.INTERNAL:case u.UNAVAILABLE:case u.UNAUTHENTICATED:return!1;case u.INVALID_ARGUMENT:case u.NOT_FOUND:case u.ALREADY_EXISTS:case u.PERMISSION_DENIED:case u.FAILED_PRECONDITION:case u.ABORTED:case u.OUT_OF_RANGE:case u.UNIMPLEMENTED:case u.DATA_LOSS:return!0;default:return v()}}function Te(t){if(void 0===t)return p("GRPC error has no .code"),u.UNKNOWN;switch(t){case Ee.OK:return u.OK;case Ee.CANCELLED:return u.CANCELLED;case Ee.UNKNOWN:return u.UNKNOWN;case Ee.DEADLINE_EXCEEDED:return u.DEADLINE_EXCEEDED;case Ee.RESOURCE_EXHAUSTED:return u.RESOURCE_EXHAUSTED;case Ee.INTERNAL:return u.INTERNAL;case Ee.UNAVAILABLE:return u.UNAVAILABLE;case Ee.UNAUTHENTICATED:return u.UNAUTHENTICATED;case Ee.INVALID_ARGUMENT:return u.INVALID_ARGUMENT;case Ee.NOT_FOUND:return u.NOT_FOUND;case Ee.ALREADY_EXISTS:return u.ALREADY_EXISTS;case Ee.PERMISSION_DENIED:return u.PERMISSION_DENIED;case Ee.FAILED_PRECONDITION:return u.FAILED_PRECONDITION;case Ee.ABORTED:return u.ABORTED;case Ee.OUT_OF_RANGE:return u.OUT_OF_RANGE;case Ee.UNIMPLEMENTED:return u.UNIMPLEMENTED;case Ee.DATA_LOSS:return u.DATA_LOSS;default:return v()}}(xe=Ee||(Ee={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ne=function(){function t(t,e){this.comparator=t,this.root=e||Ae.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ae.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ae.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new ke(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new ke(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new ke(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new ke(this.root,t,this.comparator,!0)},t}(),ke=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Ae=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw v();if(this.right.isRed())throw v();var t=this.left.check();if(t!==this.right.check())throw v();return t+(this.isRed()?0:1)},t}();Ae.EMPTY=null,Ae.RED=!0,Ae.BLACK=!1,Ae.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw v()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw v()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw v()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw v()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw v()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ae(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Pe=function(){function t(t){this.comparator=t,this.data=new Ne(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Re(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Re(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Re=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Le=new Ne(W.comparator);function je(){return Le}var Me=new Ne(W.comparator);function De(){return Me}var Fe=new Ne(W.comparator);function qe(){return Fe}var Ue=new Pe(W.comparator);function Be(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Ue,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ve=new Pe(w);function Ge(){return Ve}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,We.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(O.min(),r,Ge(),je(),Be())},t}(),We=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(L.EMPTY_BYTE_STRING,n,Be(),Be(),Be())},t}(),Ke=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},He=function(t,e){this.targetId=t,this.V=e},Ye=function(t,e,n,r){void 0===n&&(n=L.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Xe=function(){function t(){this.S=0,this.D=Je(),this.C=L.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Be(),e=Be(),n=Be();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:v()}})),new We(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Je()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),$e=function(){function t(t){this.W=t,this.G=new Map,this.H=je(),this.J=Qe(),this.Y=new Pe(w)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:v()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(pt(i))if(0===n){var o=new W(i.path);this.tt(e,o,ut.newNoDocument(o,O.min()))}else y(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&pt(o.target)){var s=new W(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,ut.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=Be();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new ze(t,n,this.Y,this.H,r);return this.H=je(),this.J=Qe(),this.Y=new Pe(w),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Xe,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Pe(w),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||f("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Xe),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Qe(){return new Ne(W.comparator)}function Je(){return new Ne(W.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze={asc:"ASCENDING",desc:"DESCENDING"},tn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},en=function(t,e){this.databaseId=t,this.I=e};function nn(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function rn(t,e){return t.I?e.toBase64():e.toUint8Array()}function on(t,e){return nn(t,e.toTimestamp())}function sn(t){return y(!!t),O.fromTimestamp(function(t){var e=M(t);return new I(e.seconds,e.nanos)}(t))}function an(t,e){return function(t){return new k(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function un(t){var e=k.fromString(t);return y(Pn(e)),e}function cn(t,e){return an(t.databaseId,e.path)}function ln(t,e){var n=un(e);if(n.get(1)!==t.databaseId.projectId)throw new c(u.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new c(u.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(dn(n))}function hn(t,e){return an(t.databaseId,e)}function fn(t){var e=un(t);return 4===e.length?k.emptyPath():dn(e)}function pn(t){return new k(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function dn(t){return y(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function gn(t,e,n){return{name:cn(t,e),fields:n.value.mapValue.fields}}function vn(t,e,n){var r=ln(t,e.name),i=sn(e.updateTime),o=new st({mapValue:{fields:e.fields}}),s=ut.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function yn(t,e){var n;if(e instanceof ye)n={update:gn(t,e.key,e.value)};else if(e instanceof Ie)n={delete:cn(t,e.key)};else if(e instanceof me)n={update:gn(t,e.key,e.data),updateMask:An(e.fieldMask)};else{if(!(e instanceof Oe))return v();n={verify:cn(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Zt)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof te)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ne)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ie)return{fieldPath:e.field.canonicalString(),increment:n.A};throw v()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:on(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:v()}(t,e.precondition)),n}function mn(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?ce.updateTime(sn(t.updateTime)):void 0!==t.exists?ce.exists(t.exists):ce.none()}(e.currentDocument):ce.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)y("REQUEST_TIME"===e.setToServerValue),n=new Zt;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new te(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new ne(i)}else"increment"in e?n=new ie(t,e.increment):v();var o=P.fromServerFormat(e.fieldPath);return new ae(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=ln(t,e.update.name),o=new st({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new R(e.map((function(t){return P.fromServerFormat(t)})))}(e.updateMask);return new me(i,o,s,n,r)}return new ye(i,o,n,r)}if(e.delete){var a=ln(t,e.delete);return new Ie(a,n)}if(e.verify){var u=ln(t,e.verify);return new Oe(u,n)}return v()}function _n(t,e){return{documents:[hn(t,e.path)]}}function bn(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=hn(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=hn(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(rt(t.value))return{unaryFilter:{field:Cn(t.field),op:"IS_NAN"}};if(nt(t.value))return{unaryFilter:{field:Cn(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(rt(t.value))return{unaryFilter:{field:Cn(t.field),op:"IS_NOT_NAN"}};if(nt(t.value))return{unaryFilter:{field:Cn(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cn(t.field),op:Sn(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Cn(t.field),direction:On(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||V(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=xn(e.startAt)),e.endAt&&(n.structuredQuery.endAt=xn(e.endAt)),n}function wn(t){var e=fn(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){y(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=En(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new Ot(Tn(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return V(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=In(n.startAt));var l=null;return n.endAt&&(l=In(n.endAt)),kt(e,i,a,s,u,"F",c,l)}function En(t){return t?void 0!==t.unaryFilter?[kn(t)]:void 0!==t.fieldFilter?[Nn(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return En(t)})).reduce((function(t,e){return t.concat(e)})):v():[]}function xn(t){return{before:t.before,values:t.position}}function In(t){var e=!!t.before,n=t.values||[];return new xt(n,e)}function On(t){return Ze[t]}function Sn(t){return tn[t]}function Cn(t){return{fieldPath:t.canonicalString()}}function Tn(t){return P.fromServerFormat(t.fieldPath)}function Nn(t){return dt.create(Tn(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return v()}}(t.fieldFilter.op),t.fieldFilter.value)}function kn(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Tn(t.unaryFilter.field);return dt.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Tn(t.unaryFilter.field);return dt.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Tn(t.unaryFilter.field);return dt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Tn(t.unaryFilter.field);return dt.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return v()}}function An(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Pn(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=jn(e)),e=Ln(t.get(n),e);return jn(e)}function Ln(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function jn(t){return t+""}function Mn(t){var e=t.length;if(y(e>=2),2===e)return y(""===t.charAt(0)&&""===t.charAt(1)),k.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&v(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:v()}o=s+2}return new k(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dn=function(t,e){this.seconds=t,this.nanoseconds=e},Fn=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Fn.store="owner",Fn.key="owner";var qn=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};qn.store="mutationQueues",qn.keyPath="userId";var Un=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Un.store="mutations",Un.keyPath="batchId",Un.userMutationsIndex="userMutationsIndex",Un.userMutationsKeyPath=["userId","batchId"];var Bn=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Rn(e)]},t.key=function(t,e,n){return[t,Rn(e),n]},t}();Bn.store="documentMutations",Bn.PLACEHOLDER=new Bn;var Vn=function(t,e){this.path=t,this.readTime=e},Gn=function(t,e){this.path=t,this.version=e},zn=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};zn.store="remoteDocuments",zn.readTimeIndex="readTimeIndex",zn.readTimeIndexPath="readTime",zn.collectionReadTimeIndex="collectionReadTimeIndex",zn.collectionReadTimeIndexPath=["parentPath","readTime"];var Wn=function(t){this.byteSize=t};Wn.store="remoteDocumentGlobal",Wn.key="remoteDocumentGlobalKey";var Kn=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Kn.store="targets",Kn.keyPath="targetId",Kn.queryTargetsIndexName="queryTargetsIndex",Kn.queryTargetsKeyPath=["canonicalId","targetId"];var Hn=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Hn.store="targetDocuments",Hn.keyPath=["targetId","path"],Hn.documentTargetsIndex="documentTargetsIndex",Hn.documentTargetsKeyPath=["path","targetId"];var Yn=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Yn.key="targetGlobalKey",Yn.store="targetGlobal";var Xn=function(t,e){this.collectionId=t,this.parent=e};Xn.store="collectionParents",Xn.keyPath=["collectionId","parent"];var $n=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};$n.store="clientMetadata",$n.keyPath="clientId";var Qn=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Qn.store="bundles",Qn.keyPath="bundleId";var Jn=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Jn.store="namedQueries",Jn.keyPath="name";var Zn=Object(r["__spreadArray"])(Object(r["__spreadArray"])([],Object(r["__spreadArray"])(Object(r["__spreadArray"])([],Object(r["__spreadArray"])(Object(r["__spreadArray"])([],Object(r["__spreadArray"])(Object(r["__spreadArray"])([],[qn.store,Un.store,Bn.store,zn.store,Kn.store,Fn.store,Yn.store,Hn.store]),[$n.store])),[Wn.store])),[Xn.store])),[Qn.store,Jn.store]),tr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",er=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),nr=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},rr=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&v(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),ir=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new nr,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new ar(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=fr(e.target.error);n.ft.reject(new ar(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new ar(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(f("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new cr(e)},t}(),or=function(){function e(t,n,r){this.name=t,this.version=n,this.wt=r,12.2===e._t(Object(i["getUA"])())&&p("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(t){return f("SimpleDb","Removing database:",t),lr(window.indexedDB.deleteDatabase(t)).toPromise()},e.yt=function(){if("undefined"==typeof indexedDB)return!1;if(e.gt())return!0;var t=Object(i["getUA"])(),n=e._t(t),r=0<n&&n<10,o=e.Et(t),s=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||s)},e.gt=function(){var e;return"undefined"!=typeof t&&"YES"===(null===(e=Object({VUE_APP_IS_EMULATOR:"",NODE_ENV:"production",BASE_URL:"/"}))||void 0===e?void 0:e.Tt)},e.It=function(t,e){return t.store(e)},e._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.At=function(t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var e,n=this;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(f("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new ar(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new c(u.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new ar(t,n))},i.onupgradeneeded=function(t){f("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){f("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},e.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},e.prototype.runTransaction=function(t,e,n,i){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var o,s,a,u,c;return Object(r["__generator"])(this,(function(l){switch(l.label){case 0:o="readonly"===e,s=0,a=function(){var e,a,c,l,h;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:++s,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,u.At(t)];case 2:return u.db=r.sent(),e=ir.open(u.db,t,o?"readonly":"readwrite",n),a=i(e).catch((function(t){return e.abort(t),rr.reject(t)})).toPromise(),c={},a.catch((function(){})),[4,e.dt];case 3:return[2,(c.value=(r.sent(),a),c)];case 4:return l=r.sent(),h="FirebaseError"!==l.name&&s<3,f("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),u.close(),h?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}}))},u=this,l.label=1;case 1:return[5,a()];case 2:if("object"==typeof(c=l.sent()))return[2,c.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),sr=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return lr(this.Pt.delete())},t}(),ar=function(t){function e(e,n){var r=this;return(r=t.call(this,u.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(r["__extends"])(e,t),e}(c);function ur(t){return"IndexedDbTransactionError"===t.name}var cr=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(f("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(f("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),lr(n)},t.prototype.add=function(t){return f("SimpleDb","ADD",this.store.name,t,t),lr(this.store.add(t))},t.prototype.get=function(t){var e=this;return lr(this.store.get(t)).next((function(n){return void 0===n&&(n=null),f("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return f("SimpleDb","DELETE",this.store.name,t),lr(this.store.delete(t))},t.prototype.count=function(){return f("SimpleDb","COUNT",this.store.name),lr(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){f("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new rr((function(n,r){e.onerror=function(t){var e=fr(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new rr((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new sr(i),s=e(i.primaryKey,i.value,o);if(s instanceof rr){var a=s.catch((function(t){return o.done(),rr.reject(t)}));n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return rr.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function lr(t){return new rr((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=fr(t.target.error);n(e)}}))}var hr=!1;function fr(t){var e=or._t(Object(i["getUA"])());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new c("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return hr||(hr=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pr=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(r["__extends"])(e,t),e}(er);function dr(t,e){var n=m(t);return or.It(n.Mt,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gr=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&fe(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&pe(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&pe(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(O.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Be())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&E(this.mutations,t.mutations,(function(t,e){return ge(t,e)}))&&E(this.baseMutations,t.baseMutations,(function(t,e){return ge(t,e)}))},t}(),vr=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){y(e.mutations.length===r.length);for(var i=qe(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),yr=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=O.min()),void 0===o&&(o=O.min()),void 0===s&&(s=L.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),mr=function(t){this.Lt=t};function _r(t,e){if(e.document)return vn(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=W.fromSegments(e.noDocument.path),r=Ir(e.noDocument.readTime),i=ut.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=W.fromSegments(e.unknownDocument.path);return r=Ir(e.unknownDocument.version),ut.newUnknownDocument(o,r)}return v()}function br(t,e,n){var r=wr(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:cn(t,e.key),fields:e.data.value.mapValue.fields,updateTime:nn(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new zn(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=xr(e.version);return s=e.hasCommittedMutations,new zn(null,new Vn(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=xr(e.version);return new zn(new Gn(c,l),null,null,!0,r,i)}return v()}function wr(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Er(t){var e=new I(t[0],t[1]);return O.fromTimestamp(e)}function xr(t){var e=t.toTimestamp();return new Dn(e.seconds,e.nanoseconds)}function Ir(t){var e=new I(t.seconds,t.nanoseconds);return O.fromTimestamp(e)}function Or(t,e){for(var n=(e.baseMutations||[]).map((function(e){return mn(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return mn(t.Lt,e)})),a=I.fromMillis(e.localWriteTimeMs);return new gr(e.batchId,a,n,s)}function Sr(t){var e,n,r=Ir(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Ir(t.lastLimboFreeSnapshotVersion):O.min();return void 0!==t.query.documents?(y(1===(n=t.query).documents.length),e=Ft(At(fn(n.documents[0])))):e=function(t){return Ft(wn(t))}(t.query),new yr(e,t.targetId,0,t.lastListenSequenceNumber,r,i,L.fromBase64String(t.resumeToken))}function Cr(t,e){var n,r=xr(e.snapshotVersion),i=xr(e.lastLimboFreeSnapshotVersion);n=pt(e.target)?_n(t.Lt,e.target):bn(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Kn(e.targetId,ht(e.target),r,o,e.sequenceNumber,i,n)}function Tr(t){var e=wn({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?qt(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nr=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return kr(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Ir(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return kr(t).put({bundleId:(n=e).id,createTime:xr(sn(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Ar(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Tr(e.bundledQuery),readTime:Ir(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Ar(t).put(function(t){return{name:t.name,readTime:xr(sn(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function kr(t){return dr(t,Qn.store)}function Ar(t){return dr(t,Jn.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pr=function(){function t(){this.Bt=new Rr}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),rr.resolve()},t.prototype.getCollectionParents=function(t,e){return rr.resolve(this.Bt.getEntries(e))},t}(),Rr=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Pe(k.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Pe(k.comparator)).toArray()},t}(),Lr=function(){function t(){this.qt=new Rr}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Rn(i)};return jr(t).put(o)}return rr.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[x(e),""],!1,!0);return jr(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Mn(o.parent))}return n}))},t}();function jr(t){return dr(t,Xn.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mr={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Dr=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(t,e,n){var r=t.store(Un.store),i=t.store(Bn.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){y(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=Bn.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return rr.waitFor(o).next((function(){return c}))}function qr(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw v();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dr.DEFAULT_COLLECTION_PERCENTILE=10,Dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dr.DEFAULT=new Dr(41943040,Dr.DEFAULT_COLLECTION_PERCENTILE,Dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dr.DISABLED=new Dr(-1,0,0);var Ur=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return y(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vr(t).$t({index:Un.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Gr(t),s=Vr(t);return s.add({}).next((function(a){y("number"==typeof a);for(var u=new gr(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return yn(t.Lt,e)})),i=n.mutations.map((function(e){return yn(t.Lt,e)}));return new Un(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Pe((function(t,e){return w(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],g=Bn.key(i.userId,d.key.path,a);h=h.add(d.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,Bn.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[a]=u.keys()})),rr.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Vr(t).get(e).next((function(t){return t?(y(t.userId===n.userId),Or(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?rr.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Vr(t).$t({index:Un.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(y(e.batchId>=r),o=Or(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Vr(t).$t({index:Un.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vr(t).Nt(Un.userMutationsIndex,n).next((function(t){return t.map((function(t){return Or(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Bn.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Gr(t).$t({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],l=Mn(u);if(a===n.userId&&e.path.isEqual(l))return Vr(t).get(c).next((function(t){if(!t)throw v();y(t.userId===n.userId),o.push(Or(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Pe(w),i=[];return e.forEach((function(e){var o=Bn.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Gr(t).$t({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=Mn(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),rr.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Bn.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Pe(w);return Gr(t).$t({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],l=Mn(u);s===n.userId&&r.isPrefixOf(l)?l.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Wt(t,a)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Vr(t).get(e).next((function(t){if(null===t)throw v();y(t.userId===n.userId),r.push(Or(n.R,t))})))})),rr.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Fr(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),rr.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return rr.resolve();var r=IDBKeyRange.lowerBound(Bn.prefixForUser(e.userId)),i=[];return Gr(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Mn(t[1]);i.push(o)}else r.done()})).next((function(){y(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return Br(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return zr(t).get(this.userId).next((function(t){return t||new qn(e.userId,-1,"")}))},t}();function Br(t,e,n){var r=Bn.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Gr(t).$t({range:o,kt:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function Vr(t){return dr(t,Un.store)}function Gr(t){return dr(t,Bn.store)}function zr(t){return dr(t,qn.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wr=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Kr=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new Wr(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return O.fromTimestamp(new I(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return Hr(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return y(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Hr(t).$t((function(s,a){var u=Sr(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return rr.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return Hr(t).$t((function(t,n){var r=Sr(n);e(r)}))},t.prototype.Xt=function(t){return Yr(t).get(Yn.key).next((function(t){return y(null!==t),t}))},t.prototype.Zt=function(t,e){return Yr(t).put(Yn.key,e)},t.prototype.te=function(t,e){return Hr(t).put(Cr(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=ht(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Hr(t).$t({range:r,index:Kn.queryTargetsIndexName},(function(t,n,r){var o=Sr(n);ft(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Xr(t);return e.forEach((function(e){var s=Rn(e.path);i.push(o.put(new Hn(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),rr.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Xr(t);return rr.forEach(e,(function(e){var o=Rn(e.path);return rr.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Xr(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Xr(t),i=Be();return r.$t({range:n,kt:!0},(function(t,e,n){var r=Mn(t[1]),o=new W(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Rn(e.path),r=IDBKeyRange.bound([n],[x(n)],!1,!0),i=0;return Xr(t).$t({index:Hn.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return Hr(t).get(e).next((function(t){return t?Sr(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(t){return dr(t,Kn.store)}function Yr(t){return dr(t,Yn.store)}function Xr(t){return dr(t,Hn.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(e){if(t.code!==u.FAILED_PRECONDITION||t.message!==tr)throw t;return f("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=w(n,i);return 0===s?w(r,o):s}var Jr=function(){function t(t){this.ne=t,this.buffer=new Pe(Qr),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Qr(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Zr=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;f("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return Object(r["__awaiter"])(e,void 0,void 0,(function(){var e;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return ur(e=n.sent())?(f("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,$r(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),ti=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return rr.resolve(a.o);var r=new Jr(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; disabled"),rr.resolve(Mr)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Mr):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,s,a,u,c,l=this,p=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>l.params.maximumSequenceNumbersToCollect?(f("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+e),r=l.params.maximumSequenceNumbersToCollect):r=e,s=Date.now(),l.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),l.removeTargets(t,n,e)})).next((function(e){return i=e,u=Date.now(),l.removeOrphanedDocuments(t,n)})).next((function(t){return c=Date.now(),h()<=o["LogLevel"].DEBUG&&f("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-p)+"ms\n\tDetermined least recently used "+r+" in "+(a-s)+"ms\n\tRemoved "+i+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-p)+"ms"),rr.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),ei=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new ti(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return ni(t,n)},t.prototype.removeReference=function(t,e,n){return ni(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return ni(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return zr(t).Ot((function(r){return Br(t,r,e).next((function(t){return t&&(n=!0),rr.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,a){if(a<=e){var u=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),Xr(t).delete([0,Rn(s.path)])}))}));i.push(u)}})).next((function(){return rr.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return ni(t,e)},t.prototype.we=function(t,e){var n,r=Xr(t),i=a.o;return r.$t({index:Hn.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var s=r.path,u=r.sequenceNumber;0===o?(i!==a.o&&e(new W(Mn(n)),i),i=u,n=s):i=a.o})).next((function(){i!==a.o&&e(new W(Mn(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function ni(t,e){return Xr(t).put(function(t,e){return new Hn(0,Rn(t.path),e)}(e,t.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ri=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.equalsFn(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){C(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.isEmpty=function(){return T(this.inner)},t}(),ii=function(){function t(){this.changes=new ri((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:O.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:ut.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?rr.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),oi=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return ui(t).put(ci(e),n)},t.prototype.removeEntry=function(t,e){var n=ui(t),r=ci(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return ui(t).get(ci(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return ui(t).get(ci(e)).next((function(t){return{document:n.ye(e,t),size:qr(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=je();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=je(),i=new Ne(W.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,qr(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return rr.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return ui(t).$t({range:r},(function(t,e,r){for(var s=W.fromSegments(t);o&&W.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=je(),o=e.path.length+1,s={};if(n.isEqual(O.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=wr(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=zn.collectionReadTimeIndex}return ui(t).$t(s,(function(t,n,s){if(t.length===o){var a=_r(r.R,n);e.path.isPrefixOf(a.key.path)?Gt(e,a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new si(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return ai(t).get(Wn.key).next((function(t){return y(!!t),t}))},t.prototype.me=function(t,e){return ai(t).put(Wn.key,e)},t.prototype.ye=function(t,e){if(e){var n=_r(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(O.min()))return n}return ut.newInvalidDocument(t)},t}(),si=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new ri((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(r["__extends"])(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Pe((function(t,e){return w(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=br(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=qr(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=br(e.Ie.R,ut.newNoDocument(o,O.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),rr.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(ii);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(t){return dr(t,Wn.store)}function ui(t){return dr(t,zn.store)}function ci(t){return t.path.toArray()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var li=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;y(n<r&&n>=0&&r<=11);var o=new ir("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Fn.store)}(t),function(t){t.createObjectStore(qn.store,{keyPath:qn.keyPath}),t.createObjectStore(Un.store,{keyPath:Un.keyPath,autoIncrement:!0}).createIndex(Un.userMutationsIndex,Un.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Bn.store)}(t),hi(t),function(t){t.createObjectStore(zn.store)}(t));var s=rr.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Hn.store),t.deleteObjectStore(Kn.store),t.deleteObjectStore(Yn.store)}(t),hi(t)),s=s.next((function(){return function(t){var e=t.store(Yn.store),n=new Yn(0,0,O.min().toTimestamp(),0);return e.put(Yn.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Un.store).Nt().next((function(n){t.deleteObjectStore(Un.store),t.createObjectStore(Un.store,{keyPath:Un.keyPath,autoIncrement:!0}).createIndex(Un.userMutationsIndex,Un.userMutationsKeyPath,{unique:!0});var r=e.store(Un.store),i=n.map((function(t){return r.put(t)}));return rr.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore($n.store,{keyPath:$n.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Wn.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(zn.store);e.createIndex(zn.readTimeIndex,zn.readTimeIndexPath,{unique:!1}),e.createIndex(zn.collectionReadTimeIndex,zn.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Qn.store,{keyPath:Qn.keyPath})}(t),function(t){t.createObjectStore(Jn.store,{keyPath:Jn.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(zn.store).$t((function(t,n){e+=qr(n)})).next((function(){var n=new Wn(e);return t.store(Wn.store).put(Wn.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(qn.store),r=t.store(Un.store);return n.Nt().next((function(n){return rr.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Un.userMutationsIndex,i).next((function(r){return rr.forEach(r,(function(r){y(r.userId===n.userId);var i=Or(e.R,r);return Fr(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(Hn.store),n=t.store(zn.store);return t.store(Yn.store).get(Yn.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new k(n),s=function(t){return[0,Rn(t)]}(o);r.push(e.get(s).next((function(n){return n?rr.resolve():function(n){return e.put(new Hn(0,Rn(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return rr.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(Xn.store,{keyPath:Xn.keyPath});var n=e.store(Xn.store),r=new Rr,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Rn(i)})}};return e.store(zn.store).$t({kt:!0},(function(t,e){var n=new k(t);return i(n.popLast())})).next((function(){return e.store(Bn.store).$t({kt:!0},(function(t,e){t[0];var n=t[1];t[2];var r=Mn(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(Kn.store);return n.$t((function(t,r){var i=Sr(r),o=Cr(e.R,i);return n.put(o)}))},t}();function hi(t){t.createObjectStore(Hn.store,{keyPath:Hn.keyPath}).createIndex(Hn.documentTargetsIndex,Hn.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Kn.store,{keyPath:Kn.keyPath}).createIndex(Kn.queryTargetsIndexName,Kn.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Yn.store)}var fi="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",pi=function(){function t(e,n,r,i,o,s,a,l,h,f){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=h,this.Ce=f,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new c(u.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ei(this,i),this.Le=n+"main",this.R=new mr(l),this.Be=new or(this.Le,11,new li(this.R)),this.qe=new Kr(this.referenceDelegate,this.R),this.Ut=new Lr,this.Ue=function(t,e){return new oi(t,e)}(this.R,this.Ut),this.Ke=new Nr,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===f&&p("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new c(u.FAILED_PRECONDITION,fi);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new a(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(r["__awaiter"])(e,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return Object(r["__awaiter"])(e,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return Object(r["__awaiter"])(e,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return gi(e).put(new $n(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(ur(e))return f("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return f("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return di(t).get(Fn.key).next((function(t){return rr.resolve(e.tn(t))}))},t.prototype.en=function(t){return gi(t).delete(this.clientId)},t.prototype.nn=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var t,e,n,i,o=this;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=dr(t,$n.store);return e.Nt().next((function(t){var n=o.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return rr.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=r.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)i=n[e],this.Qe.removeItem(this.on(i.clientId));r.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?rr.resolve(!0):di(t).get(Fn.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new c(u.FAILED_PRECONDITION,fi);return!1}}return!(!e.networkEnabled||!e.inForeground)||gi(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&f("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var t=this;return Object(r["__generator"])(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Fn.store,$n.store],(function(e){var n=new pr(e,a.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return gi(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Ur.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;f("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,Zn,(function(o){return i=new pr(o,r.Ne?r.Ne.next():a.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw p("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new c(u.FAILED_PRECONDITION,tr);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return di(t).get(Fn.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new c(u.FAILED_PRECONDITION,fi)}))},t.prototype.Ze=function(t){var e=new Fn(this.clientId,this.allowTabSynchronization,Date.now());return di(t).put(Fn.key,e)},t.yt=function(){return or.yt()},t.prototype.Xe=function(t){var e=this,n=di(t);return n.get(Fn.key).next((function(t){return e.tn(t)?(f("IndexedDbPersistence","Releasing primary lease."),n.delete(Fn.key)):rr.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(p("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return f("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return p("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){p("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function di(t){return dr(t,Fn.store)}function gi(t){return dr(t,$n.store)}function vi(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var yi=function(t,e){this.progress=t,this.wn=e},mi=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return W.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Mt(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new W(e)).next((function(t){var e=De();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=De();return this.Ut.getCollectionParents(t,i).next((function(s){return rr.forEach(s,(function(s){var a=function(t,e){return new Nt(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=ut.newInvalidDocument(c),r=r.insert(c,l)),pe(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){Gt(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=Be(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof me&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),_i=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Be(),i=Be(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),bi=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(O.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(s){var a=i.Cn(e,s);return(Pt(e)||Rt(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):(h()<=o["LogLevel"].DEBUG&&f("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Vt(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Pe(zt(t));return e.forEach((function(e,r){Gt(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return h()<=o["LogLevel"].DEBUG&&f("QueryEngine","Using full collection scan to execute query:",Vt(e)),this.Sn.getDocumentsMatchingQuery(t,e,O.min())},t}(),wi=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Ne(w),this.kn=new ri((function(t){return ht(t)}),ft),this.$n=O.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new mi(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(t,e,n,r){return new wi(t,e,n,r)}function xi(t,e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o,s;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return n=m(t),i=n._n,o=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var r;return n._n.getAllMutationBatches(t).next((function(s){return r=s,i=n.persistence.getMutationQueue(e),o=new mi(n.On,i,n.persistence.getIndexManager()),i.getAllMutationBatches(t)})).next((function(e){for(var n=[],i=[],s=Be(),a=0,u=r;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];s=s.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var g=d[p];i.push(g.batchId);for(var v=0,y=g.mutations;v<y.length;v++){var m=y[v];s=s.add(m.key)}}return o.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:i}}))}))}))];case 1:return s=r.sent(),[2,(n._n=i,n.Mn=o,n.xn.Vn(n.Mn),s)]}}))}))}function Ii(t,e){var n=m(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=rr.resolve();return o.forEach((function(t){s=s.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);y(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),s.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Oi(t){var e=m(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Si(t,e){var n=m(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return y(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}}));var a=je();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(Ci(t,o,e.documentUpdates,r,void 0).next((function(t){a=t}))),!r.isEqual(O.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(u)}return rr.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,a)})).next((function(){return a}))})).then((function(t){return n.Fn=i,t}))}function Ci(t,e,n,r,i){var o=Be();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=je();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(O.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):f("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function Ti(t,e){var n=m(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Ni(t,e){var n=m(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,rr.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new yr(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function ki(t,e,n){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var i,o,s,a;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:i=m(t),o=i.Fn.get(e),s=n?"readwrite":"readwrite-primary",r.label=1;case 1:return r.trys.push([1,4,,5]),n?[3,3]:[4,i.persistence.runTransaction("Release target",s,(function(t){return i.persistence.referenceDelegate.removeTarget(t,o)}))];case 2:r.sent(),r.label=3;case 3:return[3,5];case 4:if(!ur(a=r.sent()))throw a;return f("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return i.Fn=i.Fn.remove(e),i.kn.delete(o.target),[2]}}))}))}function Ai(t,e,n){var r=m(t),i=O.min(),o=Be();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=m(t),i=r.kn.get(n);return void 0!==i?rr.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,Ft(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:O.min(),n?o:Be())})).next((function(t){return{documents:t,Bn:o}}))}))}function Pi(t,e){var n=m(t),r=m(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Ri(t){var e=m(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=m(t),i=je(),o=wr(n),s=ui(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:zn.readTimeIndex,range:a},(function(t,e){var n=_r(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:Er(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function Li(t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(r["__generator"])(this,(function(n){return[2,(e=m(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=ui(t),n=O.min();return e.$t({index:zn.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Er(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}function ji(t,e,n,i){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var o,s,a,u,c,l,h,f,p,d;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:for(o=m(t),s=Be(),a=je(),u=qe(),c=0,l=n;c<l.length;c++)h=l[c],f=e.qn(h.metadata.name),h.document&&(s=s.add(f)),a=a.insert(f,e.Un(h)),u=u.insert(f,e.Kn(h.metadata.readTime));return p=o.On.newChangeBuffer({trackRemovals:!0}),[4,Ni(o,function(t){return Ft(At(k.fromString("__bundle__/docs/"+t)))}(i))];case 1:return d=r.sent(),[2,o.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Ci(t,p,a,O.min(),u).next((function(e){return p.apply(t),e})).next((function(e){return o.qe.removeMatchingKeysForTargetId(t,d.targetId).next((function(){return o.qe.addMatchingKeys(t,s,d.targetId)})).next((function(){return o.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function Mi(t,e,n){return void 0===n&&(n=Be()),Object(r["__awaiter"])(this,void 0,void 0,(function(){var i,o;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return[4,Ni(t,Ft(Tr(e.bundledQuery)))];case 1:return i=r.sent(),[2,(o=m(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var r=sn(e.readTime);if(i.snapshotVersion.compareTo(r)>=0)return o.Ke.saveNamedQuery(t,e);var s=i.withResumeToken(L.EMPTY_BYTE_STRING,r);return o.Fn=o.Fn.insert(s.targetId,s),o.qe.updateTargetData(t,s).next((function(){return o.qe.removeMatchingKeysForTargetId(t,i.targetId)})).next((function(){return o.qe.addMatchingKeys(t,n,i.targetId)})).next((function(){return o.Ke.saveNamedQuery(t,e)}))}))]}}))}))
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Di=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return rr.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:sn(n.createTime)}),rr.resolve()},t.prototype.getNamedQuery=function(t,e){return rr.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Tr(t.bundledQuery),readTime:sn(t.readTime)}}(e)),rr.resolve()},t}(),Fi=function(){function t(){this.Wn=new Pe(qi.Gn),this.zn=new Pe(qi.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new qi(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new qi(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new W(new k([])),r=new qi(n,t),i=new qi(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new W(new k([])),n=new qi(e,t),r=new qi(e,t+1),i=Be();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new qi(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),qi=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return W.comparator(t.key,e.key)||w(t.ns,e.ns)},t.Hn=function(t,e){return w(t.ns,e.ns)||W.comparator(t.key,e.key)},t}(),Ui=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Pe(qi.Gn)}return t.prototype.checkEmpty=function(t){return rr.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new gr(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new qi(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return rr.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return rr.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return rr.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return rr.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return rr.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new qi(e,0),i=new qi(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),rr.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Pe(w);return e.forEach((function(t){var e=new qi(t,0),i=new qi(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),rr.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;W.isDocumentKey(i)||(i=i.child(""));var o=new qi(new W(i),0),s=new Pe(w);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),rr.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;y(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return rr.forEach(e.mutations,(function(i){var o=new qi(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new qi(e,0),r=this.rs.firstAfterOrEqual(n);return rr.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,rr.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Bi=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Ne(W.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return rr.resolve(n?n.document.clone():ut.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=je();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():ut.newInvalidDocument(t))})),rr.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=je(),i=new W(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.key,u=s.value,c=u.document,l=u.readTime;if(!e.path.isPrefixOf(a.path))break;l.compareTo(n)<=0||Gt(e,c)&&(r=r.insert(c.key,c.clone()))}return rr.resolve(r)},t.prototype.fs=function(t,e){return rr.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new Vi(this)},t.prototype.getSize=function(t){return rr.resolve(this.size)},t}(),Vi=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(r["__extends"])(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),rr.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(ii),Gi=function(){function t(t){this.persistence=t,this.ds=new ri((function(t){return ht(t)}),ft),this.lastRemoteSnapshotVersion=O.min(),this.highestTargetId=0,this.ws=0,this._s=new Fi,this.targetCount=0,this.ys=Wr.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),rr.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return rr.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return rr.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),rr.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),rr.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Wr(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,rr.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),rr.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,rr.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),rr.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return rr.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return rr.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),rr.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),rr.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),rr.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return rr.resolve(n)},t.prototype.containsKey=function(t,e){return rr.resolve(this._s.containsKey(e))},t}(),zi=function(){function t(t,e){var n=this;this.gs={},this.Ne=new a(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Gi(this),this.Ut=new Pr,this.Ue=function(t,e){return new Bi(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new mr(e),this.Ke=new Di(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Ui(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;f("MemoryPersistence","Starting transaction:",t);var i=new Wi(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return rr.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),Wi=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(r["__extends"])(e,t),e}(er),Ki=function(){function t(t){this.persistence=t,this.As=new Fi,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw v()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),rr.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),rr.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),rr.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rr.forEach(this.vs,(function(r){var i=W.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return rr.or([function(){return rr.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Hi=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(t,e){return"firestore_clients_"+t+"_"+e}function Xi(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function $i(t,e){return"firestore_targets_"+t+"_"+e}Hi.UNAUTHENTICATED=new Hi(null),Hi.GOOGLE_CREDENTIALS=new Hi("google-credentials-uid"),Hi.FIRST_PARTY=new Hi("first-party-uid");var Qi=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new c(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(p("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ji=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new c(i.error.code,i.error.message)),o?new t(e,i.state,r):(p("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Zi=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ge(),s=0;i&&s<r.activeTargetIds.length;++s)i=z(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(p("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),to=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(p("SharedClientState","Failed to parse online state: "+e),null)},t}(),eo=function(){function t(){this.activeTargetIds=Ge()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),no=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Ne(w),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=Yi(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new eo),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var t,e,n,i,o,s,a,u,c,l,h,f=this;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=r.sent(),e=0,n=t;e<n.length;e++)(i=n[e])!==this.Ns&&(o=this.getItem(Yi(this.persistenceKey,i)))&&(s=Zi.Vs(i,o))&&(this.ks=this.ks.insert(s.clientId,s));for(this.Qs(),(a=this.storage.getItem(this.Us))&&(u=this.js(a))&&this.Ws(u),c=0,l=this.$s;c<l.length;c++)h=l[c],this.Fs(h);return this.$s=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem($i(this.persistenceKey,t));if(n){var r=Ji.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem($i(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return f("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){f("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){f("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(f("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void p("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return Object(r["__awaiter"])(e,void 0,void 0,(function(){var t,e,i,o,s,u;return Object(r["__generator"])(this,(function(r){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(i=this.si(n.key,n.newValue)))return[2,this.ii(i)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(o=this.ri(n.key,n.newValue)))return[2,this.oi(o)]}else if(n.key===this.Us){if(null!==n.newValue&&(s=this.js(n.newValue)))return[2,this.Ws(s)]}else if(n.key===this.Ms)(u=function(t){var e=a.o;if(null!=t)try{var n=JSON.parse(t);y("number"==typeof n),e=n}catch(t){p("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==a.o&&this.sequenceNumberHandler(u);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Qi(this.currentUser,t,e,n),i=Xi(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Xi(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=$i(this.persistenceKey,t),i=new Ji(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Zi.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Qi.Vs(new Hi(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Ji.Vs(r,e)},t.prototype.js=function(t){return to.Vs(t)},t.prototype.ii=function(t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(f("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.syncEngine.hi(s,a).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Ge();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),ro=function(){function t(){this.li=new eo,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new eo,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),io=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),oo=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){f("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){f("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),so={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},ao=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),uo=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return Object(r["__extends"])(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var a=new s["g"];a.listenOnce(s["c"].COMPLETE,(function(){try{switch(a.getLastErrorCode()){case s["a"].NO_ERROR:var e=a.getResponseJson();f("Connection","XHR received:",JSON.stringify(e)),i(e);break;case s["a"].TIMEOUT:f("Connection",'RPC "'+t+'" timed out'),o(new c(u.DEADLINE_EXCEEDED,"Request time out"));break;case s["a"].HTTP_ERROR:var n=a.getStatus();if(f("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var l=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(u).indexOf(e)>=0?e:u.UNKNOWN}(r.status);o(new c(l,r.message))}else o(new c(u.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new c(u.UNAVAILABLE,"Connection failed."));break;default:v()}}finally{f("Connection",'RPC "'+t+'" completed.')}}));var l=JSON.stringify(r);a.send(e,"POST",l,n,15)}))},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=Object(s["h"])(),o=Object(s["i"])(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new s["d"]({})),this.Fi(a.initMessageHeaders,e),Object(i["isMobileCordova"])()||Object(i["isReactNative"])()||Object(i["isElectron"])()||Object(i["isIE"])()||Object(i["isUWP"])()||Object(i["isBrowserExtension"])()||(a.httpHeadersOverwriteParam="$httpHeaders");var l=n.join("");f("Connection","Creating WebChannel: "+l,a);var h=r.createWebChannel(l,a),p=!1,g=!1,v=new ao({Ei:function(t){g?f("Connection","Not sending because WebChannel is closed:",t):(p||(f("Connection","Opening WebChannel transport."),h.open(),p=!0),f("Connection","WebChannel sending:",t),h.send(t))},Ti:function(){return h.close()}}),m=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return m(h,s["f"].EventType.OPEN,(function(){g||f("Connection","WebChannel transport opened.")})),m(h,s["f"].EventType.CLOSE,(function(){g||(g=!0,f("Connection","WebChannel transport closed"),v.Vi())})),m(h,s["f"].EventType.ERROR,(function(t){g||(g=!0,d("Connection","WebChannel transport errored:",t),v.Vi(new c(u.UNAVAILABLE,"The operation could not be completed")))})),m(h,s["f"].EventType.MESSAGE,(function(t){var e;if(!g){var n=t.data[0];y(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){f("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Ee[t];if(void 0!==e)return Te(e)}(o),a=i.message;void 0===s&&(s=u.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),g=!0,v.Vi(new c(s,a)),h.close()}else f("Connection","WebChannel received:",n),v.Si(n)}})),m(o,s["b"].STAT_EVENT,(function(t){t.stat===s["e"].PROXY?f("Connection","Detected buffering proxy"):t.stat===s["e"].NOPROXY&&f("Connection","Detected no buffering proxy")})),setTimeout((function(){v.Pi()}),0),v},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);f("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return f("RestConnection","Received: ",t),t}),(function(e){throw d("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.7.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=so[t];return this.Di+"/v1/"+e+":"+n},t}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(){return"undefined"!=typeof window?window:null}function lo(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(t){return new en(t,!0)}var fo=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&f("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),po=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new fo(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===u.RESOURCE_EXHAUSTED?(p(e.toString()),p("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===u.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new c(u.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return Object(r["__awaiter"])(t,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return f("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(f("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),go=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(r["__extends"])(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:v()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(y(void 0===e||"string"==typeof e),L.fromBase64String(e||"")):(y(void 0===e||e instanceof Uint8Array),L.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?u.UNKNOWN:Te(t.code);return new c(e,t.message||"")}(a);n=new Ye(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=ln(t,r.document.name),o=sn(r.document.updateTime);var a=new st({mapValue:{fields:r.document.fields}}),l=(s=ut.newFoundDocument(i,o,a),r.targetIds||[]),h=r.removedTargetIds||[];n=new Ke(l,h,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=ln(t,r.document),o=r.readTime?sn(r.readTime):O.min(),a=ut.newNoDocument(i,o),s=r.removedTargetIds||[],n=new Ke([],s,a.key,a);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=ln(t,r.document),o=r.removedTargetIds||[],n=new Ke([],o,i,null);else{if(!("filter"in e))return v();e.filter;var f=e.filter;f.targetId,r=f.count||0,i=new Se(r),o=f.targetId,n=new He(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return O.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?O.min():e.readTime?sn(e.readTime):O.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=pn(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=pt(r)?{documents:_n(t,r)}:{query:bn(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=rn(t,e.resumeToken):e.snapshotVersion.compareTo(O.min())>0&&(n.readTime=nn(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return v()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=pn(this.R),e.removeTarget=t,this.cr(e)},e}(po),vo=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(r["__extends"])(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(y(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(y(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?sn(t.updateTime):sn(e);return n.isEqual(O.min())&&(n=sn(e)),new ue(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=sn(t.commitTime);return this.listener.Tr(n,e)}return y(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=pn(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return yn(e.R,t)}))};this.cr(n)},e}(po),yo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(r["__extends"])(e,t),e.prototype.br=function(){if(this.Rr)throw new c(u.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===u.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new c(u.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===u.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new c(u.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),mo=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(p(e),this.Vr=!1):f("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),_o=function(t,e,n,i,o){var s=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=o,this.Lr.di((function(t){n.enqueueAndForget((function(){return Object(r["__awaiter"])(s,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(t){switch(t.label){case 0:return To(this)?(f("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return(e=m(t)).Or.add(4),[4,wo(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,bo(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new mo(n,i)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var e,n;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:if(!To(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function wo(t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var e,n;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Eo(t,e){var n=m(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Co(n)?So(n):Go(n).er()&&Io(n,e))}function xo(t,e){var n=m(t),r=Go(n);n.$r.delete(e),r.er()&&Oo(n,e),0===n.$r.size&&(r.er()?r.ir():To(n)&&n.Br.set("Unknown"))}function Io(t,e){t.qr.U(e.targetId),Go(t).mr(e)}function Oo(t,e){t.qr.U(e),Go(t).yr(e)}function So(t){t.qr=new $e({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Go(t).start(),t.Br.Sr()}function Co(t){return To(t)&&!Go(t).tr()&&t.$r.size>0}function To(t){return 0===m(t).Or.size}function No(t){t.qr=void 0}function ko(t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(e){return t.$r.forEach((function(e,n){Io(t,e)})),[2]}))}))}function Ao(t,e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(n){return No(t),Co(t)?(t.Br.Nr(e),So(t)):t.Br.set("Unknown"),[2]}))}))}function Po(t,e,n){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var i,o,s;return Object(r["__generator"])(this,(function(a){switch(a.label){case 0:if(t.Br.set("Online"),!(e instanceof Ye&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o,s;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:n=e.cause,i=0,o=e.targetIds,r.label=1;case 1:return i<o.length?(s=o[i],t.$r.has(s)?[4,t.remoteSyncer.rejectListen(s,n)]:[3,3]):[3,5];case 2:r.sent(),t.$r.delete(s),t.qr.removeTarget(s),r.label=3;case 3:r.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return i=a.sent(),f("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),[4,Ro(t,i)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Ke?t.qr.X(e):e instanceof He?t.qr.rt(e):t.qr.et(e),n.isEqual(O.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,Oi(t.localStore)];case 8:return o=a.sent(),n.compareTo(o)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(L.EMPTY_BYTE_STRING,n.snapshotVersion)),Oo(t,e);var r=new yr(n.target,e,1,n.sequenceNumber);Io(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return f("RemoteStore","Failed to raise snapshot:",s=a.sent()),[4,Ro(t,s)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function Ro(t,e,n){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var i=this;return Object(r["__generator"])(this,(function(o){switch(o.label){case 0:if(!ur(e))throw e;return t.Or.add(1),[4,wo(t)];case 1:return o.sent(),t.Br.set("Offline"),n||(n=function(){return Oi(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return Object(r["__awaiter"])(i,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(e){switch(e.label){case 0:return f("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,bo(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Lo(t,e){return e().catch((function(n){return Ro(t,n,e)}))}function jo(t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var e,n,i,o,s;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:e=m(t),n=zo(e),i=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,r.label=1;case 1:if(!function(t){return To(t)&&t.kr.length<10}(e))return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,Ti(e.localStore,i)];case 3:return null===(o=r.sent())?(0===e.kr.length&&n.ir(),[3,7]):(i=o.batchId,function(t,e){t.kr.push(e);var n=zo(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,o),[3,6]);case 4:return s=r.sent(),[4,Ro(e,s)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return Mo(e)&&Do(e),[2]}}))}))}function Mo(t){return To(t)&&!zo(t).tr()&&t.kr.length>0}function Do(t){zo(t).start()}function Fo(t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(e){return zo(t).Ar(),[2]}))}))}function qo(t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var e,n,i,o;return Object(r["__generator"])(this,(function(r){for(e=zo(t),n=0,i=t.kr;n<i.length;n++)o=i[n],e.Er(o.mutations);return[2]}))}))}function Uo(t,e,n){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var i,o;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return i=t.kr.shift(),o=vr.from(i,e,n),[4,Lo(t,(function(){return t.remoteSyncer.applySuccessfulWrite(o)}))];case 1:return r.sent(),[4,jo(t)];case 2:return r.sent(),[2]}}))}))}function Bo(t,e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return e&&zo(t).pr?[4,function(t,e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return Ce(i=e.code)&&i!==u.ABORTED?(n=t.kr.shift(),zo(t).sr(),[4,Lo(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return r.sent(),[4,jo(t)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Mo(t)&&Do(t),[2]}}))}))}function Vo(t,e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return n=m(t),e?(n.Or.delete(2),[4,bo(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,wo(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Go(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=m(t);return r.br(),new go(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:ko.bind(null,t),Ri:Ao.bind(null,t),_r:Po.bind(null,t)}),t.Mr.push((function(n){return Object(r["__awaiter"])(e,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Co(t)?So(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),No(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function zo(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=m(t);return r.br(),new vo(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Fo.bind(null,t),Ri:Bo.bind(null,t),Ir:qo.bind(null,t),Tr:Uo.bind(null,t)}),t.Mr.push((function(n){return Object(r["__awaiter"])(e,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,jo(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.kr.length>0&&(f("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kr
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Wo=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new c(u.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Ko(t,e){if(p("AsyncQueue",e+": "+t),ur(t))return new c(u.UNAVAILABLE,e+": "+t);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ho=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||W.comparator(e.key,n.key)}:function(t,e){return W.comparator(t.key,e.key)},this.keyedMap=De(),this.sortedSet=new Ne(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Yo=function(){function t(){this.Qr=new Ne(W.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):v():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),Xo=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Ho.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ut(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),$o=function(){this.Wr=void 0,this.listeners=[]},Qo=function(){this.queries=new ri((function(t){return Bt(t)}),Ut),this.onlineState="Unknown",this.Gr=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(t,e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o,s,a,u,c;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:if(n=m(t),i=e.query,o=!1,(s=n.queries.get(i))||(o=!0,s=new $o),!o)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),a=s,[4,n.onListen(i)];case 2:return a.Wr=r.sent(),[3,4];case 3:return u=r.sent(),c=Ko(u,"Initialization of query '"+Vt(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(i,s),s.listeners.push(e),e.zr(n.onlineState),s.Wr&&e.Hr(s.Wr)&&ns(n),[2]}}))}))}function Zo(t,e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o,s,a;return Object(r["__generator"])(this,(function(r){return n=m(t),i=e.query,o=!1,(s=n.queries.get(i))&&(a=s.listeners.indexOf(e))>=0&&(s.listeners.splice(a,1),o=0===s.listeners.length),o?[2,(n.queries.delete(i),n.onUnlisten(i))]:[2]}))}))}function ts(t,e){for(var n=m(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(s)&&(r=!0);u.Wr=s}}r&&ns(n)}function es(t,e,n){var r=m(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function ns(t){t.Gr.forEach((function(t){t.next()}))}var rs=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Xo(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Xo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),is=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),os=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return ln(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?vn(this.R,t.document,!1):ut.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return sn(t)},t}(),ss=function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=as(t)}return t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new os(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Be()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var t,e,n,i,o;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return[4,ji(this.localStore,new os(this.R),this.documents,this.ro.id)];case 1:t=r.sent(),e=this.co(this.documents),n=0,i=this.queries,r.label=2;case 2:return n<i.length?(o=i[n],[4,Mi(this.localStore,o,e.get(o.name))]):[3,5];case 3:r.sent(),r.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new yi(Object.assign({},this.progress),t))]}}))}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var us=function(t){this.key=t},cs=function(t){this.key=t},ls=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Be(),this.mutatedKeys=Be(),this.lo=zt(t),this.fo=new Ho(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Yo,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Pt(this.query)&&i.size===this.query.limit?i.last():null,c=Rt(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=Gt(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),p=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data.isEqual(h.data)?f!==p&&(r.track({type:3,doc:h}),d=!0):n.yo(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(a=!0)),d&&(h?(s=s.add(h),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Pt(this.query)||Rt(this.query))for(;s.size>this.query.limit;){var l=Pt(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return v()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new Xo(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Yo,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Be(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new cs(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new us(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Be();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Xo.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),hs=function(t,e,n){this.query=t,this.targetId=e,this.view=n},fs=function(t){this.key=t,this.bo=!1},ps=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new ri((function(t){return Bt(t)}),Ut),this.Vo=new Map,this.So=new Set,this.Do=new Ne(W.comparator),this.Co=new Map,this.No=new Fi,this.xo={},this.Fo=new Map,this.ko=Wr.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function ds(t,e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o,s,a,u;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return n=Gs(t),(s=n.Po.get(e))?(i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),o=s.view.Ro(),[3,4]):[3,1];case 1:return[4,Ni(n.localStore,Ft(e))];case 2:return a=r.sent(),u=n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.targetId,[4,gs(n,e,i,"current"===u)];case 3:o=r.sent(),n.isPrimaryClient&&Eo(n.remoteStore,a),r.label=4;case 4:return[2,o]}}))}))}function gs(t,e,n,i){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var o,s,a,u,c,l;return Object(r["__generator"])(this,(function(h){switch(h.label){case 0:return t.Oo=function(e,n,i){return function(t,e,n,i){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var o,s,a;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return o=e.view._o(n),o.Nn?[4,Ai(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,o)}))]:[3,2];case 1:o=r.sent(),r.label=2;case 2:return s=i&&i.targetChanges.get(e.targetId),a=e.view.applyChanges(o,t.isPrimaryClient,s),[2,(Ts(t,e.targetId,a.To),a.snapshot)]}}))}))}(t,e,n,i)},[4,Ai(t.localStore,e,!0)];case 1:return o=h.sent(),s=new ls(e,o.Bn),a=s._o(o.documents),u=We.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==t.onlineState),c=s.applyChanges(a,t.isPrimaryClient,u),Ts(t,n,c.To),l=new hs(e,n,s),[2,(t.Po.set(e,l),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),c.snapshot)]}}))}))}function vs(t,e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return n=m(t),i=n.Po.get(e),(o=n.Vo.get(i.targetId)).length>1?[2,(n.Vo.set(i.targetId,o.filter((function(t){return!Ut(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)?[3,2]:[4,ki(n.localStore,i.targetId,!1).then((function(){n.sharedClientState.clearQueryState(i.targetId),xo(n.remoteStore,i.targetId),Ss(n,i.targetId)})).catch($r)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return Ss(n,i.targetId),[4,ki(n.localStore,i.targetId,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))}function ys(t,e,n){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var i,o,s,a;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:i=zs(t),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,function(t,e){var n,r=m(t),i=I.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Be());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=de(c,n.get(c.key));null!=l&&s.push(new me(c.key,l,at(l.value.mapValue),ce.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(i.localStore,e)];case 2:return o=r.sent(),i.sharedClientState.addPendingMutation(o.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Ne(w)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(i,o.batchId,n),[4,As(i,o.changes)];case 3:return r.sent(),[4,jo(i.remoteStore)];case 4:return r.sent(),[3,6];case 5:return s=r.sent(),a=Ko(s,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function ms(t,e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:n=m(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,Si(n.localStore,e)];case 2:return i=r.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(y(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?y(r.bo):t.removedDocuments.size>0&&(y(r.bo),r.bo=!1))})),[4,As(n,i,e)];case 3:return r.sent(),[3,6];case 4:return[4,$r(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function _s(t,e,n){var r=m(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=m(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&ns(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function bs(t,e,n){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return(i=m(t)).sharedClientState.updateQueryState(e,"rejected",n),o=i.Co.get(e),(s=o&&o.key)?(a=(a=new Ne(W.comparator)).insert(s,ut.newNoDocument(s,O.min())),u=Be().add(s),c=new ze(O.min(),new Map,new Pe(w),a,u),[4,ms(i,c)]):[3,2];case 1:return r.sent(),i.Do=i.Do.remove(s),i.Co.delete(e),ks(i),[3,4];case 2:return[4,ki(i.localStore,e,!1).then((function(){return Ss(i,e,n)})).catch($r)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))}function ws(t,e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:n=m(t),i=e.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,Ii(n.localStore,e)];case 2:return o=r.sent(),Os(n,i,null),Is(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),[4,As(n,o)];case 3:return r.sent(),[3,6];case 4:return[4,$r(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Es(t,e,n){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var i,o;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:i=m(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,function(t,e){var n=m(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return y(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(i.localStore,e)];case 2:return o=r.sent(),Os(i,e,n),Is(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),[4,As(i,o)];case 3:return r.sent(),[3,6];case 4:return[4,$r(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function xs(t,e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o,s,a;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:To((n=m(t)).remoteStore)||f("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,function(t){var e=m(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(i=r.sent())?[2,void e.resolve()]:((o=n.Fo.get(i)||[]).push(e),n.Fo.set(i,o),[3,4]);case 3:return s=r.sent(),a=Ko(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function Is(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function Os(t,e,n){var r=m(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Ss(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||Cs(t,e)}))}function Cs(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(xo(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),ks(t))}function Ts(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof us?(t.No.addReference(o.key,e),Ns(t,o)):o instanceof cs?(f("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Cs(t,o.key)):v()}}function Ns(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(f("SyncEngine","New document in limbo: "+n),t.So.add(r),ks(t))}function ks(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new W(k.fromString(e)),r=t.ko.next();t.Co.set(r,new fs(n)),t.Do=t.Do.insert(n,r),Eo(t.remoteStore,new yr(Ft(At(n.path)),r,2,a.o))}}function As(t,e,n){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var i,o,s,a;return Object(r["__generator"])(this,(function(u){switch(u.label){case 0:return i=m(t),o=[],s=[],a=[],i.Po.isEmpty()?[3,3]:(i.Po.forEach((function(t,r){a.push(i.Oo(r,e,n).then((function(t){if(t){i.isPrimaryClient&&i.sharedClientState.updateQueryState(r.targetId,t.fromCache?"not-current":"current"),o.push(t);var e=_i.Pn(r.targetId,t);s.push(e)}})))})),[4,Promise.all(a)]);case 1:return u.sent(),i.vo._r(o),[4,function(t,e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o,s,a,u,c,l,h;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:n=m(t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return rr.forEach(e,(function(e){return rr.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return rr.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return r.sent(),[3,4];case 3:if(!ur(i=r.sent()))throw i;return f("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:for(o=0,s=e;o<s.length;o++)a=s[o],u=a.targetId,a.fromCache||(c=n.Fn.get(u),l=c.snapshotVersion,h=c.withLastLimboFreeSnapshotVersion(l),n.Fn=n.Fn.insert(u,h));return[2]}}))}))}(i.localStore,s)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function Ps(t,e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return(n=m(t)).currentUser.isEqual(e)?[3,3]:(f("SyncEngine","User change. New user:",e.toKey()),[4,xi(n.localStore,e)]);case 1:return i=r.sent(),n.currentUser=e,function(t,e){t.Fo.forEach((function(t){t.forEach((function(t){t.reject(new c(u.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),[4,As(n,i.Ln)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}function Rs(t,e){var n=m(t),r=n.Co.get(e);if(r&&r.bo)return Be().add(r.key);var i=Be(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Ls(t,e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return[4,Ai((n=m(t)).localStore,e.query,!0)];case 1:return i=r.sent(),o=e.view.Ao(i),[2,(n.isPrimaryClient&&Ts(n,e.targetId,o.To),o)]}}))}))}function js(t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(r["__generator"])(this,(function(n){return[2,Ri((e=m(t)).localStore).then((function(t){return As(e,t)}))]}))}))}function Ms(t,e,n,i){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var o,s;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return[4,function(t,e){var n=m(t),r=m(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):rr.resolve(null)}))}))}((o=m(t)).localStore,e)];case 1:return null===(s=r.sent())?[3,6]:"pending"!==n?[3,3]:[4,jo(o.remoteStore)];case 2:return r.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Os(o,e,i||null),Is(o,e),function(t,e){m(m(t)._n).Gt(e)}(o.localStore,e)):v(),r.label=4;case 4:return[4,As(o,s)];case 5:return r.sent(),[3,7];case 6:f("SyncEngine","Cannot apply mutation batch with id: "+e),r.label=7;case 7:return[2]}}))}))}function Ds(t,e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o,s,a,u,c,l;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return Gs(n=m(t)),zs(n),!0!==e||!0===n.$o?[3,3]:(i=n.sharedClientState.getAllActiveQueryTargets(),[4,Fs(n,i.toArray())]);case 1:return o=r.sent(),n.$o=!0,[4,Vo(n.remoteStore,!0)];case 2:for(r.sent(),s=0,a=o;s<a.length;s++)u=a[s],Eo(n.remoteStore,u);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(c=[],l=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?c.push(e):l=l.then((function(){return Ss(n,e),ki(n.localStore,e,!0)})),xo(n.remoteStore,e)})),[4,l]);case 4:return r.sent(),[4,Fs(n,c)];case 5:return r.sent(),function(t){var e=m(t);e.Co.forEach((function(t,n){xo(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new Ne(W.comparator)}(n),n.$o=!1,[4,Vo(n.remoteStore,!1)];case 6:r.sent(),r.label=7;case 7:return[2]}}))}))}function Fs(t,e,n){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o,s,a,u,c,l,h,f,p,d,g,v;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:n=m(t),i=[],o=[],s=0,a=e,r.label=1;case 1:return s<a.length?(u=a[s],c=void 0,(l=n.Vo.get(u))&&0!==l.length?[4,Ni(n.localStore,Ft(l[0]))]:[3,7]):[3,13];case 2:c=r.sent(),h=0,f=l,r.label=3;case 3:return h<f.length?(p=f[h],d=n.Po.get(p),[4,Ls(n,d)]):[3,6];case 4:(g=r.sent()).snapshot&&o.push(g.snapshot),r.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Pi(n.localStore,u)];case 8:return v=r.sent(),[4,Ni(n.localStore,v)];case 9:return c=r.sent(),[4,gs(n,qs(v),u,!1)];case 10:r.sent(),r.label=11;case 11:i.push(c),r.label=12;case 12:return s++,[3,1];case 13:return[2,(n.vo._r(o),i)]}}))}))}function qs(t){return kt(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Us(t){var e=m(t);return m(m(e.localStore).persistence).fn()}function Bs(t,e,n,i){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var o,s,a;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return(o=m(t)).$o?(f("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Ri(o.localStore)];case 3:return s=r.sent(),a=ze.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,As(o,s,a)];case 4:return r.sent(),[3,8];case 5:return[4,ki(o.localStore,e,!0)];case 6:return r.sent(),Ss(o,e,i),[3,8];case 7:v(),r.label=8;case 8:return[2]}}))}))}function Vs(t,e,n){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var i,o,s,a,u,c,l,h,p,d;return Object(r["__generator"])(this,(function(g){switch(g.label){case 0:if(!(i=Gs(t)).$o)return[3,10];o=0,s=e,g.label=1;case 1:return o<s.length?(a=s[o],i.Vo.has(a)?(f("SyncEngine","Adding an already active target "+a),[3,5]):[4,Pi(i.localStore,a)]):[3,6];case 2:return u=g.sent(),[4,Ni(i.localStore,u)];case 3:return c=g.sent(),[4,gs(i,qs(u),c.targetId,!1)];case 4:g.sent(),Eo(i.remoteStore,c),g.label=5;case 5:return o++,[3,1];case 6:l=function(t){return Object(r["__generator"])(this,(function(e){switch(e.label){case 0:return i.Vo.has(t)?[4,ki(i.localStore,t,!1).then((function(){xo(i.remoteStore,t),Ss(i,t)})).catch($r)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,p=n,g.label=7;case 7:return h<p.length?(d=p[h],[5,l(d)]):[3,10];case 8:g.sent(),g.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Gs(t){var e=m(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ms.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Rs.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bs.bind(null,e),e.vo._r=ts.bind(null,e.eventManager),e.vo.Mo=es.bind(null,e.eventManager),e}function zs(t){var e=m(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ws.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Es.bind(null,e),e}function Ws(t,e,n){var i=m(t);(function(t,e,n){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return r.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return i=r.sent(),[4,function(t,e){var n=m(t),r=sn(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return n.Ke.getBundleMetadata(t,e.id)})).then((function(t){return!!t&&t.createTime.compareTo(r)>=0}))}(t.localStore,i)];case 2:return r.sent()?[4,e.close()]:[3,4];case 3:return[2,(r.sent(),void n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(i)))];case 4:return n._updateProgress(as(i)),o=new ss(i,t.localStore,e.R),[4,e.Lo()];case 5:s=r.sent(),r.label=6;case 6:return s?[4,o.oo(s)]:[3,10];case 7:return(a=r.sent())&&n._updateProgress(a),[4,e.Lo()];case 8:s=r.sent(),r.label=9;case 9:return[3,6];case 10:return[4,o.complete()];case 11:return u=r.sent(),[4,As(t,u.wn,void 0)];case 12:return r.sent(),[4,function(t,e){var n=m(t);return n.persistence.runTransaction("Save bundle","readwrite",(function(t){return n.Ke.saveBundleMetadata(t,e)}))}(t.localStore,i)];case 13:return r.sent(),n._completeWith(u.progress),[3,15];case 14:return d("SyncEngine","Loading bundle failed with "+(c=r.sent())),n._failWith(c),[3,15];case 15:return[2]}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(i,e,n).then((function(){i.sharedClientState.notifyBundleLoaded()}))}var Ks=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(e){switch(e.label){case 0:return this.R=ho(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return Ei(this.persistence,new bi,t.initialUser,this.R)},t.prototype.qo=function(t){return new zi(Ki.bs,this.R)},t.prototype.Bo=function(t){return new ro},t.prototype.terminate=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),Hs=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(r["__extends"])(e,t),e.prototype.initialize=function(e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Li(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,zs(this.Qo.syncEngine)];case 4:return n.sent(),[4,jo(this.Qo.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ko=function(t){return Ei(this.persistence,new bi,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new Zr(e,t.asyncQueue)},e.prototype.qo=function(t){var e=vi(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Dr.withCacheSize(this.cacheSizeBytes):Dr.DEFAULT;return new pi(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,co(),lo(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new ro},e}(Ks),Ys=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(r["__extends"])(e,t),e.prototype.initialize=function(e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i=this;return Object(r["__generator"])(this,(function(o){switch(o.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return o.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof no?(this.sharedClientState.syncEngine={ui:Ms.bind(null,n),ai:Bs.bind(null,n),hi:Vs.bind(null,n),fn:Us.bind(null,n),ci:js.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.He((function(t){return Object(r["__awaiter"])(i,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(e){switch(e.label){case 0:return[4,Ds(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return o.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=co();if(!no.yt(e))throw new c(u.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=vi(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new no(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Hs),Xs=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n=this;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return _s(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Ps.bind(null,this.syncEngine),[4,Vo(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new Qo},t.prototype.createDatastore=function(t){var e,n=ho(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new uo(e));return function(t,e,n){return new yo(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return _s(s.syncEngine,t,0)},o=oo.yt()?new oo:new io,new _o(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new ps(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return e=m(t),f("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,wo(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var i;return Object(r["__generator"])(this,(function(r){return n<t.byteLength?(i={value:t.slice(n,n+e),done:!1},[2,(n+=e,i)]):[2,{done:!0}]}))}))},cancel:function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(t){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qs=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Js=function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new nr,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}return t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var t,e,n,i;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return[4,this.Jo()];case 1:return null===(t=r.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return i=r.sent(),[2,new is(JSON.parse(i),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var t,e;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var t,e;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},t}(),Zs=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var e,n=this;return Object(r["__generator"])(this,(function(i){switch(i.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new c(u.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o,s,a,u;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return n=m(t),i=pn(n.R)+"/documents",o={documents:e.map((function(t){return cn(n.R,t)}))},[4,n.$i("BatchGetDocuments",i,o)];case 1:return s=r.sent(),a=new Map,s.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){y(!!e.found),e.found.name,e.found.updateTime;var n=ln(t,e.found.name),r=sn(e.found.updateTime),i=new st({mapValue:{fields:e.found.fields}});return ut.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){y(!!e.missing),y(!!e.readTime);var n=ln(t,e.missing),r=sn(e.readTime);return ut.newNoDocument(n,r)}(t,e):v()}(n.R,t);a.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=a.get(t.toString());y(!!e),u.push(e)})),u)]}}))}))}(this.datastore,t)];case 1:return[2,((e=i.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Ie(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var t,e=this;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=W.fromPath(n);e.mutations.push(new Oe(r,e.precondition(r)))})),[4,function(t,e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return n=m(t),i=pn(n.R)+"/documents",o={writes:e.map((function(t){return yn(n.R,t)}))},[4,n.Ni("Commit",i,o)];case 1:return r.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw v();e=O.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new c(u.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?ce.updateTime(e):ce.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(O.min()))throw new c(u.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ce.updateTime(e)}return ce.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),ta=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new fo(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return Object(r["__awaiter"])(t,void 0,void 0,(function(){var t,e,n=this;return Object(r["__generator"])(this,(function(r){return t=new Zs(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!V(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Ce(e)}return!1},t}(),ea=function(){function t(t,e,n){var i=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Hi.UNAUTHENTICATED,this.clientId=b.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return Object(r["__awaiter"])(i,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(e){switch(e.label){case 0:return f("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new c(u.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return Object(r["__awaiter"])(t,void 0,void 0,(function(){var t,n;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Ko(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t,e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o=this;return Object(r["__generator"])(this,(function(s){switch(s.label){case 0:return t.asyncQueue.verifyOperationInProgress(),f("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=s.sent(),[4,e.initialize(n)];case 2:return s.sent(),i=n.initialUser,t.setCredentialChangeListener((function(t){return Object(r["__awaiter"])(o,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return i.isEqual(t)?[3,2]:[4,xi(e.localStore,t)];case 1:n.sent(),i=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function ra(t,e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i;return Object(r["__generator"])(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,ia(t)];case 1:return n=o.sent(),f("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return i=o.sent(),[4,e.initialize(n,i)];case 3:return o.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return(n=m(t)).asyncQueue.verifyOperationInProgress(),f("RemoteStore","RemoteStore received new credentials"),i=To(n),n.Or.add(3),[4,wo(n)];case 1:return r.sent(),i&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return r.sent(),n.Or.delete(3),[4,bo(n)];case 3:return r.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function ia(t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(f("FirestoreClient","Using default OfflineComponentProvider"),[4,na(t,new Ks)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function oa(t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(f("FirestoreClient","Using default OnlineComponentProvider"),[4,ra(t,new Xs)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function sa(t){return ia(t).then((function(t){return t.persistence}))}function aa(t){return ia(t).then((function(t){return t.localStore}))}function ua(t){return oa(t).then((function(t){return t.remoteStore}))}function ca(t){return oa(t).then((function(t){return t.syncEngine}))}function la(t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var e,n;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return[4,oa(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=ds.bind(null,e.syncEngine),n.onUnlisten=vs.bind(null,e.syncEngine),n)]}}))}))}function ha(t,e,n){var i=this;void 0===n&&(n={});var o=new nr;return t.asyncQueue.enqueueAndForget((function(){return Object(r["__awaiter"])(i,void 0,void 0,(function(){var i;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return i=function(t,e,n,r,i){var o=new Qs({next:function(o){e.enqueueAndForget((function(){return Zo(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new c(u.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new c(u.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new rs(At(n.path),o,{includeMetadataChanges:!0,so:!0});return Jo(t,s)},[4,la(t)];case 1:return[2,i.apply(void 0,[r.sent(),t.asyncQueue,e,n,o])]}}))}))})),o.promise}function fa(t,e,n){var i=this;void 0===n&&(n={});var o=new nr;return t.asyncQueue.enqueueAndForget((function(){return Object(r["__awaiter"])(i,void 0,void 0,(function(){var i;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return i=function(t,e,n,r,i){var o=new Qs({next:function(n){e.enqueueAndForget((function(){return Zo(t,s)})),n.fromCache&&"server"===r.source?i.reject(new c(u.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new rs(n,o,{includeMetadataChanges:!0,so:!0});return Jo(t,s)},[4,la(t)];case 1:return[2,i.apply(void 0,[r.sent(),t.asyncQueue,e,n,o])]}}))}))})),o.promise}var pa=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},da=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),ga=new Map,va=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},ya=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(Hi.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),ma=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),_a=function(){function t(t){var e=this;this.currentUser=Hi.UNAUTHENTICATED,this.oc=new nr,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){f("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(f("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(f("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(y("string"==typeof n.accessToken),new va(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return Object(r["__awaiter"])(n,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return y(null===t||"string"==typeof t),new Hi(t)},t}(),ba=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=Hi.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),wa=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new ba(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(Hi.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ea(t,e,n){if(!n)throw new c(u.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function xa(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new c(u.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Ia(t,e,n,r){if(!0===e&&!0===r)throw new c(u.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Oa(t){if(!W.isDocumentKey(t))throw new c(u.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Sa(t){if(W.isDocumentKey(t))throw new c(u.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Ca(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":v()}function Ta(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new c(u.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Ca(t);throw new c(u.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Na(t,e){if(e<=0)throw new c(u.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ka=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new c(u.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new c(u.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Ia("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Aa=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ka({}),this._settingsFrozen=!1,t instanceof da?(this._databaseId=t,this._credentials=new ya):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new c(u.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new da(t.options.projectId)}(t),this._credentials=new _a(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new c(u.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new c(u.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ka(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new ya;switch(t.type){case"gapi":var e=t.client;return y(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new wa(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new c(u.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return t=this,(e=ga.get(t))&&(f("ComponentProvider","Removing Datastore"),ga.delete(t),e.terminate()),Promise.resolve();var t,e},t}(),Pa=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new La(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Ra=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),La=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,At(r))||this)._path=r,i.type="collection",i}return Object(r["__extends"])(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Pa(this.firestore,null,new W(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Ra);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(t,e){for(var n,o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];if(t=Object(i["getModularInstance"])(t),Ea("collection","path",e),t instanceof Aa)return Sa(n=k.fromString.apply(k,Object(r["__spreadArray"])([e],o))),new La(t,null,n);if(!(t instanceof Pa||t instanceof La))throw new c(u.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Sa(n=k.fromString.apply(k,Object(r["__spreadArray"])([t.path],o)).child(k.fromString(e))),new La(t.firestore,null,n)}function Ma(t,e){for(var n,o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];if(t=Object(i["getModularInstance"])(t),1===arguments.length&&(e=b.u()),Ea("doc","path",e),t instanceof Aa)return Oa(n=k.fromString.apply(k,Object(r["__spreadArray"])([e],o))),new Pa(t,null,new W(n));if(!(t instanceof Pa||t instanceof La))throw new c(u.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Oa(n=t._path.child(k.fromString.apply(k,Object(r["__spreadArray"])([e],o)))),new Pa(t.firestore,t instanceof La?t.converter:null,new W(n))}function Da(t,e){return t=Object(i["getModularInstance"])(t),e=Object(i["getModularInstance"])(e),(t instanceof Pa||t instanceof La)&&(e instanceof Pa||e instanceof La)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Fa(t,e){return t=Object(i["getModularInstance"])(t),e=Object(i["getModularInstance"])(e),t instanceof Ra&&e instanceof Ra&&t.firestore===e.firestore&&Ut(t._query,e._query)&&t.converter===e.converter
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var qa=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=[],this.Zi=new fo(this,"async_queue_retry"),this.Tc=function(){var e=lo();e&&f("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=lo();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Tc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ic(),this.Ac(t)},t.prototype.enterRestrictedMode=function(){if(!this._c){this._c=!0;var t=lo();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Tc)}},t.prototype.enqueue=function(t){return this.Ic(),this._c?new Promise((function(t){})):this.Ac(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.Rc()}))},t.prototype.Rc=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var t,e=this;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!ur(t=n.sent()))throw t;return f("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.Rc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Ac=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,p("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ic(),this.Ec.indexOf(t)>-1&&(e=0);var i=Wo.createAndSchedule(this,t,e,n,(function(t){return r.bc(t)}));return this.mc.push(i),i},t.prototype.Ic=function(){this.yc&&v()},t.prototype.verifyOperationInProgress=function(){},t.prototype.vc=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(r["__generator"])(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Pc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Vc=function(t){var e=this;return this.vc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.vc()}))},t.prototype.Sc=function(t){this.Ec.push(t)},t.prototype.bc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Ua(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Ba=function(){function t(){this._progressObserver={},this._taskCompletionResolver=new nr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},t}(),Va=-1,Ga=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new qa,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(r["__extends"])(e,t),e.prototype._terminate=function(){return this._firestoreClient||Wa(this),this._firestoreClient.terminate()},e}(Aa);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(t){return t._firestoreClient||Wa(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Wa(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new pa(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new ea(t._credentials,t._queue,r)}function Ka(t,e,n){var i=this,o=new nr;return t.asyncQueue.enqueue((function(){return Object(r["__awaiter"])(i,void 0,void 0,(function(){var i;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,na(t,n)];case 1:return r.sent(),[4,ra(t,e)];case 2:return r.sent(),o.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===u.FAILED_PRECONDITION||t.code===u.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(i=r.sent()))throw i;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),o.reject(i),[3,4];case 4:return[2]}}))}))})).then((function(){return o.promise}))}function Ha(t){if(t._initialized||t._terminated)throw new c(u.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ya=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new c(u.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new P(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Xa=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(L.fromBase64String(e))}catch(e){throw new c(u.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(L.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),$a=function(t){this._methodName=t},Qa=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new c(u.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new c(u.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return w(this._lat,t._lat)||w(this._long,t._long)},t}(),Ja=/^__.*__$/,Za=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new me(t,this.data,this.fieldMask,e,this.fieldTransforms):new ye(t,this.data,e,this.fieldTransforms)},t}(),tu=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new me(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw v()}}var nu=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Dc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Cc",{get:function(){return this.settings.Cc},enumerable:!1,configurable:!0}),t.prototype.Nc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.xc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.kc(t),r},t.prototype.$c=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.Dc(),r},t.prototype.Oc=function(t){return this.Nc({path:void 0,Fc:!0})},t.prototype.Mc=function(t){return Eu(t,this.settings.methodName,this.settings.Lc||!1,this.path,this.settings.Bc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Dc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.kc(this.path.get(t))},t.prototype.kc=function(t){if(0===t.length)throw this.Mc("Document fields must not be empty");if(eu(this.Cc)&&Ja.test(t))throw this.Mc('Document fields cannot begin and end with "__"')},t}(),ru=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||ho(t)}return t.prototype.qc=function(t,e,n,r){return void 0===r&&(r=!1),new nu({Cc:t,methodName:e,Bc:n,path:P.emptyPath(),Fc:!1,Lc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function iu(t){var e=t._freezeSettings(),n=ho(t._databaseId);return new ru(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ou(t,e,n,r,i,o){void 0===o&&(o={});var s=t.qc(o.merge||o.mergeFields?2:0,e,n,i);mu("Data must be an object, but it was:",s,r);var a,l,h=vu(r,s);if(o.merge)a=new R(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){for(var f=[],p=0,d=o.mergeFields;p<d.length;p++){var g=_u(e,d[p],n);if(!s.contains(g))throw new c(u.INVALID_ARGUMENT,"Field '"+g+"' is specified in your field mask but missing from your input data.");xu(f,g)||f.push(g)}a=new R(f),l=s.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,l=s.fieldTransforms;return new Za(new st(h),a,l)}var su=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r["__extends"])(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Cc)throw 1===t.Cc?t.Mc(this._methodName+"() can only appear at the top level of your update data"):t.Mc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}($a);function au(t,e,n){return new nu({Cc:3,Bc:e.settings.Bc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var uu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r["__extends"])(e,t),e.prototype._toFieldTransform=function(t){return new ae(t.path,new Zt)},e.prototype.isEqual=function(t){return t instanceof e},e}($a),cu=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return Object(r["__extends"])(e,t),e.prototype._toFieldTransform=function(t){var e=au(this,t,!0),n=this.Uc.map((function(t){return gu(t,e)})),r=new te(n);return new ae(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}($a),lu=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return Object(r["__extends"])(e,t),e.prototype._toFieldTransform=function(t){var e=au(this,t,!0),n=this.Uc.map((function(t){return gu(t,e)})),r=new ne(n);return new ae(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}($a),hu=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(r["__extends"])(e,t),e.prototype._toFieldTransform=function(t){var e=new ie(t.R,Yt(t.R,this.Kc));return new ae(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}($a);function fu(t,e,n,r){var o=t.qc(1,e,n);mu("Data must be an object, but it was:",o,r);var s=[],a=st.empty();C(r,(function(t,r){var u=wu(e,t,n);r=Object(i["getModularInstance"])(r);var c=o.$c(u);if(r instanceof su)s.push(u);else{var l=gu(r,c);null!=l&&(s.push(u),a.set(u,l))}}));var u=new R(s);return new tu(a,u,o.fieldTransforms)}function pu(t,e,n,r,o,s){var a=t.qc(1,e,n),l=[_u(e,r,n)],h=[o];if(s.length%2!=0)throw new c(u.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var f=0;f<s.length;f+=2)l.push(_u(e,s[f])),h.push(s[f+1]);for(var p=[],d=st.empty(),g=l.length-1;g>=0;--g)if(!xu(p,l[g])){var v=l[g],y=h[g];y=Object(i["getModularInstance"])(y);var m=a.$c(v);if(y instanceof su)p.push(v);else{var _=gu(y,m);null!=_&&(p.push(v),d.set(v,_))}}var b=new R(p);return new tu(d,b,a.fieldTransforms)}function du(t,e,n,r){return void 0===r&&(r=!1),gu(n,t.qc(r?4:3,e))}function gu(t,e){if(yu(t=Object(i["getModularInstance"])(t)))return mu("Unsupported field value:",e,t),vu(t,e);if(t instanceof $a)return function(t,e){if(!eu(e.Cc))throw e.Mc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Mc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Cc)throw e.Mc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=gu(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(i["getModularInstance"])(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Yt(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=I.fromDate(t);return{timestampValue:nn(e.R,n)}}if(t instanceof I)return n=new I(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:nn(e.R,n)};if(t instanceof Qa)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Xa)return{bytesValue:rn(e.R,t._byteString)};if(t instanceof Pa){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Mc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:an(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Mc("Unsupported field value: "+Ca(t))}(t,e)}function vu(t,e){var n={};return T(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):C(t,(function(t,r){var i=gu(r,e.xc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function yu(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof I||t instanceof Qa||t instanceof Xa||t instanceof Pa||t instanceof $a)}function mu(t,e,n){if(!yu(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Ca(n);throw"an object"===r?e.Mc(t+" a custom object"):e.Mc(t+" "+r)}}function _u(t,e,n){if((e=Object(i["getModularInstance"])(e))instanceof Ya)return e._internalPath;if("string"==typeof e)return wu(t,e);throw Eu("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var bu=new RegExp("[~\\*/\\[\\]]");function wu(t,e,n){if(e.search(bu)>=0)throw Eu("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Ya.bind.apply(Ya,Object(r["__spreadArray"])([void 0],e.split(".")))))._internalPath}catch(i){throw Eu("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Eu(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var l="";return(o||s)&&(l+=" (found",o&&(l+=" in field "+r),s&&(l+=" in document "+i),l+=")"),new c(u.INVALID_ARGUMENT,(a+=". ")+t+l)}function xu(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Iu=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Pa(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Ou(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Su("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Ou=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r["__extends"])(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Iu);function Su(t,e){return"string"==typeof e?wu(t,e):e instanceof Ya?e._internalPath:e._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cu=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Tu=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(r["__extends"])(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Nu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Su("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Iu),Nu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r["__extends"])(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Tu),ku=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Cu(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Nu(n._firestore,n._userDataWriter,r.key,r,new Cu(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new c(u.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new Nu(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Cu(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Nu(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Cu(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Au(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Au(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return v()}}function Pu(t,e){return t instanceof Tu&&e instanceof Tu?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ku&&e instanceof ku&&t._firestore===e._firestore&&Fa(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(t){if(Rt(t)&&0===t.explicitOrderBy.length)throw new c(u.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Lu=function(){};function ju(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Mu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.jc=n,i.Wc=r,i.type="where",i}return Object(r["__extends"])(e,t),e.prototype._apply=function(t){var e=iu(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new c(u.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Gu(s,o);for(var l=[],h=0,f=s;h<f.length;h++){var p=f[h];l.push(Vu(r,t,p))}a={arrayValue:{values:l}}}else a=Vu(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Gu(s,o),a=du(n,"where",s,"in"===o||"not-in"===o);var d=dt.create(i,o,a);return function(t,e){if(e.g()){var n=jt(t);if(null!==n&&!n.isEqual(e.field))throw new c(u.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Lt(t);null!==r&&zu(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new c(u.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new c(u.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,d),d}(t._query,0,e,t.firestore._databaseId,this.Qc,this.jc,this.Wc);return new Ra(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Nt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Lu),Du=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Gc=n,r.type="orderBy",r}return Object(r["__extends"])(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new c(u.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new c(u.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ot(e,n);return function(t,e){if(null===Lt(t)){var n=jt(t);null!==n&&zu(t,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Gc);return new Ra(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Nt(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Lu),Fu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return Object(r["__extends"])(e,t),e.prototype._apply=function(t){return new Ra(t.firestore,t.converter,qt(t._query,this.zc,this.Hc))},e}(Lu),qu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return Object(r["__extends"])(e,t),e.prototype._apply=function(t){var e=Bu(t,this.type,this.Jc,this.Yc);return new Ra(t.firestore,t.converter,function(t,e){return new Nt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Lu),Uu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return Object(r["__extends"])(e,t),e.prototype._apply=function(t){var e=Bu(t,this.type,this.Jc,this.Yc);return new Ra(t.firestore,t.converter,function(t,e){return new Nt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Lu);function Bu(t,e,n,r){if(n[0]=Object(i["getModularInstance"])(n[0]),n[0]instanceof Iu)return function(t,e,n,r,i){if(!r)throw new c(u.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Dt(t);s<a.length;s++){var l=a[s];if(l.field.isKeyField())o.push(Z(e,r.key));else{var h=r.data.field(l.field);if(q(h))throw new c(u.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+l.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===h){var f=l.field.canonicalString();throw new c(u.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+f+"' (used as the orderBy) does not exist.")}o.push(h)}}return new xt(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var o=iu(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new c(u.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],l=0;l<i.length;l++){var h=i[l];if(s[l].field.isKeyField()){if("string"!=typeof h)throw new c(u.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof h);if(!Mt(t)&&-1!==h.indexOf("/"))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+h+"' contains a slash.");var f=t.path.child(k.fromString(h));if(!W.isDocumentKey(f))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+f+"' is not because it contains an odd number of segments.");var p=new W(f);a.push(Z(e,p))}else{var d=du(n,r,h);a.push(d)}}return new xt(a,o)}(t._query,t.firestore._databaseId,o,e,n,r)}function Vu(t,e,n){if("string"==typeof(n=Object(i["getModularInstance"])(n))){if(""===n)throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mt(e)&&-1!==n.indexOf("/"))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(k.fromString(n));if(!W.isDocumentKey(r))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Z(t,new W(r))}if(n instanceof Pa)return Z(t,n._key);throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Ca(n)+".")}function Gu(t,e){if(!Array.isArray(t)||0===t.length)throw new c(u.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new c(u.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function zu(t,e,n){if(!n.isEqual(e))throw new c(u.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wu=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),K(t)){case 0:return null;case 1:return t.booleanValue;case 2:return D(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(F(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw v()}},t.prototype.convertObject=function(t,e){var n=this,r={};return C(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new Qa(D(t.latitude),D(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=U(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(B(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=M(t);return new I(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=k.fromString(t);y(Pn(n));var r=new da(n.get(1),n.get(3)),i=new W(n.popFirst(5));return r.isEqual(e)||p("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Hu=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(r["__extends"])(e,t),e.prototype.convertBytes=function(t){return new Xa(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Pa(this.firestore,null,e)},e}(Wu),Yu=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=iu(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Xu(t,this._firestore),i=Ku(r.converter,e,n),o=ou(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,ce.none())),this},t.prototype.update=function(t,e,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];this._verifyNotCommitted();var s,a=Xu(t,this._firestore);return s="string"==typeof(e=Object(i["getModularInstance"])(e))||e instanceof Ya?pu(this._dataReader,"WriteBatch.update",a._key,e,n,r):fu(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(s.toMutation(a._key,ce.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Xu(t,this._firestore);return this._mutations=this._mutations.concat(new Ie(e._key,ce.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new c(u.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(t,e){if((t=Object(i["getModularInstance"])(t)).firestore!==e)throw new c(u.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $u=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(r["__extends"])(e,t),e.prototype.convertBytes=function(t){return new Xa(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Pa(this.firestore,null,e)},e}(Wu);function Qu(t,e,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];t=Ta(t,Pa);var s=Ta(t.firestore,Ga),a=iu(s);return Zu(s,[("string"==typeof(e=Object(i["getModularInstance"])(e))||e instanceof Ya?pu(a,"updateDoc",t._key,e,n,r):fu(a,"updateDoc",t._key,e)).toMutation(t._key,ce.exists(!0))])}function Ju(t){for(var e,n,o,s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];t=Object(i["getModularInstance"])(t);var u={includeMetadataChanges:!1},c=0;"object"!=typeof s[c]||Ua(s[c])||(u=s[c],c++);var l,h,f,p={includeMetadataChanges:u.includeMetadataChanges};if(Ua(s[c])){var d=s[c];s[c]=null===(e=d.next)||void 0===e?void 0:e.bind(d),s[c+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),s[c+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(t instanceof Pa)h=Ta(t.firestore,Ga),f=At(t._key.path),l={next:function(e){s[c]&&s[c](tc(h,t,e))},error:s[c+1],complete:s[c+2]};else{var g=Ta(t,Ra);h=Ta(g.firestore,Ga),f=g._query;var v=new $u(h);l={next:function(t){s[c]&&s[c](new ku(h,v,g,t))},error:s[c+1],complete:s[c+2]},Ru(t._query)}return function(t,e,n,i){var o=this,s=new Qs(i),a=new rs(e,s,n);return t.asyncQueue.enqueueAndForget((function(){return Object(r["__awaiter"])(o,void 0,void 0,(function(){var e;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return e=Jo,[4,la(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){s.Wo(),t.asyncQueue.enqueueAndForget((function(){return Object(r["__awaiter"])(o,void 0,void 0,(function(){var e;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return e=Zo,[4,la(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}(za(h),f,p,l)}function Zu(t,e){return function(t,e){var n=this,i=new nr;return t.asyncQueue.enqueueAndForget((function(){return Object(r["__awaiter"])(n,void 0,void 0,(function(){var n;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return n=ys,[4,ca(t)];case 1:return[2,n.apply(void 0,[r.sent(),e,i])]}}))}))})),i.promise}(za(t),e)}function tc(t,e,n){var r=n.docs.get(e._key),i=new $u(t);return new Tu(t,i,e._key,r,new Cu(n.hasPendingWrites,n.fromCache),e.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ec=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(r["__extends"])(e,t),e.prototype.get=function(e){var n=this,r=Xu(e,this._firestore),i=new $u(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new Tu(n._firestore,i,r._key,t._document,new Cu(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=iu(t)}return t.prototype.get=function(t){var e=this,n=Xu(t,this._firestore),r=new Hu(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return v();var i=t[0];if(i.isFoundDocument())return new Iu(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Iu(e._firestore,r,n._key,null,n.converter);throw v()}))},t.prototype.set=function(t,e,n){var r=Xu(t,this._firestore),i=Ku(r.converter,e,n),o=ou(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];var s,a=Xu(t,this._firestore);return s="string"==typeof(e=Object(i["getModularInstance"])(e))||e instanceof Ya?pu(this._dataReader,"Transaction.update",a._key,e,n,r):fu(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,s),this},t.prototype.delete=function(t){var e=Xu(t,this._firestore);return this._transaction.delete(e._key),this},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(){if("undefined"==typeof Uint8Array)throw new c(u.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function rc(){if("undefined"==typeof atob)throw new c(u.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ic=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return rc(),new t(Xa.fromBase64String(e))},t.fromUint8Array=function(e){return nc(),new t(Xa.fromUint8Array(e))},t.prototype.toBase64=function(){return rc(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return nc(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),oc=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Ha(t=Ta(t,Ga));var n=za(t),r=t._freezeSettings(),i=new Xs;return Ka(n,i,new Hs(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Ha(t=Ta(t,Ga));var e=za(t),n=t._freezeSettings(),r=new Xs;return Ka(e,r,new Ys(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new c(u.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new nr;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return Object(r["__awaiter"])(e,void 0,void 0,(function(){var e;return Object(r["__generator"])(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,function(t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return or.yt()?(e=t+"main",[4,or.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(vi(t._databaseId,t._persistenceKey))];case 1:return i.sent(),n.resolve(),[3,3];case 2:return e=i.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),sc=function(){function t(t,e,n){var r=this;this._delegate=e,this.Xc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof da||(this.Zc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||d("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var o=(t=Ta(t,Aa))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&d("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:e+":"+n,ssl:!1})),r.mockUserToken){var s=Object(i["createMockUserToken"])(r.mockUserToken),a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new c(u.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new ma(new va(s,new Hi(a)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Object(r["__awaiter"])(e,void 0,void 0,(function(){var e,n;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return[4,sa(t)];case 1:return e=r.sent(),[4,ua(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=m(t);return e.Or.delete(0),bo(e)}(n))]}}))}))}))}(za(Ta(this._delegate,Ga)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Object(r["__awaiter"])(e,void 0,void 0,(function(){var e,n;return Object(r["__generator"])(this,(function(i){switch(i.label){case 0:return[4,sa(t)];case 1:return e=i.sent(),[4,ua(t)];case 2:return n=i.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return(e=m(t)).Or.add(0),[4,wo(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(za(Ta(this._delegate,Ga)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Ia("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Xc.enableMultiTabIndexedDbPersistence(this):this.Xc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Xc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Zc&&(this.Zc._removeServiceInstance("firestore"),this.Zc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new nr;return t.asyncQueue.enqueueAndForget((function(){return Object(r["__awaiter"])(e,void 0,void 0,(function(){var e;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return e=xs,[4,ca(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(za(Ta(this._delegate,Ga)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,i=new Qs(e);return t.asyncQueue.enqueueAndForget((function(){return Object(r["__awaiter"])(n,void 0,void 0,(function(){var e;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return e=function(t,e){m(t).Gr.add(e),e.next()},[4,la(t)];case 1:return[2,e.apply(void 0,[n.sent(),i])]}}))}))})),function(){i.Wo(),t.asyncQueue.enqueueAndForget((function(){return Object(r["__awaiter"])(n,void 0,void 0,(function(){var e;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return e=function(t,e){m(t).Gr.delete(e)},[4,la(t)];case 1:return[2,e.apply(void 0,[n.sent(),i])]}}))}))}))}}(za(t=Ta(t,Ga)),Ua(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Zc)throw new c(u.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Zc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new wc(this,ja(this._delegate,t))}catch(t){throw pc(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new fc(this,Ma(this._delegate,t))}catch(t){throw pc(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new mc(this,function(t,e){if(t=Ta(t,Aa),Ea("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new c(u.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Ra(t,null,function(t){return new Nt(k.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw pc(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,i=new nr;return t.asyncQueue.enqueueAndForget((function(){return Object(r["__awaiter"])(n,void 0,void 0,(function(){var n;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return[4,function(t){return oa(t).then((function(t){return t.datastore}))}(t)];case 1:return n=r.sent(),new ta(t.asyncQueue,n,e,i).run(),[2]}}))}))})),i.promise}(za(t),(function(n){return e(new ec(t,n))}))}(this._delegate,(function(n){return t(new cc(e,n))}))},t.prototype.batch=function(){var t=this;return za(this._delegate),new lc(new Yu(this._delegate,(function(e){return Zu(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new c(u.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new c(u.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),ac=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(r["__extends"])(e,t),e.prototype.convertBytes=function(t){return new ic(new Xa(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return fc.tu(e,this.firestore,null)},e}(Wu);function uc(t){var e;e=t,l.setLogLevel(e)}var cc=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new ac(t)}return t.prototype.get=function(t){var e=this,n=Ec(t);return this._delegate.get(n).then((function(t){return new vc(e._firestore,new Tu(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=Ec(t);return n?(xa("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var a=Ec(t);return 2===arguments.length?this._delegate.update(a,e):(i=this._delegate).update.apply(i,Object(r["__spreadArray"])([a,e,n],o)),this},t.prototype.delete=function(t){var e=Ec(t);return this._delegate.delete(e),this},t}(),lc=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Ec(t);return n?(xa("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var a=Ec(t);return 2===arguments.length?this._delegate.update(a,e):(i=this._delegate).update.apply(i,Object(r["__spreadArray"])([a,e,n],o)),this},t.prototype.delete=function(t){var e=Ec(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),hc=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Nu(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new yc(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.eu=function(e,n){var r=t.nu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new ac(e),n),i.set(n,o)),o},t}();hc.nu=new WeakMap;var fc=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new ac(t)}return t.su=function(e,n,r){if(e.length%2!=0)throw new c(u.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Pa(n._delegate,r,new W(e)))},t.tu=function(e,n,r){return new t(n,new Pa(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new wc(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new wc(this.firestore,ja(this._delegate,t))}catch(t){throw pc(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(i["getModularInstance"])(t))instanceof Pa&&Da(this._delegate,t)},t.prototype.set=function(t,e){e=xa("DocumentReference.set",e);try{return function(t,e,n){t=Ta(t,Pa);var r=Ta(t.firestore,Ga),i=Ku(t.converter,e,n);return Zu(r,[ou(iu(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,ce.none())])}(this._delegate,t,e)}catch(t){throw pc(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];try{return 1===arguments.length?Qu(this._delegate,t):Qu.apply(void 0,Object(r["__spreadArray"])([this._delegate,t,e],n))}catch(t){throw pc(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Zu(Ta((t=this._delegate).firestore,Ga),[new Ie(t._key,ce.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=dc(e),i=gc(e,(function(e){return new vc(t.firestore,new Tu(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return Ju(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ta(t,Pa);var e=Ta(t.firestore,Ga),n=za(e),i=new $u(e);return function(t,e){var n=this,i=new nr;return t.asyncQueue.enqueueAndForget((function(){return Object(r["__awaiter"])(n,void 0,void 0,(function(){var n;return Object(r["__generator"])(this,(function(o){switch(o.label){case 0:return n=function(t,e,n){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var i,o;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t,e){var n=m(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(o=r.sent()).isFoundDocument()?n.resolve(o):o.isNoDocument()?n.resolve(null):n.reject(new c(u.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return i=r.sent(),o=Ko(i,"Failed to get document '"+e+" from cache"),n.reject(o),[3,3];case 3:return[2]}}))}))},[4,aa(t)];case 1:return[2,n.apply(void 0,[o.sent(),e,i])]}}))}))})),i.promise}(n,t._key).then((function(n){return new Tu(e,i,t._key,n,new Cu(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Ta(t,Pa);var e=Ta(t.firestore,Ga);return ha(za(e),t._key,{source:"server"}).then((function(n){return tc(e,t,n)}))}(this._delegate):function(t){t=Ta(t,Pa);var e=Ta(t.firestore,Ga);return ha(za(e),t._key).then((function(n){return tc(e,t,n)}))}(this._delegate)).then((function(t){return new vc(e.firestore,new Tu(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(hc.eu(this.firestore,e)):this._delegate.withConverter(null))},t}();function pc(t,e,n){return t.message=t.message.replace(e,n),t}function dc(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Ua(r))return r}return{}}function gc(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Ua(t[0])?t[0]:Ua(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var vc=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new fc(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Pu(this._delegate,t._delegate)},t}(),yc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r["__extends"])(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(vc),mc=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new ac(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,ju(this._delegate,function(t,e,n){var r=e,i=Su("where",t);return new Mu(i,r,n)}(e,n,r)))}catch(e){throw pc(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,ju(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Su("orderBy",t);return new Du(r,n)}(e,n)))}catch(e){throw pc(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,ju(this._delegate,function(t){return Na("limit",t),new Fu("limit",t,"F")}(e)))}catch(e){throw pc(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,ju(this._delegate,function(t){return Na("limitToLast",t),new Fu("limitToLast",t,"L")}(e)))}catch(e){throw pc(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ju(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new qu("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw pc(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ju(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new qu("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw pc(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ju(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Uu("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw pc(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ju(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Uu("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw pc(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Fa(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ta(t,Ra);var e=Ta(t.firestore,Ga),n=za(e),i=new $u(e);return function(t,e){var n=this,i=new nr;return t.asyncQueue.enqueueAndForget((function(){return Object(r["__awaiter"])(n,void 0,void 0,(function(){var n;return Object(r["__generator"])(this,(function(o){switch(o.label){case 0:return n=function(t,e,n){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var i,o,s,a,u;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Ai(t,e,!0)];case 1:return u=r.sent(),i=new ls(e,u.Bn),o=i._o(u.documents),s=i.applyChanges(o,!1),n.resolve(s.snapshot),[3,3];case 2:return a=r.sent(),u=Ko(a,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,aa(t)];case 1:return[2,n.apply(void 0,[o.sent(),e,i])]}}))}))})),i.promise}(n,t._query).then((function(n){return new ku(e,i,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Ta(t,Ra);var e=Ta(t.firestore,Ga),n=za(e),r=new $u(e);return fa(n,t._query,{source:"server"}).then((function(n){return new ku(e,r,t,n)}))}(this._delegate):function(t){t=Ta(t,Ra);var e=Ta(t.firestore,Ga),n=za(e),r=new $u(e);return Ru(t._query),fa(n,t._query).then((function(n){return new ku(e,r,t,n)}))}(this._delegate)).then((function(t){return new bc(e.firestore,new ku(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=dc(e),i=gc(e,(function(e){return new bc(t.firestore,new ku(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return Ju(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(hc.eu(this.firestore,e)):this._delegate.withConverter(null))},t}(),_c=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new yc(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),bc=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new mc(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new yc(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new _c(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new yc(n._firestore,r))}))},t.prototype.isEqual=function(t){return Pu(this._delegate,t._delegate)},t}(),wc=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(r["__extends"])(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new fc(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new fc(this.firestore,void 0===t?Ma(this._delegate):Ma(this._delegate,t))}catch(t){throw pc(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Ta(t.firestore,Ga),r=Ma(t),i=Ku(t.converter,e);return Zu(n,[ou(iu(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,ce.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new fc(e.firestore,t)}))},e.prototype.isEqual=function(t){return Da(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(hc.eu(this.firestore,t)):this._delegate.withConverter(null))},e}(mc);function Ec(t){return Ta(t,Pa)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xc=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Ya.bind.apply(Ya,Object(r["__spreadArray"])([void 0],t)))}return t.documentId=function(){return new t(P.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(i["getModularInstance"])(t))instanceof Ya&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Ic=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new uu("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new su("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new cu("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new lu("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new hu("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(t){return function(t,e){var n=za(t=Ta(t,Ga)),i=new Ba;return function(t,e,n,i){var o=this,s=function(t,e){return function(t,e){return new Js(t,e)}(function(t,e){if(t instanceof Uint8Array)return $s(t,e);if(t instanceof ArrayBuffer)return $s(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,ho(e));t.asyncQueue.enqueueAndForget((function(){return Object(r["__awaiter"])(o,void 0,void 0,(function(){var e;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return e=Ws,[4,ca(t)];case 1:return e.apply(void 0,[n.sent(),s,i]),[2]}}))}))}))}(n,t._databaseId,e,i),i}(this._delegate,t)}function Sc(t){var e,n,i=this;return(e=this._delegate,n=t,function(t,e){var n=this;return t.asyncQueue.enqueue((function(){return Object(r["__awaiter"])(n,void 0,void 0,(function(){var n;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=m(t);return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.Ke.getNamedQuery(t,e)}))},[4,aa(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(za(e=Ta(e,Ga)),n).then((function(t){return t?new Ra(e,null,t.query):null}))).then((function(t){return t?new mc(i,t):null}))}}).call(this,n("4362"))},e2cc:function(t,e,n){var r=n("6eeb");t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},e538:function(t,e,n){var r=n("b622");e.f=r},e667:function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}},e683:function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},e6cf:function(t,e,n){"use strict";var r,i,o,s,a=n("23e7"),u=n("c430"),c=n("da84"),l=n("d066"),h=n("fea9"),f=n("6eeb"),p=n("e2cc"),d=n("d44e"),g=n("2626"),v=n("861d"),y=n("1c0b"),m=n("19aa"),_=n("8925"),b=n("2266"),w=n("1c7e"),E=n("4840"),x=n("2cf4").set,I=n("b575"),O=n("cdf9"),S=n("44de"),C=n("f069"),T=n("e667"),N=n("69f3"),k=n("94ca"),A=n("b622"),P=n("605d"),R=n("2d00"),L=A("species"),j="Promise",M=N.get,D=N.set,F=N.getterFor(j),q=h,U=c.TypeError,B=c.document,V=c.process,G=l("fetch"),z=C.f,W=z,K=!!(B&&B.createEvent&&c.dispatchEvent),H="function"==typeof PromiseRejectionEvent,Y="unhandledrejection",X="rejectionhandled",$=0,Q=1,J=2,Z=1,tt=2,et=k(j,(function(){var t=_(q)!==String(q);if(!t){if(66===R)return!0;if(!P&&!H)return!0}if(u&&!q.prototype["finally"])return!0;if(R>=51&&/native code/.test(q))return!1;var e=q.resolve(1),n=function(t){t((function(){}),(function(){}))},r=e.constructor={};return r[L]=n,!(e.then((function(){}))instanceof n)})),nt=et||!w((function(t){q.all(t)["catch"]((function(){}))})),rt=function(t){var e;return!(!v(t)||"function"!=typeof(e=t.then))&&e},it=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;I((function(){var r=t.value,i=t.state==Q,o=0;while(n.length>o){var s,a,u,c=n[o++],l=i?c.ok:c.fail,h=c.resolve,f=c.reject,p=c.domain;try{l?(i||(t.rejection===tt&&ut(t),t.rejection=Z),!0===l?s=r:(p&&p.enter(),s=l(r),p&&(p.exit(),u=!0)),s===c.promise?f(U("Promise-chain cycle")):(a=rt(s))?a.call(s,h,f):h(s)):f(r)}catch(d){p&&!u&&p.exit(),f(d)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&st(t)}))}},ot=function(t,e,n){var r,i;K?(r=B.createEvent("Event"),r.promise=e,r.reason=n,r.initEvent(t,!1,!0),c.dispatchEvent(r)):r={promise:e,reason:n},!H&&(i=c["on"+t])?i(r):t===Y&&S("Unhandled promise rejection",n)},st=function(t){x.call(c,(function(){var e,n=t.facade,r=t.value,i=at(t);if(i&&(e=T((function(){P?V.emit("unhandledRejection",r,n):ot(Y,n,r)})),t.rejection=P||at(t)?tt:Z,e.error))throw e.value}))},at=function(t){return t.rejection!==Z&&!t.parent},ut=function(t){x.call(c,(function(){var e=t.facade;P?V.emit("rejectionHandled",e):ot(X,e,t.value)}))},ct=function(t,e,n){return function(r){t(e,r,n)}},lt=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=J,it(t,!0))},ht=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw U("Promise can't be resolved itself");var r=rt(e);r?I((function(){var n={done:!1};try{r.call(e,ct(ht,n,t),ct(lt,n,t))}catch(i){lt(n,i,t)}})):(t.value=e,t.state=Q,it(t,!1))}catch(i){lt({done:!1},i,t)}}};et&&(q=function(t){m(this,q,j),y(t),r.call(this);var e=M(this);try{t(ct(ht,e),ct(lt,e))}catch(n){lt(e,n)}},r=function(t){D(this,{type:j,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:$,value:void 0})},r.prototype=p(q.prototype,{then:function(t,e){var n=F(this),r=z(E(this,q));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=P?V.domain:void 0,n.parent=!0,n.reactions.push(r),n.state!=$&&it(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r,e=M(t);this.promise=t,this.resolve=ct(ht,e),this.reject=ct(lt,e)},C.f=z=function(t){return t===q||t===o?new i(t):W(t)},u||"function"!=typeof h||(s=h.prototype.then,f(h.prototype,"then",(function(t,e){var n=this;return new q((function(t,e){s.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof G&&a({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return O(q,G.apply(c,arguments))}}))),a({global:!0,wrap:!0,forced:et},{Promise:q}),d(q,j,!1,!0),g(j),o=l(j),a({target:j,stat:!0,forced:et},{reject:function(t){var e=z(this);return e.reject.call(void 0,t),e.promise}}),a({target:j,stat:!0,forced:u||et},{resolve:function(t){return O(u&&this===o?q:this,t)}}),a({target:j,stat:!0,forced:nt},{all:function(t){var e=this,n=z(e),r=n.resolve,i=n.reject,o=T((function(){var n=y(e.resolve),o=[],s=0,a=1;b(t,(function(t){var u=s++,c=!1;o.push(void 0),a++,n.call(e,t).then((function(t){c||(c=!0,o[u]=t,--a||r(o))}),i)})),--a||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=z(e),r=n.reject,i=T((function(){var i=y(e.resolve);b(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},e893:function(t,e,n){var r=n("5135"),i=n("56ef"),o=n("06cf"),s=n("9bf2");t.exports=function(t,e){for(var n=i(e),a=s.f,u=o.f,c=0;c<n.length;c++){var l=n[c];r(t,l)||a(t,l,u(e,l))}}},e8b5:function(t,e,n){var r=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}},e947:function(t,e,n){"use strict";(function(t,e){var r=n("cc84"),i=n("ffa6"),o=n("a8e9"),s=n("9ab4"),a=n("abfd"),u="@firebase/database",c="0.10.6",l="";function h(t){l=t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var f=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o["stringify"])(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o["jsonEval"])(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),p=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o["contains"])(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),d=function(t){try{if("undefined"!==typeof window&&"undefined"!==typeof window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new f(e)}}catch(n){}return new p},g=d("localStorage"),v=d("sessionStorage"),y=new a["Logger"]("@firebase/database"),m=function(){var t=1;return function(){return t++}}(),_=function(t){var e=Object(o["stringToByteArray"])(t),n=new o["Sha1"];n.update(e);var r=n.digest();return o["base64"].encodeByteArray(r)},b=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"===typeof i&&"number"===typeof i.length?n+=b.apply(null,i):n+="object"===typeof i?Object(o["stringify"])(i):i,n+=" "}return n},w=null,E=!0,x=function(t,e){Object(o["assert"])(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(y.logLevel=a["LogLevel"].VERBOSE,w=y.log.bind(y),e&&v.set("logging_enabled",!0)):"function"===typeof t?w=t:(w=null,v.remove("logging_enabled"))},I=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===E&&(E=!1,null===w&&!0===v.get("logging_enabled")&&x(!0)),w){var n=b.apply(null,t);w(n)}},O=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];I.apply(void 0,Object(s["__spreadArray"])([t],Object(s["__read"])(e)))}},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+b.apply(void 0,Object(s["__spreadArray"])([],Object(s["__read"])(t)));y.error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+b.apply(void 0,Object(s["__spreadArray"])([],Object(s["__read"])(t)));throw y.error(n),new Error(n)},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+b.apply(void 0,Object(s["__spreadArray"])([],Object(s["__read"])(t)));y.warn(n)},N=function(){"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&T("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},k=function(t){return"number"===typeof t&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},A=function(t){if(Object(o["isNodeSdk"])()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}},P="[MIN_NAME]",R="[MAX_NAME]",L=function(t,e){if(t===e)return 0;if(t===P||e===R)return-1;if(e===P||t===R)return 1;var n=H(t),r=H(e);return null!==n?null!==r?n-r===0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},j=function(t,e){return t===e?0:t<e?-1:1},M=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o["stringify"])(e))},D=function(t){if("object"!==typeof t||null===t)return Object(o["stringify"])(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o["stringify"])(e[i]),r+=":",r+=D(t[e[i]]);return r+="}",r},F=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var U=function(t){Object(o["assert"])(!k(t),"Invalid JSON number");var e,n,r,i,s,a=11,u=52,c=(1<<a-1)-1;0===t?(n=0,r=0,e=1/t===-1/0?1:0):(e=t<0,t=Math.abs(t),t>=Math.pow(2,1-c)?(i=Math.min(Math.floor(Math.log(t)/Math.LN2),c),n=i+c,r=Math.round(t*Math.pow(2,u-i)-Math.pow(2,u))):(n=0,r=Math.round(t/Math.pow(2,1-c-u))));var l=[];for(s=u;s;s-=1)l.push(r%2?1:0),r=Math.floor(r/2);for(s=a;s;s-=1)l.push(n%2?1:0),n=Math.floor(n/2);l.push(e?1:0),l.reverse();var h=l.join(""),f="";for(s=0;s<64;s+=8){var p=parseInt(h.substr(s,8),2).toString(16);1===p.length&&(p="0"+p),f+=p}return f.toLowerCase()},B=function(){return!("object"!==typeof window||!window["chrome"]||!window["chrome"]["extension"]||/^chrome/.test(window.location.href))},V=function(){return"object"===typeof Windows&&"object"===typeof Windows.UI};function G(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var z=new RegExp("^-?(0*)\\d{1,10}$"),W=-2147483648,K=2147483647,H=function(t){if(z.test(t)){var e=Number(t);if(e>=W&&e<=K)return e}return null},Y=function(t){try{t()}catch(e){setTimeout((function(){var t=e.stack||"";throw T("Exception was thrown by user callback.",t),e}),Math.floor(0))}},X=function(){var t="object"===typeof window&&window["navigator"]&&window["navigator"]["userAgent"]||"";return t.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},$=function(t,e){var n=setTimeout(t,e);return"object"===typeof n&&n["unref"]&&n["unref"](),n},Q=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null===e||void 0===e?void 0:e.getImmediate({optional:!0}),this.appCheck||null===e||void 0===e||e.get().then((function(t){return n.appCheck=t}))}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise((function(n,r){setTimeout((function(){e.appCheck?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then((function(e){return e.addTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){T('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),J=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(t){return r.auth_=t}))}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(I("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):new Promise((function(n,r){setTimeout((function(){e.auth_?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',T(t)},t}(),Z=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),tt="5",et="v",nt="s",rt="r",it="f",ot=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,st="ls",at="p",ut="ac",ct="websocket",lt="long_polling",ht=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=g.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&g.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+e},t}();function ft(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function pt(t,e,n){var r;if(Object(o["assert"])("string"===typeof e,"typeof type must == string"),Object(o["assert"])("object"===typeof n,"typeof params must == object"),e===ct)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==lt)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}ft(t)&&(n["ns"]=t.namespace);var i=[];return q(n,(function(t,e){i.push(t+"="+e)})),r+i.join("&")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o["contains"])(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o["deepCopy"])(this.counters_)},t}(),gt={},vt={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t){var e=t.toString();return gt[e]||(gt[e]=new dt),gt[e]}function mt(t,e){var n=t.toString();return vt[n]||(vt[n]=e()),vt[n]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&Y((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;while(this.pendingResponses[this.currentResponseNum]){var o=r();if("break"===o)break}},t}(),bt="start",wt="close",Et="pLPCommand",xt="pRTLPCB",It="id",Ot="pw",St="ser",Ct="cb",Tt="seg",Nt="ts",kt="d",At="dframe",Pt=1870,Rt=30,Lt=Pt-Rt,jt=25e3,Mt=3e4,Dt=function(){function t(t,e,n,r,i,o,s){var a=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=O(t),this.stats_=yt(e),this.urlFn=function(t){return a.appCheckToken&&(t[ut]=a.appCheckToken),pt(e,lt,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new _t(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(Mt)),A((function(){if(!n.isClosed_){n.scriptTagHolder=new Ft((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(s["__read"])(t,5),i=r[0],o=r[1],a=r[2];if(r[3],r[4],n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===bt)n.id=o,n.password=a;else{if(i!==wt)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(s["__read"])(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={};t[bt]="t",t[St]=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t[Ct]=n.scriptTagHolder.uniqueCallbackIdentifier),t[et]=tt,n.transportSessionId&&(t[nt]=n.transportSessionId),n.lastSessionId&&(t[st]=n.lastSessionId),n.applicationId&&(t[at]=n.applicationId),n.appCheckToken&&(t[ut]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&ot.test(location.hostname)&&(t[rt]=it);var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!Object(o["isNodeSdk"])()&&(!!t.forceAllow_||!t.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!B()&&!V())},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o["stringify"])(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o["base64Encode"])(e),r=F(n,Lt),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o["isNodeSdk"])()){this.myDisconnFrame=document.createElement("iframe");var n={};n[At]="t",n[It]=t,n[Ot]=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o["stringify"])(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Ft=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o["isNodeSdk"])())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=m(),window[Et+this.uniqueCallbackIdentifier]=e,window[xt+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)){var a=document.domain;s='<script>document.domain="'+a+'";<\/script>'}var u="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(c){I("frame writing exception"),c.stack&&I(c.stack),I(c)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{var e=t.contentWindow.document;e||I("No IE domain setting required")}catch(r){var n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){this.myID=t,this.myPW=e,this.alive=!0;while(this.newRequest_());},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t[It]=this.myID,t[Ot]=this.myPW,t[St]=this.currentSerial;var e=this.urlFn(t),n="",r=0;while(this.pendingSegs.length>0){var i=this.pendingSegs[0];if(!(i.d.length+Rt+n.length<=Pt))break;var o=this.pendingSegs.shift();n=n+"&"+Tt+r+"="+o.seg+"&"+Nt+r+"="+o.ts+"&"+kt+r+"="+o.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(jt)),o=function(){clearTimeout(i),r()};this.addTag(t,o)},t.prototype.addTag=function(t,e){var n=this;Object(o["isNodeSdk"])()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){I("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),qt=16384,Ut=45e3,Bt=null;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */"undefined"!==typeof MozWebSocket?Bt=MozWebSocket:"undefined"!==typeof WebSocket&&(Bt=WebSocket);var Vt=function(){function e(t,n,r,i,o,s,a){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=O(this.connId),this.stats_=yt(n),this.connURL=e.connectionURL_(n,s,a,i),this.nodeAdmin=n.nodeAdmin}return e.connectionURL_=function(t,e,n,r){var i={};return i[et]=tt,!Object(o["isNodeSdk"])()&&"undefined"!==typeof location&&location.hostname&&ot.test(location.hostname)&&(i[rt]=it),e&&(i[nt]=e),n&&(i[st]=n),r&&(i[ut]=r),pt(t,ct,i)},e.prototype.open=function(e,n){var r=this;this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,g.set("previous_websocket_failure",!0);try{if(Object(o["isNodeSdk"])()){var i=this.nodeAdmin?"AdminNode":"Node",s={headers:{"User-Agent":"Firebase/"+tt+"/"+l+"/"+t.platform+"/"+i,"X-Firebase-GMPID":this.applicationId||""}};this.nodeAdmin?s.headers["Authorization"]=this.authToken||"":s.headers["X-Firebase-AppCheck"]=this.appCheckToken||"";var a=Object({VUE_APP_IS_EMULATOR:"",NODE_ENV:"production",BASE_URL:"/"}),u=0===this.connURL.indexOf("wss://")?a["HTTPS_PROXY"]||a["https_proxy"]:a["HTTP_PROXY"]||a["http_proxy"];u&&(s["proxy"]={origin:u}),this.mySock=new Bt(this.connURL,[],s)}else{s={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new Bt(this.connURL,[],s)}}catch(h){this.log_("Error instantiating WebSocket.");var c=h.message||h.data;return c&&this.log_(c),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(t){r.handleIncomingFrame(t)},this.mySock.onerror=function(t){r.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&r.log_(e),r.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==Bt&&!e.forceDisallow_},e.previouslyFailed=function(){return g.isInMemoryStorage||!0===g.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){g.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o["jsonEval"])(e);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},e.prototype.extractFrameCount_=function(t){if(Object(o["assert"])(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},e.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t["data"];if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(t){this.resetKeepAlive();var e=Object(o["stringify"])(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=F(e,qt);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(Ut))},e.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),Gt=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Dt,Vt]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=Vt&&Vt["isAvailable"](),o=i&&!Vt.previouslyFailed();if(e.webSocketOnly&&(i||T("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Vt];else{var a=this.transports_=[];try{for(var u=Object(s["__values"])(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l["isAvailable"]()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),zt=6e4,Wt=5e3,Kt=10240,Ht=102400,Yt="t",Xt="d",$t="s",Qt="r",Jt="e",Zt="o",te="a",ee="n",ne="p",re="h",ie=function(){function t(t,e,n,r,i,o,s,a,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=O("c:"+this.id+":"),this.transportManager_=new Gt(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=e["responsesRequiredToBeHealthy"]||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e["healthyTimeout"]||0;i>0&&(this.healthyTimeout_=$((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>Ht?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>Kt?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if(Yt in t){var e=t[Yt];e===te?this.upgradeIfSecondaryHealthy_():e===Qt?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):e===Zt&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=M("t",t),n=M("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ne,d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:te,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ee,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=M("t",t),n=M("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=M(Yt,t);if(Xt in t){var n=t[Xt];if(e===re)this.onHandshake_(n);else if(e===ee){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===$t?this.onConnectionShutdown_(n):e===Qt?this.onReset_(n):e===Jt?S("Server Error: "+n):e===Zt?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):S("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),tt!==n&&T("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t["responsesRequiredToBeHealthy"]||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),$((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(zt))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(Wt))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ne,d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(g.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),oe=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),se=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o["assert"])(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(s["__spreadArray"])([],Object(s["__read"])(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o["assert"])(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),ae=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Object(o["isMobileCordova"])()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Object(s["__extends"])(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o["assert"])("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(se),ue=32,ce=768,le=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function he(){return new le("")}function fe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function pe(t){return t.pieces_.length-t.pieceNum_}function de(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new le(t.pieces_,e)}function ge(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function ve(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function ye(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function me(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new le(e,0)}function _e(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof le)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new le(n,0)}function be(t){return t.pieceNum_>=t.pieces_.length}function we(t,e){var n=fe(t),r=fe(e);if(null===n)return e;if(n===r)return we(de(t),de(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Ee(t,e){for(var n=ye(t,0),r=ye(e,0),i=0;i<n.length&&i<r.length;i++){var o=L(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function xe(t,e){if(pe(t)!==pe(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Ie(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(pe(t)>pe(e))return!1;while(n<t.pieces_.length){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Oe=function(){function t(t,e){this.errorPrefix_=e,this.parts_=ye(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o["stringLength"])(this.parts_[n]);Te(this)}return t}();function Se(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Object(o["stringLength"])(e),Te(t)}function Ce(t){var e=t.parts_.pop();t.byteLength_-=Object(o["stringLength"])(e),t.parts_.length>0&&(t.byteLength_-=1)}function Te(t){if(t.byteLength_>ce)throw new Error(t.errorPrefix_+"has a key path longer than "+ce+" bytes ("+t.byteLength_+").");if(t.parts_.length>ue)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ue+") or object contains a cycle "+Ne(t))}function Ne(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke,Ae,Pe=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document["hidden"]?(n="visibilitychange",e="hidden"):"undefined"!==typeof document["mozHidden"]?(n="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document["msHidden"]?(n="msvisibilitychange",e="msHidden"):"undefined"!==typeof document["webkitHidden"]&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return Object(s["__extends"])(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o["assert"])("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(se),Re=1e3,Le=3e5,je=3e3,Me=3e4,De=1.3,Fe=3e4,qe="server_kill",Ue=3,Be=function(t){function e(n,r,i,s,a,u,c,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=i,h.onConnectStatus_=s,h.onServerInfoUpdate_=a,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=O("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=Re,h.maxReconnectDelay_=Le,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!Object(o["isNodeSdk"])())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Pe.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&ae.getInstance().on("online",h.onOnline_,h),h}return Object(s["__extends"])(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o["stringify"])(i)),Object(o["assert"])(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new o["Deferred"],r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t["d"];"ok"===t["s"]?(e.onDataUpdate_(r["p"],i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))}),je),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var i=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o["assert"])(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(o["assert"])(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i},a="q";t.tag&&(s["q"]=r._queryObject,s["t"]=t.tag),s["h"]=t.hashFn(),this.sendRequest(a,s,(function(s){var a=s["d"],u=s["s"];e.warnOnListenWarnings_(a,r);var c=n.listens.get(i)&&n.listens.get(i).get(o);c===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"===typeof t&&Object(o["contains"])(t,"w")){var n=Object(o["safeGet"])(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();T("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e=t&&40===t.length;(e||Object(o["isAdmin"])(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Me)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o["isValidFormat"])(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r["noauth"]=!0:"object"===typeof this.authOverride_&&(r["authvar"]=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n["s"],i=n["d"]||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(e){var n=e["s"],r=e["d"]||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)}))},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Object(o["assert"])(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");var i=this.removeListen_(n,r);i&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t},o="n";r&&(i["q"]=n,i["t"]=r),this.sendRequest(o,i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t["s"],t["d"])}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o["h"]=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r["s"],r["d"])}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){var n=t["s"];if("ok"!==n){var r=t["d"];e.log_("reportStats","Error sending stats: "+r)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o["stringify"])(t));var e=t["r"],n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t["b"]))}else{if("error"in t)throw"A server-side error has occurred: "+t["error"];"a"in t&&this.onDataPush_(t["a"],t["b"])}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e["p"],e["d"],!1,e["t"]):"m"===t?this.onDataUpdate_(e["p"],e["d"],!0,e["t"]):"c"===t?this.onListenRevoked_(e["p"],e["q"]):"ac"===t?this.onAuthRevoked_(e["s"],e["d"]):"apc"===t?this.onAppCheckRevoked_(e["s"],e["d"]):"sd"===t?this.onSecurityDebugPacket_(e):S("Unrecognized action received from server: "+Object(o["stringify"])(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o["assert"])(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Re,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Re,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){var t=(new Date).getTime()-this.lastConnectionEstablishedTime_;t>Fe&&(this.reconnectDelay_=Re),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*De)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return Object(s["__awaiter"])(this,void 0,void 0,(function(){var t,n,r,i,a,u,c,l,h,f,p,d,g,v,y=this;return Object(s["__generator"])(this,(function(m){switch(m.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,a=this.lastSessionId,u=!1,c=null,l=function(){c?c.close():(u=!0,r())},h=function(t){Object(o["assert"])(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)},this.realtime_={close:l,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,m.label=1;case 1:return m.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)])];case 2:return p=s["__read"].apply(void 0,[m.sent(),2]),d=p[0],g=p[1],u?I("getToken() completed but was canceled"):(I("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=g&&g.token,c=new ie(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,(function(t){T(t+" ("+y.repoInfo_.toString()+")"),y.interrupt(qe)}),a)),[3,4];case 3:return v=m.sent(),this.log_("Failed to get token: "+v),u||(this.repoInfo_.nodeAdmin&&T(v),l()),[3,4];case 4:return[2]}}))}))},e.prototype.interrupt=function(t){I("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){I("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o["isEmpty"])(this.interruptReasons_)&&(this.reconnectDelay_=Re,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return D(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new le(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){I("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Ue&&(this.reconnectDelay_=Me,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){I("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Ue&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t["msg"].replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=Object(s["__values"])(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var u=(n=void 0,Object(s["__values"])(a.values())),c=u.next();!c.done;c=u.next()){var l=c.value;this.sendListen_(l)}}catch(p){n={error:p}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);while(this.onDisconnectRequestQueue_.length){var f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o["isNodeSdk"])()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+l.replace(/\./g,"-")]=1,Object(o["isMobileCordova"])()?t["framework.cordova"]=1:Object(o["isReactNative"])()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=ae.getInstance().currentlyOnline();return Object(o["isEmpty"])(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(oe),Ve=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Ge=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Ve(P,t),r=new Ve(P,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Ve.MIN},t}(),ze=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s["__extends"])(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return ke},set:function(t){ke=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return L(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o["assertionError"])("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Ve.MIN},e.prototype.maxPost=function(){return new Ve(R,ke)},e.prototype.makePost=function(t,e){return Object(o["assert"])("string"===typeof t,"KeyIndex indexValue must always be a string."),new Ve(t,ke)},e.prototype.toString=function(){return".key"},e}(Ge),We=new ze,Ke=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];var o=1;while(!t.isEmpty())if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_){e=e.left;while(!e.isEmpty())this.nodeStack_.push(e),e=e.right}else{e=e.right;while(!e.isEmpty())this.nodeStack_.push(e),e=e.left}return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),He=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Xe.EMPTY_NODE,this.right=null!=o?o:Xe.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Xe.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()},t.prototype.remove=function(t,e){var n,r;if(n=this,e(t,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Xe.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Ye=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new He(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Xe=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,He.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,He.BLACK,null,null))},t.prototype.get=function(t){var e,n=this.root_;while(!n.isEmpty()){if(e=this.comparator_(t,n.key),0===e)return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){var e,n=this.root_,r=null;while(!n.isEmpty()){if(e=this.comparator_(t,n.key),0===e){if(n.left.isEmpty())return r?r.key:null;n=n.left;while(!n.right.isEmpty())n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Ke(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Ke(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Ke(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Ke(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Ye,t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function $e(t,e){return L(t.name,e.name)}function Qe(t,e){return L(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(t){Ae=t}var Ze,tn,en,nn=function(t){return"number"===typeof t?"number:"+U(t):"string:"+t},rn=function(t){if(t.isLeafNode()){var e=t.val();Object(o["assert"])("string"===typeof e||"number"===typeof e||"object"===typeof e&&Object(o["contains"])(e,".sv"),"Priority must be a string or number.")}else Object(o["assert"])(t===Ae||t.isEmpty(),"priority of unexpected type.");Object(o["assert"])(t===Ae||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},on=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o["assert"])(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),rn(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Ze},set:function(t){Ze=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return be(e)?this:".priority"===fe(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=fe(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o["assert"])(".priority"!==r||1===pe(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(de(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+nn(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?U(this.value_):this.value_,this.lazyHash_=_(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o["assert"])(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o["assert"])(i>=0,"Unknown leaf type: "+n),Object(o["assert"])(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();function sn(t){tn=t}function an(t){en=t}var un,cn,ln=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s["__extends"])(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?L(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Ve.MIN},e.prototype.maxPost=function(){return new Ve(R,new on("[PRIORITY-POST]",en))},e.prototype.makePost=function(t,e){var n=tn(t);return new Ve(e,new on("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Ge),hn=new ln,fn=Math.log(2),pn=function(){function t(t){var e=function(t){return parseInt(Math.log(t)/fn,10)},n=function(t){return parseInt(Array(t+1).join("1"),2)};this.count=e(t+1),this.current_=this.count-1;var r=n(this.count);this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),dn=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new He(s,o.node,He.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new He(s,o.node,He.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new He(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,He.BLACK):(a(h,He.BLACK),a(h,He.RED))}return o},s=new pn(t.length),a=o(s);return new Xe(r||e,a)},gn={},vn=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o["assert"])(gn&&hn,"ChildrenNode.ts has not been loaded"),un=un||new t({".priority":gn},{".priority":hn}),un},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o["safeGet"])(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Xe?e:null},t.prototype.hasIndex=function(t){return Object(o["contains"])(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o["assert"])(e!==We,"KeyIndex always exists and isn't meant to be added to the IndexMap.");var r,i=[],a=!1,u=n.getIterator(Ve.Wrap),c=u.getNext();while(c)a=a||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=a?dn(i,e.getCompare()):gn;var l=e.toString(),h=Object(s["__assign"])({},this.indexSet_);h[l]=e;var f=Object(s["__assign"])({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this,i=Object(o["map"])(this.indexes_,(function(t,i){var s=Object(o["safeGet"])(r.indexSet_,i);if(Object(o["assert"])(s,"Missing index implementation for "+i),t===gn){if(s.isDefinedOn(e.node)){var a=[],u=n.getIterator(Ve.Wrap),c=u.getNext();while(c)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),dn(a,s.getCompare())}return gn}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Ve(e.name,l))),h.insert(e,e.node)}));return new t(i,this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){var r=Object(o["map"])(this.indexes_,(function(t){if(t===gn)return t;var r=n.get(e.name);return r?t.remove(new Ve(e.name,r)):t}));return new t(r,this.indexSet_)},t}(),yn=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&rn(this.priorityNode_),this.children_.isEmpty()&&Object(o["assert"])(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return cn||(cn=new t(new Xe(Qe),null,vn.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||cn},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?cn:e},t.prototype.getChild=function(t){var e=fe(t);return null===e?this:this.getImmediateChild(e).getChild(de(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o["assert"])(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Ve(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?cn:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=fe(t);if(null===n)return e;Object(o["assert"])(".priority"!==fe(t)||1===pe(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(de(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(hn,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+nn(this.getPriority().val())+":"),this.forEachChild(hn,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":_(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Ve(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Ve(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Ve(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));var r=this.children_.getIteratorFrom(t.name,Ve.Wrap),i=r.peek();while(null!=i&&e.compare(i,t)<0)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));var r=this.children_.getReverseIteratorFrom(t.name,Ve.Wrap),i=r.peek();while(null!=i&&e.compare(i,t)>0)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===_n?-1:0},t.prototype.withIndex=function(e){if(e===We||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===We||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){var n=this.getIterator(hn),r=e.getIterator(hn),i=n.getNext(),o=r.getNext();while(i&&o){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===We?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),mn=function(t){function e(){return t.call(this,new Xe(Qe),yn.EMPTY_NODE,vn.Default)||this}return Object(s["__extends"])(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return yn.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(yn),_n=new mn;Object.defineProperties(Ve,{MIN:{value:new Ve(P,yn.EMPTY_NODE)},MAX:{value:new Ve(R,_n)}}),ze.__EMPTY_NODE=yn.EMPTY_NODE,on.__childrenNodeConstructor=yn,Je(_n),an(_n);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var bn=!0;function wn(t,e){if(void 0===e&&(e=null),null===t)return yn.EMPTY_NODE;if("object"===typeof t&&".priority"in t&&(e=t[".priority"]),Object(o["assert"])(null===e||"string"===typeof e||"number"===typeof e||"object"===typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"===typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!==typeof t||".sv"in t){var n=t;return new on(n,wn(e))}if(t instanceof Array||!bn){var r=yn.EMPTY_NODE;return q(t,(function(e,n){if(Object(o["contains"])(t,e)&&"."!==e.substring(0,1)){var i=wn(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(e,i))}})),r.updatePriority(wn(e))}var i=[],s=!1,a=t;if(q(a,(function(t,e){if("."!==t.substring(0,1)){var n=wn(e);n.isEmpty()||(s=s||!n.getPriority().isEmpty(),i.push(new Ve(t,n)))}})),0===i.length)return yn.EMPTY_NODE;var u=dn(i,$e,(function(t){return t.name}),Qe);if(s){var c=dn(i,hn.getCompare());return new yn(u,wn(e),new vn({".priority":c},{".priority":hn}))}return new yn(u,wn(e),vn.Default)}sn(wn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var En=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o["assert"])(!be(e)&&".priority"!==fe(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(s["__extends"])(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?L(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=wn(t),r=yn.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ve(e,r)},e.prototype.maxPost=function(){var t=yn.EMPTY_NODE.updateChild(this.indexPath_,_n);return new Ve(R,t)},e.prototype.toString=function(){return ye(this.indexPath_,0).join("/")},e}(Ge),xn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s["__extends"])(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?L(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Ve.MIN},e.prototype.maxPost=function(){return Ve.MAX},e.prototype.makePost=function(t,e){var n=wn(t);return new Ve(e,n)},e.prototype.toString=function(){return".value"},e}(Ge),In=new xn,On="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Sn="-",Cn="z",Tn=786,Nn=function(){var t=0,e=[];return function(n){var r,i=n===t;t=n;var s=new Array(8);for(r=7;r>=0;r--)s[r]=On.charAt(n%64),n=Math.floor(n/64);Object(o["assert"])(0===n,"Cannot push at time == 0");var a=s.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)a+=On.charAt(e[r]);return Object(o["assert"])(20===a.length,"nextPushId: Length should be 20."),a}}(),kn=function(t){if(t===""+K)return Sn;var e=H(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<Tn)return n.push(Sn),n.join("");var i=n.length-1;while(i>=0&&n[i]===Cn)i--;if(-1===i)return R;var o=n[i],s=On.charAt(On.indexOf(o)+1);return n[i]=s,n.slice(0,i+1).join("")},An=function(t){if(t===""+W)return P;var e=H(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return n[n.length-1]===Sn?1===n.length?""+K:(delete n[n.length-1],n.join("")):(n[n.length-1]=On.charAt(On.indexOf(n[n.length-1])-1),n.join("")+Cn.repeat(Tn-n.length))};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Pn(t){return{type:"value",snapshotNode:t}}function Rn(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ln(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function jn(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Mn(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dn=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o["assert"])(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(Ln(e,a)):Object(o["assert"])(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Rn(e,n)):s.trackChildChange(jn(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(hn,(function(t,r){e.hasChild(t)||n.trackChildChange(Ln(t,r))})),e.isLeafNode()||e.forEachChild(hn,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(jn(e,r,i))}else n.trackChildChange(Rn(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?yn.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Fn=function(){function t(e){this.indexedFilter_=new Dn(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Ve(e,n))||(n=yn.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=yn.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(yn.EMPTY_NODE);var i=this;return e.forEachChild(hn,(function(t,e){i.matches(new Ve(t,e))||(r=r.updateImmediateChild(t,yn.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),qn=function(){function t(t){this.rangedFilter_=new Fn(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Ve(e,n))||(n=yn.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=yn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=yn.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);var o=0;while(i.hasNext()&&o<this.limit_){var s=i.getNext(),a=void 0;if(a=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0,!a)break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=e.withIndex(this.index_),r=r.updatePriority(yn.EMPTY_NODE);var u=void 0,c=void 0,l=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();l=function(t,e){return h(e,t)}}else i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),l=this.index_.getCompare();o=0;var f=!1;while(i.hasNext()){s=i.getNext();!f&&l(u,s)<=0&&(f=!0);a=f&&o<this.limit_&&l(s,c)<=0;a?o++:r=r.updateImmediateChild(s.name,yn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o["assert"])(u.numChildren()===this.limit_,"");var c=new Ve(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){var f=u.getImmediateChild(e),p=r.getChildAfterChild(this.index_,l,this.reverse_);while(null!=p&&(p.name===e||u.hasChild(p.name)))p=r.getChildAfterChild(this.index_,p,this.reverse_);var d=null==p?1:s(p,c),g=h&&!n.isEmpty()&&d>=0;if(g)return null!=i&&i.trackChildChange(jn(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Ln(e,f));var v=u.updateImmediateChild(e,yn.EMPTY_NODE),y=null!=p&&this.rangedFilter_.matches(p);return y?(null!=i&&i.trackChildChange(Rn(p.name,p.node)),v.updateImmediateChild(p.name,p.node)):v}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(Ln(l.name,l.node)),i.trackChildChange(Rn(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,yn.EMPTY_NODE)):t},t}(),Un=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=hn}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(o["assert"])(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o["assert"])(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:P},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o["assert"])(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o["assert"])(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:R},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o["assert"])(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===hn},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(t){return t.loadsAllData()?new Dn(t.getIndex()):t.hasLimit()?new qn(t):new Fn(t)}function Vn(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function Gn(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function zn(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Wn(t,e,n){var r;if(t.index_===We)"string"===typeof e&&(e=kn(e)),r=zn(t,e,n);else{var i=void 0;i=null==n?R:kn(n),r=zn(t,e,i)}return r.startAfterSet_=!0,r}function Kn(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Hn(t,e,n){var r,i;return t.index_===We?("string"===typeof e&&(e=An(e)),i=Kn(t,e,n)):(r=null==n?P:An(n),i=Kn(t,e,r)),i.endBeforeSet_=!0,i}function Yn(t,e){var n=t.copy();return n.index_=e,n}function Xn(t){var e,n={};return t.isDefault()||(t.index_===hn?e="$priority":t.index_===In?e="$value":t.index_===We?e="$key":(Object(o["assert"])(t.index_ instanceof En,"Unrecognized index type!"),e=t.index_.toString()),n["orderBy"]=Object(o["stringify"])(e),t.startSet_&&(n["startAt"]=Object(o["stringify"])(t.indexStartValue_),t.startNameSet_&&(n["startAt"]+=","+Object(o["stringify"])(t.indexStartName_))),t.endSet_&&(n["endAt"]=Object(o["stringify"])(t.indexEndValue_),t.endNameSet_&&(n["endAt"]+=","+Object(o["stringify"])(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n["limitToFirst"]=t.limit_:n["limitToLast"]=t.limit_)),n}function $n(t){var e={};if(t.startSet_&&(e["sp"]=t.indexStartValue_,t.startNameSet_&&(e["sn"]=t.indexStartName_)),t.endSet_&&(e["ep"]=t.indexEndValue_,t.endNameSet_&&(e["en"]=t.indexEndName_)),t.limitSet_){e["l"]=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e["vf"]=n}return t.index_!==hn&&(e["i"]=t.index_.toString()),e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qn=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=O("p:rest:"),o.listens_={},o}return Object(s["__extends"])(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o["assert"])(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=Xn(t._queryParams);this.restRequest_(a+".json",l,(function(t,e){var n,l=e;(404===t&&(l=null,t=null),null===t&&s.onDataUpdate_(a,l,!1,r),Object(o["safeGet"])(s.listens_,u)===c)&&(n=t?401===t?"permission_denied":"rest_error:"+t:"ok",i(n,null))}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Xn(t._queryParams),r=t._path.toString(),i=new o["Deferred"];return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e["format"]="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=Object(s["__read"])(i,2),u=a[0],c=a[1];u&&u.accessToken&&(e["auth"]=u.accessToken),c&&c.token&&(e["ac"]=c.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o["querystring"])(e);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=Object(o["jsonEval"])(h.responseText)}catch(e){T("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&T("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()}))},e}(oe),Jn=function(){function t(){this.rootNode_=yn.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Zn(){return{value:null,children:new Map}}function tr(t,e,n){if(be(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=fe(e);t.children.has(r)||t.children.set(r,Zn());var i=t.children.get(r);e=de(e),tr(i,e,n)}}function er(t,e){if(be(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(hn,(function(e,n){tr(t,new le(e),n)})),er(t,e)}if(t.children.size>0){var r=fe(e);if(e=de(e),t.children.has(r)){var i=er(t.children.get(r),e);i&&t.children.delete(r)}return 0===t.children.size}return!0}function nr(t,e,n){null!==t.value?n(e,t.value):rr(t,(function(t,r){var i=new le(e.toString()+"/"+t);nr(r,i,n)}))}function rr(t,e){t.children.forEach((function(t,n){e(n,t)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ir,or=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(s["__assign"])({},t);return this.last_&&q(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),sr=1e4,ar=3e4,ur=3e5,cr=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new or(t);var n=sr+(ar-sr)*Math.random();$(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;q(e,(function(e,i){i>0&&Object(o["contains"])(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),$(this.reportStats_.bind(this),Math.floor(2*Math.random()*ur))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t,e){t.statsToReport_[e]=!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function fr(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function pr(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t[t["OVERWRITE"]=0]="OVERWRITE",t[t["MERGE"]=1]="MERGE",t[t["ACK_USER_WRITE"]=2]="ACK_USER_WRITE",t[t["LISTEN_COMPLETE"]=3]="LISTEN_COMPLETE"})(ir||(ir={}));var dr,gr=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=ir.ACK_USER_WRITE,this.source=hr()}return t.prototype.operationForChild=function(e){if(be(this.path)){if(null!=this.affectedTree.value)return Object(o["assert"])(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new le(e));return new t(he(),n,this.revert)}return Object(o["assert"])(fe(this.path)===e,"operationForChild called for unrelated child."),new t(de(this.path),this.affectedTree,this.revert)},t}(),vr=function(){function t(t,e){this.source=t,this.path=e,this.type=ir.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return be(this.path)?new t(this.source,he()):new t(this.source,de(this.path))},t}(),yr=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=ir.OVERWRITE}return t.prototype.operationForChild=function(e){return be(this.path)?new t(this.source,he(),this.snap.getImmediateChild(e)):new t(this.source,de(this.path),this.snap)},t}(),mr=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=ir.MERGE}return t.prototype.operationForChild=function(e){if(be(this.path)){var n=this.children.subtree(new le(e));return n.isEmpty()?null:n.value?new yr(this.source,he(),n.value):new t(this.source,he(),n)}return Object(o["assert"])(fe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,de(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),_r=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(be(t))return this.isFullyInitialized()&&!this.filtered_;var e=fe(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),br=function(){function t(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}return t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(t,e,n,r){var i=[],o=[];return e.forEach((function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push(Mn(e.childName,e.snapshotNode))})),Er(t,i,"child_removed",e,r,n),Er(t,i,"child_added",e,r,n),Er(t,i,"child_moved",o,r,n),Er(t,i,"child_changed",e,r,n),Er(t,i,"value",e,r,n),i}function Er(t,e,n,r,i,o){var s=r.filter((function(t){return t.type===n}));s.sort((function(e,n){return Ir(t,e,n)})),s.forEach((function(n){var r=xr(t,n,o);i.forEach((function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}function xr(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Ir(t,e,n){if(null==e.childName||null==n.childName)throw Object(o["assertionError"])("Should only compare child_ events.");var r=new Ve(e.childName,e.snapshotNode),i=new Ve(n.childName,n.snapshotNode);return t.index_.compare(r,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(t,e){return{eventCache:t,serverCache:e}}function Sr(t,e,n,r){return Or(new _r(e,n,r),t.serverCache)}function Cr(t,e,n,r){return Or(t.eventCache,new _r(e,n,r))}function Tr(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Nr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kr=function(){return dr||(dr=new Xe(j)),dr},Ar=function(){function t(t,e){void 0===e&&(e=kr()),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return q(e,(function(t,e){n=n.set(new le(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:he(),value:this.value};if(be(t))return null;var n=fe(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(de(t),e);if(null!=i){var o=_e(new le(n),i.path);return{path:o,value:i.value}}return null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(be(e))return this;var n=fe(e),r=this.children.get(n);return null!==r?r.subtree(de(e)):new t(null)},t.prototype.set=function(e,n){if(be(e))return new t(n,this.children);var r=fe(e),i=this.children.get(r)||new t(null),o=i.set(de(e),n),s=this.children.insert(r,o);return new t(this.value,s)},t.prototype.remove=function(e){if(be(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=fe(e),r=this.children.get(n);if(r){var i=r.remove(de(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(be(t))return this.value;var e=fe(t),n=this.children.get(e);return n?n.get(de(t)):null},t.prototype.setTree=function(e,n){if(be(e))return n;var r=fe(e),i=this.children.get(r)||new t(null),o=i.setTree(de(e),n),s=void 0;return s=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new t(this.value,s)},t.prototype.fold=function(t){return this.fold_(he(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(_e(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,he(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(be(t))return null;var i=fe(t),o=this.children.get(i);return o?o.findOnPath_(de(t),_e(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,he(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(be(e))return this;this.value&&r(n,this.value);var i=fe(e),o=this.children.get(i);return o?o.foreachOnPath_(de(e),_e(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(he(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(_e(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),Pr=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Ar(null))},t}();function Rr(t,e,n){if(be(e))return new Pr(new Ar(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=we(i,e);return o=o.updateChild(s,n),new Pr(t.writeTree_.set(i,o))}var a=new Ar(n),u=t.writeTree_.setTree(e,a);return new Pr(u)}function Lr(t,e,n){var r=t;return q(n,(function(t,n){r=Rr(r,_e(e,t),n)})),r}function jr(t,e){if(be(e))return Pr.empty();var n=t.writeTree_.setTree(e,new Ar(null));return new Pr(n)}function Mr(t,e){return null!=Dr(t,e)}function Dr(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(we(n.path,e)):null}function Fr(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(hn,(function(t,n){e.push(new Ve(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new Ve(t,n.value))})),e}function qr(t,e){if(be(e))return t;var n=Dr(t,e);return new Pr(null!=n?new Ar(n):t.writeTree_.subtree(e))}function Ur(t){return t.writeTree_.isEmpty()}function Br(t,e){return Vr(he(),t.writeTree_,e)}function Vr(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal((function(e,i){".priority"===e?(Object(o["assert"])(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Vr(_e(t,e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(_e(t,".priority"),r)),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(t,e){return fi(e,t)}function zr(t,e,n,r,i){Object(o["assert"])(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Rr(t.visibleWrites,e,n)),t.lastWriteId=r}function Wr(t,e,n,r){Object(o["assert"])(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Lr(t.visibleWrites,e,n),t.lastWriteId=r}function Kr(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}function Hr(t,e){var n=t.allWrites.findIndex((function(t){return t.writeId===e}));Object(o["assert"])(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);var i=r.visible,s=!1,a=t.allWrites.length-1;while(i&&a>=0){var u=t.allWrites[a];u.visible&&(a>=n&&Yr(u,r.path)?i=!1:Ie(r.path,u.path)&&(s=!0)),a--}if(i){if(s)return Xr(t),!0;if(r.snap)t.visibleWrites=jr(t.visibleWrites,r.path);else{var c=r.children;q(c,(function(e){t.visibleWrites=jr(t.visibleWrites,_e(r.path,e))}))}return!0}return!1}function Yr(t,e){if(t.snap)return Ie(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Ie(_e(t.path,n),e))return!0;return!1}function Xr(t){t.visibleWrites=Qr(t.allWrites,$r,he()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function $r(t){return t.visible}function Qr(t,e,n){for(var r=Pr.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)Ie(n,a)?(u=we(n,a),r=Rr(r,u,s.snap)):Ie(a,n)&&(u=we(a,n),r=Rr(r,he(),s.snap.getChild(u)));else{if(!s.children)throw Object(o["assertionError"])("WriteRecord should have .snap or .children");if(Ie(n,a))u=we(n,a),r=Lr(r,u,s.children);else if(Ie(a,n))if(u=we(a,n),be(u))r=Lr(r,he(),s.children);else{var c=Object(o["safeGet"])(s.children,fe(u));if(c){var l=c.getChild(de(u));r=Rr(r,he(),l)}}}}}return r}function Jr(t,e,n,r,i){if(r||i){var o=qr(t.visibleWrites,e);if(!i&&Ur(o))return n;if(i||null!=n||Mr(o,he())){var s=function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Ie(t.path,e)||Ie(e,t.path))},a=Qr(t.allWrites,s,e);l=n||yn.EMPTY_NODE;return Br(a,l)}return null}var u=Dr(t.visibleWrites,e);if(null!=u)return u;var c=qr(t.visibleWrites,e);if(Ur(c))return n;if(null!=n||Mr(c,he())){var l=n||yn.EMPTY_NODE;return Br(c,l)}return null}function Zr(t,e,n){var r=yn.EMPTY_NODE,i=Dr(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(hn,(function(t,e){r=r.updateImmediateChild(t,e)})),r;if(n){var o=qr(t.visibleWrites,e);return n.forEachChild(hn,(function(t,e){var n=Br(qr(o,new le(t)),e);r=r.updateImmediateChild(t,n)})),Fr(o).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}var s=qr(t.visibleWrites,e);return Fr(s).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}function ti(t,e,n,r,i){Object(o["assert"])(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=_e(e,n);if(Mr(t.visibleWrites,s))return null;var a=qr(t.visibleWrites,s);return Ur(a)?i.getChild(n):Br(a,i.getChild(n))}function ei(t,e,n,r){var i=_e(e,n),o=Dr(t.visibleWrites,i);if(null!=o)return o;if(r.isCompleteForChild(n)){var s=qr(t.visibleWrites,i);return Br(s,r.getNode().getImmediateChild(n))}return null}function ni(t,e){return Dr(t.visibleWrites,e)}function ri(t,e,n,r,i,o,s){var a,u=qr(t.visibleWrites,e),c=Dr(u,he());if(null!=c)a=c;else{if(null==n)return[];a=Br(u,n)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];var l=[],h=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),p=f.getNext();while(p&&l.length<i)0!==h(p,r)&&l.push(p),p=f.getNext();return l}function ii(){return{visibleWrites:Pr.empty(),allWrites:[],lastWriteId:-1}}function oi(t,e,n,r){return Jr(t.writeTree,t.treePath,e,n,r)}function si(t,e){return Zr(t.writeTree,t.treePath,e)}function ai(t,e,n,r){return ti(t.writeTree,t.treePath,e,n,r)}function ui(t,e){return ni(t.writeTree,_e(t.treePath,e))}function ci(t,e,n,r,i,o){return ri(t.writeTree,t.treePath,e,n,r,i,o)}function li(t,e,n){return ei(t.writeTree,t.treePath,e,n)}function hi(t,e){return fi(_e(t.treePath,e),t.writeTree)}function fi(t,e){return{treePath:t,writeTree:e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pi=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o["assert"])("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(o["assert"])(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,jn(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,Ln(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,Rn(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Object(o["assertionError"])("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,jn(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),di=function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}(),gi=new di,vi=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new _r(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return li(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Nr(this.viewCache_),i=ci(this.writes_,r,e,1,n,t);return 0===i.length?null:i[0]},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function yi(t){return{filter:t}}function mi(t,e){Object(o["assert"])(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Object(o["assert"])(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function _i(t,e,n,r,i){var s,a,u=new pi;if(n.type===ir.OVERWRITE){var c=n;c.source.fromUser?s=xi(t,e,c.path,c.snap,r,i,u):(Object(o["assert"])(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!be(c.path),s=Ei(t,e,c.path,c.snap,r,i,a,u))}else if(n.type===ir.MERGE){var l=n;l.source.fromUser?s=Oi(t,e,l.path,l.children,r,i,u):(Object(o["assert"])(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=Ci(t,e,l.path,l.children,r,i,a,u))}else if(n.type===ir.ACK_USER_WRITE){var h=n;s=h.revert?ki(t,e,h.path,r,i,u):Ti(t,e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==ir.LISTEN_COMPLETE)throw Object(o["assertionError"])("Unknown operation type: "+n.type);s=Ni(t,e,n.path,r,u)}var f=u.getChanges();return bi(e,s,f),{viewCache:s,changes:f}}function bi(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Tr(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Pn(Tr(e)))}}function wi(t,e,n,r,i,s){var a=e.eventCache;if(null!=ui(r,n))return e;var u=void 0,c=void 0;if(be(n))if(Object(o["assert"])(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Nr(e),h=l instanceof yn?l:yn.EMPTY_NODE,f=si(r,h);u=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{var p=oi(r,Nr(e));u=t.filter.updateFullNode(e.eventCache.getNode(),p,s)}else{var d=fe(n);if(".priority"===d){Object(o["assert"])(1===pe(n),"Can't have a priority with additional path components");var g=a.getNode();c=e.serverCache.getNode();var v=ai(r,n,g,c);u=null!=v?t.filter.updatePriority(g,v):a.getNode()}else{var y=de(n),m=void 0;if(a.isCompleteForChild(d)){c=e.serverCache.getNode();var _=ai(r,n,a.getNode(),c);m=null!=_?a.getNode().getImmediateChild(d).updateChild(y,_):a.getNode().getImmediateChild(d)}else m=li(r,d,e.serverCache);u=null!=m?t.filter.updateChild(a.getNode(),d,m,y,i,s):a.getNode()}}return Sr(e,u,a.isFullyInitialized()||be(n),t.filter.filtersNodes())}function Ei(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(be(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=fe(n);if(!c.isCompleteForPath(n)&&pe(n)>1)return e;var p=de(n),d=c.getNode().getImmediateChild(f),g=d.updateChild(p,r);u=".priority"===f?l.updatePriority(c.getNode(),g):l.updateChild(c.getNode(),f,g,p,gi,null)}var v=Cr(e,u,c.isFullyInitialized()||be(n),l.filtersNodes()),y=new vi(i,v,o);return wi(t,v,n,i,y,a)}function xi(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new vi(i,e,o);if(be(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=Sr(e,u,!0,t.filter.filtersNodes());else{var h=fe(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=Sr(e,u,c.isFullyInitialized(),c.isFiltered());else{var f=de(n),p=c.getNode().getImmediateChild(h),d=void 0;if(be(f))d=r;else{var g=l.getCompleteChild(h);d=null!=g?".priority"===ge(f)&&g.getChild(me(f)).isEmpty()?g:g.updateChild(f,r):yn.EMPTY_NODE}if(p.equals(d))a=e;else{var v=t.filter.updateChild(c.getNode(),h,d,f,l,s);a=Sr(e,v,c.isFullyInitialized(),t.filter.filtersNodes())}}}return a}function Ii(t,e){return t.eventCache.isCompleteForChild(e)}function Oi(t,e,n,r,i,o,s){var a=e;return r.foreach((function(r,u){var c=_e(n,r);Ii(e,fe(c))&&(a=xi(t,a,c,u,i,o,s))})),r.foreach((function(r,u){var c=_e(n,r);Ii(e,fe(c))||(a=xi(t,a,c,u,i,o,s))})),a}function Si(t,e,n){return n.foreach((function(t,n){e=e.updateChild(t,n)})),e}function Ci(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=be(n)?r:new Ar(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=e.serverCache.getNode().getImmediateChild(n),h=Si(t,u,r);c=Ei(t,c,new le(n),h,i,o,s,a)}})),u.children.inorderTraversal((function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=e.serverCache.getNode().getImmediateChild(n),f=Si(t,h,r);c=Ei(t,c,new le(n),f,i,o,s,a)}})),c}function Ti(t,e,n,r,i,o,s){if(null!=ui(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(be(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Ei(t,e,n,u.getNode().getChild(n),i,o,a,s);if(be(n)){var c=new Ar(null);return u.getNode().forEachChild(We,(function(t,e){c=c.set(new le(t),e)})),Ci(t,e,n,c,i,o,a,s)}return e}var l=new Ar(null);return r.foreach((function(t,e){var r=_e(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))})),Ci(t,e,n,l,i,o,a,s)}function Ni(t,e,n,r,i){var o=e.serverCache,s=Cr(e,o.getNode(),o.isFullyInitialized()||be(n),o.isFiltered());return wi(t,s,n,r,gi,i)}function ki(t,e,n,r,i,s){var a;if(null!=ui(r,n))return e;var u=new vi(r,e,i),c=e.eventCache.getNode(),l=void 0;if(be(n)||".priority"===fe(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=oi(r,Nr(e));else{var f=e.serverCache.getNode();Object(o["assert"])(f instanceof yn,"serverChildren would be complete if leaf node"),h=si(r,f)}h=h,l=t.filter.updateFullNode(c,h,s)}else{var p=fe(n),d=li(r,p,e.serverCache);null==d&&e.serverCache.isCompleteForChild(p)&&(d=c.getImmediateChild(p)),l=null!=d?t.filter.updateChild(c,p,d,de(n),u,s):e.eventCache.getNode().hasChild(p)?t.filter.updateChild(c,p,yn.EMPTY_NODE,de(n),u,s):c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=oi(r,Nr(e)),a.isLeafNode()&&(l=t.filter.updateFullNode(l,a,s)))}return a=e.serverCache.isFullyInitialized()||null!=ui(r,he()),Sr(e,l,a,t.filter.filtersNodes())}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ai,Pi=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_._queryParams,r=new Dn(n.getIndex()),i=Bn(n);this.processor_=yi(i);var o=e.serverCache,s=e.eventCache,a=r.updateFullNode(yn.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(yn.EMPTY_NODE,s.getNode(),null),c=new _r(a,o.isFullyInitialized(),r.filtersNodes()),l=new _r(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=Or(l,c),this.eventGenerator_=new br(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Ri(t){return t.viewCache_.serverCache.getNode()}function Li(t){return Tr(t.viewCache_)}function ji(t,e){var n=Nr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!be(e)&&!n.getImmediateChild(fe(e)).isEmpty())?n.getChild(e):null}function Mi(t){return 0===t.eventRegistrations_.length}function Di(t,e){t.eventRegistrations_.push(e)}function Fi(t,e,n){var r=[];if(n){Object(o["assert"])(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach((function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)}))}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function qi(t,e,n,r){e.type===ir.MERGE&&null!==e.source.queryId&&(Object(o["assert"])(Nr(t.viewCache_),"We should always have a full cache before handling merges"),Object(o["assert"])(Tr(t.viewCache_),"Missing event cache, even though we have a server cache"));var i=t.viewCache_,s=_i(t.processor_,i,e,n,r);return mi(t.processor_,s.viewCache),Object(o["assert"])(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,Bi(t,s.changes,s.viewCache.eventCache.getNode(),null)}function Ui(t,e){var n=t.viewCache_.eventCache,r=[];if(!n.getNode().isLeafNode()){var i=n.getNode();i.forEachChild(hn,(function(t,e){r.push(Rn(t,e))}))}return n.isFullyInitialized()&&r.push(Pn(n.getNode())),Bi(t,r,n.getNode(),e)}function Bi(t,e,n,r){var i=r?[r]:t.eventRegistrations_;return wr(t.eventGenerator_,e,n,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vi,Gi=function(){function t(){this.views=new Map}return t}();function zi(t){Object(o["assert"])(!Ai,"__referenceConstructor has already been defined"),Ai=t}function Wi(){return Object(o["assert"])(Ai,"Reference.ts has not been loaded"),Ai}function Ki(t){return 0===t.views.size}function Hi(t,e,n,r){var i,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(o["assert"])(null!=c,"SyncTree gave us an op for an invalid query."),qi(c,e,n,r)}var l=[];try{for(var h=Object(s["__values"])(t.views.values()),f=h.next();!f.done;f=h.next()){c=f.value;l=l.concat(qi(c,e,n,r))}}catch(p){i={error:p}}finally{try{f&&!f.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}return l}function Yi(t,e,n,r,i){var o=e._queryIdentifier,s=t.views.get(o);if(!s){var a=oi(n,i?r:null),u=!1;a?u=!0:r instanceof yn?(a=si(n,r),u=!1):(a=yn.EMPTY_NODE,u=!1);var c=Or(new _r(a,u,!1),new _r(r,i,!1));return new Pi(e,c)}return s}function Xi(t,e,n,r,i,o){var s=Yi(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),Di(s,n),Ui(s,n)}function $i(t,e,n,r){var i,o,a=e._queryIdentifier,u=[],c=[],l=eo(t);if("default"===a)try{for(var h=Object(s["__values"])(t.views.entries()),f=h.next();!f.done;f=h.next()){var p=Object(s["__read"])(f.value,2),d=p[0],g=p[1];c=c.concat(Fi(g,n,r)),Mi(g)&&(t.views.delete(d),g.query._queryParams.loadsAllData()||u.push(g.query))}}catch(v){i={error:v}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}else{g=t.views.get(a);g&&(c=c.concat(Fi(g,n,r)),Mi(g)&&(t.views.delete(a),g.query._queryParams.loadsAllData()||u.push(g.query)))}return l&&!eo(t)&&u.push(new(Wi())(e._repo,e._path)),{removed:u,events:c}}function Qi(t){var e,n,r=[];try{for(var i=Object(s["__values"])(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Ji(t,e){var n,r,i=null;try{for(var o=Object(s["__values"])(t.views.values()),a=o.next();!a.done;a=o.next()){var u=a.value;i=i||ji(u,e)}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Zi(t,e){var n=e._queryParams;if(n.loadsAllData())return no(t);var r=e._queryIdentifier;return t.views.get(r)}function to(t,e){return null!=Zi(t,e)}function eo(t){return null!=no(t)}function no(t){var e,n;try{for(var r=Object(s["__values"])(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(t){Object(o["assert"])(!Vi,"__referenceConstructor has already been defined"),Vi=t}function io(){return Object(o["assert"])(Vi,"Reference.ts has not been loaded"),Vi}var oo=1,so=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=new Ar(null),this.pendingWriteTree_=ii(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t}();function ao(t,e,n,r,i){return zr(t.pendingWriteTree_,e,n,r,i),i?wo(t,new yr(hr(),e,n)):[]}function uo(t,e,n,r){Wr(t.pendingWriteTree_,e,n,r);var i=Ar.fromObject(n);return wo(t,new mr(hr(),e,i))}function co(t,e,n){void 0===n&&(n=!1);var r=Kr(t.pendingWriteTree_,e),i=Hr(t.pendingWriteTree_,e);if(i){var o=new Ar(null);return null!=r.snap?o=o.set(he(),!0):q(r.children,(function(t){o=o.set(new le(t),!0)})),wo(t,new gr(r.path,o,n))}return[]}function lo(t,e,n){return wo(t,new yr(fr(),e,n))}function ho(t,e,n){var r=Ar.fromObject(n);return wo(t,new mr(fr(),e,r))}function fo(t,e){return wo(t,new vr(fr(),e))}function po(t,e,n){var r=Co(t,n);if(r){var i=To(r),o=i.path,s=i.queryId,a=we(o,e),u=new vr(pr(s),a);return No(t,o,u)}return[]}function go(t,e,n,r){var i=e._path,o=t.syncPointTree_.get(i),s=[];if(o&&("default"===e._queryIdentifier||to(o,e))){var a=$i(o,e,n,r);Ki(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));var u=a.removed;s=a.events;var c=-1!==u.findIndex((function(t){return t._queryParams.loadsAllData()})),l=t.syncPointTree_.findOnPath(i,(function(t,e){return eo(e)}));if(c&&!l){var h=t.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=ko(h),p=0;p<f.length;++p){var d=f[p],g=d.query,v=Io(t,d);t.listenProvider_.startListening(Ao(g),Oo(t,g),v.hashFn,v.onComplete)}}if(!l&&u.length>0&&!r)if(c){var y=null;t.listenProvider_.stopListening(Ao(e),y)}else u.forEach((function(e){var n=t.queryToTagMap.get(So(e));t.listenProvider_.stopListening(Ao(e),n)}));Po(t,u)}return s}function vo(t,e,n,r){var i=Co(t,r);if(null!=i){var o=To(i),s=o.path,a=o.queryId,u=we(s,e),c=new yr(pr(a),u,n);return No(t,s,c)}return[]}function yo(t,e,n,r){var i=Co(t,r);if(i){var o=To(i),s=o.path,a=o.queryId,u=we(s,e),c=Ar.fromObject(n),l=new mr(pr(a),u,c);return No(t,s,l)}return[]}function mo(t,e,n){var r=e._path,i=null,s=!1;t.syncPointTree_.foreachOnPath(r,(function(t,e){var n=we(t,r);i=i||Ji(e,n),s=s||eo(e)}));var a,u=t.syncPointTree_.get(r);if(u?(s=s||eo(u),i=i||Ji(u,he())):(u=new Gi,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i)a=!0;else{a=!1,i=yn.EMPTY_NODE;var c=t.syncPointTree_.subtree(r);c.foreachChild((function(t,e){var n=Ji(e,he());n&&(i=i.updateImmediateChild(t,n))}))}var l=to(u,e);if(!l&&!e._queryParams.loadsAllData()){var h=So(e);Object(o["assert"])(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");var f=Ro();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}var p=Gr(t.pendingWriteTree_,r),d=Xi(u,e,n,p,i,a);if(!l&&!s){var g=Zi(u,e);d=d.concat(Lo(t,e,g))}return d}function _o(t,e,n){var r=!0,i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(function(t,n){var r=we(t,e),i=Ji(n,r);if(i)return i}));return Jr(i,e,o,n,r)}function bo(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(function(t,e){var i=we(t,n);r=r||Ji(e,i)}));var i=t.syncPointTree_.get(n);i?r=r||Ji(i,he()):(i=new Gi,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new _r(r,!0,!1):null,a=Gr(t.pendingWriteTree_,e._path),u=Yi(i,e,a,o?s.getNode():yn.EMPTY_NODE,o);return Li(u)}function wo(t,e){return Eo(e,t.syncPointTree_,null,Gr(t.pendingWriteTree_,he()))}function Eo(t,e,n,r){if(be(t.path))return xo(t,e,n,r);var i=e.get(he());null==n&&null!=i&&(n=Ji(i,he()));var o=[],s=fe(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=hi(r,s);o=o.concat(Eo(a,u,c,l))}return i&&(o=o.concat(Hi(i,t,r,n))),o}function xo(t,e,n,r){var i=e.get(he());null==n&&null!=i&&(n=Ji(i,he()));var o=[];return e.children.inorderTraversal((function(e,i){var s=n?n.getImmediateChild(e):null,a=hi(r,e),u=t.operationForChild(e);u&&(o=o.concat(xo(u,i,s,a)))})),i&&(o=o.concat(Hi(i,t,r,n))),o}function Io(t,e){var n=e.query,r=Oo(t,n);return{hashFn:function(){var t=Ri(e)||yn.EMPTY_NODE;return t.hash()},onComplete:function(e){if("ok"===e)return r?po(t,n._path,r):fo(t,n._path);var i=G(e,n);return go(t,n,null,i)}}}function Oo(t,e){var n=So(e);return t.queryToTagMap.get(n)}function So(t){return t._path.toString()+"$"+t._queryIdentifier}function Co(t,e){return t.tagToQueryMap.get(e)}function To(t){var e=t.indexOf("$");return Object(o["assert"])(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new le(t.substr(0,e))}}function No(t,e,n){var r=t.syncPointTree_.get(e);Object(o["assert"])(r,"Missing sync point for query tag that we're tracking");var i=Gr(t.pendingWriteTree_,e);return Hi(r,n,i,null)}function ko(t){return t.fold((function(t,e,n){if(e&&eo(e)){var r=no(e);return[r]}var i=[];return e&&(i=Qi(e)),q(n,(function(t,e){i=i.concat(e)})),i}))}function Ao(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(io())(t._repo,t._path):t}function Po(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=So(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}function Ro(){return oo++}function Lo(t,e,n){var r=e._path,i=Oo(t,e),s=Io(t,n),a=t.listenProvider_.startListening(Ao(e),i,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(i)Object(o["assert"])(!eo(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!be(t)&&e&&eo(e))return[no(e).query];var r=[];return e&&(r=r.concat(Qi(e).map((function(t){return t.query})))),q(n,(function(t,e){r=r.concat(e)})),r})),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(Ao(h),Oo(t,h))}return a}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jo=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){var n=this.node_.getImmediateChild(e);return new t(n)},t.prototype.node=function(){return this.node_},t}(),Mo=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=_e(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return _o(this.syncTree_,this.path_)},t}(),Do=function(t){return t=t||{},t["timestamp"]=t["timestamp"]||(new Date).getTime(),t},Fo=function(t,e,n){return t&&"object"===typeof t?(Object(o["assert"])(".sv"in t,"Unexpected leaf node or priority contents"),"string"===typeof t[".sv"]?qo(t[".sv"],e,n):"object"===typeof t[".sv"]?Uo(t[".sv"],e):void Object(o["assert"])(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},qo=function(t,e,n){switch(t){case"timestamp":return n["timestamp"];default:Object(o["assert"])(!1,"Unexpected server value: "+t)}},Uo=function(t,e,n){t.hasOwnProperty("increment")||Object(o["assert"])(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t["increment"];"number"!==typeof r&&Object(o["assert"])(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o["assert"])(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i,a=s.getValue();return"number"!==typeof a?r:a+r},Bo=function(t,e,n,r){return Go(e,new Mo(n,t),r)},Vo=function(t,e,n){return Go(t,new jo(e),n)};function Go(t,e,n){var r,i=t.getPriority().val(),o=Fo(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=Fo(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new on(a,wn(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new on(o))),u.forEachChild(hn,(function(t,i){var o=Go(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zo=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}return t}();function Wo(t,e){var n=e instanceof le?e:new le(e),r=t,i=fe(n);while(null!==i){var s=Object(o["safeGet"])(r.node.children,i)||{children:{},childCount:0};r=new zo(i,r,s),n=de(n),i=fe(n)}return r}function Ko(t){return t.node.value}function Ho(t,e){t.node.value=e,ts(t)}function Yo(t){return t.node.childCount>0}function Xo(t){return void 0===Ko(t)&&!Yo(t)}function $o(t,e){q(t.node.children,(function(n,r){e(new zo(n,t,r))}))}function Qo(t,e,n,r){n&&!r&&e(t),$o(t,(function(t){Qo(t,e,!0,r)})),n&&r&&e(t)}function Jo(t,e,n){var r=n?t:t.parent;while(null!==r){if(e(r))return!0;r=r.parent}return!1}function Zo(t){return new le(null===t.parent?t.name:Zo(t.parent)+"/"+t.name)}function ts(t){null!==t.parent&&es(t.parent,t.name,t)}function es(t,e,n){var r=Xo(n),i=Object(o["contains"])(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,ts(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,ts(t))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ns=/[\[\].#$\/\u0000-\u001F\u007F]/,rs=/[\[\].#$\u0000-\u001F\u007F]/,is=10485760,os=function(t){return"string"===typeof t&&0!==t.length&&!ns.test(t)},ss=function(t){return"string"===typeof t&&0!==t.length&&!rs.test(t)},as=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ss(t)},us=function(t){return null===t||"string"===typeof t||"number"===typeof t&&!k(t)||t&&"object"===typeof t&&Object(o["contains"])(t,".sv")},cs=function(t,e,n,r){r&&void 0===e||ls(Object(o["errorPrefix"])(t,"value"),e,n)},ls=function(t,e,n){var r=n instanceof le?new Oe(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+Ne(r));if("function"===typeof e)throw new Error(t+"contains a function "+Ne(r)+" with contents = "+e.toString());if(k(e))throw new Error(t+"contains "+e.toString()+" "+Ne(r));if("string"===typeof e&&e.length>is/3&&Object(o["stringLength"])(e)>is)throw new Error(t+"contains a string greater than "+is+" utf8 bytes "+Ne(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"===typeof e){var i=!1,s=!1;if(q(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!os(e)))throw new Error(t+" contains an invalid key ("+e+") "+Ne(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');Se(r,e),ls(t,n,r),Ce(r)})),i&&s)throw new Error(t+' contains ".value" child '+Ne(r)+" in addition to actual children.")}},hs=function(t,e){var n,r;for(n=0;n<e.length;n++){r=e[n];for(var i=ye(r),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!os(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Ee);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&Ie(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},fs=function(t,e,n,r){if(!r||void 0!==e){var i=Object(o["errorPrefix"])(t,"values");if(!e||"object"!==typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var s=[];q(e,(function(t,e){var r=new le(t);if(ls(i,e,_e(n,r)),".priority"===ge(r)&&!us(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)})),hs(i,s)}},ps=function(t,e,n){if(!n||void 0!==e){if(k(e))throw new Error(Object(o["errorPrefix"])(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!us(e))throw new Error(Object(o["errorPrefix"])(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ds=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o["errorPrefix"])(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},gs=function(t,e,n,r){if((!r||void 0!==n)&&!os(n))throw new Error(Object(o["errorPrefix"])(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},vs=function(t,e,n,r){if((!r||void 0!==n)&&!ss(n))throw new Error(Object(o["errorPrefix"])(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ys=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),vs(t,e,n,r)},ms=function(t,e){if(".info"===fe(e))throw new Error(t+" failed = Can't modify data under /.info/")},_s=function(t,e){var n=e.path.toString();if("string"!==typeof e.repoInfo.host||0===e.repoInfo.host.length||!os(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!as(n))throw new Error(Object(o["errorPrefix"])(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},bs=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(Object(o["errorPrefix"])(t,e)+"must be a boolean.")},ws=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t}();function Es(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||xe(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function xs(t,e,n){Es(t,n),Os(t,(function(t){return xe(t,e)}))}function Is(t,e,n){Es(t,n),Os(t,(function(t){return Ie(t,e)||Ie(e,t)}))}function Os(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];if(i){var o=i.path;e(o)?(Ss(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Ss(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();w&&I("event: "+n.toString()),Y(r)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cs="repo_interrupt",Ts=25,Ns=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ws,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Zn(),this.transactionQueueTree_=new zo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function ks(t,e,n){if(t.stats_=yt(t.repoInfo_),t.forceRestClient_||X())t.server_=new Qn(t.repoInfo_,(function(e,n,r,i){Rs(t,e,n,r,i)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((function(){return js(t,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o["stringify"])(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Be(t.repoInfo_,e,(function(e,n,r,i){Rs(t,e,n,r,i)}),(function(e){js(t,e)}),(function(e){Ms(t,e)}),t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((function(e){t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=mt(t.repoInfo_,(function(){return new cr(t.stats_,t.server_)})),t.infoData_=new Jn,t.infoSyncTree_=new so({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=lo(t.infoSyncTree_,e._path,s),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),Ds(t,"connected",!1),t.serverSyncTree_=new so({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);Is(t.eventQueue_,e._path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}function As(t){var e=t.infoData_.getNode(new le(".info/serverTimeOffset")),n=e.val()||0;return(new Date).getTime()+n}function Ps(t){return Do({timestamp:As(t)})}function Rs(t,e,n,r,i){t.dataUpdateCount++;var s=new le(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var u=Object(o["map"])(n,(function(t){return wn(t)}));a=yo(t.serverSyncTree_,s,u,i)}else{var c=wn(n);a=vo(t.serverSyncTree_,s,c,i)}else if(r){var l=Object(o["map"])(n,(function(t){return wn(t)}));a=ho(t.serverSyncTree_,s,l)}else{var h=wn(n);a=lo(t.serverSyncTree_,s,h)}var f=s;a.length>0&&(f=oa(t,s)),Is(t.eventQueue_,f,a)}function Ls(t,e){t.interceptServerDataCallback_=e}function js(t,e){Ds(t,"connected",e),!1===e&&Vs(t)}function Ms(t,e){q(e,(function(e,n){Ds(t,e,n)}))}function Ds(t,e,n){var r=new le("/.info/"+e),i=wn(n);t.infoData_.updateSnapshot(r,i);var o=lo(t.infoSyncTree_,r,i);Is(t.eventQueue_,r,o)}function Fs(t){return t.nextWriteId_++}function qs(t,e){var n=bo(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then((function(n){var r=wn(n).withIndex(e._queryParams.getIndex()),i=lo(t.serverSyncTree_,e._path,r);return xs(t.eventQueue_,e._path,i),Promise.resolve(r)}),(function(n){return Zs(t,"get for query "+Object(o["stringify"])(e)+" failed: "+n),Promise.reject(new Error(n))}))}function Us(t,e,n,r,i){Zs(t,"set",{path:e.toString(),value:n,priority:r});var o=Ps(t),s=wn(n,r),a=_o(t.serverSyncTree_,e),u=Vo(s,a,o),c=Fs(t),l=ao(t.serverSyncTree_,e,u,c,!0);Es(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),(function(n,r){var o="ok"===n;o||T("set at "+e+" failed: "+n);var s=co(t.serverSyncTree_,c,!o);Is(t.eventQueue_,e,s),ta(t,i,n,r)}));var h=ha(t,e);oa(t,h),Is(t.eventQueue_,h,[])}function Bs(t,e,n,r){Zs(t,"update",{path:e.toString(),value:n});var i=!0,o=Ps(t),s={};if(q(n,(function(n,r){i=!1,s[n]=Bo(_e(e,n),wn(r),t.serverSyncTree_,o)})),i)I("update() called with empty data.  Don't do anything."),ta(t,r,"ok",void 0);else{var a=Fs(t),u=uo(t.serverSyncTree_,e,s,a);Es(t.eventQueue_,u),t.server_.merge(e.toString(),n,(function(n,i){var o="ok"===n;o||T("update at "+e+" failed: "+n);var s=co(t.serverSyncTree_,a,!o),u=s.length>0?oa(t,e):e;Is(t.eventQueue_,u,s),ta(t,r,n,i)})),q(n,(function(n){var r=ha(t,_e(e,n));oa(t,r)})),Is(t.eventQueue_,e,[])}}function Vs(t){Zs(t,"onDisconnectEvents");var e=Ps(t),n=Zn();nr(t.onDisconnect_,he(),(function(r,i){var o=Bo(r,i,t.serverSyncTree_,e);tr(n,r,o)}));var r=[];nr(n,he(),(function(e,n){r=r.concat(lo(t.serverSyncTree_,e,n));var i=ha(t,e);oa(t,i)})),t.onDisconnect_=Zn(),Is(t.eventQueue_,he(),r)}function Gs(t,e,n){t.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&er(t.onDisconnect_,e),ta(t,n,r,i)}))}function zs(t,e,n,r){var i=wn(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(function(n,o){"ok"===n&&tr(t.onDisconnect_,e,i),ta(t,r,n,o)}))}function Ws(t,e,n,r,i){var o=wn(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(function(n,r){"ok"===n&&tr(t.onDisconnect_,e,o),ta(t,i,n,r)}))}function Ks(t,e,n,r){if(Object(o["isEmpty"])(n))return I("onDisconnect().update() called with empty data.  Don't do anything."),void ta(t,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(function(i,o){"ok"===i&&q(n,(function(n,r){var i=wn(r);tr(t.onDisconnect_,_e(e,n),i)})),ta(t,r,i,o)}))}function Hs(t,e,n){var r;r=".info"===fe(e._path)?mo(t.infoSyncTree_,e,n):mo(t.serverSyncTree_,e,n),xs(t.eventQueue_,e._path,r)}function Ys(t,e,n){var r;r=".info"===fe(e._path)?go(t.infoSyncTree_,e,n):go(t.serverSyncTree_,e,n),xs(t.eventQueue_,e._path,r)}function Xs(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Cs)}function $s(t){t.persistentConnection_&&t.persistentConnection_.resume(Cs)}function Qs(t,e){if(void 0===e&&(e=!1),"undefined"!==typeof console){var n;e?(t.statsListener_||(t.statsListener_=new or(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce((function(t,e){return Math.max(e.length,t)}),0);q(n,(function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)}))}}function Js(t,e){t.stats_.incrementCounter(e),lr(t.statsReporter_,e)}function Zs(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),I.apply(void 0,Object(s["__spreadArray"])([r],Object(s["__read"])(e)))}function ta(t,e,n,r){e&&Y((function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}}))}function ea(t,e,n,r,i,s){Zs(t,"transaction on "+e);var a={path:e,update:n,onComplete:r,status:null,order:m(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=na(t,e,void 0);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{ls("transaction failed: Data returned ",c,a.path),a.status=0;var l=Wo(t.transactionQueueTree_,e),h=Ko(l)||[];h.push(a),Ho(l,h);var f=void 0;if("object"===typeof c&&null!==c&&Object(o["contains"])(c,".priority"))f=Object(o["safeGet"])(c,".priority"),Object(o["assert"])(us(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{var p=_o(t.serverSyncTree_,e)||yn.EMPTY_NODE;f=p.getPriority().val()}var d=Ps(t),g=wn(c,f),v=Vo(g,u,d);a.currentOutputSnapshotRaw=g,a.currentOutputSnapshotResolved=v,a.currentWriteId=Fs(t);var y=ao(t.serverSyncTree_,e,v,a.currentWriteId,a.applyLocally);Is(t.eventQueue_,e,y),ra(t,t.transactionQueueTree_)}}function na(t,e,n){return _o(t.serverSyncTree_,e,n)||yn.EMPTY_NODE}function ra(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||la(t,e),Ko(e)){var n=ua(t,e);Object(o["assert"])(n.length>0,"Sending zero length transaction queue");var r=n.every((function(t){return 0===t.status}));r&&ia(t,Zo(e),n)}else Yo(e)&&$o(e,(function(e){ra(t,e)}))}function ia(t,e,n){for(var r=n.map((function(t){return t.currentWriteId})),i=na(t,e,r),s=i,a=i.hash(),u=0;u<n.length;u++){var c=n[u];Object(o["assert"])(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=we(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),f=e;t.server_.put(f.toString(),h,(function(r){Zs(t,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat(co(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push((function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)})),n[e].unwatcher()},a=0;a<n.length;a++)s(a);la(t,Wo(t.transactionQueueTree_,e)),ra(t,t.transactionQueueTree_),Is(t.eventQueue_,e,i);for(a=0;a<o.length;a++)Y(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)3===n[a].status?n[a].status=4:n[a].status=0;else{T("transaction at "+f.toString()+" failed: "+r);for(a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r}oa(t,e)}}),a)}function oa(t,e){var n=aa(t,e),r=Zo(n),i=ua(t,n);return sa(t,i,r),r}function sa(t,e,n){if(0!==e.length){for(var r=[],i=[],s=e.filter((function(t){return 0===t.status})),a=s.map((function(t){return t.currentWriteId})),u=function(s){var u,c=e[s],l=we(n,c.path),h=!1;if(Object(o["assert"])(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat(co(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=Ts)h=!0,u="maxretry",i=i.concat(co(t.serverSyncTree_,c.currentWriteId,!0));else{var f=na(t,c.path,a);c.currentInputSnapshot=f;var p=e[s].update(f.val());if(void 0!==p){ls("transaction failed: Data returned ",p,c.path);var d=wn(p),g="object"===typeof p&&null!=p&&Object(o["contains"])(p,".priority");g||(d=d.updatePriority(f.getPriority()));var v=c.currentWriteId,y=Ps(t),m=Vo(d,f,y);c.currentOutputSnapshotRaw=d,c.currentOutputSnapshotResolved=m,c.currentWriteId=Fs(t),a.splice(a.indexOf(v),1),i=i.concat(ao(t.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally)),i=i.concat(co(t.serverSyncTree_,v,!0))}else h=!0,u="nodata",i=i.concat(co(t.serverSyncTree_,c.currentWriteId,!0))}Is(t.eventQueue_,n,i),i=[],h&&(e[s].status=2,function(t){setTimeout(t,Math.floor(0))}(e[s].unwatcher),e[s].onComplete&&("nodata"===u?r.push((function(){return e[s].onComplete(null,!1,e[s].currentInputSnapshot)})):r.push((function(){return e[s].onComplete(new Error(u),!1,null)}))))},c=0;c<e.length;c++)u(c);la(t,t.transactionQueueTree_);for(c=0;c<r.length;c++)Y(r[c]);ra(t,t.transactionQueueTree_)}}function aa(t,e){var n,r=t.transactionQueueTree_;n=fe(e);while(null!==n&&void 0===Ko(r))r=Wo(r,n),e=de(e),n=fe(e);return r}function ua(t,e){var n=[];return ca(t,e,n),n.sort((function(t,e){return t.order-e.order})),n}function ca(t,e,n){var r=Ko(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);$o(e,(function(e){ca(t,e,n)}))}function la(t,e){var n=Ko(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Ho(e,n.length>0?n:void 0)}$o(e,(function(e){la(t,e)}))}function ha(t,e){var n=Zo(aa(t,e)),r=Wo(t.transactionQueueTree_,e);return Jo(r,(function(e){fa(t,e)})),fa(t,r),Qo(r,(function(e){fa(t,e)})),n}function fa(t,e){var n=Ko(e);if(n){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Object(o["assert"])(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(Object(o["assert"])(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(co(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Ho(e,void 0):n.length=s+1,Is(t.eventQueue_,Zo(e),i);for(a=0;a<r.length;a++)Y(r[a])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}function da(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(s["__values"])(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):T("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}var ga=function(t,e){var n=va(t),r=n.namespace;"firebase.com"===n.domain&&C(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||C("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||N();var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new ht(n.host,n.secure,r,e,i,"",r!==n.subdomain),path:new le(n.pathString)}},va=function(t){var e="",n="",r="",i="",o="",s=!0,a="https",u=443;if("string"===typeof t){var c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));var l=t.indexOf("/");-1===l&&(l=t.length);var h=t.indexOf("?");-1===h&&(h=t.length),e=t.substring(0,Math.min(l,h)),l<h&&(i=pa(t.substring(l,h)));var f=da(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(s="https"===a||"wss"===a,u=parseInt(e.substring(c+1),10)):c=e.length;var p=e.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var d=e.indexOf(".");r=e.substring(0,d).toLowerCase(),n=e.substring(d+1),o=r}"ns"in f&&(o=f["ns"])}return{host:e,port:u,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},ya=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o["stringify"])(this.snapshot.exportVal())},t}(),ma=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),_a=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return Object(o["assert"])(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),ba=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new o["Deferred"];return Gs(this._repo,this._path,t.wrapCallback((function(){}))),t.promise},t.prototype.remove=function(){ms("OnDisconnect.remove",this._path);var t=new o["Deferred"];return zs(this._repo,this._path,null,t.wrapCallback((function(){}))),t.promise},t.prototype.set=function(t){ms("OnDisconnect.set",this._path),cs("OnDisconnect.set",t,this._path,!1);var e=new o["Deferred"];return zs(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t.prototype.setWithPriority=function(t,e){ms("OnDisconnect.setWithPriority",this._path),cs("OnDisconnect.setWithPriority",t,this._path,!1),ps("OnDisconnect.setWithPriority",e,!1);var n=new o["Deferred"];return Ws(this._repo,this._path,t,e,n.wrapCallback((function(){}))),n.promise},t.prototype.update=function(t){ms("OnDisconnect.update",this._path),fs("OnDisconnect.update",t,this._path,!1);var e=new o["Deferred"];return Ks(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t}(),wa=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return be(this._path)?null:ge(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Oa(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=$n(this._queryParams),e=D(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return $n(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(e=Object(o["getModularInstance"])(e),!(e instanceof t))return!1;var n=this._repo===e._repo,r=xe(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+ve(this._path)},t}();function Ea(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function xa(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===We){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){var s=t.getIndexStartName();if(s!==P)throw new Error(r);if("string"!==typeof e)throw new Error(i)}if(t.hasEnd()){var a=t.getIndexEndName();if(a!==R)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(t.getIndex()===hn){if(null!=e&&!us(e)||null!=n&&!us(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o["assert"])(t.getIndex()instanceof En||t.getIndex()===In,"unknown index type."),null!=e&&"object"===typeof e||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ia(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Oa=function(t){function e(e,n){return t.call(this,e,n,new Un,!1)||this}return Object(s["__extends"])(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=me(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){var t=this;while(null!==t.parent)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(wa),Sa=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new le(e),r=Na(this.ref,e);return new t(this._node.getChild(n),r,hn)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;if(this._node.isLeafNode())return!1;var r=this._node;return!!r.forEachChild(this._index,(function(r,i){return e(new t(i,Na(n.ref,r),hn))}))},t.prototype.hasChild=function(t){var e=new le(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Ca(t,e){return t=Object(o["getModularInstance"])(t),t._checkNotDeleted("ref"),void 0!==e?Na(t._root,e):t._root}function Ta(t,e){t=Object(o["getModularInstance"])(t),t._checkNotDeleted("refFromURL");var n=ga(e,t._repo.repoInfo_.nodeAdmin);_s("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||C("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Ca(t,n.path.toString())}function Na(t,e){return t=Object(o["getModularInstance"])(t),null===fe(t._path)?ys("child","path",e,!1):vs("child","path",e,!1),new Oa(t._repo,_e(t._path,e))}function ka(t,e){t=Object(o["getModularInstance"])(t),ms("push",t._path),cs("push",e,t._path,!0);var n,r=As(t._repo),i=Nn(r),s=Na(t,i),a=Na(t,i);return n=null!=e?Pa(a,e).then((function(){return a})):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}function Aa(t){return ms("remove",t._path),Pa(t,null)}function Pa(t,e){t=Object(o["getModularInstance"])(t),ms("set",t._path),cs("set",e,t._path,!1);var n=new o["Deferred"];return Us(t._repo,t._path,e,null,n.wrapCallback((function(){}))),n.promise}function Ra(t,e){t=Object(o["getModularInstance"])(t),ms("setPriority",t._path),ps("setPriority",e,!1);var n=new o["Deferred"];return Us(t._repo,_e(t._path,".priority"),e,null,n.wrapCallback((function(){}))),n.promise}function La(t,e,n){if(ms("setWithPriority",t._path),cs("setWithPriority",e,t._path,!1),ps("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new o["Deferred"];return Us(t._repo,t._path,e,n,r.wrapCallback((function(){}))),r.promise}function ja(t,e){fs("update",e,t._path,!1);var n=new o["Deferred"];return Bs(t._repo,t._path,e,n.wrapCallback((function(){}))),n.promise}function Ma(t){return t=Object(o["getModularInstance"])(t),qs(t._repo,t).then((function(e){return new Sa(e,new Oa(t._repo,t._path),t._queryParams.getIndex())}))}var Da=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new ya("value",this,new Sa(t.snapshotNode,new Oa(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new ma(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Fa=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new ma(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o["assert"])(null!=t.childName,"Child events should have a childName.");var n=Na(new Oa(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new ya(t.type,this,new Sa(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function qa(t,e,n,r,i){var o;if("object"===typeof r&&(o=void 0,i=r),"function"===typeof r&&(o=r),i&&i.onlyOnce){var s=n,a=function(e,n){Ys(t._repo,t,c),s(e,n)};a.userCallback=n.userCallback,a.context=n.context,n=a}var u=new _a(n,o||void 0),c="value"===e?new Da(u):new Fa(e,u);return Hs(t._repo,t,c),function(){return Ys(t._repo,t,c)}}function Ua(t,e,n,r){return qa(t,"value",e,n,r)}function Ba(t,e,n,r){return qa(t,"child_added",e,n,r)}function Va(t,e,n,r){return qa(t,"child_changed",e,n,r)}function Ga(t,e,n,r){return qa(t,"child_moved",e,n,r)}function za(t,e,n,r){return qa(t,"child_removed",e,n,r)}function Wa(t,e,n){var r=null,i=n?new _a(n):null;"value"===e?r=new Da(i):e&&(r=new Fa(e,i)),Ys(t._repo,t,r)}var Ka=function(){function t(){}return t}(),Ha=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s["__extends"])(e,t),e.prototype._apply=function(t){cs("endAt",this._value,t._path,!0);var e=Kn(t._queryParams,this._value,this._key);if(Ia(e),xa(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new wa(t._repo,t._path,e,t._orderByCalled)},e}(Ka);function Ya(t,e){return gs("endAt","key",e,!0),new Ha(t,e)}var Xa=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s["__extends"])(e,t),e.prototype._apply=function(t){cs("endBefore",this._value,t._path,!1);var e=Hn(t._queryParams,this._value,this._key);if(Ia(e),xa(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new wa(t._repo,t._path,e,t._orderByCalled)},e}(Ka);function $a(t,e){return gs("endBefore","key",e,!0),new Xa(t,e)}var Qa=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s["__extends"])(e,t),e.prototype._apply=function(t){cs("startAt",this._value,t._path,!0);var e=zn(t._queryParams,this._value,this._key);if(Ia(e),xa(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new wa(t._repo,t._path,e,t._orderByCalled)},e}(Ka);function Ja(t,e){return void 0===t&&(t=null),gs("startAt","key",e,!0),new Qa(t,e)}var Za=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s["__extends"])(e,t),e.prototype._apply=function(t){cs("startAfter",this._value,t._path,!1);var e=Wn(t._queryParams,this._value,this._key);if(Ia(e),xa(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new wa(t._repo,t._path,e,t._orderByCalled)},e}(Ka);function tu(t,e){return gs("startAfter","key",e,!0),new Za(t,e)}var eu=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(s["__extends"])(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new wa(t._repo,t._path,Vn(t._queryParams,this._limit),t._orderByCalled)},e}(Ka);function nu(t){if("number"!==typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new eu(t)}var ru=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(s["__extends"])(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new wa(t._repo,t._path,Gn(t._queryParams,this._limit),t._orderByCalled)},e}(Ka);function iu(t){if("number"!==typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ru(t)}var ou=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return Object(s["__extends"])(e,t),e.prototype._apply=function(t){Ea(t,"orderByChild");var e=new le(this._path);if(be(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new En(e),r=Yn(t._queryParams,n);return xa(r),new wa(t._repo,t._path,r,!0)},e}(Ka);function su(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return vs("orderByChild","path",t,!1),new ou(t)}var au=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s["__extends"])(e,t),e.prototype._apply=function(t){Ea(t,"orderByKey");var e=Yn(t._queryParams,We);return xa(e),new wa(t._repo,t._path,e,!0)},e}(Ka);function uu(){return new au}var cu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s["__extends"])(e,t),e.prototype._apply=function(t){Ea(t,"orderByPriority");var e=Yn(t._queryParams,hn);return xa(e),new wa(t._repo,t._path,e,!0)},e}(Ka);function lu(){return new cu}var hu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s["__extends"])(e,t),e.prototype._apply=function(t){Ea(t,"orderByValue");var e=Yn(t._queryParams,In);return xa(e),new wa(t._repo,t._path,e,!0)},e}(Ka);function fu(){return new hu}var pu=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s["__extends"])(e,t),e.prototype._apply=function(t){if(cs("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ha(this._value,this._key)._apply(new Qa(this._value,this._key)._apply(t))},e}(Ka);function du(t,e){return gs("equalTo","key",e,!0),new pu(t,e)}function gu(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=Object(o["getModularInstance"])(t);try{for(var u=Object(s["__values"])(r),c=u.next();!c.done;c=u.next()){var l=c.value;a=l._apply(a)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a}zi(Oa),ro(Oa);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var vu="FIREBASE_DATABASE_EMULATOR_HOST",yu={},mu=!1;function _u(t,e,n,r){t.repoInfo_=new ht(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}function bu(e,n,r,i,o){var s=i||e.options.databaseURL;void 0===s&&(e.options.projectId||C("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),I("Using default host for project ",e.options.projectId),s=e.options.projectId+"-default-rtdb.firebaseio.com");var a,u=ga(s,o),c=u.repoInfo,l=void 0;"undefined"!==typeof t&&(l=Object({VUE_APP_IS_EMULATOR:"",NODE_ENV:"production",BASE_URL:"/"})[vu]),l?(a=!0,s="http://"+l+"?ns="+c.namespace,u=ga(s,o),c=u.repoInfo):a=!u.repoInfo.secure;var h=o&&a?new Z(Z.OWNER):new J(e.name,e.options,n);_s("Invalid Firebase Database URL",u),be(u.path)||C("Database URL must point to the root of a Firebase Database (not including a child path).");var f=Eu(c,e,h,new Q(e.name,r));return new Iu(f,e)}function wu(t,e){var n=yu[e];n&&n[t.key]===t||C("Database "+e+"("+t.repoInfo_+") has already been deleted."),Xs(t),delete n[t.key]}function Eu(t,e,n,r){var i=yu[e.name];i||(i={},yu[e.name]=i);var o=i[t.toURLString()];return o&&C("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Ns(t,mu,n,r),i[t.toURLString()]=o,o}function xu(t){mu=t}var Iu=function(){function t(t,e){this._repoInternal=t,this.app=e,this["type"]="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(ks(this._repoInternal,this.app.options.appId,this.app.options["databaseAuthVariableOverride"]),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Oa(this._repo,he())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){return this._checkNotDeleted("delete"),wu(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&C("Cannot call "+t+" on a deleted database.")},t}();function Ou(t,e,n,r){void 0===r&&(r={}),t=Object(o["getModularInstance"])(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&C("Cannot call useEmulator() after instance has already been initialized.");var i=t._repoInternal,s=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&C('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Z(Z.OWNER);else if(r.mockUserToken){var a=Object(o["createMockUserToken"])(r.mockUserToken,t.app.options.projectId);s=new Z(a)}_u(i,e,n,s)}function Su(t){t=Object(o["getModularInstance"])(t),t._checkNotDeleted("goOffline"),Xs(t._repo)}function Cu(t){t=Object(o["getModularInstance"])(t),t._checkNotDeleted("goOnline"),$s(t._repo)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tu={".sv":"timestamp"};function Nu(){return Tu}function ku(t){return{".sv":{increment:t}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Au=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function Pu(t,e,n){var r;if(t=Object(o["getModularInstance"])(t),ms("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,s=new o["Deferred"],a=function(e,n,r){var i=null;e?s.reject(e):(i=new Sa(r,new Oa(t._repo,t._path),hn),s.resolve(new Au(n,i)))},u=Ua(t,(function(){}));return ea(t._repo,t._path,e,a,u,i),s.promise}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ru=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){Object(o["validateArgCount"])("OnDisconnect.cancel",0,1,arguments.length),Object(o["validateCallback"])("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.remove=function(t){Object(o["validateArgCount"])("OnDisconnect.remove",0,1,arguments.length),Object(o["validateCallback"])("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.set=function(t,e){Object(o["validateArgCount"])("OnDisconnect.set",1,2,arguments.length),Object(o["validateCallback"])("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},t.prototype.setWithPriority=function(t,e,n){Object(o["validateArgCount"])("OnDisconnect.setWithPriority",2,3,arguments.length),Object(o["validateCallback"])("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},t.prototype.update=function(t,e){if(Object(o["validateArgCount"])("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,T("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(o["validateCallback"])("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},t}(),Lu=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o["validateArgCount"])("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),ju=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return Object(o["validateArgCount"])("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return Object(o["validateArgCount"])("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return Object(o["validateArgCount"])("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return Object(o["validateArgCount"])("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return Object(o["validateArgCount"])("DataSnapshot.child",0,1,arguments.length),e=String(e),vs("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return Object(o["validateArgCount"])("DataSnapshot.hasChild",1,1,arguments.length),vs("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return Object(o["validateArgCount"])("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return Object(o["validateArgCount"])("DataSnapshot.forEach",1,1,arguments.length),Object(o["validateCallback"])("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((function(r){return e(new t(n._database,r))}))},t.prototype.hasChildren=function(){return Object(o["validateArgCount"])("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o["validateArgCount"])("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return Object(o["validateArgCount"])("DataSnapshot.ref",0,0,arguments.length),new Du(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Mu=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var s,a=this;Object(o["validateArgCount"])("Query.on",2,4,arguments.length),Object(o["validateCallback"])("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,i),c=function(t,e){n.call(u.context,new ju(a.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return Ua(this._delegate,c,l),n;case"child_added":return Ba(this._delegate,c,l),n;case"child_removed":return za(this._delegate,c,l),n;case"child_changed":return Va(this._delegate,c,l),n;case"child_moved":return Ga(this._delegate,c,l),n;default:throw new Error(Object(o["errorPrefix"])("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(Object(o["validateArgCount"])("Query.off",0,3,arguments.length),ds("Query.off",t,!0),Object(o["validateCallback"])("Query.off","callback",e,!0),Object(o["validateContextObject"])("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Wa(this._delegate,t,r)}else Wa(this._delegate,t)},t.prototype.get=function(){var t=this;return Ma(this._delegate).then((function(e){return new ju(t.database,e)}))},t.prototype.once=function(e,n,r,i){var s=this;Object(o["validateArgCount"])("Query.once",1,4,arguments.length),Object(o["validateCallback"])("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=new o["Deferred"],c=function(t,e){var r=new ju(s.database,t);n&&n.call(a.context,r,e),u.resolve(r)};c.userCallback=n,c.context=a.context;var l=function(t){a.cancel&&a.cancel.call(a.context,t),u.reject(t)};switch(e){case"value":Ua(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":Ba(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":za(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Va(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Ga(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error(Object(o["errorPrefix"])("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return Object(o["validateArgCount"])("Query.limitToFirst",1,1,arguments.length),new t(this.database,gu(this._delegate,nu(e)))},t.prototype.limitToLast=function(e){return Object(o["validateArgCount"])("Query.limitToLast",1,1,arguments.length),new t(this.database,gu(this._delegate,iu(e)))},t.prototype.orderByChild=function(e){return Object(o["validateArgCount"])("Query.orderByChild",1,1,arguments.length),new t(this.database,gu(this._delegate,su(e)))},t.prototype.orderByKey=function(){return Object(o["validateArgCount"])("Query.orderByKey",0,0,arguments.length),new t(this.database,gu(this._delegate,uu()))},t.prototype.orderByPriority=function(){return Object(o["validateArgCount"])("Query.orderByPriority",0,0,arguments.length),new t(this.database,gu(this._delegate,lu()))},t.prototype.orderByValue=function(){return Object(o["validateArgCount"])("Query.orderByValue",0,0,arguments.length),new t(this.database,gu(this._delegate,fu()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),Object(o["validateArgCount"])("Query.startAt",0,2,arguments.length),new t(this.database,gu(this._delegate,Ja(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),Object(o["validateArgCount"])("Query.startAfter",0,2,arguments.length),new t(this.database,gu(this._delegate,tu(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),Object(o["validateArgCount"])("Query.endAt",0,2,arguments.length),new t(this.database,gu(this._delegate,Ya(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),Object(o["validateArgCount"])("Query.endBefore",0,2,arguments.length),new t(this.database,gu(this._delegate,$a(e,n)))},t.prototype.equalTo=function(e,n){return Object(o["validateArgCount"])("Query.equalTo",1,2,arguments.length),new t(this.database,gu(this._delegate,du(e,n)))},t.prototype.toString=function(){return Object(o["validateArgCount"])("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return Object(o["validateArgCount"])("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(Object(o["validateArgCount"])("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Object(o["validateCallback"])(t,"cancel",r.cancel,!0),r.context=n,Object(o["validateContextObject"])(t,"context",r.context,!0);else if(e)if("object"===typeof e&&null!==e)r.context=e;else{if("function"!==typeof e)throw new Error(Object(o["errorPrefix"])(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Du(this.database,new Oa(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Du=function(t){function e(e,n){var r=t.call(this,e,new wa(n._repo,n._path,new Un,!1))||this;return r.database=e,r._delegate=n,r}return Object(s["__extends"])(e,t),e.prototype.getKey=function(){return Object(o["validateArgCount"])("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return Object(o["validateArgCount"])("Reference.child",1,1,arguments.length),"number"===typeof t&&(t=String(t)),new e(this.database,Na(this._delegate,t))},e.prototype.getParent=function(){Object(o["validateArgCount"])("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return Object(o["validateArgCount"])("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){Object(o["validateArgCount"])("Reference.set",1,2,arguments.length),Object(o["validateCallback"])("Reference.set","onComplete",e,!0);var n=Pa(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.update=function(t,e){if(Object(o["validateArgCount"])("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,T("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ms("Reference.update",this._delegate._path),Object(o["validateCallback"])("Reference.update","onComplete",e,!0);var i=ja(this._delegate,t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},e.prototype.setWithPriority=function(t,e,n){Object(o["validateArgCount"])("Reference.setWithPriority",2,3,arguments.length),Object(o["validateCallback"])("Reference.setWithPriority","onComplete",n,!0);var r=La(this._delegate,t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},e.prototype.remove=function(t){Object(o["validateArgCount"])("Reference.remove",0,1,arguments.length),Object(o["validateCallback"])("Reference.remove","onComplete",t,!0);var e=Aa(this._delegate);return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},e.prototype.transaction=function(t,e,n){var r=this;Object(o["validateArgCount"])("Reference.transaction",1,3,arguments.length),Object(o["validateCallback"])("Reference.transaction","transactionUpdate",t,!1),Object(o["validateCallback"])("Reference.transaction","onComplete",e,!0),bs("Reference.transaction","applyLocally",n,!0);var i=Pu(this._delegate,t,{applyLocally:n}).then((function(t){return new Lu(t.committed,new ju(r.database,t.snapshot))}));return e&&i.then((function(t){return e(null,t.committed,t.snapshot)}),(function(t){return e(t,!1,null)})),i},e.prototype.setPriority=function(t,e){Object(o["validateArgCount"])("Reference.setPriority",1,2,arguments.length),Object(o["validateCallback"])("Reference.setPriority","onComplete",e,!0);var n=Ra(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.push=function(t,n){var r=this;Object(o["validateArgCount"])("Reference.push",0,2,arguments.length),Object(o["validateCallback"])("Reference.push","onComplete",n,!0);var i=ka(this._delegate,t),s=i.then((function(t){return new e(r.database,t)}));n&&s.then((function(){return n(null)}),(function(t){return n(t)}));var a=new e(this.database,i);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},e.prototype.onDisconnect=function(){return ms("Reference.onDisconnect",this._delegate._path),new Ru(new ba(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Mu),Fu=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),Ou(this._delegate,t,e,n)},t.prototype.ref=function(t){if(Object(o["validateArgCount"])("database.ref",0,1,arguments.length),t instanceof Du){var e=Ta(this._delegate,t.toString());return new Du(this,e)}e=Ca(this._delegate,t);return new Du(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";Object(o["validateArgCount"])(e,1,1,arguments.length);var n=Ta(this._delegate,t);return new Du(this,n)},t.prototype.goOffline=function(){return Object(o["validateArgCount"])("database.goOffline",0,0,arguments.length),Su(this._delegate)},t.prototype.goOnline=function(){return Object(o["validateArgCount"])("database.goOnline",0,0,arguments.length),Cu(this._delegate)},t.ServerValue={TIMESTAMP:Nu(),increment:function(t){return ku(t)}},t}(),qu=function(){Vt.forceDisallow(),Dt.forceAllow()},Uu=function(){Dt.forceDisallow()},Bu=function(){return Vt["isAvailable"]()},Vu=function(t,e){var n=t._delegate._repo.persistentConnection_;n.securityDebugCallback_=e},Gu=function(t,e){Qs(t._delegate._repo,e)},zu=function(t,e){Js(t._delegate._repo,e)},Wu=function(t){return t._delegate._repo.dataUpdateCount},Ku=function(t,e){return Ls(t._delegate._repo,e)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(t){var e=t.app,n=t.url,r=t.version,o=t.customAuthImpl,s=t.namespace,a=t.nodeAdmin,u=void 0!==a&&a;h(r);var c=new i["Provider"]("auth-internal",new i["ComponentContainer"]("database-standalone"));return c.setComponent(new i["Component"]("auth-internal",(function(){return o}),"PRIVATE")),{instance:new Fu(bu(e,c,void 0,n,u),e),namespace:s}}var Yu=Object.freeze({__proto__:null,forceLongPolling:qu,forceWebSockets:Uu,isWebSocketsAvailable:Bu,setSecurityDebugCallback:Vu,stats:Gu,statsIncrementCounter:zu,dataUpdateCount:Wu,interceptServerData:Ku,initStandalone:Hu}),Xu=Be;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Be.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Be.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var $u=ie,Qu=function(t){var e=Be.prototype.put;return Be.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Be.prototype.put=e}},Ju=ht,Zu=function(t){return t._delegate._queryIdentifier},tc=function(t){xu(t)},ec=Object.freeze({__proto__:null,DataConnection:Xu,RealTimeConnection:$u,hijackHash:Qu,ConnectionTarget:Ju,queryIdentifier:Zu,forceRestClient:tc}),nc=Fu.ServerValue;function rc(t){h(t.SDK_VERSION);var n=t.INTERNAL.registerComponent(new i["Component"]("database",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Fu(bu(r,i,o,n),r)}),"PUBLIC").setServiceProps({Reference:Du,Query:Mu,Database:Fu,DataSnapshot:ju,enableLogging:x,INTERNAL:Yu,ServerValue:nc,TEST_ACCESS:ec}).setMultipleInstances(!0));t.registerVersion(u,c),Object(o["isNodeSdk"])()&&(e.exports=n)}rc(r["default"])}).call(this,n("4362"),n("dd40")(t))},e95a:function(t,e,n){var r=n("b622"),i=n("3f8c"),o=r("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||s[o]===t)}},ec26:function(t,e,n){"use strict";var r,i=new Uint8Array(16);function o(){if(!r&&(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function a(t){return"string"===typeof t&&s.test(t)}for(var u=a,c=[],l=0;l<256;++l)c.push((l+256).toString(16).substr(1));function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(c[t[e+0]]+c[t[e+1]]+c[t[e+2]]+c[t[e+3]]+"-"+c[t[e+4]]+c[t[e+5]]+"-"+c[t[e+6]]+c[t[e+7]]+"-"+c[t[e+8]]+c[t[e+9]]+"-"+c[t[e+10]]+c[t[e+11]]+c[t[e+12]]+c[t[e+13]]+c[t[e+14]]+c[t[e+15]]).toLowerCase();if(!u(n))throw TypeError("Stringified UUID is invalid");return n}var f=h;function p(t,e,n){t=t||{};var r=t.random||(t.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return f(r)}e["a"]=p},f069:function(t,e,n){"use strict";var r=n("1c0b"),i=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},f5df:function(t,e,n){var r=n("00ee"),i=n("c6b6"),o=n("b622"),s=o("toStringTag"),a="Arguments"==i(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(n){}};t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=u(e=Object(t),s))?n:a?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},f6b4:function(t,e,n){"use strict";var r=n("c532");function i(){this.handlers=[]}i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){r.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=i},f772:function(t,e,n){var r=n("5692"),i=n("90e3"),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},fb6a:function(t,e,n){"use strict";var r=n("23e7"),i=n("861d"),o=n("e8b5"),s=n("23cb"),a=n("50c4"),u=n("fc6a"),c=n("8418"),l=n("b622"),h=n("1dde"),f=n("ae40"),p=h("slice"),d=f("slice",{ACCESSORS:!0,0:0,1:2}),g=l("species"),v=[].slice,y=Math.max;r({target:"Array",proto:!0,forced:!p||!d},{slice:function(t,e){var n,r,l,h=u(this),f=a(h.length),p=s(t,f),d=s(void 0===e?f:e,f);if(o(h)&&(n=h.constructor,"function"!=typeof n||n!==Array&&!o(n.prototype)?i(n)&&(n=n[g],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return v.call(h,p,d);for(r=new(void 0===n?Array:n)(y(d-p,0)),l=0;p<d;p++,l++)p in h&&c(r,l,h[p]);return r.length=l,r}})},fc6a:function(t,e,n){var r=n("44ad"),i=n("1d80");t.exports=function(t){return r(i(t))}},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(t,e,n){var r=n("4930");t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},fea9:function(t,e,n){var r=n("da84");t.exports=r.Promise},ffa6:function(t,e,n){"use strict";n.r(e),n.d(e,"Component",(function(){return o})),n.d(e,"ComponentContainer",(function(){return l})),n.d(e,"Provider",(function(){return a}));var r=n("9ab4"),i=n("a8e9"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i["Deferred"];if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),r=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(c(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(p){}try{for(var i=Object(r["__values"])(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r["__read"])(o.value,2),u=a[0],l=a[1],h=this.normalizeInstanceIdentifier(u);try{var f=this.getOrInitializeService({instanceIdentifier:h});l.resolve(f)}catch(p){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(r["__generator"])(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r["__spreadArray"])(Object(r["__spreadArray"])([],Object(r["__read"])(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),Object(r["__read"])(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,o=void 0===i?{}:i,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var u=Object(r["__values"])(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=Object(r["__read"])(c.value,2),h=l[0],f=l[1],p=this.normalizeInstanceIdentifier(h);s===p&&f.resolve(a)}}catch(d){e={error:d}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,o=this.onInitCallbacks.get(e);if(o)try{for(var s=Object(r["__values"])(o),a=s.next();!a.done;a=s.next()){var u=a.value;try{u(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e=t.instanceIdentifier,n=t.options,r=void 0===n?{}:n,i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:u(e),options:r}),this.instances.set(e,i),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch(o){}return i||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=s),this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();function u(t){return t===s?void 0:t}function c(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var l=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){var e=this.getProvider(t.name);e.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()}}]);
//# sourceMappingURL=chunk-vendors.42616342.js.map